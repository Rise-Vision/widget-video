function configure(){}function doneEvent(){window.parent!==window.top&&parent.RiseVision.Video.playerEnded()}function readyEvent(){window.parent!==window.top&&parent.RiseVision.Video.playerReady()}function errorEvent(e){window.parent!==window.top&&parent.RiseVision.Video.playerError(e)}function init(e,t,n){window.oncontextmenu=function(){return!1},width=e.width,height=e.height,skin=n,controls=e.video.controls,volume=e.video.volume,stretching=e.video.scaleToFit?"uniform":"none",autoPlay=controls?e.video.autoplay:!0,e.video.pause?(e.video.pause="string"==typeof e.video.pause?parseInt(e.video.pause,10):e.video.pause,pauseDuration=isNaN(e.video.pause)?0:e.video.pause):pauseDuration=0,configure(t)}function load(){player.loadVideo()}function play(){player.play()}function pause(){"PLAYING"===player.getState().toUpperCase()&&player.pause()}function stop(){player.stop()}function remove(){player.remove()}function getVideoFileType(e){var t,n=[".mp4",".webm",".ogg",".ogv"],o=e.toLowerCase(),r=null;for(t=0;t<=n.length;t+=1)if(-1!==o.indexOf(n[t])){r=n[t].substr(n[t].lastIndexOf(".")+1);break}return"ogv"===r&&(r="ogg"),r}function getPlaybackData(){}function configure(e){files=e;var t=function(){var e=playerJW({playlist:getPlaylist(files),width:width,height:height,controls:!1,stretching:stretching,skin:skin});return e.onPlayerError=function(e){e&&errorEvent({type:"video",index:jwplayer().getPlaylistIndex(),message:e.message})},e.onSetupError=function(e){e&&errorEvent({type:"setup",index:0,message:e.message})},e.getCurrentIndex=function(){return jwplayer().getPlaylistIndex()},e};player=t()}function getPlaylist(e){for(var t=[],n=0;n<e.length;n+=1)t.push({sources:[{file:e[n],type:getVideoFileType(e[n])}]});return t}function getPlaybackData(){return{total:files.length,index:player.getCurrentIndex(),duration:player.getDuration(),position:player.getPosition()}}var controls,volume,autoPlay,stretching,pauseDuration,width,height,skin,player=null,playerJW=function(e){"use strict";function t(){doneEvent()}function n(){d||(clearTimeout(f),f=setTimeout(function(){jwplayer().play(),jwplayer().setControls(!1),jwplayer().setControls(!0)},1e3*pauseDuration))}function o(e){e&&errorEvent({type:"video",message:e.message})}function r(e){e&&errorEvent({type:"setup",message:e.message})}function a(){jwplayer("player").setup(e),jwplayer().onSetupError(function(e){r(e)}),jwplayer().onReady(function(){var r,a=document.getElementById("player").getElementsByTagName("*"),i=a.length;for(r=0;i>r;r+=1)a[r].className+=" notransition";document.getElementById("player").className+=" notransition",document.getElementById("player_menu").className+=" disable-context-menu",e.hasOwnProperty("playlist")?jwplayer().onPlaylistComplete(function(){t()}):e.hasOwnProperty("file")&&jwplayer().onComplete(function(){t()}),jwplayer().onError(function(e){o(e)}),controls&&pauseDuration>1&&jwplayer().onPause(function(){n()}),jwplayer().setVolume(volume),controls&&!autoPlay&&jwplayer().setControls(!0),readyEvent()})}function i(){d=!1,autoPlay&&(controls&&!jwplayer().getControls()&&jwplayer().setControls(!0),jwplayer().play(),controls&&(jwplayer().setControls(!1),jwplayer().setControls(!0)))}function l(){d=!0,clearTimeout(f),jwplayer().pause()}function s(){this.pause()}function u(){d=!1,clearTimeout(f),f=null,jwplayer().remove()}function p(){return jwplayer().getDuration()}function y(){return jwplayer().getPosition()}function c(){return jwplayer().getState()}var d=!1,f=null;return{getDuration:p,getPosition:y,getState:c,loadVideo:a,play:i,pause:l,onPlayerError:o,onSetupError:r,stop:s,remove:u}},files;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3BsYXllci1mb2xkZXIubWluLmpzIl0sIm5hbWVzIjpbImNvbmZpZ3VyZSIsImRvbmVFdmVudCIsIndpbmRvdyIsInBhcmVudCIsInRvcCIsIlJpc2VWaXNpb24iLCJWaWRlbyIsInBsYXllckVuZGVkIiwicmVhZHlFdmVudCIsInBsYXllclJlYWR5IiwiZXJyb3JFdmVudCIsImRhdGEiLCJwbGF5ZXJFcnJvciIsImluaXQiLCJwYXJhbXMiLCJ1cmxzIiwic2tpblZhbCIsIm9uY29udGV4dG1lbnUiLCJ3aWR0aCIsImhlaWdodCIsInNraW4iLCJjb250cm9scyIsInZpZGVvIiwidm9sdW1lIiwic3RyZXRjaGluZyIsImF1dG9QbGF5IiwiYXV0b3BsYXkiLCJwYXVzZSIsInBhcnNlSW50IiwicGF1c2VEdXJhdGlvbiIsImlzTmFOIiwibG9hZCIsInBsYXllciIsImxvYWRWaWRlbyIsInBsYXkiLCJnZXRTdGF0ZSIsInRvVXBwZXJDYXNlIiwic3RvcCIsInJlbW92ZSIsImdldFZpZGVvRmlsZVR5cGUiLCJ1cmwiLCJpIiwiZXh0ZW5zaW9ucyIsInVybExvd2VyY2FzZSIsInRvTG93ZXJDYXNlIiwidHlwZSIsImxlbmd0aCIsImluZGV4T2YiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsImdldFBsYXliYWNrRGF0YSIsImZpbGVzIiwiZm9sZGVyUGxheWVyIiwiaW5zdGFuY2UiLCJwbGF5ZXJKVyIsInBsYXlsaXN0IiwiZ2V0UGxheWxpc3QiLCJvblBsYXllckVycm9yIiwiZXJyb3IiLCJpbmRleCIsImp3cGxheWVyIiwiZ2V0UGxheWxpc3RJbmRleCIsIm1lc3NhZ2UiLCJvblNldHVwRXJyb3IiLCJnZXRDdXJyZW50SW5kZXgiLCJsaXN0IiwicHVzaCIsInNvdXJjZXMiLCJmaWxlIiwidG90YWwiLCJkdXJhdGlvbiIsImdldER1cmF0aW9uIiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsInNldHVwT2JqIiwiX29uQ29tcGxldGUiLCJfb25QYXVzZSIsInZpZXdlclBhdXNlZCIsImNsZWFyVGltZW91dCIsInBhdXNlVGltZXIiLCJzZXRUaW1lb3V0Iiwic2V0Q29udHJvbHMiLCJzZXR1cCIsIm9uUmVhZHkiLCJlbGVtZW50cyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImNsYXNzTmFtZSIsImhhc093blByb3BlcnR5Iiwib25QbGF5bGlzdENvbXBsZXRlIiwib25Db21wbGV0ZSIsIm9uRXJyb3IiLCJvblBhdXNlIiwic2V0Vm9sdW1lIiwiZ2V0Q29udHJvbHMiLCJ0aGlzIl0sIm1hcHBpbmdzIjoiQUFNQSxRQUFTQSxjQUVULFFBQVNDLGFBQ0hDLE9BQU9DLFNBQVdELE9BQU9FLEtBQzNCRCxPQUFPRSxXQUFXQyxNQUFNQyxjQUk1QixRQUFTQyxjQUNITixPQUFPQyxTQUFXRCxPQUFPRSxLQUMzQkQsT0FBT0UsV0FBV0MsTUFBTUcsY0FJNUIsUUFBU0MsWUFBV0MsR0FDZFQsT0FBT0MsU0FBV0QsT0FBT0UsS0FDM0JELE9BQU9FLFdBQVdDLE1BQU1NLFlBQVlELEdBSXhDLFFBQVNFLE1BQUtDLEVBQVFDLEVBQU1DLEdBQzFCZCxPQUFPZSxjQUFnQixXQUNyQixPQUFPLEdBR1RDLE1BQVFKLEVBQU9JLE1BQ2ZDLE9BQVNMLEVBQU9LLE9BQ2hCQyxLQUFPSixFQUNQSyxTQUFXUCxFQUFPUSxNQUFNRCxTQUN4QkUsT0FBU1QsRUFBT1EsTUFBTUMsT0FDdEJDLFdBQWNWLEVBQU9RLE1BQWdCLFdBQUksVUFBWSxPQUdyREcsU0FBYUosU0FBbUJQLEVBQU9RLE1BQU1JLFVBQXBCLEVBR3JCWixFQUFPUSxNQUFNSyxPQUVmYixFQUFPUSxNQUFNSyxNQUF1QyxnQkFBdkJiLEdBQU9RLE1BQU1LLE1BQXNCQyxTQUFTZCxFQUFPUSxNQUFNSyxNQUFPLElBQU1iLEVBQU9RLE1BQU1LLE1BR2hIRSxjQUFpQkMsTUFBTWhCLEVBQU9RLE1BQU1LLE9BQVUsRUFBSWIsRUFBT1EsTUFBTUssT0FHL0RFLGNBQWdCLEVBR2xCN0Is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TUFJSmYsV0FBV2dDLFFBQVEsU0FBVWxDLEdBQzNCRCxFQUFjQyxLQUdackMsVUFBWVEsY0FBZ0IsR0FDOUIrQixXQUFXaUMsUUFBUSxXQUNqQmpCLE1BSUpoQixXQUFXa0MsVUFBVXZFLFFBRWpCRixXQUFhSSxVQUNmbUMsV0FBV3FCLGFBQVksR0FHekJ6RSxlQUtKLFFBQVMwQixLQUNQMkMsR0FBZSxFQUVYcEQsV0FDRUosV0FBYXVDLFdBQVdtQyxlQUcxQm5DLFdBQVdxQixhQUFZLEdBR3pCckIsV0FBVzFCLE9BRVBiLFdBRUZ1QyxXQUFXcUIsYUFBWSxHQUN2QnJCLFdBQVdxQixhQUFZLEtBSzdCLFFBQVN0RCxLQUNQa0QsR0FBZSxFQUNmQyxhQUFhQyxHQUNibkIsV0FBV2pDLFFBR2IsUUFBU1UsS0FDUDJELEtBQUtyRSxRQUdQLFFBQVNXLEtBQ1B1QyxHQUFlLEVBQ2ZDLGFBQWFDLEdBQ2JBLEVBQWEsS0FDYm5CLFdBQVd0QixTQUdiLFFBQVNpQyxLQUNQLE1BQU9YLFlBQVdXLGNBR3BCLFFBQVNFLEtBQ1AsTUFBT2IsWUFBV2EsY0FHcEIsUUFBU3RDLEtBQ1AsTUFBT3lCLFlBQVd6QixXQWhKcEIsR0FBSTBDLElBQWUsRUFDZkUsRUFBYSxJQWtKakIsUUFDRVIsWUFBYUEsRUFDYkUsWUFBYUEsRUFDYnRDLFNBQVVBLEVBQ1ZGLFVBQVdBLEVBQ1hDLEtBQU1BLEVBQ05QLE1BQU9BLEVBQ1A4QixjQUFlQSxFQUNmTSxhQUFjQSxFQUNkMUIsS0FBTUEsRUFDTkMsT0FBUUEsSUFJUmEiLCJmaWxlIjoianMvcGxheWVyLWZvbGRlci5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgY29udHJvbHMsIHZvbHVtZSwgYXV0b1BsYXksIHN0cmV0Y2hpbmcsIHBhdXNlRHVyYXRpb247XG52YXIgd2lkdGgsIGhlaWdodCwgc2tpbjtcblxudmFyIHBsYXllciA9IG51bGw7XG5cbi8vIE9WRVJSSURFOiBtZXRob2QgdG8gZGlzdGluZ3Vpc2ggY29uZmlndXJhdGlvbnMgYmV0d2VlbiBmaWxlIGFuZCBmb2xkZXJcbmZ1bmN0aW9uIGNvbmZpZ3VyZSh1cmxzKXt9XG5cbmZ1bmN0aW9uIGRvbmVFdmVudCgpIHtcbiAgaWYgKHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdy50b3ApIHtcbiAgICBwYXJlbnQuUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJFbmRlZCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlYWR5RXZlbnQoKSB7XG4gIGlmICh3aW5kb3cucGFyZW50ICE9PSB3aW5kb3cudG9wKSB7XG4gICAgcGFyZW50LlJpc2VWaXNpb24uVmlkZW8ucGxheWVyUmVhZHkoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlcnJvckV2ZW50KGRhdGEpIHtcbiAgaWYgKHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdy50b3ApIHtcbiAgICBwYXJlbnQuUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJFcnJvcihkYXRhKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbml0KHBhcmFtcywgdXJscywgc2tpblZhbCkge1xuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB3aWR0aCA9IHBhcmFtcy53aWR0aDtcbiAgaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcbiAgc2tpbiA9IHNraW5WYWw7XG4gIGNvbnRyb2xzID0gcGFyYW1zLnZpZGVvLmNvbnRyb2xzO1xuICB2b2x1bWUgPSBwYXJhbXMudmlkZW8udm9sdW1lO1xuICBzdHJldGNoaW5nID0gKHBhcmFtcy52aWRlby5zY2FsZVRvRml0KSA/IFwidW5pZm9ybVwiIDogXCJub25lXCI7XG5cbiAgLy8gZW5zdXJlIGF1dG9QbGF5IGlzIHRydWUgaWYgY29udHJvbHMgdmFsdWUgaXMgZmFsc2UsIG90aGVyd2lzZSB1c2UgcGFyYW1zIHZhbHVlXG4gIGF1dG9QbGF5ID0gKCFjb250cm9scykgPyB0cnVlIDogcGFyYW1zLnZpZGVvLmF1dG9wbGF5O1xuXG4gIC8vIGNoZWNrIGlmIHRoaXMgc2V0dGluZyBleGlzdHMgZHVlIHRvIG1lcmdlIG9mIGZpbGUgYW5kIGZvbGRlclxuICBpZiAocGFyYW1zLnZpZGVvLnBhdXNlKSB7XG4gICAgLy8gY29udmVydCBwYXVzZSB2YWx1ZSB0byBudW1iZXIgaWYgdHlwZSBpcyBcInN0cmluZ1wiXG4gICAgcGFyYW1zLnZpZGVvLnBhdXNlID0gKHR5cGVvZiBwYXJhbXMudmlkZW8ucGF1c2UgPT09IFwic3RyaW5nXCIpID8gcGFyc2VJbnQocGFyYW1zLnZpZGVvLnBhdXNlLCAxMCkgOiBwYXJhbXMudmlkZW8ucGF1c2U7XG5cbiAgICAvLyBpZiBub3Qgb2YgdHlwZSBcIm51bWJlclwiLCBzZXQgaXRzIHZhbHVlIHRvIDAgc28gYSBwYXVzZSBkb2VzIG5vdCBnZXQgYXBwbGllZFxuICAgIHBhdXNlRHVyYXRpb24gPSAoaXNOYU4ocGFyYW1zLnZpZGVvLnBhdXNlKSkgPyAwIDogcGFyYW1zLnZpZGVvLnBhdXNlO1xuICB9IGVsc2Uge1xuICAgIC8vIGVuc3VyZSBubyBwYXVzZSBkdXJhdGlvbiBvY2N1cnNcbiAgICBwYXVzZUR1cmF0aW9uID0gMDtcbiAgfVxuXG4gIGNvbmZpZ3VyZSh1cmxzKTtcbn1cblxuZnVuY3Rpb24gbG9hZCgpIHtcbiAgcGxheWVyLmxvYWRWaWRlbygpO1xufVxuXG5mdW5jdGlvbiBwbGF5KCkge1xuICBwbGF5ZXIucGxheSgpO1xufVxuXG5mdW5jdGlvbiBwYXVzZSgpIHtcbiAgLy8gT25seSBwYXVzZSB2aWRlbyBpZiBpdCdzIGFjdHVhbGx5IHBsYXlpbmcuXG4gIGlmIChwbGF5ZXIuZ2V0U3RhdGUoKS50b1VwcGVyQ2FzZSgpID09PSBcIlBMQVlJTkdcIikge1xuICAgIHBsYXllci5wYXVzZSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN0b3AoKSB7XG4gIHBsYXllci5zdG9wKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgcGxheWVyLnJlbW92ZSgpO1xufVxuXG5mdW5jdGlvbiBnZXRWaWRlb0ZpbGVUeXBlICh1cmwpIHtcbiAgdmFyIGV4dGVuc2lvbnMgPSBbXCIubXA0XCIsIFwiLndlYm1cIiwgXCIub2dnXCIsIFwiLm9ndlwiXSxcbiAgICB1cmxMb3dlcmNhc2UgPSB1cmwudG9Mb3dlckNhc2UoKSxcbiAgICB0eXBlID0gbnVsbCxcbiAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPD0gZXh0ZW5zaW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGlmICh1cmxMb3dlcmNhc2UuaW5kZXhPZihleHRlbnNpb25zW2ldKSAhPT0gLTEpIHtcbiAgICAgIHR5cGUgPSBleHRlbnNpb25zW2ldLnN1YnN0cihleHRlbnNpb25zW2ldLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHR5cGUgPT09IFwib2d2XCIpIHtcbiAgICB0eXBlID0gXCJvZ2dcIjtcbiAgfVxuXG4gIHJldHVybiB0eXBlO1xufVxuXG4vLyBPVkVSUklERTogbWV0aG9kIHRvIHJldHJpZXZlIGRhdGEgYWJvdXQgZmlsZSBvciBjdXJyZW50bHkgcGxheWVkIGZpbGUgZnJvbSBmb2xkZXJcbmZ1bmN0aW9uIGdldFBsYXliYWNrRGF0YSgpIHt9XG5cbi8vIGluaGVyaXQgZnJvbSBwbGF5ZXJKVyBmb3IgYSBjdXN0b21pemVkIGZpbGUgb3IgZm9sZGVyIHBsYXllclxudmFyIHBsYXllckpXID0gZnVuY3Rpb24gKHNldHVwT2JqKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcbiAgdmFyIHBhdXNlVGltZXIgPSBudWxsO1xuXG4gIGZ1bmN0aW9uIF9vbkNvbXBsZXRlKCkge1xuICAgIGRvbmVFdmVudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uUGF1c2UoKSB7XG4gICAgaWYgKCF2aWV3ZXJQYXVzZWQpIHtcbiAgICAgIC8vIHVzZXIgaGFzIHBhdXNlZCwgc2V0IGEgdGltZXIgdG8gcGxheSBhZ2FpblxuICAgICAgY2xlYXJUaW1lb3V0KHBhdXNlVGltZXIpO1xuXG4gICAgICBwYXVzZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlIHBsYXlpbmcgdGhlIGN1cnJlbnQgdmlkZW9cbiAgICAgICAgandwbGF5ZXIoKS5wbGF5KCk7XG5cbiAgICAgICAgLy8gd29ya2Fyb3VuZCBmb3IgY29udHJvbHMgcmVtYWluaW5nIHZpc2libGUsIHR1cm4gdGhlbSBvZmYgYW5kIG9uIGFnYWluXG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHMoZmFsc2UpO1xuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuXG4gICAgICB9LCBwYXVzZUR1cmF0aW9uICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25QbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3JFdmVudCh7XG4gICAgICAgIHR5cGU6IFwidmlkZW9cIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25TZXR1cEVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvckV2ZW50KHtcbiAgICAgICAgdHlwZTogXCJzZXR1cFwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkVmlkZW8oKSB7XG4gICAgandwbGF5ZXIoXCJwbGF5ZXJcIikuc2V0dXAoc2V0dXBPYmopO1xuXG4gICAgandwbGF5ZXIoKS5vblNldHVwRXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBvblNldHVwRXJyb3IoZXJyb3IpO1xuICAgIH0pO1xuXG4gICAgandwbGF5ZXIoKS5vblJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSxcbiAgICAgICAgdG90YWwgPSBlbGVtZW50cy5sZW5ndGgsXG4gICAgICAgIGk7XG5cbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIENocm9tZSBBcHAgUGxheWVyIDx3ZWJ2aWV3PiBub3QgaGFuZGxpbmcgQ1NTMyB0cmFuc2l0aW9uXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdG90YWw7IGkgKz0gMSkge1xuICAgICAgICBlbGVtZW50c1tpXS5jbGFzc05hbWUgKz0gXCIgbm90cmFuc2l0aW9uXCI7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyXCIpLmNsYXNzTmFtZSArPSBcIiBub3RyYW5zaXRpb25cIjtcblxuICAgICAgLy8gQnVnZml4IC0gaXNzdWUgIzM2IChKV1BsYXllciBjb250ZXh0IG1lbnUpXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllcl9tZW51XCIpLmNsYXNzTmFtZSArPSBcIiBkaXNhYmxlLWNvbnRleHQtbWVudVwiO1xuXG4gICAgICBpZiAoc2V0dXBPYmouaGFzT3duUHJvcGVydHkoXCJwbGF5bGlzdFwiKSkge1xuICAgICAgICAvLyBmb2xkZXIsIGxpc3RlbiBmb3IgcGxheWxpc3QgY29tcGxldGUgZXZlbnRcbiAgICAgICAgandwbGF5ZXIoKS5vblBsYXlsaXN0Q29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9vbkNvbXBsZXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc2V0dXBPYmouaGFzT3duUHJvcGVydHkoXCJmaWxlXCIpKSB7XG4gICAgICAgIC8vIGZpbGUsIGxpc3RlbiBmb3Igc2luZ2xlIGZpbGUgY29tcGxldGUgZXZlbnRcbiAgICAgICAgandwbGF5ZXIoKS5vbkNvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfb25Db21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgandwbGF5ZXIoKS5vbkVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBvblBsYXllckVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoY29udHJvbHMgJiYgcGF1c2VEdXJhdGlvbiA+IDEpIHtcbiAgICAgICAgandwbGF5ZXIoKS5vblBhdXNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfb25QYXVzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgandwbGF5ZXIoKS5zZXRWb2x1bWUodm9sdW1lKTtcblxuICAgICAgaWYgKGNvbnRyb2xzICYmICFhdXRvUGxheSkge1xuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZWFkeUV2ZW50KCk7XG5cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBpZiAoYXV0b1BsYXkpIHtcbiAgICAgIGlmIChjb250cm9scyAmJiAhandwbGF5ZXIoKS5nZXRDb250cm9scygpKSB7XG4gICAgICAgIC8vIFdpbGwgYmUgZmlyc3QgdGltZSBwbGF5ZXIgaXMgYmVpbmcgdG9sZCB0byBwbGF5IHNvIGRvaW5nIHRoaXMgaGVyZSBhbmQgbm90IGluIHNldHVwIHNvIHRoYXQgY29udHJvbHNcbiAgICAgICAgLy8gYXJlbid0IHZpc2libGUgdXBvbiBwbGF5aW5nIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICAgICAgandwbGF5ZXIoKS5zZXRDb250cm9scyh0cnVlKTtcbiAgICAgIH1cblxuICAgICAgandwbGF5ZXIoKS5wbGF5KCk7XG5cbiAgICAgIGlmIChjb250cm9scykge1xuICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBjb250cm9scyByZW1haW5pbmcgdmlzaWJsZSwgdHVybiB0aGVtIG9mZiBhbmQgb24gYWdhaW5cbiAgICAgICAgandwbGF5ZXIoKS5zZXRDb250cm9scyhmYWxzZSk7XG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHModHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgdmlld2VyUGF1c2VkID0gdHJ1ZTtcbiAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG4gICAgandwbGF5ZXIoKS5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgdmlld2VyUGF1c2VkID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHBhdXNlVGltZXIpO1xuICAgIHBhdXNlVGltZXIgPSBudWxsO1xuICAgIGp3cGxheWVyKCkucmVtb3ZlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXREdXJhdGlvbigpIHtcbiAgICByZXR1cm4gandwbGF5ZXIoKS5nZXREdXJhdGlvbigpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIGp3cGxheWVyKCkuZ2V0UG9zaXRpb24oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIHJldHVybiBqd3BsYXllcigpLmdldFN0YXRlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldER1cmF0aW9uOiBnZXREdXJhdGlvbixcbiAgICBnZXRQb3NpdGlvbjogZ2V0UG9zaXRpb24sXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIGxvYWRWaWRlbzogbG9hZFZpZGVvLFxuICAgIHBsYXk6IHBsYXksXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIG9uUGxheWVyRXJyb3I6IG9uUGxheWVyRXJyb3IsXG4gICAgb25TZXR1cEVycm9yOiBvblNldHVwRXJyb3IsXG4gICAgc3RvcDogc3RvcCxcbiAgICByZW1vdmU6IHJlbW92ZVxuICB9XG59O1xuXG52YXIgZmlsZXM7XG5cbmZ1bmN0aW9uIGNvbmZpZ3VyZSh1cmxzKSB7XG4gIGZpbGVzID0gdXJscztcblxuICB2YXIgZm9sZGVyUGxheWVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0YW5jZSA9IHBsYXllckpXKHtcbiAgICAgIHBsYXlsaXN0OiBnZXRQbGF5bGlzdChmaWxlcyksXG4gICAgICB3aWR0aCA6IHdpZHRoLFxuICAgICAgaGVpZ2h0IDogaGVpZ2h0LFxuICAgICAgY29udHJvbHM6IGZhbHNlLFxuICAgICAgc3RyZXRjaGluZyA6IHN0cmV0Y2hpbmcsXG4gICAgICBza2luOiBza2luXG4gICAgfSk7XG5cbiAgICBpbnN0YW5jZS5vblBsYXllckVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgZXJyb3JFdmVudCh7XG4gICAgICAgICAgdHlwZTogXCJ2aWRlb1wiLFxuICAgICAgICAgIGluZGV4OiBqd3BsYXllcigpLmdldFBsYXlsaXN0SW5kZXgoKSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpbnN0YW5jZS5vblNldHVwRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBlcnJvckV2ZW50KHtcbiAgICAgICAgICB0eXBlOiBcInNldHVwXCIsXG4gICAgICAgICAgaW5kZXg6IDAsXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaW5zdGFuY2UuZ2V0Q3VycmVudEluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gandwbGF5ZXIoKS5nZXRQbGF5bGlzdEluZGV4KCk7XG4gICAgfTtcblxuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcblxuICBwbGF5ZXIgPSBmb2xkZXJQbGF5ZXIoKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGxheWxpc3QgKGxpc3QpIHtcbiAgdmFyIHBsYXlsaXN0ID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgcGxheWxpc3QucHVzaCh7XG4gICAgICBzb3VyY2VzOiBbe1xuICAgICAgICBmaWxlOiBsaXN0W2ldLFxuICAgICAgICB0eXBlOiBnZXRWaWRlb0ZpbGVUeXBlKGxpc3RbaV0pXG4gICAgICB9XVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHBsYXlsaXN0O1xufVxuXG5mdW5jdGlvbiBnZXRQbGF5YmFja0RhdGEoKSB7XG4gIHJldHVybiB7XG4gICAgdG90YWw6IGZpbGVzLmxlbmd0aCxcbiAgICBpbmRleDogcGxheWVyLmdldEN1cnJlbnRJbmRleCgpLFxuICAgIGR1cmF0aW9uOiBwbGF5ZXIuZ2V0RHVyYXRpb24oKSxcbiAgICBwb3NpdGlvbjogcGxheWVyLmdldFBvc2l0aW9uKClcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
