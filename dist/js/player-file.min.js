function configure(){}function doneEvent(){window.parent!==window.top&&parent.RiseVision.Video.playerEnded()}function readyEvent(){window.parent!==window.top&&parent.RiseVision.Video.playerReady()}function errorEvent(e){window.parent!==window.top&&parent.RiseVision.Video.playerError(e)}function init(e,n,o){window.oncontextmenu=function(){return!1},width=e.width,height=e.height,skin=o,controls=e.video.controls,volume=e.video.volume,stretching=e.video.scaleToFit?"uniform":"none",autoPlay=controls?e.video.autoplay:!0,e.video.pause?(e.video.pause="string"==typeof e.video.pause?parseInt(e.video.pause,10):e.video.pause,pauseDuration=isNaN(e.video.pause)?0:e.video.pause):pauseDuration=0,configure(n)}function load(){player.loadVideo()}function play(){player.play()}function pause(){player.pause()}function stop(){player.stop()}function remove(){player.remove()}function getVideoFileType(e){var n,o=[".mp4",".webm",".ogg",".ogv"],t=e.toLowerCase(),r=null;for(n=0;n<=o.length;n+=1)if(-1!==t.indexOf(o[n])){r=o[n].substr(o[n].lastIndexOf(".")+1);break}return"ogv"===r&&(r="ogg"),r}function getPlaybackData(){}function configure(e){file=e;var n=function(){return playerJW({file:file,type:getVideoFileType(file),width:width,height:height,controls:!1,stretching:stretching,skin:skin})};player=n()}function getPlaybackData(){return{duration:player.getDuration(),position:player.getPosition()}}var controls,volume,autoPlay,stretching,pauseDuration,width,height,skin,player=null,playerJW=function(e){"use strict";function n(){doneEvent()}function o(){c||(clearTimeout(d),d=setTimeout(function(){jwplayer().play(),jwplayer().setControls(!1),jwplayer().setControls(!0)},1e3*pauseDuration))}function t(e){e&&errorEvent({type:"video",message:e.message})}function r(e){e&&errorEvent({type:"setup",message:e.message})}function i(){jwplayer("player").setup(e),jwplayer().onSetupError(function(e){instance.onSetupError(e)}),jwplayer().onReady(function(){var r,i=document.getElementById("player").getElementsByTagName("*"),a=i.length;for(r=0;a>r;r+=1)i[r].className+=" notransition";document.getElementById("player").className+=" notransition",document.getElementById("player_menu").className+=" disable-context-menu",e.hasOwnProperty("playlist")?jwplayer().onPlaylistComplete(function(){n()}):e.hasOwnProperty("file")&&jwplayer().onComplete(function(){n()}),jwplayer().onError(function(e){t(e)}),controls&&pauseDuration>1&&jwplayer().onPause(function(){o()}),jwplayer().setVolume(volume),controls&&!autoPlay&&jwplayer().setControls(!0),readyEvent()})}function a(){c=!1,autoPlay&&(controls&&!jwplayer().getControls()&&jwplayer().setControls(!0),jwplayer().play(),controls&&(jwplayer().setControls(!1),jwplayer().setControls(!0)))}function l(){c=!0,clearTimeout(d),jwplayer().pause()}function u(){this.pause()}function s(){c=!1,clearTimeout(d),d=null,jwplayer().remove()}function p(){return jwplayer().getDuration()}function y(){return jwplayer().getPosition()}var c=!1,d=null;return{getDuration:p,getPosition:y,loadVideo:i,play:a,pause:l,onPlayerError:t,onSetupError:r,stop:u,remove:s}},file;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3BsYXllci1maWxlLm1pbi5qcyJdLCJuYW1lcyI6WyJjb25maWd1cmUiLCJkb25lRXZlbnQiLCJ3aW5kb3ciLCJwYXJlbnQiLCJ0b3AiLCJSaXNlVmlzaW9uIiwiVmlkZW8iLCJwbGF5ZXJFbmRlZCIsInJlYWR5RXZlbnQiLCJwbGF5ZXJSZWFkeSIsImVycm9yRXZlbnQiLCJkYXRhIiwicGxheWVyRXJyb3IiLCJpbml0IiwicGFyYW1zIiwidXJscyIsInNraW5WYWwiLCJvbmNvbnRleHRtZW51Iiwid2lkdGgiLCJoZWlnaHQiLCJza2luIiwiY29udHJvbHMiLCJ2aWRlbyIsInZvbHVtZSIsInN0cmV0Y2hpbmciLCJhdXRvUGxheSIsImF1dG9wbGF5IiwicGF1c2UiLCJwYXJzZUludCIsInBhdXNlRHVyYXRpb24iLCJpc05hTiIsImxvYWQiLCJwbGF5ZXIiLCJsb2FkVmlkZW8iLCJwbGF5Iiwic3RvcCIsInJlbW92ZSIsImdldFZpZGVvRmlsZVR5cGUiLCJ1cmwiLCJpIiwiZXh0ZW5zaW9ucyIsInVybExvd2VyY2FzZSIsInRvTG93ZXJDYXNlIiwidHlwZSIsImxlbmd0aCIsImluZGV4T2YiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsImdldFBsYXliYWNrRGF0YSIsImZpbGUiLCJmaWxlUGxheWVyIiwicGxheWVySlciLCJkdXJhdGlvbiIsImdldER1cmF0aW9uIiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsInNldHVwT2JqIiwiX29uQ29tcGxldGUiLCJfb25QYXVzZSIsInZpZXdlclBhdXNlZCIsImNsZWFyVGltZW91dCIsInBhdXNlVGltZXIiLCJzZXRUaW1lb3V0IiwiandwbGF5ZXIiLCJzZXRDb250cm9scyIsIm9uUGxheWVyRXJyb3IiLCJlcnJvciIsIm1lc3NhZ2UiLCJvblNldHVwRXJyb3IiLCJzZXR1cCIsImluc3RhbmNlIiwib25SZWFkeSIsImVsZW1lbnRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwidG90YWwiLCJjbGFzc05hbWUiLCJoYXNPd25Qcm9wZXJ0eSIsIm9uUGxheWxpc3RDb21wbGV0ZSIsIm9uQ29tcGxldGUiLCJvbkVycm9yIiwib25QYXVzZSIsInNldFZvbHVtZSIsImdldENvbnRyb2xzIiwidGhpcyJdLCJtYXBwaW5ncyI6IkFBTUEsUUFBU0EsY0FFVCxRQUFTQyxhQUNIQyxPQUFPQyxTQUFXRCxPQUFPRSxLQUMzQkQsT0FBT0UsV0FBV0MsTUFBTUMsY0FJNUIsUUFBU0MsY0FDSE4sT0FBT0MsU0FBV0QsT0FBT0UsS0FDM0JELE9BQU9FLFdBQVdDLE1BQU1HLGNBSTVCLFFBQVNDLFlBQVdDLEdBQ2RULE9BQU9DLFNBQVdELE9BQU9FLEtBQzNCRCxPQUFPRSxXQUFXQyxNQUFNTSxZQUFZRCxHQUl4QyxRQUFTRSxNQUFLQyxFQUFRQyxFQUFNQyxHQUMxQmQsT0FBT2UsY0FBZ0IsV0FDckIsT0FBTyxHQUdUQyxNQUFRSixFQUFPSSxNQUNmQyxPQUFTTCxFQUFPSyxPQUNoQkMsS0FBT0osRUFDUEssU0FBV1AsRUFBT1EsTUFBTUQsU0FDeEJFLE9BQVNULEVBQU9RLE1BQU1DLE9BQ3RCQyxXQUFjVixFQUFPUSxNQUFnQixXQUFJLFVBQVksT0FHckRHLFNBQWFKLFNBQW1CUCxFQUFPUSxNQUFNSSxVQUFwQixFQUdyQlosRUFBT1EsTUFBTUssT0FFZmIsRUFBT1EsTUFBTUssTUFBdUMsZ0JBQXZCYixHQUFPUSxNQUFNSyxNQUFzQkMsU0FBU2QsRUFBT1EsTUFBTUssTUFBTyxJQUFNYixFQUFPUSxNQUFNSyxNQUdoSEUsY0FBaUJDLE1BQU1oQixFQUFPUSxNQUFNSyxPQUFVLEVBQUliLEVBQU9RLE1BQU1LLE9BRy9ERSxjQUFnQixFQUdsQjdCLFVBQVVlLEdBR1osUUFBU2dCLFFBQ1BDLE9BQU9DLFlBR1QsUUFBU0MsUUFDUEYsT0FBT0UsT0FHVCxRQUFTUCxTQUNQSyxPQUFPTCxRQUdULFFBQVNRLFFBQ1BILE9BQU9HLE9BR1QsUUFBU0MsVUFDUEosT0FBT0ksU0FHVCxRQUFT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Y0FBZUEsRUFDZkcsYUFBY0EsRUFDZGpDLEtBQU1BLEVBQ05DLE9BQVFBLElBSVJhIiwiZmlsZSI6ImpzL3BsYXllci1maWxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjb250cm9scywgdm9sdW1lLCBhdXRvUGxheSwgc3RyZXRjaGluZywgcGF1c2VEdXJhdGlvbjtcbnZhciB3aWR0aCwgaGVpZ2h0LCBza2luO1xuXG52YXIgcGxheWVyID0gbnVsbDtcblxuLy8gT1ZFUlJJREU6IG1ldGhvZCB0byBkaXN0aW5ndWlzaCBjb25maWd1cmF0aW9ucyBiZXR3ZWVuIGZpbGUgYW5kIGZvbGRlclxuZnVuY3Rpb24gY29uZmlndXJlKHVybHMpe31cblxuZnVuY3Rpb24gZG9uZUV2ZW50KCkge1xuICBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93LnRvcCkge1xuICAgIHBhcmVudC5SaXNlVmlzaW9uLlZpZGVvLnBsYXllckVuZGVkKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZHlFdmVudCgpIHtcbiAgaWYgKHdpbmRvdy5wYXJlbnQgIT09IHdpbmRvdy50b3ApIHtcbiAgICBwYXJlbnQuUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJSZWFkeSgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVycm9yRXZlbnQoZGF0YSkge1xuICBpZiAod2luZG93LnBhcmVudCAhPT0gd2luZG93LnRvcCkge1xuICAgIHBhcmVudC5SaXNlVmlzaW9uLlZpZGVvLnBsYXllckVycm9yKGRhdGEpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXQocGFyYW1zLCB1cmxzLCBza2luVmFsKSB7XG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHdpZHRoID0gcGFyYW1zLndpZHRoO1xuICBoZWlnaHQgPSBwYXJhbXMuaGVpZ2h0O1xuICBza2luID0gc2tpblZhbDtcbiAgY29udHJvbHMgPSBwYXJhbXMudmlkZW8uY29udHJvbHM7XG4gIHZvbHVtZSA9IHBhcmFtcy52aWRlby52b2x1bWU7XG4gIHN0cmV0Y2hpbmcgPSAocGFyYW1zLnZpZGVvLnNjYWxlVG9GaXQpID8gXCJ1bmlmb3JtXCIgOiBcIm5vbmVcIjtcblxuICAvLyBlbnN1cmUgYXV0b1BsYXkgaXMgdHJ1ZSBpZiBjb250cm9scyB2YWx1ZSBpcyBmYWxzZSwgb3RoZXJ3aXNlIHVzZSBwYXJhbXMgdmFsdWVcbiAgYXV0b1BsYXkgPSAoIWNvbnRyb2xzKSA/IHRydWUgOiBwYXJhbXMudmlkZW8uYXV0b3BsYXk7XG5cbiAgLy8gY2hlY2sgaWYgdGhpcyBzZXR0aW5nIGV4aXN0cyBkdWUgdG8gbWVyZ2Ugb2YgZmlsZSBhbmQgZm9sZGVyXG4gIGlmIChwYXJhbXMudmlkZW8ucGF1c2UpIHtcbiAgICAvLyBjb252ZXJ0IHBhdXNlIHZhbHVlIHRvIG51bWJlciBpZiB0eXBlIGlzIFwic3RyaW5nXCJcbiAgICBwYXJhbXMudmlkZW8ucGF1c2UgPSAodHlwZW9mIHBhcmFtcy52aWRlby5wYXVzZSA9PT0gXCJzdHJpbmdcIikgPyBwYXJzZUludChwYXJhbXMudmlkZW8ucGF1c2UsIDEwKSA6IHBhcmFtcy52aWRlby5wYXVzZTtcblxuICAgIC8vIGlmIG5vdCBvZiB0eXBlIFwibnVtYmVyXCIsIHNldCBpdHMgdmFsdWUgdG8gMCBzbyBhIHBhdXNlIGRvZXMgbm90IGdldCBhcHBsaWVkXG4gICAgcGF1c2VEdXJhdGlvbiA9IChpc05hTihwYXJhbXMudmlkZW8ucGF1c2UpKSA/IDAgOiBwYXJhbXMudmlkZW8ucGF1c2U7XG4gIH0gZWxzZSB7XG4gICAgLy8gZW5zdXJlIG5vIHBhdXNlIGR1cmF0aW9uIG9jY3Vyc1xuICAgIHBhdXNlRHVyYXRpb24gPSAwO1xuICB9XG5cbiAgY29uZmlndXJlKHVybHMpO1xufVxuXG5mdW5jdGlvbiBsb2FkKCkge1xuICBwbGF5ZXIubG9hZFZpZGVvKCk7XG59XG5cbmZ1bmN0aW9uIHBsYXkoKSB7XG4gIHBsYXllci5wbGF5KCk7XG59XG5cbmZ1bmN0aW9uIHBhdXNlKCkge1xuICBwbGF5ZXIucGF1c2UoKTtcbn1cblxuZnVuY3Rpb24gc3RvcCgpIHtcbiAgcGxheWVyLnN0b3AoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKCkge1xuICBwbGF5ZXIucmVtb3ZlKCk7XG59XG5cbmZ1bmN0aW9uIGdldFZpZGVvRmlsZVR5cGUgKHVybCkge1xuICB2YXIgZXh0ZW5zaW9ucyA9IFtcIi5tcDRcIiwgXCIud2VibVwiLCBcIi5vZ2dcIiwgXCIub2d2XCJdLFxuICAgIHVybExvd2VyY2FzZSA9IHVybC50b0xvd2VyQ2FzZSgpLFxuICAgIHR5cGUgPSBudWxsLFxuICAgIGk7XG5cbiAgZm9yIChpID0gMDsgaSA8PSBleHRlbnNpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgaWYgKHVybExvd2VyY2FzZS5pbmRleE9mKGV4dGVuc2lvbnNbaV0pICE9PSAtMSkge1xuICAgICAgdHlwZSA9IGV4dGVuc2lvbnNbaV0uc3Vic3RyKGV4dGVuc2lvbnNbaV0ubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAodHlwZSA9PT0gXCJvZ3ZcIikge1xuICAgIHR5cGUgPSBcIm9nZ1wiO1xuICB9XG5cbiAgcmV0dXJuIHR5cGU7XG59XG5cbi8vIE9WRVJSSURFOiBtZXRob2QgdG8gcmV0cmlldmUgZGF0YSBhYm91dCBmaWxlIG9yIGN1cnJlbnRseSBwbGF5ZWQgZmlsZSBmcm9tIGZvbGRlclxuZnVuY3Rpb24gZ2V0UGxheWJhY2tEYXRhKCkge31cblxuLy8gaW5oZXJpdCBmcm9tIHBsYXllckpXIGZvciBhIGN1c3RvbWl6ZWQgZmlsZSBvciBmb2xkZXIgcGxheWVyXG52YXIgcGxheWVySlcgPSBmdW5jdGlvbiAoc2V0dXBPYmopIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHZpZXdlclBhdXNlZCA9IGZhbHNlO1xuICB2YXIgcGF1c2VUaW1lciA9IG51bGw7XG5cbiAgZnVuY3Rpb24gX29uQ29tcGxldGUoKSB7XG4gICAgZG9uZUV2ZW50KCk7XG4gIH1cblxuICBmdW5jdGlvbiBfb25QYXVzZSgpIHtcbiAgICBpZiAoIXZpZXdlclBhdXNlZCkge1xuICAgICAgLy8gdXNlciBoYXMgcGF1c2VkLCBzZXQgYSB0aW1lciB0byBwbGF5IGFnYWluXG4gICAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG5cbiAgICAgIHBhdXNlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gY29udGludWUgcGxheWluZyB0aGUgY3VycmVudCB2aWRlb1xuICAgICAgICBqd3BsYXllcigpLnBsYXkoKTtcblxuICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBjb250cm9scyByZW1haW5pbmcgdmlzaWJsZSwgdHVybiB0aGVtIG9mZiBhbmQgb24gYWdhaW5cbiAgICAgICAgandwbGF5ZXIoKS5zZXRDb250cm9scyhmYWxzZSk7XG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHModHJ1ZSk7XG5cbiAgICAgIH0sIHBhdXNlRHVyYXRpb24gKiAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblBsYXllckVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvckV2ZW50KHtcbiAgICAgICAgdHlwZTogXCJ2aWRlb1wiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNldHVwRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVycm9yRXZlbnQoe1xuICAgICAgICB0eXBlOiBcInNldHVwXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRWaWRlbygpIHtcbiAgICBqd3BsYXllcihcInBsYXllclwiKS5zZXR1cChzZXR1cE9iaik7XG5cbiAgICBqd3BsYXllcigpLm9uU2V0dXBFcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGluc3RhbmNlLm9uU2V0dXBFcnJvcihlcnJvcik7XG4gICAgfSk7XG5cbiAgICBqd3BsYXllcigpLm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLFxuICAgICAgICB0b3RhbCA9IGVsZW1lbnRzLmxlbmd0aCxcbiAgICAgICAgaTtcblxuICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgQ2hyb21lIEFwcCBQbGF5ZXIgPHdlYnZpZXc+IG5vdCBoYW5kbGluZyBDU1MzIHRyYW5zaXRpb25cbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSArPSAxKSB7XG4gICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTmFtZSArPSBcIiBub3RyYW5zaXRpb25cIjtcbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIikuY2xhc3NOYW1lICs9IFwiIG5vdHJhbnNpdGlvblwiO1xuXG4gICAgICAvLyBCdWdmaXggLSBpc3N1ZSAjMzYgKEpXUGxheWVyIGNvbnRleHQgbWVudSlcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGxheWVyX21lbnVcIikuY2xhc3NOYW1lICs9IFwiIGRpc2FibGUtY29udGV4dC1tZW51XCI7XG5cbiAgICAgIGlmIChzZXR1cE9iai5oYXNPd25Qcm9wZXJ0eShcInBsYXlsaXN0XCIpKSB7XG4gICAgICAgIC8vIGZvbGRlciwgbGlzdGVuIGZvciBwbGF5bGlzdCBjb21wbGV0ZSBldmVudFxuICAgICAgICBqd3BsYXllcigpLm9uUGxheWxpc3RDb21wbGV0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX29uQ29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChzZXR1cE9iai5oYXNPd25Qcm9wZXJ0eShcImZpbGVcIikpIHtcbiAgICAgICAgLy8gZmlsZSwgbGlzdGVuIGZvciBzaW5nbGUgZmlsZSBjb21wbGV0ZSBldmVudFxuICAgICAgICBqd3BsYXllcigpLm9uQ29tcGxldGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9vbkNvbXBsZXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBqd3BsYXllcigpLm9uRXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIG9uUGxheWVyRXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChjb250cm9scyAmJiBwYXVzZUR1cmF0aW9uID4gMSkge1xuICAgICAgICBqd3BsYXllcigpLm9uUGF1c2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9vblBhdXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBqd3BsYXllcigpLnNldFZvbHVtZSh2b2x1bWUpO1xuXG4gICAgICBpZiAoY29udHJvbHMgJiYgIWF1dG9QbGF5KSB7XG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHModHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIHJlYWR5RXZlbnQoKTtcblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGlmIChhdXRvUGxheSkge1xuICAgICAgaWYgKGNvbnRyb2xzICYmICFqd3BsYXllcigpLmdldENvbnRyb2xzKCkpIHtcbiAgICAgICAgLy8gV2lsbCBiZSBmaXJzdCB0aW1lIHBsYXllciBpcyBiZWluZyB0b2xkIHRvIHBsYXkgc28gZG9pbmcgdGhpcyBoZXJlIGFuZCBub3QgaW4gc2V0dXAgc28gdGhhdCBjb250cm9sc1xuICAgICAgICAvLyBhcmVuJ3QgdmlzaWJsZSB1cG9uIHBsYXlpbmcgZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBqd3BsYXllcigpLnBsYXkoKTtcblxuICAgICAgaWYgKGNvbnRyb2xzKSB7XG4gICAgICAgIC8vIHdvcmthcm91bmQgZm9yIGNvbnRyb2xzIHJlbWFpbmluZyB2aXNpYmxlLCB0dXJuIHRoZW0gb2ZmIGFuZCBvbiBhZ2FpblxuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKGZhbHNlKTtcbiAgICAgICAgandwbGF5ZXIoKS5zZXRDb250cm9scyh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICB2aWV3ZXJQYXVzZWQgPSB0cnVlO1xuICAgIGNsZWFyVGltZW91dChwYXVzZVRpbWVyKTtcbiAgICBqd3BsYXllcigpLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG4gICAgcGF1c2VUaW1lciA9IG51bGw7XG4gICAgandwbGF5ZXIoKS5yZW1vdmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldER1cmF0aW9uKCkge1xuICAgIHJldHVybiBqd3BsYXllcigpLmdldER1cmF0aW9uKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gandwbGF5ZXIoKS5nZXRQb3NpdGlvbigpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXREdXJhdGlvbjogZ2V0RHVyYXRpb24sXG4gICAgZ2V0UG9zaXRpb246IGdldFBvc2l0aW9uLFxuICAgIGxvYWRWaWRlbzogbG9hZFZpZGVvLFxuICAgIHBsYXk6IHBsYXksXG4gICAgcGF1c2U6IHBhdXNlLFxuICAgIG9uUGxheWVyRXJyb3I6IG9uUGxheWVyRXJyb3IsXG4gICAgb25TZXR1cEVycm9yOiBvblNldHVwRXJyb3IsXG4gICAgc3RvcDogc3RvcCxcbiAgICByZW1vdmU6IHJlbW92ZVxuICB9XG59O1xuXG52YXIgZmlsZTtcblxuZnVuY3Rpb24gY29uZmlndXJlKHVybHMpe1xuICBmaWxlID0gdXJscztcblxuICB2YXIgZmlsZVBsYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcGxheWVySlcoe1xuICAgICAgZmlsZTogZmlsZSxcbiAgICAgIHR5cGU6IGdldFZpZGVvRmlsZVR5cGUoZmlsZSksXG4gICAgICB3aWR0aCA6IHdpZHRoLFxuICAgICAgaGVpZ2h0IDogaGVpZ2h0LFxuICAgICAgY29udHJvbHM6IGZhbHNlLFxuICAgICAgc3RyZXRjaGluZyA6IHN0cmV0Y2hpbmcsXG4gICAgICBza2luOiBza2luXG4gICAgfSk7XG4gIH07XG5cbiAgcGxheWVyID0gZmlsZVBsYXllcigpO1xufVxuXG5mdW5jdGlvbiBnZXRQbGF5YmFja0RhdGEoKSB7XG4gIHJldHVybiB7XG4gICAgZHVyYXRpb246IHBsYXllci5nZXREdXJhdGlvbigpLFxuICAgIHBvc2l0aW9uOiBwbGF5ZXIuZ2V0UG9zaXRpb24oKVxuICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
