var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(e){"use strict";function t(e,t){Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(u=t[0]),"displayId"===e[1]&&(d=t[1]?t[1]:"preview"),c(u,d))}function i(e,t){var i=null;e.event?(i={},i.event=e.event,e.event_details&&(i.event_details=e.event_details),e.file_url&&(i.file_url=e.file_url,i.file_format=o(e.file_url)),n(function(e,n){i.company_id=e,i.display_id=n,t(i)})):t(i)}function n(i){i&&"function"==typeof i&&(c=i,u&&d?c(u,d):l&&""!==l&&(e.rpc.register("rsparam_set_"+l,t),e.rpc.call("","rsparam_get",null,l,["companyId","displayId"])))}function o(e){var t,i=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),i.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function r(e){var t=JSON.parse(JSON.stringify(f));return t.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),t.rows[0].json=JSON.parse(JSON.stringify(e)),t.rows[0].json.ts=(new Date).toISOString(),t}function s(e){var t=new Date,i=t.getUTCFullYear(),n=t.getUTCMonth()+1,o=t.getUTCDate();return 10>n&&(n="0"+n),10>o&&(o="0"+o),e+i+n+o}function a(e,t){i(t,function(t){null!==t&&RiseVision.Common.Logger.log(e,t)})}var l=(new e.Prefs).getString("id"),d="",u="",c=null,f={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:""}]};return{getIds:n,getInsertData:r,getFileFormat:o,getTable:s,logEvent:a}}(gadgets),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-d<358e4?e({}):(t.open("POST",o,!0),t.onloadend=function(){var i=JSON.parse(t.response);e({token:i.access_token,refreshedAt:new Date})},t.send(),void 0)}function i(e){return s&&l===e}function n(n,o){function c(t){var i,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",e.getTable(n)),d=t.refreshedAt||d,u=t.token||u,i=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(i))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&i(o.event)))return s=!0,l=o.event,setTimeout(function(){s=!1},a),t(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var t=new XMLHttpRequest;e&&"function"==typeof e&&(t.open("GET",i+"ping?callback=_",!0),t.onreadystatechange=function(){try{4===t.readyState&&(n=!0,200===t.status?(o=!0,e(!0,t.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(i){console.debug("Caught exception: ",i.description)}},t.send())}function t(e,t,r){function s(t){var n,o,s;t?n=r?i+"?url="+encodeURIComponent(e):i+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?n=e:(o=e.split("?"),s=1===o.length?"?":"&",n=e+s+"cb="+(new Date).getTime()),a("HEAD",n)}function a(e,i){var n=new XMLHttpRequest,r={xhr:n,url:i};n.open(e,i,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?t(r):"HEAD"===e?a("GET",i):o?t(r,new Error("The request failed with status code: "+s)):t(r)}),n.send()}if(e&&t&&"function"==typeof t)return n?s(o):this.ping(s)}var i="http://localhost:9494/",n=!1,o=!1;return{getFile:t,ping:e}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function t(){e.rpc.call("","rsevent_done",null,C.getString("id")),null!==x&&d(x,!0),d({event:"done"},!1)}function i(){e.rpc.call("","rsevent_ready",null,C.getString("id"),!0,!0,!0,!0,!0)}function n(){clearTimeout(D),D=null}function o(){n(),D=setTimeout(function(){t()},5e3)}function r(){var e=S.getFrameObject(F);return e?e.getPlaybackData():null}function s(){var e=null;if(N&&N.length>0){if("file"===E)return N[0];if("folder"===E&&(e=r()))return N[e.index]}return null}function a(){return q}function l(e,t){G=!0,q="undefined"!=typeof t,O.show(e),S.remove(F,function(){L||o()})}function d(e,t){t&&(x=e),e.file_url||(e.file_url=s()),RiseVision.Common.LoggerUtils.logEvent(m(),e)}function u(e){"file"===E?N[0]=e:"folder"===E&&(N=e),O.hide(),L||g()}function c(e){"file"===E?N[0]=e:"folder"===E&&(N=e),G=!1,q=!1,x=null}function f(){var e=S.getFrameObject(F);L=!0,n(),e&&(A?e.pause():S.remove(F))}function g(){var e={},t=S.getFrameObject(F);return w&&(w=!1,e.event="configuration",e.event_details=b,d(e,!1)),L=!1,d({event:"play"},!1),G?(o(),void 0):(t?t.play():N&&N.length>0&&("file"===E?(S.add(0),S.createFramePlayer(0,y,N[0],config.SKIN,"player-file.html")):"folder"===E&&(S.add(0),S.createFramePlayer(0,y,N,config.SKIN,"player-folder.html"))),void 0)}function m(){return"video_events"}function v(){S.remove(F,function(){t()})}function p(){var e;O.hide(),L||(e=S.getFrameObject(F),e&&e.play())}function h(t,n){var o;y=_.clone(t),E=n,C=new e.Prefs,document.getElementById("videoContainer").style.height=C.getInt("rsH")+"px",y.width=C.getInt("rsW"),y.height=C.getInt("rsH"),y.video.hasOwnProperty("resume")&&(A=y.video.resume),O=new RiseVision.Common.Message(document.getElementById("videoContainer"),document.getElementById("messageContainer")),O.show("Please wait while your video is downloaded."),S=new RiseVision.Common.Video.FrameController,"file"===E?(o=0!==Object.keys(y.storage).length,o?(b="storage file",T=new RiseVision.Video.StorageFile(y),T.init()):(b="custom",I=new RiseVision.Video.NonStorage(y),I.init())):"folder"===E&&(b="storage folder",T=new RiseVision.Video.StorageFolder(y),T.init()),i()}function V(e){var t=null,i={},n="Sorry, there was a problem playing the video.",o="Error loading media: File could not be played",r="Error loading YouTube: Video could not be played",s="Error loading player: No playable sources found",a="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.",u="The format of that video is not supported";e&&(e.type&&e.message?t=e.type+" - "+e.message:e.type?t=e.type:e.message&&(t=e.message),e.message&&(e.message===o||e.message===r?n=a:e.message===s&&(n=u))),i.event="player error",i.event_details=t,d(i,!0),l(n)}function R(){f()}var y,E,w=!0,b=null,C=null,T=null,I=null,O=null,S=null,L=!0,A=!0,F=0,N=[],x=null,D=null,G=!1,q=!1;return{getTableName:m,hasStorageError:a,logEvent:d,onFileInit:u,onFileRefresh:c,pause:f,play:g,setAdditionalParams:h,showError:l,playerEnded:v,playerReady:p,playerError:V,stop:R}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function t(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(i?(i=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Video.onFileRefresh(e.detail.url):RiseVision.Video.hasStorageError()&&RiseVision.Video.onFileRefresh(e.detail.url)))}),t.addEventListener("rise-storage-no-file",function(e){var t={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-file-throttled",function(e){var t={event:"storage file throttled",file_url:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),t.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0);var i=e.detail.error.currentTarget.status,n="There was a problem retrieving the file from Rise Cache.";404===i&&(n="The image does not exist or cannot be accessed."),RiseVision.Video.showError(n)}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go())}var i=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function t(){return _.pluck(l,"url")}function i(e){return _.find(l,function(t){return e.name===t.name})}function n(e){var t=i(e);t&&l.splice(l.indexOf(t),1)}function o(e){var t=i(e);t&&(t.url=e.url)}function r(e){var t=i(e);t||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function s(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){var i=e.detail;if(i.added&&(r(i),a))return a=!1,RiseVision.Video.onFileInit(t()),void 0;if(i.hasOwnProperty("changed"))if(i.changed)o(i);else if(!RiseVision.Video.hasStorageError())return;i.deleted&&n(i),RiseVision.Video.onFileRefresh(t())}),i.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),i.addEventListener("rise-storage-no-folder",function(e){var t={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected folder does not exist or has been moved to Trash.")}),i.addEventListener("rise-storage-folder-invalid",function(){var e={event:"storage folder format(s) invalid"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any supported video formats.")}),i.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),i.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0);var i=e.detail.error.currentTarget.status,n="There was a problem retrieving the file from Rise Cache.";404===i&&(n="The image does not exist or cannot be accessed."),RiseVision.Video.showError(n)}),i.setAttribute("fileType","video"),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("folder",e.storage.folder),i.setAttribute("env",config.STORAGE_ENV),i.go())}var a=!0,l=[];return{init:s}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function t(e){o.getFile(l,function(e,t){if(t){RiseVision.Video.logEvent({event:"non-storage error",event_details:t.message,file_url:e.url},!0);var n=t.message.substring(t.message.indexOf(":")+2),o="There was a problem retrieving the file from Rise Cache.";"404"===n&&(o="The image does not exist or cannot be accessed."),RiseVision.Video.showError(o)}else a?(a=!1,RiseVision.Video.onFileInit(e.url),i()):RiseVision.Video.onFileRefresh(e.url)},e)}function i(){null===s&&(s=setInterval(function(){t(!1)},r))}function n(){l=e.url&&""!==e.url?e.url:e.selector.url,t(!0)}var o=RiseVision.Common.RiseCache,r=9e5,s=null,a=!0,l="";return{init:n}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function t(t){var i,n=e(t);return i=n.querySelector("iframe"),i?i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument:null}function i(i){var n,o=e(i),r=t(i);r&&(n=o.querySelector("iframe"),r.remove(),n.setAttribute("src","about:blank"))}function n(t){var i=e(t),n=document.createElement("iframe");n.setAttribute("allowTransparency",!0),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),i.appendChild(n)}function o(i,n,o,r,s){var a,l=e(i),d=t(i);d&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,d.init(n,o,r),d.load()},a.setAttribute("src",s))}function r(t){var i=e(t);i.style.visibility="hidden"}function s(e,t){var n=document.getElementById(l+e);i(e),setTimeout(function(){for(;n.firstChild;)n.removeChild(n.firstChild);t&&"function"==typeof t&&t()},200)}function a(t){var i=e(t);i.style.visibility="visible"}var l="if_";return{add:n,createFramePlayer:o,getFrameContainer:e,getFrameObject:t,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function i(){try{t.style.height=e.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function o(i){var n,o=document.createDocumentFragment();r?(n=t.querySelector(".message"),n.innerHTML=i):(e.style.visibility="hidden",t.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),o.appendChild(n),t.appendChild(o),r=!0)}var r=!1;return i(),{hide:n,show:o}},function(e,t){"use strict";function i(e,t){var i=null,n="",o="",r="";Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(o=t[0]),"undefined"!==e[1]&&"displayId"===e[1]&&(r="undefined"!==t[1]?t[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,r),"undefined"!==e[2]&&"additionalParams"===e[2]&&("undefined"!==t[2]&&(i=JSON.parse(t[2])),n=0!==Object.keys(i.storage).length?i.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(i,n)))}function n(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function r(){RiseVision.Video.stop()}function s(){e.removeEventListener("WebComponentsReady",s),l&&""!==l&&(t.rpc.register("rscmd_play_"+l,n),t.rpc.register("rscmd_pause_"+l,o),t.rpc.register("rscmd_stop_"+l,r),t.rpc.register("rsparam_set_"+l,i),t.rpc.call("","rsparam_get",null,l,["companyId","displayId","additionalParams"]))}var a=new t.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",s)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdhZGdldHMiLCJzZXRJZHMiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhbnlJZCIsImRpc3BsYXlJZCIsImNhbGxiYWNrIiwiZ2V0RXZlbnRQYXJhbXMiLCJwYXJhbXMiLCJjYiIsImpzb24iLCJldmVudCIsImV2ZW50X2RldGFpbHMiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImdldElkcyIsImNvbXBhbnlfaWQiLCJkaXNwbGF5X2lkIiwiaWQiLCJycGMiLCJyZWdpc3RlciIsImNhbGwiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInRlc3QiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJnZXRJbnNlcnREYXRhIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsInJvd3MiLCJpbnNlcnRJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRUYWJsZSIsIm5hbWUiLCJkYXRlIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwibW9udGgiLCJnZXRVVENNb250aCIsImRheSIsImdldFVUQ0RhdGUiLCJsb2dFdmVudCIsInRhYmxlIiwiTG9nZ2VyIiwibG9nIiwiUHJlZnMiLCJnZXRTdHJpbmciLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiciIsIkJBU0VfQ0FDSEVfVVJMIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIl9waW5nUmVjZWl2ZWQiLCJzdGF0dXMiLCJfaXNDYWNoZVJ1bm5pbmciLCJyZXNwb25zZVRleHQiLCJjb25zb2xlIiwiZGVidWciLCJlIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsImlzQ2FjaGVSdW5uaW5nIiwic2VwYXJhdG9yIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0VGltZSIsInNwbGl0IiwibWFrZVJlcXVlc3QiLCJtZXRob2QiLCJyZXF1ZXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkVycm9yIiwidGhpcyIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25zdGFudCIsImNvbmZpZyIsIlNLSU4iLCJWaWRlbyIsIl9kb25lIiwiX3ByZWZzIiwiX2Vycm9yTG9nIiwiX3JlYWR5IiwiX2NsZWFyRXJyb3JUaW1lciIsImNsZWFyVGltZW91dCIsIl9lcnJvclRpbWVyIiwiX3N0YXJ0RXJyb3JUaW1lciIsIl9nZXRDdXJyZW50RmlsZURhdGEiLCJmcmFtZU9iaiIsIl9mcmFtZUNvbnRyb2xsZXIiLCJnZXRGcmFtZU9iamVjdCIsIl9jdXJyZW50RnJhbWUiLCJnZXRQbGF5YmFja0RhdGEiLCJfZ2V0Q3VycmVudEZpbGUiLCJmaWxlRGF0YSIsIl9jdXJyZW50RmlsZXMiLCJfbW9kZSIsImluZGV4IiwiaGFzU3RvcmFnZUVycm9yIiwiX3N0b3JhZ2VFcnJvckZsYWciLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiaXNTdG9yYWdlRXJyb3IiLCJfZXJyb3JGbGFnIiwiX21lc3NhZ2UiLCJzaG93IiwicmVtb3ZlIiwiX3ZpZXdlclBhdXNlZCIsImlzRXJyb3IiLCJnZXRUYWJsZU5hbWUiLCJvbkZpbGVJbml0IiwidXJscyIsImhpZGUiLCJwbGF5Iiwib25GaWxlUmVmcmVzaCIsInBhdXNlIiwiX3Jlc3VtZSIsImxvZ1BhcmFtcyIsIl9pc0xvYWRpbmciLCJfY29uZmlnRGV0YWlscyIsImFkZCIsImNyZWF0ZUZyYW1lUGxheWVyIiwiX2FkZGl0aW9uYWxQYXJhbXMiLCJwbGF5ZXJFbmRlZCIsInBsYXllclJlYWR5Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsIm1vZGUiLCJpc1N0b3JhZ2VGaWxlIiwiXyIsImNsb25lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiaGVpZ2h0IiwiZ2V0SW50Iiwid2lkdGgiLCJ2aWRlbyIsInJlc3VtZSIsIk1lc3NhZ2UiLCJGcmFtZUNvbnRyb2xsZXIiLCJPYmplY3QiLCJrZXlzIiwic3RvcmFnZSIsIl9zdG9yYWdlIiwiU3RvcmFnZUZpbGUiLCJpbml0IiwiX25vblN0b3JhZ2UiLCJOb25TdG9yYWdlIiwiU3RvcmFnZUZvbGRlciIsInBsYXllckVycm9yIiwiZXJyb3IiLCJkZXRhaWxzIiwiTUVESUFfRVJST1IiLCJZT1VUVUJFX0VSUk9SIiwiUExBWUVSX0VSUk9SIiwiRU5DT0RJTkdfTUVTU0FHRSIsIkZPUk1BVF9NRVNTQUdFIiwidHlwZSIsInN0b3AiLCJkZXRhaWwiLCJfaW5pdGlhbExvYWQiLCJjaGFuZ2VkIiwiY3VycmVudFRhcmdldCIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJzZXRBdHRyaWJ1dGUiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImdvIiwiX2dldFVybHMiLCJwbHVjayIsIl9maWxlcyIsIl9nZXRFeGlzdGluZ0ZpbGUiLCJmaWxlIiwiZmluZCIsImYiLCJfZGVsZXRlRmlsZSIsImV4aXN0aW5nIiwic3BsaWNlIiwiX2NoYW5nZUZpbGUiLCJfYWRkRmlsZSIsInNsaWNlIiwic29ydGVkSW5kZXgiLCJhZGRlZCIsImRlbGV0ZWQiLCJfZ2V0RmlsZSIsIm9taXRDYWNoZUJ1c3RlciIsInJpc2VDYWNoZSIsIl91cmwiLCJzdWJzdHJpbmciLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJzZWxlY3RvciIsImdldEZyYW1lQ29udGFpbmVyIiwiUFJFRklYIiwiaWZyYW1lIiwiZnJhbWVDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudFdpbmRvdyIsImNvbnRlbnREb2N1bWVudCIsIl9jbGVhciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImZpbGVzIiwic2tpbiIsInNyYyIsIm9ubG9hZCIsImxvYWQiLCJ2aXNpYmlsaXR5IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwibWFpbkNvbnRhaW5lciIsIm1lc3NhZ2VDb250YWluZXIiLCJfaW5pdCIsIndhcm4iLCJfYWN0aXZlIiwiZGlzcGxheSIsInAiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpbm5lckhUTUwiLCJ3aW5kb3ciLCJjb25maWd1cmUiLCJhZGRpdGlvbmFsUGFyYW1zIiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJhc3luYyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRh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LGNBQWdCRixFQUFJNkksR0FDekNuSyxFQUFRdUIsSUFBSUMsU0FBUyxlQUFpQkYsRUFBSStJLEdBQzFDckssRUFBUXVCLElBQUlDLFNBQVMsY0FBZ0JGLEVBQUkwTCxHQUV6Q2hOLEVBQVF1QixJQUFJQyxTQUFTLGVBQWlCRixFQUFJNFAsR0FDMUNsUixFQUFRdUIsSUFBSUUsS0FBSyxHQUFJLGNBQWUsS0FBTUgsR0FBSyxZQUFhLFlBQWEsc0JBM0U3RSxHQUFJZ1EsR0FBUSxHQUFJdFIsR0FBUThELE1BQ3RCeEMsRUFBS2dRLEVBQU12TixVQUFVLEtBR3ZCa04sR0FBT00sY0FBZ0IsV0FDckIsT0FBTyxHQTBFVE4sRUFBT3pKLGlCQUFpQixxQkFBc0I0SixJQUU3Q0gsT0FBUWpSLFFBS1gsSUFBSXdSLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLdEcsU0FBU3lFLGNBQWMsU0FBVzZCLEdBQUczRSxLQUFPLGtCQUFtQjJFLEVBQUdDLE9BQVEsRUFDbkZELEVBQUd6QixLQUFPLFVBQVk3RSxTQUFTd0csU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSTFHLFNBQVMyRyxxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhUCxFQUFJSSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFdJREdFVF9DT01NT05fQ09ORklHID0ge1xuICBBVVRIX1BBVEhfVVJMOiBcInYxL3dpZGdldC9hdXRoXCIsXG4gIExPR0dFUl9DTElFTlRfSUQ6IFwiMTA4ODUyNzE0NzEwOS02cTFvMnZ0aWhuMzQyOTJwanQ0Y2tobWhjazByazBvNy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbVwiLFxuICBMT0dHRVJfQ0xJRU5UX1NFQ1JFVDogXCJubFp5cmNQTGc2b0V3TzlmOVdmbjI5V2hcIixcbiAgTE9HR0VSX1JFRlJFU0hfVE9LRU46IFwiMS94enQ0a3d6RTFIN1c5Vm5LQjhjQWFDeDZ6YjRFczRuS0VvcWFZSGRURDE1SWdPckpEdGR1bjZ6SzZYaUFUQ0tUXCIsXG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIixcbiAgU1RPUkVfVVJMOiBcImh0dHBzOi8vc3RvcmUtZG90LXJ2YXNlcnZlcjIuYXBwc3BvdC5jb20vXCJcbn07XG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyA9IChmdW5jdGlvbihnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gICB2YXIgaWQgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLmdldFN0cmluZyhcImlkXCIpLFxuICAgIGRpc3BsYXlJZCA9IFwiXCIsXG4gICAgY29tcGFueUlkID0gXCJcIixcbiAgICBjYWxsYmFjayA9IG51bGw7XG5cbiAgdmFyIEJBU0VfSU5TRVJUX1NDSEVNQSA9XG4gIHtcbiAgICBcImtpbmRcIjogXCJiaWdxdWVyeSN0YWJsZURhdGFJbnNlcnRBbGxSZXF1ZXN0XCIsXG4gICAgXCJza2lwSW52YWxpZFJvd3NcIjogZmFsc2UsXG4gICAgXCJpZ25vcmVVbmtub3duVmFsdWVzXCI6IGZhbHNlLFxuICAgIFwicm93c1wiOiBbe1xuICAgICAgXCJpbnNlcnRJZFwiOiBcIlwiXG4gICAgfV1cbiAgfTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuXG4gIC8qIFNldCB0aGUgQ29tcGFueSBhbmQgRGlzcGxheSBJRHMuICovXG4gIGZ1bmN0aW9uIHNldElkcyhuYW1lcywgdmFsdWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKG5hbWVzWzBdID09PSBcImNvbXBhbnlJZFwiKSB7XG4gICAgICAgICAgY29tcGFueUlkID0gdmFsdWVzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5hbWVzWzFdID09PSBcImRpc3BsYXlJZFwiKSB7XG4gICAgICAgICAgaWYgKHZhbHVlc1sxXSkge1xuICAgICAgICAgICAgZGlzcGxheUlkID0gdmFsdWVzWzFdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRpc3BsYXlJZCA9IFwicHJldmlld1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGxiYWNrKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiBSZXRyaWV2ZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGV2ZW50IGxvZ2dlci4gKi9cbiAgZnVuY3Rpb24gZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBjYikge1xuICAgIHZhciBqc29uID0gbnVsbDtcblxuICAgIC8vIGV2ZW50IGlzIHJlcXVpcmVkLlxuICAgIGlmIChwYXJhbXMuZXZlbnQpIHtcbiAgICAgIGpzb24gPSB7fTtcbiAgICAgIGpzb24uZXZlbnQgPSBwYXJhbXMuZXZlbnQ7XG5cbiAgICAgIGlmIChwYXJhbXMuZXZlbnRfZGV0YWlscykge1xuICAgICAgICBqc29uLmV2ZW50X2RldGFpbHMgPSBwYXJhbXMuZXZlbnRfZGV0YWlscztcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcy5maWxlX3VybCkge1xuICAgICAgICBqc29uLmZpbGVfdXJsID0gcGFyYW1zLmZpbGVfdXJsO1xuICAgICAgICBqc29uLmZpbGVfZm9ybWF0ID0gZ2V0RmlsZUZvcm1hdChwYXJhbXMuZmlsZV91cmwpO1xuICAgICAgfVxuXG4gICAgICBnZXRJZHMoZnVuY3Rpb24oY29tcGFueUlkLCBkaXNwbGF5SWQpIHtcbiAgICAgICAganNvbi5jb21wYW55X2lkID0gY29tcGFueUlkO1xuICAgICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgICAgY2IoanNvbik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYihqc29uKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldElkcyhjYikge1xuICAgIGlmICghY2IgfHwgdHlwZW9mIGNiICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYWxsYmFjayA9IGNiO1xuICAgIH1cblxuICAgIGlmIChjb21wYW55SWQgJiYgZGlzcGxheUlkKSB7XG4gICAgICBjYWxsYmFjayhjb21wYW55SWQsIGRpc3BsYXlJZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgc2V0SWRzKTtcbiAgICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJjb21wYW55SWRcIiwgXCJkaXNwbGF5SWRcIl0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGVGb3JtYXQodXJsKSB7XG4gICAgdmFyIGhhc1BhcmFtcyA9IC9bPyMmXS8sXG4gICAgICBzdHI7XG5cbiAgICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzdHIgPSB1cmwuc3Vic3RyKHVybC5sYXN0SW5kZXhPZihcIi5cIikgKyAxKTtcblxuICAgIC8vIGRvbid0IGluY2x1ZGUgYW55IHBhcmFtcyBhZnRlciB0aGUgZmlsZW5hbWVcbiAgICBpZiAoaGFzUGFyYW1zLnRlc3Qoc3RyKSkge1xuICAgICAgc3RyID0gc3RyLnN1YnN0cigwICwoc3RyLmluZGV4T2YoXCI/XCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIj9cIikgOiBzdHIubGVuZ3RoKTtcblxuICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAoc3RyLmluZGV4T2YoXCIjXCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIiNcIikgOiBzdHIubGVuZ3RoKTtcblxuICAgICAgc3RyID0gc3RyLnN1YnN0cigwLCAoc3RyLmluZGV4T2YoXCImXCIpICE9PSAtMSkgPyBzdHIuaW5kZXhPZihcIiZcIikgOiBzdHIubGVuZ3RoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbnNlcnREYXRhKHBhcmFtcykge1xuICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShCQVNFX0lOU0VSVF9TQ0hFTUEpKTtcblxuICAgIGRhdGEucm93c1swXS5pbnNlcnRJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKS50b1VwcGVyQ2FzZSgpO1xuICAgIGRhdGEucm93c1swXS5qc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbi50cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFibGUobmFtZSkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKSxcbiAgICAgIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKSArIDEsXG4gICAgICBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcblxuICAgIGlmIChtb250aCA8IDEwKSB7XG4gICAgICBtb250aCA9IFwiMFwiICsgbW9udGg7XG4gICAgfVxuXG4gICAgaWYgKGRheSA8IDEwKSB7XG4gICAgICBkYXkgPSBcIjBcIiArIGRheTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmFtZSArIHllYXIgKyBtb250aCArIGRheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHRhYmxlLCBwYXJhbXMpIHtcbiAgICBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIGlmIChqc29uICE9PSBudWxsKSB7XG4gICAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlci5sb2codGFibGUsIGpzb24pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldElkc1wiOiBnZXRJZHMsXG4gICAgXCJnZXRJbnNlcnREYXRhXCI6IGdldEluc2VydERhdGEsXG4gICAgXCJnZXRGaWxlRm9ybWF0XCI6IGdldEZpbGVGb3JtYXQsXG4gICAgXCJnZXRUYWJsZVwiOiBnZXRUYWJsZSxcbiAgICBcImxvZ0V2ZW50XCI6IGxvZ0V2ZW50XG4gIH07XG59KShnYWRnZXRzKTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyID0gKGZ1bmN0aW9uKHV0aWxzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBSRUZSRVNIX1VSTCA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YzL3Rva2VuP2NsaWVudF9pZD1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9DTElFTlRfSUQgK1xuICAgICAgXCImY2xpZW50X3NlY3JldD1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9DTElFTlRfU0VDUkVUICtcbiAgICAgIFwiJnJlZnJlc2hfdG9rZW49XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfUkVGUkVTSF9UT0tFTiArXG4gICAgICBcIiZncmFudF90eXBlPXJlZnJlc2hfdG9rZW5cIjtcblxuICB2YXIgc2VydmljZVVybCA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYmlncXVlcnkvdjIvcHJvamVjdHMvY2xpZW50LXNpZGUtZXZlbnRzL2RhdGFzZXRzL1dpZGdldF9FdmVudHMvdGFibGVzL1RBQkxFX0lEL2luc2VydEFsbFwiLFxuICAgIHRocm90dGxlID0gZmFsc2UsXG4gICAgdGhyb3R0bGVEZWxheSA9IDEwMDAsXG4gICAgbGFzdEV2ZW50ID0gXCJcIixcbiAgICByZWZyZXNoRGF0ZSA9IDAsXG4gICAgdG9rZW4gPSBcIlwiO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIHJlZnJlc2hUb2tlbihjYikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmIChuZXcgRGF0ZSgpIC0gcmVmcmVzaERhdGUgPCAzNTgwMDAwKSB7XG4gICAgICByZXR1cm4gY2Ioe30pO1xuICAgIH1cblxuICAgIHhoci5vcGVuKFwiUE9TVFwiLCBSRUZSRVNIX1VSTCwgdHJ1ZSk7XG4gICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3AgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSk7XG5cbiAgICAgIGNiKHsgdG9rZW46IHJlc3AuYWNjZXNzX3Rva2VuLCByZWZyZXNoZWRBdDogbmV3IERhdGUoKSB9KTtcbiAgICB9O1xuXG4gICAgeGhyLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVGhyb3R0bGVkKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRocm90dGxlICYmIChsYXN0RXZlbnQgPT09IGV2ZW50KTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gbG9nKHRhYmxlTmFtZSwgcGFyYW1zKSB7XG4gICAgaWYgKCF0YWJsZU5hbWUgfHwgIXBhcmFtcyB8fCAocGFyYW1zLmhhc093blByb3BlcnR5KFwiZXZlbnRcIikgJiYgIXBhcmFtcy5ldmVudCkgfHxcbiAgICAgIChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiBpc1Rocm90dGxlZChwYXJhbXMuZXZlbnQpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRocm90dGxlID0gdHJ1ZTtcbiAgICBsYXN0RXZlbnQgPSBwYXJhbXMuZXZlbnQ7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm90dGxlID0gZmFsc2U7XG4gICAgfSwgdGhyb3R0bGVEZWxheSk7XG5cbiAgICBmdW5jdGlvbiBpbnNlcnRXaXRoVG9rZW4ocmVmcmVzaERhdGEpIHtcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgaW5zZXJ0RGF0YSwgdXJsO1xuXG4gICAgICB1cmwgPSBzZXJ2aWNlVXJsLnJlcGxhY2UoXCJUQUJMRV9JRFwiLCB1dGlscy5nZXRUYWJsZSh0YWJsZU5hbWUpKTtcbiAgICAgIHJlZnJlc2hEYXRlID0gcmVmcmVzaERhdGEucmVmcmVzaGVkQXQgfHwgcmVmcmVzaERhdGU7XG4gICAgICB0b2tlbiA9IHJlZnJlc2hEYXRhLnRva2VuIHx8IHRva2VuO1xuICAgICAgaW5zZXJ0RGF0YSA9IHV0aWxzLmdldEluc2VydERhdGEocGFyYW1zKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBkYXRhLlxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCZWFyZXIgXCIgKyB0b2tlbik7XG5cbiAgICAgIGlmIChwYXJhbXMuY2IgJiYgdHlwZW9mIHBhcmFtcy5jYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwYXJhbXMuY2IoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoaW5zZXJ0RGF0YSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZWZyZXNoVG9rZW4oaW5zZXJ0V2l0aFRva2VuKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJsb2dcIjogbG9nXG4gIH07XG59KShSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyk7XG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUgPSAoZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgQkFTRV9DQUNIRV9VUkwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6OTQ5NC9cIjtcblxuICB2YXIgX3BpbmdSZWNlaXZlZCA9IGZhbHNlLFxuICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIHBpbmcoY2FsbGJhY2spIHtcbiAgICB2YXIgciA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHIub3BlbihcIkdFVFwiLCBCQVNFX0NBQ0hFX1VSTCArIFwicGluZz9jYWxsYmFjaz1fXCIsIHRydWUpO1xuICAgIHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcbiAgICAgICAgICAvLyBzYXZlIHRoaXMgcmVzdWx0IGZvciB1c2UgaW4gZ2V0RmlsZSgpXG4gICAgICAgICAgX3BpbmdSZWNlaXZlZCA9IHRydWU7XG5cbiAgICAgICAgICBpZihyLnN0YXR1cyA9PT0gMjAwKXtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKHRydWUsIHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhcIlJpc2UgQ2FjaGUgaXMgbm90IHJ1bm5pbmdcIik7XG4gICAgICAgICAgICBfaXNDYWNoZVJ1bm5pbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhcIkNhdWdodCBleGNlcHRpb246IFwiLCBlLmRlc2NyaXB0aW9uKTtcbiAgICAgIH1cblxuICAgIH07XG4gICAgci5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGaWxlKGZpbGVVcmwsIGNhbGxiYWNrLCBub2NhY2hlYnVzdGVyKSB7XG4gICAgaWYgKCFmaWxlVXJsIHx8ICFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbGVSZXF1ZXN0KGlzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICB2YXIgdXJsLCBzdHIsIHNlcGFyYXRvcjtcblxuICAgICAgaWYgKGlzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSB1cmwgd2l0aCBjYWNoZWJ1c3RlciBvciBub3RcbiAgICAgICAgdXJsID0gKG5vY2FjaGVidXN0ZXIpID8gQkFTRV9DQUNIRV9VUkwgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCkgOlxuICAgICAgICAgIEJBU0VfQ0FDSEVfVVJMICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgXCI/dXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG5vY2FjaGVidXN0ZXIpIHtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0ciA9IGZpbGVVcmwuc3BsaXQoXCI/XCIpO1xuICAgICAgICAgIHNlcGFyYXRvciA9IChzdHIubGVuZ3RoID09PSAxKSA/IFwiP1wiIDogXCImXCI7XG4gICAgICAgICAgdXJsID0gZmlsZVVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtYWtlUmVxdWVzdChcIkhFQURcIiwgdXJsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlUmVxdWVzdChtZXRob2QsIHVybCkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICByZXF1ZXN0ID0ge1xuICAgICAgICAgIHhocjogeGhyLFxuICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH07XG5cbiAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblxuICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXR1cyA9IHhoci5zdGF0dXMgfHwgMDtcblxuICAgICAgICBpZiAoc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTZXJ2ZXIgbWF5IG5vdCBzdXBwb3J0IEhFQUQgcmVxdWVzdC4gRmFsbGJhY2sgdG8gYSBHRVQgcmVxdWVzdC5cbiAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkhFQURcIikge1xuICAgICAgICAgICAgbWFrZVJlcXVlc3QoXCJHRVRcIiwgdXJsKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKF9pc0NhY2hlUnVubmluZykge1xuICAgICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LCBuZXcgRXJyb3IoXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBzdGF0dXMpKTtcbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0byBhdm9pZCB0aHJvd2luZyBhbiBlcnJvciB3aGVuIHRoZXJlIGlzIGEgY3Jvc3MgZG9tYWluIGlzc3VlXG4gICAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZpbGVSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbGVSZXF1ZXN0KF9pc0NhY2hlUnVubmluZyk7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldEZpbGU6IGdldEZpbGUsXG4gICAgcGluZzogcGluZ1xuICB9O1xuXG59KSgpO1xuXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwibG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG59XG5cbnZhciAgY29uZmlnID0ge1xuICBTS0lOOiBcInNraW4vUlZTa2luLnhtbFwiLFxuICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvID0gKGZ1bmN0aW9uIChnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWRkaXRpb25hbFBhcmFtcywgX21vZGU7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlLFxuICAgIF9jb25maWdEZXRhaWxzID0gbnVsbDtcblxuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGwsXG4gICAgX25vblN0b3JhZ2UgPSBudWxsLFxuICAgIF9tZXNzYWdlID0gbnVsbCxcbiAgICBfZnJhbWVDb250cm9sbGVyID0gbnVsbDtcblxuICB2YXIgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgdmFyIF9yZXN1bWUgPSB0cnVlO1xuXG4gIHZhciBfY3VycmVudEZyYW1lID0gMDtcblxuICB2YXIgX2N1cnJlbnRGaWxlcyA9IFtdO1xuXG4gIHZhciBfZXJyb3JMb2cgPSBudWxsLFxuICAgIF9lcnJvclRpbWVyID0gbnVsbCxcbiAgICBfZXJyb3JGbGFnID0gZmFsc2U7XG5cbiAgdmFyIF9zdG9yYWdlRXJyb3JGbGFnID0gZmFsc2U7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX2RvbmUoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfZG9uZVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIikpO1xuXG4gICAgLy8gQW55IGVycm9ycyBuZWVkIHRvIGJlIGxvZ2dlZCBiZWZvcmUgdGhlIGRvbmUgZXZlbnQuXG4gICAgaWYgKF9lcnJvckxvZyAhPT0gbnVsbCkge1xuICAgICAgbG9nRXZlbnQoX2Vycm9yTG9nLCB0cnVlKTtcbiAgICB9XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJkb25lXCIgfSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NsZWFyRXJyb3JUaW1lcigpIHtcbiAgICBjbGVhclRpbWVvdXQoX2Vycm9yVGltZXIpO1xuICAgIF9lcnJvclRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydEVycm9yVGltZXIoKSB7XG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgX2Vycm9yVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG5vdGlmeSBWaWV3ZXIgd2lkZ2V0IGlzIGRvbmVcbiAgICAgIF9kb25lKCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q3VycmVudEZpbGVEYXRhKCkge1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIHJldHVybiBmcmFtZU9iai5nZXRQbGF5YmFja0RhdGEoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZSgpIHtcbiAgICB2YXIgZmlsZURhdGEgPSBudWxsO1xuXG4gICAgaWYgKF9jdXJyZW50RmlsZXMgJiYgX2N1cnJlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIHJldHVybiBfY3VycmVudEZpbGVzWzBdO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgICAgLy8gcmV0cmlldmUgdGhlIGN1cnJlbnRseSBwbGF5ZWQgZmlsZSBpbmZvIGZyb20gcGxheWVyXG4gICAgICAgIGZpbGVEYXRhID0gX2dldEN1cnJlbnRGaWxlRGF0YSgpO1xuXG4gICAgICAgIGlmIChmaWxlRGF0YSkge1xuICAgICAgICAgIHJldHVybiBfY3VycmVudEZpbGVzW2ZpbGVEYXRhLmluZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoYXNTdG9yYWdlRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9zdG9yYWdlRXJyb3JGbGFnO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd0Vycm9yKG1lc3NhZ2UsIGlzU3RvcmFnZUVycm9yKSB7XG4gICAgX2Vycm9yRmxhZyA9IHRydWU7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSB0eXBlb2YgaXNTdG9yYWdlRXJyb3IgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICBfbWVzc2FnZS5zaG93KG1lc3NhZ2UpO1xuXG4gICAgX2ZyYW1lQ29udHJvbGxlci5yZW1vdmUoX2N1cnJlbnRGcmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gaWYgV2lkZ2V0IGlzIHBsYXlpbmcgcmlnaHQgbm93LCBydW4gdGhlIHRpbWVyXG4gICAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQocGFyYW1zLCBpc0Vycm9yKSB7XG4gICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgIF9lcnJvckxvZyA9IHBhcmFtcztcbiAgICB9XG5cbiAgICBpZiAoIXBhcmFtcy5maWxlX3VybCkge1xuICAgICAgcGFyYW1zLmZpbGVfdXJsID0gX2dldEN1cnJlbnRGaWxlKCk7XG4gICAgfVxuXG4gICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMubG9nRXZlbnQoZ2V0VGFibGVOYW1lKCksIHBhcmFtcyk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVJbml0KHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmdcbiAgICAgIF9jdXJyZW50RmlsZXNbMF0gPSB1cmxzO1xuICAgIH0gZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhbiBhcnJheVxuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG4gICAgfVxuXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBwbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlUmVmcmVzaCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nIG9mIG9uZSB1cmxcbiAgICAgIF9jdXJyZW50RmlsZXNbMF0gPSB1cmxzO1xuICAgIH0gZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhbiBhcnJheSBvZiB1cmxzXG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcbiAgICB9XG5cbiAgICAvLyBpbiBjYXNlIHJlZnJlc2hlZCBmaWxlIGZpeGVzIGFuIGVycm9yIHdpdGggcHJldmlvdXMgZmlsZSwgZW5zdXJlIGZsYWcgaXMgcmVtb3ZlZCBzbyBwbGF5YmFjayBpcyBhdHRlbXB0ZWQgYWdhaW5cbiAgICBfZXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfZXJyb3JMb2cgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgdmFyIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gICAgLy8gaW4gY2FzZSBlcnJvciB0aW1lciBzdGlsbCBydW5uaW5nIChubyBjb25kaXRpb25hbCBjaGVjayBvbiBlcnJvckZsYWcsIGl0IG1heSBoYXZlIGJlZW4gcmVzZXQgaW4gb25GaWxlUmVmcmVzaClcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIC8vIERlc3Ryb3kgcGxheWVyIGlmcmFtZS5cbiAgICAgIGlmICghX3Jlc3VtZSkge1xuICAgICAgICBfZnJhbWVDb250cm9sbGVyLnJlbW92ZShfY3VycmVudEZyYW1lKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBmcmFtZU9iai5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgdmFyIGxvZ1BhcmFtcyA9IHt9LFxuICAgICAgZnJhbWVPYmogPSBfZnJhbWVDb250cm9sbGVyLmdldEZyYW1lT2JqZWN0KF9jdXJyZW50RnJhbWUpO1xuXG4gICAgaWYgKF9pc0xvYWRpbmcpIHtcbiAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgLy8gTG9nIGNvbmZpZ3VyYXRpb24gZXZlbnQuXG4gICAgICBsb2dQYXJhbXMuZXZlbnQgPSBcImNvbmZpZ3VyYXRpb25cIjtcbiAgICAgIGxvZ1BhcmFtcy5ldmVudF9kZXRhaWxzID0gX2NvbmZpZ0RldGFpbHM7XG4gICAgICBsb2dFdmVudChsb2dQYXJhbXMsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJwbGF5XCIgfSwgZmFsc2UpO1xuXG4gICAgaWYgKF9lcnJvckZsYWcpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICAgIC8vIGFkZCBmcmFtZSBhbmQgY3JlYXRlIHRoZSBwbGF5ZXJcbiAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmFkZCgwKTtcbiAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzWzBdLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZmlsZS5odG1sXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5jcmVhdGVGcmFtZVBsYXllcigwLCBfYWRkaXRpb25hbFBhcmFtcywgX2N1cnJlbnRGaWxlcywgY29uZmlnLlNLSU4sIFwicGxheWVyLWZvbGRlci5odG1sXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuIFwidmlkZW9fZXZlbnRzXCI7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJFbmRlZCgpIHtcbiAgICBfZnJhbWVDb250cm9sbGVyLnJlbW92ZShfY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfZG9uZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheWVyUmVhZHkoKSB7XG4gICAgdmFyIGZyYW1lT2JqO1xuXG4gICAgLy8gRW5zdXJlcyBtZXNzYWdpbmcgaXMgaGlkZGVuIGZvciBub24tc3RvcmFnZSB2aWRlbyBmaWxlXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgICBmcmFtZU9iai5wbGF5KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhwYXJhbXMsIG1vZGUpIHtcbiAgICB2YXIgaXNTdG9yYWdlRmlsZTtcblxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gXy5jbG9uZShwYXJhbXMpO1xuICAgIF9tb2RlID0gbW9kZTtcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0NvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMud2lkdGggPSBfcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMudmlkZW8uaGFzT3duUHJvcGVydHkoXCJyZXN1bWVcIikpIHtcbiAgICAgIF9yZXN1bWUgPSBfYWRkaXRpb25hbFBhcmFtcy52aWRlby5yZXN1bWU7XG4gICAgfVxuXG4gICAgX21lc3NhZ2UgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvQ29udGFpbmVyXCIpLFxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlQ29udGFpbmVyXCIpKTtcblxuICAgIC8vIHNob3cgd2FpdCBtZXNzYWdlIHdoaWxlIFN0b3JhZ2UgaW5pdGlhbGl6ZXNcbiAgICBfbWVzc2FnZS5zaG93KFwiUGxlYXNlIHdhaXQgd2hpbGUgeW91ciB2aWRlbyBpcyBkb3dubG9hZGVkLlwiKTtcblxuICAgIF9mcmFtZUNvbnRyb2xsZXIgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uVmlkZW8uRnJhbWVDb250cm9sbGVyKCk7XG5cbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICBpc1N0b3JhZ2VGaWxlID0gKE9iamVjdC5rZXlzKF9hZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XG5cbiAgICAgIGlmICghaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICBfY29uZmlnRGV0YWlscyA9IFwiY3VzdG9tXCI7XG5cbiAgICAgICAgX25vblN0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5Ob25TdG9yYWdlKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgX25vblN0b3JhZ2UuaW5pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2NvbmZpZ0RldGFpbHMgPSBcInN0b3JhZ2UgZmlsZVwiO1xuXG4gICAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmaWxlIGluc3RhbmNlXG4gICAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZpbGUoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICBfc3RvcmFnZS5pbml0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICBfY29uZmlnRGV0YWlscyA9IFwic3RvcmFnZSBmb2xkZXJcIjtcblxuICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZvbGRlciBpbnN0YW5jZVxuICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICB9XG5cbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8vIEFuIGVycm9yIG9jY3VycmVkIHdpdGggSlcgUGxheWVyLlxuICBmdW5jdGlvbiBwbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIHZhciBkZXRhaWxzID0gbnVsbCxcbiAgICAgIHBhcmFtcyA9IHt9LFxuICAgICAgbWVzc2FnZSA9IFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8uXCIsXG4gICAgICBNRURJQV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBtZWRpYTogRmlsZSBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBZT1VUVUJFX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIFlvdVR1YmU6IFZpZGVvIGNvdWxkIG5vdCBiZSBwbGF5ZWRcIixcbiAgICAgIFBMQVlFUl9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBwbGF5ZXI6IE5vIHBsYXlhYmxlIHNvdXJjZXMgZm91bmRcIixcbiAgICAgIEVOQ09ESU5HX01FU1NBR0UgPSBcIlRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGF0IHZpZGVvLiBJdCBjb3VsZCBiZSB0aGF0IHdlIGRvbid0IFwiICtcbiAgICAgICAgXCJzdXBwb3J0IHRoYXQgZm9ybWF0IG9yIGl0IGlzIG5vdCBlbmNvZGVkIGNvcnJlY3RseS5cIixcbiAgICAgIEZPUk1BVF9NRVNTQUdFID0gXCJUaGUgZm9ybWF0IG9mIHRoYXQgdmlkZW8gaXMgbm90IHN1cHBvcnRlZFwiO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IudHlwZSAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci50eXBlICsgXCIgLSBcIiArIGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlcnJvci50eXBlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci50eXBlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IubWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgLy8gRGlzcGxheSBhcHByb3ByaWF0ZSBvbi1zY3JlZW4gZXJyb3IgbWVzc2FnZS5cbiAgICAgIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGlmICgoZXJyb3IubWVzc2FnZSA9PT0gTUVESUFfRVJST1IpIHx8IChlcnJvci5tZXNzYWdlID09PSBZT1VUVUJFX0VSUk9SKSkge1xuICAgICAgICAgIG1lc3NhZ2UgPSBFTkNPRElOR19NRVNTQUdFO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UgPT09IFBMQVlFUl9FUlJPUikge1xuICAgICAgICAgIG1lc3NhZ2UgPSBGT1JNQVRfTUVTU0FHRTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBhcmFtcy5ldmVudCA9IFwicGxheWVyIGVycm9yXCI7XG4gICAgcGFyYW1zLmV2ZW50X2RldGFpbHMgPSBkZXRhaWxzO1xuXG4gICAgbG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICBzaG93RXJyb3IobWVzc2FnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIHBhdXNlKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0VGFibGVOYW1lXCI6IGdldFRhYmxlTmFtZSxcbiAgICBcImhhc1N0b3JhZ2VFcnJvclwiOiBoYXNTdG9yYWdlRXJyb3IsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcIm9uRmlsZUluaXRcIjogb25GaWxlSW5pdCxcbiAgICBcIm9uRmlsZVJlZnJlc2hcIjogb25GaWxlUmVmcmVzaCxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwic2hvd0Vycm9yXCI6IHNob3dFcnJvcixcbiAgICBcInBsYXllckVuZGVkXCI6IHBsYXllckVuZGVkLFxuICAgIFwicGxheWVyUmVhZHlcIjogcGxheWVyUmVhZHksXG4gICAgXCJwbGF5ZXJFcnJvclwiOiBwbGF5ZXJFcnJvcixcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xuXG59KShnYWRnZXRzKTtcblxuLyogZ2xvYmFsIGNvbmZpZyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaW5pdGlhbExvYWQgPSB0cnVlO1xuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TdG9yYWdlXCIpO1xuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQoZS5kZXRhaWwudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBjaGVjayBmb3IgXCJjaGFuZ2VkXCIgcHJvcGVydHlcbiAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpKSB7XG4gICAgICAgICAgICBpZiAoZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2goZS5kZXRhaWwudXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLyBpbiB0aGUgZXZlbnQgb2YgYSBuZXR3b3JrIGZhaWx1cmUgYW5kIHJlY292ZXJ5LCBjaGVjayBpZiB0aGUgV2lkZ2V0IGlzIGluIGEgc3RhdGUgb2Ygc3RvcmFnZSBlcnJvclxuICAgICAgICAgICAgICBpZiAoUmlzZVZpc2lvbi5WaWRlby5oYXNTdG9yYWdlRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZmlsZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIG5vdCBmb3VuZFwiLCBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZpbGUtdGhyb3R0bGVkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZpbGUgdGhyb3R0bGVkXCIsIFwiZmlsZV91cmxcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIHN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIiwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG5cbiAgICAgIC8vIFNob3cgYSBkaWZmZXJlbnQgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIDQwNCBjb21pbmcgZnJvbSByaXNlIGNhY2hlXG4gICAgICB2YXIgc3RhdHVzQ29kZSA9IGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzO1xuXG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiO1xuICAgICAgaWYoc3RhdHVzQ29kZSA9PT0gNDA0KXtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgaW1hZ2UgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgfVxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9KTtcblxuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLnN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgdmFyIF9maWxlcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9nZXRVcmxzKCkge1xuICAgIHJldHVybiBfLnBsdWNrKF9maWxlcywgXCJ1cmxcIik7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpIHtcbiAgICByZXR1cm4gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGYubmFtZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWxldGVGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBfZmlsZXMuc3BsaWNlKF9maWxlcy5pbmRleE9mKGV4aXN0aW5nKSwgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoYW5nZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGV4aXN0aW5nLnVybCA9IGZpbGUudXJsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9hZGRGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKCFleGlzdGluZykge1xuICAgICAgLy8gZXh0cmFjdCB0aGUgYWN0dWFsIGZpbGUgbmFtZSBhbmQgc3RvcmUgaW4gbmV3IHByb3BlcnR5IG9uIGZpbGUgb2JqZWN0XG4gICAgICBmaWxlLmZpbGVOYW1lID0gZmlsZS5uYW1lLnNsaWNlKGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBpbnNlcnQgZmlsZSB0byBfZmlsZXMgbGlzdCBhdCBzcGVjaWZpYyBpbmRleCBiYXNlZCBvbiBhbHBoYWJldGljYWwgb3JkZXIgb2YgZmlsZSBuYW1lXG4gICAgICBfZmlsZXMuc3BsaWNlKF8uc29ydGVkSW5kZXgoX2ZpbGVzLCBmaWxlLCBcImZpbGVOYW1lXCIpLCAwLCBmaWxlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZSA9IGUuZGV0YWlsO1xuXG4gICAgICAvLyBBZGRlZFxuICAgICAgaWYoZmlsZS5hZGRlZCkge1xuICAgICAgICBfYWRkRmlsZShmaWxlKTtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KF9nZXRVcmxzKCkpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoYW5nZWQgb3IgdW5jaGFuZ2VkXG4gICAgICBpZiAoZmlsZS5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikpIHtcbiAgICAgICAgaWYoZmlsZS5jaGFuZ2VkKSB7XG4gICAgICAgICAgX2NoYW5nZUZpbGUoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgICAgICBpZiAoIVJpc2VWaXNpb24uVmlkZW8uaGFzU3RvcmFnZUVycm9yKCkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgcHJvY2VlZCB3aXRoIHJlZnJlc2ggbG9naWMgYmVsb3cgaWYgdGhlcmUncyBiZWVuIGEgc3RvcmFnZSBlcnJvciwgb3RoZXJ3aXNlIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHZpZGVvIGFnYWluIGZyb20gYSBuZXR3b3JrIHJlY292ZXJ5XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZWRcbiAgICAgIGlmKGZpbGUuZGVsZXRlZCkge1xuICAgICAgICBfZGVsZXRlRmlsZShmaWxlKTtcbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKF9nZXRVcmxzKCkpO1xuXG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZW1wdHktZm9sZGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBlbXB0eVwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBjb250YWluIGFueSB2aWRlb3MuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZvbGRlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGRvZXNuJ3QgZXhpc3RcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBleGlzdCBvciBoYXMgYmVlbiBtb3ZlZCB0byBUcmFzaC5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZm9sZGVyLWludmFsaWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGZvcm1hdChzKSBpbnZhbGlkXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHN1cHBvcnRlZCB2aWRlbyBmb3JtYXRzLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuXG4gICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1cztcblxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSByZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gUmlzZSBDYWNoZS5cIjtcbiAgICAgIGlmKHN0YXR1c0NvZGUgPT09IDQwNCl7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGltYWdlIGRvZXMgbm90IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cIjtcbiAgICAgIH1cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVUeXBlXCIsIFwidmlkZW9cIik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcmlzZUNhY2hlID0gUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlO1xuXG4gIHZhciBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAgLy8gMTUgbWludXRlc1xuICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IG51bGw7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlO1xuXG4gIHZhciBfdXJsID0gXCJcIjtcblxuICBmdW5jdGlvbiBfZ2V0RmlsZShvbWl0Q2FjaGVCdXN0ZXIpIHtcbiAgICByaXNlQ2FjaGUuZ2V0RmlsZShfdXJsLCBmdW5jdGlvbiAocmVzcG9uc2UsIGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG5cbiAgICAgICAgaWYgKF9pc0xvYWRpbmcpIHtcbiAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQocmVzcG9uc2UudXJsKTtcblxuICAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIGludGVydmFsXG4gICAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2gocmVzcG9uc2UudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlcnJvciBvY2N1cnJlZFxuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwibm9uLXN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IHJlc3BvbnNlLnVybFxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IGVycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG5cbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSByZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gUmlzZSBDYWNoZS5cIjtcbiAgICAgICAgaWYoc3RhdHVzQ29kZSA9PT0gXCI0MDRcIil7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgaW1hZ2UgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgICB9XG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSwgb21pdENhY2hlQnVzdGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICBpZiAoX3JlZnJlc2hJbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICBfcmVmcmVzaEludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9nZXRGaWxlKGZhbHNlKTtcbiAgICAgIH0sIF9yZWZyZXNoRHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBIYW5kbGUgcHJlLW1lcmdlIHVzZSBvZiBcInVybFwiIHNldHRpbmcgcHJvcGVydHlcbiAgICBfdXJsID0gKGRhdGEudXJsICYmIGRhdGEudXJsICE9PSBcIlwiKSA/IGRhdGEudXJsIDogZGF0YS5zZWxlY3Rvci51cmw7XG5cbiAgICBfZ2V0RmlsZSh0cnVlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlZpZGVvID0gUmlzZVZpc2lvbi5Db21tb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlZpZGVvLkZyYW1lQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFBSRUZJWCA9IFwiaWZfXCI7XG5cbiAgZnVuY3Rpb24gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUFJFRklYICsgaW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RnJhbWVPYmplY3QoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBpZnJhbWU7XG5cbiAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuXG4gICAgaWYgKGlmcmFtZSkge1xuICAgICAgcmV0dXJuIChpZnJhbWUuY29udGVudFdpbmRvdykgPyBpZnJhbWUuY29udGVudFdpbmRvdyA6XG4gICAgICAgIChpZnJhbWUuY29udGVudERvY3VtZW50LmRvY3VtZW50KSA/IGlmcmFtZS5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnQgOiBpZnJhbWUuY29udGVudERvY3VtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NsZWFyKGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgZnJhbWVPYmogPSBnZXRGcmFtZU9iamVjdChpbmRleCksXG4gICAgICBpZnJhbWU7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG4gICAgICBmcmFtZU9iai5yZW1vdmUoKTtcbiAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJhYm91dDpibGFua1wiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGQoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImFsbG93VHJhbnNwYXJlbmN5XCIsIHRydWUpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJmcmFtZWJvcmRlclwiLCBcIjBcIik7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNjcm9sbGluZ1wiLCBcIm5vXCIpO1xuXG4gICAgZnJhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUZyYW1lUGxheWVyKGluZGV4LCBwYXJhbXMsIGZpbGVzLCBza2luLCBzcmMpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBmcmFtZU9iaiA9IGdldEZyYW1lT2JqZWN0KGluZGV4KSxcbiAgICAgIGlmcmFtZTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgaWZyYW1lID0gZnJhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcblxuICAgICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9IG51bGw7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhbmQgbG9hZCB0aGUgcGxheWVyIGluc2lkZSB0aGUgaWZyYW1lXG4gICAgICAgIGZyYW1lT2JqLmluaXQocGFyYW1zLCBmaWxlcywgc2tpbik7XG4gICAgICAgIGZyYW1lT2JqLmxvYWQoKTtcbiAgICAgIH07XG5cbiAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgc3JjKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGUoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCk7XG5cbiAgICBmcmFtZUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZShpbmRleCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQUkVGSVggKyBpbmRleCk7XG5cbiAgICBfY2xlYXIoaW5kZXgpO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyByZW1vdmUgdGhlIGlmcmFtZSBieSBjbGVhcmluZyBhbGwgZWxlbWVudHMgaW5zaWRlIGRpdiBjb250YWluZXJcbiAgICAgIHdoaWxlIChmcmFtZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIGZyYW1lQ29udGFpbmVyLnJlbW92ZUNoaWxkKGZyYW1lQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9LCAyMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KTtcblxuICAgIGZyYW1lQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWRkOiBhZGQsXG4gICAgY3JlYXRlRnJhbWVQbGF5ZXI6IGNyZWF0ZUZyYW1lUGxheWVyLFxuICAgIGdldEZyYW1lQ29udGFpbmVyOiBnZXRGcmFtZUNvbnRhaW5lcixcbiAgICBnZXRGcmFtZU9iamVjdDogZ2V0RnJhbWVPYmplY3QsXG4gICAgaGlkZTogaGlkZSxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBzaG93OiBzaG93XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlID0gZnVuY3Rpb24gKG1haW5Db250YWluZXIsIG1lc3NhZ2VDb250YWluZXIpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hY3RpdmUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBfaW5pdCgpIHtcbiAgICB0cnkge1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDYW4ndCBpbml0aWFsaXplIE1lc3NhZ2UgLSBcIiwgZS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgaWYgKF9hY3RpdmUpIHtcbiAgICAgIC8vIGNsZWFyIGNvbnRlbnQgb2YgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIHdoaWxlIChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5yZW1vdmVDaGlsZChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvLyBoaWRlIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgLy8gc2hvdyBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgIF9hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzaG93KG1lc3NhZ2UpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBwO1xuXG4gICAgaWYgKCFfYWN0aXZlKSB7XG4gICAgICAvLyBoaWRlIG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBtZXNzYWdlIGVsZW1lbnRcbiAgICAgIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgIHAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtZXNzYWdlXCIpO1xuXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChwKTtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG4gICAgICBfYWN0aXZlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbWVzc2FnZSBhbHJlYWR5IGJlaW5nIHNob3duLCB1cGRhdGUgbWVzc2FnZSB0ZXh0XG4gICAgICBwID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLm1lc3NhZ2VcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgfVxuICB9XG5cbiAgX2luaXQoKTtcblxuICByZXR1cm4ge1xuICAgIFwiaGlkZVwiOiBoaWRlLFxuICAgIFwic2hvd1wiOiBzaG93XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cywgUmlzZVZpc2lvbiAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25maWd1cmUobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciBhZGRpdGlvbmFsUGFyYW1zID0gbnVsbCxcbiAgICAgIG1vZGUgPSBcIlwiLFxuICAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgIGRpc3BsYXlJZCA9IFwiXCI7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChuYW1lc1swXSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGlmICgobmFtZXNbMV0gIT09IFwidW5kZWZpbmVkXCIpICYmIChuYW1lc1sxXSA9PT0gXCJkaXNwbGF5SWRcIikpIHtcbiAgICAgICAgaWYgKHZhbHVlc1sxXSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IHZhbHVlc1sxXTtcbiAgICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMuc2V0SWRzKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcblxuICAgICAgaWYgKChuYW1lc1syXSAhPT0gXCJ1bmRlZmluZWRcIikgJiYgKG5hbWVzWzJdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikpIHtcbiAgICAgICAgaWYgKHZhbHVlc1syXSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGFkZGl0aW9uYWxQYXJhbXMgPSBKU09OLnBhcnNlKHZhbHVlc1syXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCFhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIGZvbGRlciB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZvbGRlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub24tc3RvcmFnZSBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJjb21wYW55SWRcIiwgXCJkaXNwbGF5SWRcIiwgXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0yJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
