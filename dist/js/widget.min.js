if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","https://storage-stage.risevision.com/rva-test/dist/storage-modal.html#/files/"))}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e,t){"use strict";function n(){t.rpc.call("","rsevent_done",null,l.getString("id"))}function i(){t.rpc.call("","rsevent_ready",null,l.getString("id"),!0,!0,!0,!0,!0)}function o(){p=new RiseVision.Video.Player(g),p.init()}function a(){p.pause()}function s(){p.isInitialPlay()?g.video.autoplay&&p.play():p.userPaused()||p.play()}function r(){i()}function d(n){l=new t.Prefs,g=n,e.getElementById("videoContainer").style.height=l.getInt("rsH")+"px",m=new RiseVision.Common.Background(g),m.init(o)}function u(){a()}function c(){n()}var l=null,g={},m=null,p=null;return{pause:a,play:s,setAdditionalParams:d,playerReady:r,stop:u,videoEnded:c}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){s=!0,a&&"function"==typeof a&&a()}function n(e){d.removeEventListener("rise-storage-response",n),r.style.backgroundImage=Array.isArray(e.detail)?"url("+e.detail[0]+")":"url("+e.detail+")",t()}function i(){r=document.getElementById("background"),d=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,r?e.background.useImage?(r.className=e.background.image.position,r.className=e.background.image.scale?r.className+" scale-to-fit":r.className,0===Object.keys(e.backgroundStorage).length?(r.style.backgroundImage="url("+e.background.image.url+")",t()):d?(d.addEventListener("rise-storage-response",n),d.setAttribute("folder",e.backgroundStorage.folder),d.setAttribute("fileName",e.backgroundStorage.fileName),d.setAttribute("companyId",e.backgroundStorage.companyId),d.go()):console.log("Missing element with id value of 'backgroundStorage'")):t():console.log("Missing element with id value of 'background'")}function o(e){s?e&&"function"==typeof e&&e():(e&&(a=e),i())}var a=null,s=!1,r=null,d=null;return{init:o}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.Player=function(e){"use strict";function t(){var t=e.url.substr(e.url.lastIndexOf(".")+1);return"ogv"===t&&(t="ogg"),t}function n(){m.style.visibility="visible",g.removeEventListener("loadeddata",n,!1)}function i(){RiseVision.Video.playerReady(),g.removeEventListener("canplay",i,!1)}function o(){f=!1,RiseVision.Video.videoEnded()}function a(){f=!v}function s(){p=!1,f=!1}function r(){return p}function d(){var r=document.getElementById("videoStorage"),d=document.createDocumentFragment(),u=d.appendChild(document.createElement("source")),c=document.createAttribute("src"),l=document.createAttribute("type");g.volume=e.video.volume/100,l.value="video/"+t(),u.setAttributeNode(l),g.addEventListener("loadeddata",n,!1),g.addEventListener("canplay",i,!1),g.addEventListener("ended",o,!1),g.addEventListener("pause",a,!1),g.addEventListener("play",s,!1),0===Object.keys(e.videoStorage).length?(c.value=e.url,u.setAttributeNode(c),g.appendChild(d)):(r.addEventListener("rise-storage-response",function(e){c.value=e.detail[0],u.setAttributeNode(c),g.appendChild(d)}),r.setAttribute("folder",e.videoStorage.folder),r.setAttribute("fileName",e.videoStorage.fileName),r.setAttribute("companyId",e.videoStorage.companyId),r.go())}function u(){v=!0,g.pause()}function c(){p=!1,v=!1,g.play()}function l(){return f}var g=document.getElementById("video"),m=document.getElementById("videoContainer"),p=!0,f=!1,v=!1;return{isInitialPlay:r,init:d,pause:u,play:c,userPaused:l}},function(e,t){"use strict";function n(){RiseVision.Video.play()}function i(){RiseVision.Video.pause()}function o(){RiseVision.Video.stop()}function a(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.Video.setAdditionalParams(JSON.parse(t[0]))}var s=new t.Prefs,r=s.getString("id");e.oncontextmenu=function(){return!1},r&&""!==r&&(t.rpc.register("rscmd_play_"+r,n),t.rpc.register("rscmd_pause_"+r,i),t.rpc.register("rscmd_stop_"+r,o),t.rpc.register("rsparam_set_"+r,a),t.rpc.call("","rsparam_get",null,r,["additionalParams"]))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiVmlkZW8iLCJkb2N1bWVudCIsImdhZGdldHMiLCJfZG9uZSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfcmVhZHkiLCJfYmFja2dyb3VuZFJlYWR5IiwiX3BsYXllciIsIlBsYXllciIsIl9hZGRpdGlvbmFsUGFyYW1zIiwiaW5pdCIsInBhdXNlIiwicGxheSIsImlzSW5pdGlhbFBsYXkiLCJ2aWRlbyIsImF1dG9wbGF5IiwidXNlclBhdXNlZCIsInBsYXllclJlYWR5Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsInBhcmFtcyIsIlByZWZzIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImhlaWdodCIsImdldEludCIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsInN0b3AiLCJ2aWRlb0VuZGVkIiwiZGF0YSIsIl9jYWxsYmFjayIsIl9zdG9yYWdlUmVzcG9uc2UiLCJlIiwiX3N0b3JhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYmFja2dyb3VuZEltYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwiZGV0YWlsIiwiX2NvbmZpZ3VyZSIsImJvZHkiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ1c2VJbWFnZSIsImNsYXNzTmFtZSIsImltYWdlIiwicG9zaXRpb24iLCJzY2FsZSIsIk9iamVjdCIsImtleXMiLCJiYWNrZ3JvdW5kU3RvcmFnZSIsImxlbmd0aCIsInVybCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRBdHRyaWJ1dGUiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImNvbXBhbnlJZCIsImdvIiwiY29uc29sZSIsImxvZyIsImNiIiwiX2dldFZpZGVvRmlsZVR5cGUiLCJ0eXBlIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJfb25Mb2FkZWREYXRhIiwiX3ZpZGVvQ29udGFpbmVyIiwidmlzaWJpbGl0eSIsIl92aWRlbyIsIl9vbkNhblBsYXkiLCJfb25FbmRlZCIsIl91c2VyUGF1c2VkIiwiX29uUGF1c2UiLCJfdmlld2VyUGF1c2VkIiwiX29uUGxheSIsIl9pbml0aWFsUGxheSIsInN0b3JhZ2UiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJzb3VyY2UiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJzcmNBdHRyIiwiY3JlYXRlQXR0cmlidXRlIiwidHlwZUF0dHIiLCJ2b2x1bWUiLCJzZXRBdHRyaWJ1dGVOb2RlIiwidmlkZW9TdG9yYWdlIiwid2luZG93IiwiYWRkaXRpb25hbFBhcmFtcyIsIm5hbWVzIiwidmFsdWVzIiwiSlNPTiIsInBhcnNlIiwicHJlZnMiLCJpZCIsIm9uY29udGV4dG1lbnUiLCJyZWdpc3RlciIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJhc3luYyIsInNyYyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFFQSxHQUFzQixtQkFBWEEsUUFBd0IsQ0FDakMsR0FBSUEsVUFJbUIsb0JBQVpDLFdBQ1RBLFFBQVFDLE9BQU8sb0NBQ1pDLFNBQVMsaUJBQWtCLHVEQUMzQkEsU0FBUyxnQkFBaUIsU0FFN0JGLFFBQVFDLE9BQU8sb0RBQ1pFLE1BQU0sZ0JBQWlCLGtGQU05QixHQUFJQyxZQUFhQSxjQUNqQkEsWUFBV0MsU0FFWEQsV0FBV0MsTUFBUSxTQUFXQyxFQUFVQyxHQUN0QyxZQVVBLFNBQVNDLEtBQ1BELEVBQVFFLElBQUlDLEtBQUssR0FBSSxlQUFnQixLQUFNQyxFQUFPQyxVQUFVLE9BSTlELFFBQVNDLEtBQ1BOLEVBQVFFLElBQUlDLEtBQUssR0FBSSxnQkFBaUIsS0FBTUMsRUFBT0MsVUFBVSxPQUMzRCxHQUFNLEdBQU0sR0FBTSxHQUFNLEdBRzVCLFFBQVNFLEtBRVBDLEVBQVUsR0FB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QWUsS0FBTStGLEdBQUssdUJBSWhEUCxPQUFRM0YsUUFLWCxJQUFJcUcsTUFBT0EsUUFFWEEsTUFBS0MsTUFBTSxjQUFlLGtCQUMxQkQsS0FBS0MsTUFBTSxtQkFFWCxXQUNFLEdBQUlDLEdBQUt4RyxTQUFTcUYsY0FBYyxTQUFXbUIsR0FBR3RDLEtBQU8sa0JBQW1Cc0MsRUFBR0MsT0FBUSxFQUNuRkQsRUFBR0UsS0FBTyxVQUFZMUcsU0FBUzJHLFNBQVNDLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUk3RyxTQUFTOEcscUJBQXFCLFVBQVUsRUFBSUQsR0FBRUUsV0FBV0MsYUFBYVIsRUFBSUsiLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBjb25maWc6IHRydWUgKi9cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBjb25maWcgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICAvLyB2YXJpYWJsZXMgZ28gaGVyZVxuICB9O1xuXG4gIGlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImNvbXBvbmVudHMvcnYtY29tbW9uLWkxOG4vZGlzdC9sb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24uc3RvcmFnZS1zZWxlY3Rvci5jb25maWdcIilcbiAgICAgIC52YWx1ZShcIlNUT1JBR0VfTU9EQUxcIiwgXCJodHRwczovL3N0b3JhZ2Utc3RhZ2UucmlzZXZpc2lvbi5jb20vcnZhLXRlc3QvZGlzdC9zdG9yYWdlLW1vZGFsLmh0bWwjL2ZpbGVzL1wiKTtcbiAgfVxufVxuXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0ge307XG5cblJpc2VWaXNpb24uVmlkZW8gPSAoZnVuY3Rpb24gKGRvY3VtZW50LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfcHJlZnMgPSBudWxsLFxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0ge30sXG4gICAgX2JhY2tncm91bmQgPSBudWxsLFxuICAgIF9wbGF5ZXIgPSBudWxsO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9kb25lKCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X2RvbmVcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcbiAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFBsYXllciBpbnN0YW5jZVxuICAgIF9wbGF5ZXIgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXIoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgIF9wbGF5ZXIuaW5pdCgpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBfcGxheWVyLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIGlmIChfcGxheWVyLmlzSW5pdGlhbFBsYXkoKSkge1xuICAgICAgLy8gXCJhdXRvcGxheVwiIHdhcyBzZWxlY3RlZCBpbiBzZXR0aW5nc1xuICAgICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnZpZGVvLmF1dG9wbGF5KSB7XG4gICAgICAgIF9wbGF5ZXIucGxheSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIV9wbGF5ZXIudXNlclBhdXNlZCgpKSB7XG4gICAgICAgIF9wbGF5ZXIucGxheSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllclJlYWR5KCkge1xuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhwYXJhbXMpIHtcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gcGFyYW1zO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0NvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBCYWNrZ3JvdW5kIGluc3RhbmNlXG4gICAgX2JhY2tncm91bmQgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uQmFja2dyb3VuZChfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgX2JhY2tncm91bmQuaW5pdChfYmFja2dyb3VuZFJlYWR5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1Jpc2UtVmlzaW9uL3ZpZXdlci9pc3N1ZXMvMzBcbiAgICAvLyBIYXZlIHRvIGNhbGwgcGF1c2UoKSBkdWUgdG8gVmlld2VyIGlzc3VlXG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZpZGVvRW5kZWQoKSB7XG4gICAgX2RvbmUoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJwYXVzZVwiOiBwYXVzZSxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInNldEFkZGl0aW9uYWxQYXJhbXNcIjogc2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBcInBsYXllclJlYWR5XCI6IHBsYXllclJlYWR5LFxuICAgIFwic3RvcFwiOiBzdG9wLFxuICAgIFwidmlkZW9FbmRlZFwiOiB2aWRlb0VuZGVkXG4gIH07XG5cbn0pKGRvY3VtZW50LCBnYWRnZXRzKTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfY2FsbGJhY2sgPSBudWxsLFxuICAgIF9yZWFkeSA9IGZhbHNlLFxuICAgIF9iYWNrZ3JvdW5kID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGw7XG5cbiAgLypcbiAgICogUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfYmFja2dyb3VuZFJlYWR5KCkge1xuICAgIF9yZWFkeSA9IHRydWU7XG5cbiAgICBpZiAoX2NhbGxiYWNrICYmIHR5cGVvZiBfY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgX2NhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0b3JhZ2VSZXNwb25zZShlKSB7XG4gICAgX3N0b3JhZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBfc3RvcmFnZVJlc3BvbnNlKTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGUuZGV0YWlsKSkge1xuICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBlLmRldGFpbFswXSArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGUuZGV0YWlsICsgXCIpXCI7XG4gICAgfVxuICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb25maWd1cmUoKSB7XG4gICAgX2JhY2tncm91bmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRcIik7XG4gICAgX3N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRTdG9yYWdlXCIpO1xuXG4gICAgLy8gc2V0IHRoZSBkb2N1bWVudCBiYWNrZ3JvdW5kXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gZGF0YS5iYWNrZ3JvdW5kLmNvbG9yO1xuXG4gICAgaWYgKF9iYWNrZ3JvdW5kKSB7XG4gICAgICBpZiAoZGF0YS5iYWNrZ3JvdW5kLnVzZUltYWdlKSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS5wb3NpdGlvbjtcbiAgICAgICAgX2JhY2tncm91bmQuY2xhc3NOYW1lID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnNjYWxlID8gX2JhY2tncm91bmQuY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCJcbiAgICAgICAgICA6IF9iYWNrZ3JvdW5kLmNsYXNzTmFtZTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBkYXRhLmJhY2tncm91bmQuaW1hZ2UudXJsICsgXCIpXCI7XG4gICAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfc3RvcmFnZSkge1xuICAgICAgICAgICAgLy8gUmlzZSBTdG9yYWdlXG4gICAgICAgICAgICBfc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIF9zdG9yYWdlUmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5mb2xkZXIpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5maWxlTmFtZSk7XG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5jb21wYW55SWQpO1xuICAgICAgICAgICAgX3N0b3JhZ2UuZ28oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZFN0b3JhZ2UnXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk1pc3NpbmcgZWxlbWVudCB3aXRoIGlkIHZhbHVlIG9mICdiYWNrZ3JvdW5kJ1wiKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoY2IpIHtcbiAgICBpZiAoIV9yZWFkeSkge1xuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIF9jYWxsYmFjayA9IGNiO1xuICAgICAgfVxuXG4gICAgICBfY29uZmlndXJlKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlBsYXllciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvXCIpLFxuICAgIF92aWRlb0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIiksXG4gICAgX2luaXRpYWxQbGF5ID0gdHJ1ZSxcbiAgICBfdXNlclBhdXNlZCA9IGZhbHNlLFxuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAvKlxuICAgKiBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9nZXRWaWRlb0ZpbGVUeXBlKCkge1xuICAgIHZhciB0eXBlID0gZGF0YS51cmwuc3Vic3RyKGRhdGEudXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgaWYgKHR5cGUgPT09IFwib2d2XCIpIHtcbiAgICAgIHR5cGUgPSBcIm9nZ1wiO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uTG9hZGVkRGF0YSgpIHtcbiAgICAvLyBhdCBsZWFzZSAxc3QgZnJhbWUgb2YgdmlkZW8gaGFzIGxvYWRlZFxuICAgIF92aWRlb0NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgLy8gcmVtb3ZlIHRoaXMgbGlzdGVuZXJcbiAgICBfdmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZGRhdGFcIiwgX29uTG9hZGVkRGF0YSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uQ2FuUGxheSgpIHtcbiAgICAvLyBlbm91Z2ggZGF0YSBoYXMgbG9hZGVkIHRvIHNhZmVseSBwbGF5IHdpdGhvdXQgaW50ZXJydXB0aW9uXG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJSZWFkeSgpO1xuICAgIC8vIHJlbW92ZSB0aGlzIGxpc3RlbmVyXG4gICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsIF9vbkNhblBsYXksIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vbkVuZGVkKCkge1xuICAgIC8vIGEgXCJwYXVzZVwiIGV2ZW50IGlzIGFsd2F5cyBmaXJlZCBiZWZvcmUgXCJlbmRlZFwiIGV2ZW50LCBlbnN1cmUgX3VzZXJQYXVzZWQgaXMgZmFsc2VcbiAgICBfdXNlclBhdXNlZCA9IGZhbHNlO1xuICAgIC8vIHZpZGVvIGVuZGVkXG4gICAgUmlzZVZpc2lvbi5WaWRlby52aWRlb0VuZGVkKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfb25QYXVzZSgpIHtcbiAgICAvLyB0aGlzIGhhbmRsZXIgYWxzbyBnZXRzIGNhbGxlZCB2aWEgcHVibGljIFwicGF1c2UoKVwiIGZ1bmN0aW9uLCBvbmx5IHNldCBcIl91c2VyUGF1c2VkID0gdHJ1ZVwiIGlmIG5vdCB0aGUgY2FzZVxuICAgIF91c2VyUGF1c2VkID0gIV92aWV3ZXJQYXVzZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBfb25QbGF5KCkge1xuICAgIF9pbml0aWFsUGxheSA9IGZhbHNlO1xuICAgIF91c2VyUGF1c2VkID0gZmFsc2U7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGlzSW5pdGlhbFBsYXkoKSB7XG4gICAgcmV0dXJuIF9pbml0aWFsUGxheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKSxcbiAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgc291cmNlID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNvdXJjZVwiKSksXG4gICAgICBzcmNBdHRyID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwic3JjXCIpLFxuICAgICAgdHlwZUF0dHIgPSBkb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXG4gICAgLy8gc2V0IGluaXRpYWwgdm9sdW1lIG9uIDx2aWRlbz5cbiAgICBfdmlkZW8udm9sdW1lID0gZGF0YS52aWRlby52b2x1bWUgLyAxMDA7XG5cbiAgICAvLyBzZXQgdGhlIFwidHlwZVwiIGF0dHJpYnV0ZSBvbiA8c291cmNlPlxuICAgIHR5cGVBdHRyLnZhbHVlID0gXCJ2aWRlby9cIiArIF9nZXRWaWRlb0ZpbGVUeXBlKCk7XG4gICAgc291cmNlLnNldEF0dHJpYnV0ZU5vZGUodHlwZUF0dHIpO1xuXG4gICAgLy8gdmlkZW8gZXZlbnRzXG4gICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZWRkYXRhXCIsIF9vbkxvYWRlZERhdGEsIGZhbHNlKTtcbiAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIiwgX29uQ2FuUGxheSwgZmFsc2UpO1xuICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwgX29uRW5kZWQsIGZhbHNlKTtcbiAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsIF9vblBhdXNlLCBmYWxzZSk7XG4gICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5XCIsIF9vblBsYXksIGZhbHNlKTtcblxuICAgIGlmIChPYmplY3Qua2V5cyhkYXRhLnZpZGVvU3RvcmFnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBOb24gc3RvcmFnZSBVUkxcbiAgICAgIHNyY0F0dHIudmFsdWUgPSBkYXRhLnVybDtcbiAgICAgIHNvdXJjZS5zZXRBdHRyaWJ1dGVOb2RlKHNyY0F0dHIpO1xuICAgICAgX3ZpZGVvLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSaXNlIFN0b3JhZ2VcbiAgICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBzcmNBdHRyLnZhbHVlID0gZS5kZXRhaWxbMF07XG4gICAgICAgIHNvdXJjZS5zZXRBdHRyaWJ1dGVOb2RlKHNyY0F0dHIpO1xuICAgICAgICBfdmlkZW8uYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgICAgfSk7XG5cbiAgICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEudmlkZW9TdG9yYWdlLmZvbGRlcik7XG4gICAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEudmlkZW9TdG9yYWdlLmZpbGVOYW1lKTtcbiAgICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEudmlkZW9TdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgICBzdG9yYWdlLmdvKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG4gICAgX3ZpZGVvLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIF9pbml0aWFsUGxheSA9IGZhbHNlO1xuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcbiAgICBfdmlkZW8ucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXNlclBhdXNlZCgpIHtcbiAgICByZXR1cm4gX3VzZXJQYXVzZWQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaXNJbml0aWFsUGxheVwiOiBpc0luaXRpYWxQbGF5LFxuICAgIFwiaW5pdFwiOiBpbml0LFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJ1c2VyUGF1c2VkXCI6IHVzZXJQYXVzZWRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBSaXNlVmlzaW9uICovXG5cbihmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaWQgPSBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICAvLyBEaXNhYmxlIGNvbnRleHQgbWVudSAocmlnaHQgY2xpY2sgbWVudSlcbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8uc3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkaXRpb25hbFBhcmFtcyhuYW1lcywgdmFsdWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2V0QWRkaXRpb25hbFBhcmFtcyhKU09OLnBhcnNlKHZhbHVlc1swXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG5cbiAgfVxuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0yJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==