var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(e){"use strict";function t(e,t){Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(u=t[0]),"displayId"===e[1]&&(d=t[1]?t[1]:"preview"),c(u,d))}function i(e,t){var i=null;e.event?(i={},i.event=e.event,e.event_details&&(i.event_details=e.event_details),e.file_url&&(i.file_url=e.file_url,i.file_format=o(e.file_url)),n(function(e,n){i.company_id=e,i.display_id=n,t(i)})):t(i)}function n(i){i&&"function"==typeof i&&(c=i,u&&d?c(u,d):l&&""!==l&&(e.rpc.register("rsparam_set_"+l,t),e.rpc.call("","rsparam_get",null,l,["companyId","displayId"])))}function o(e){var t,i=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),i.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function r(e){var t=JSON.parse(JSON.stringify(f));return t.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),t.rows[0].json=JSON.parse(JSON.stringify(e)),t.rows[0].json.ts=(new Date).toISOString(),t}function s(e){var t=new Date,i=t.getUTCFullYear(),n=t.getUTCMonth()+1,o=t.getUTCDate();return 10>n&&(n="0"+n),10>o&&(o="0"+o),e+i+n+o}function a(e,t){i(t,function(t){null!==t&&RiseVision.Common.Logger.log(e,t)})}var l=(new e.Prefs).getString("id"),d="",u="",c=null,f={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:""}]};return{getIds:n,getInsertData:r,getFileFormat:o,getTable:s,logEvent:a}}(gadgets),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-d<358e4?e({}):(t.open("POST",o,!0),t.onloadend=function(){var i=JSON.parse(t.response);e({token:i.access_token,refreshedAt:new Date})},t.send(),void 0)}function i(e){return s&&l===e}function n(n,o){function c(t){var i,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",e.getTable(n)),d=t.refreshedAt||d,u=t.token||u,i=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(i))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&i(o.event)))return s=!0,l=o.event,setTimeout(function(){s=!1},a),t(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};if(RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var t=new XMLHttpRequest;e&&"function"==typeof e&&(t.open("GET",i+"ping?callback=_",!0),t.onreadystatechange=function(){try{4===t.readyState&&(n=!0,200===t.status?(o=!0,e(!0,t.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(i){console.debug("Caught exception: ",i.description)}},t.send())}function t(e,t,r){function s(t){var n,o,s;t?n=r?i+"?url="+encodeURIComponent(e):i+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?n=e:(o=e.split("?"),s=1===o.length?"?":"&",n=e+s+"cb="+(new Date).getTime()),a("HEAD",n)}function a(e,i){var n=new XMLHttpRequest,r={xhr:n,url:i};n.open(e,i,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?t(r):"HEAD"===e?a("GET",i):o?t(r,new Error("The request failed with status code: "+s)):t(r)}),n.send()}if(e&&t&&"function"==typeof t)return n?s(o):this.ping(s)}var i="http://localhost:9494/",n=!1,o=!1;return{getFile:t,ping:e}}(),"undefined"==typeof config){var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function t(){e.rpc.call("","rsevent_done",null,w.getString("id")),null!==F&&u(F,!0),u({event:"done"},!1)}function i(){e.rpc.call("","rsevent_ready",null,w.getString("id"),!0,!0,!0,!0,!0)}function n(){clearTimeout(N),N=null}function o(){n(),N=setTimeout(function(){t()},5e3)}function r(){var e=I.getFrameObject(L);return e?e.getPlaybackData():null}function s(){var e=null;if(A&&A.length>0){if("file"===E)return A[0];if("folder"===E&&(e=r()))return A[e.index]}return null}function a(e,t){var i={},n=RiseVision.Common.LoggerUtils,o=null;e.event&&(i.event=e.event),e.event_details&&(i.event_details=e.event_details),o=e.url?e.url:s(),i.file_url=o,i.file_format=n.getFileFormat(o),n.getIds(function(e,n){i.company_id=e,i.display_id=n,t(i)})}function l(){return G}function d(e,t){D=!0,G="undefined"!=typeof t,T.show(e),I.remove(L,function(){O||o()})}function u(e,t){t&&(F=e),a(e,function(e){q.log("video_events",e)})}function c(e){"file"===E?A[0]=e:"folder"===E&&(A=e),T.hide(),O||m()}function f(e){"file"===E?A[0]=e:"folder"===E&&(A=e),D=!1,G=!1,F=null}function g(){var e=I.getFrameObject(L);O=!0,n(),e&&(S?e.pause():I.remove(L))}function m(){var e=I.getFrameObject(L);return O=!1,u({event:"play"},!1),D?(o(),void 0):(e?e.play():A&&A.length>0&&("file"===E?(I.add(0),I.createFramePlayer(0,y,A[0],config.SKIN,"player-file.html")):"folder"===E&&(I.add(0),I.createFramePlayer(0,y,A,config.SKIN,"player-folder.html"))),void 0)}function v(){I.remove(L,function(){t()})}function p(){var e;T.hide(),O||(e=I.getFrameObject(L),e&&e.play())}function h(t,n){var o,r={},s=null;y=_.clone(t),E=n,w=new e.Prefs,document.getElementById("videoContainer").style.height=w.getInt("rsH")+"px",y.width=w.getInt("rsW"),y.height=w.getInt("rsH"),y.video.hasOwnProperty("resume")&&(S=y.video.resume),T=new RiseVision.Common.Message(document.getElementById("videoContainer"),document.getElementById("messageContainer")),T.show("Please wait while your video is downloaded."),I=new RiseVision.Common.Video.FrameController,"file"===E?(o=0!==Object.keys(y.storage).length,o?(s="storage file",C=new RiseVision.Video.StorageFile(y),C.init()):(s="custom",b=new RiseVision.Video.NonStorage(y),b.init())):"folder"===E&&(s="storage folder",C=new RiseVision.Video.StorageFolder(y),C.init()),r.event="configuration",r.event_details=s,u(r,!1),i()}function V(e){var t=null,i={},n="Sorry, there was a problem playing the video.",o="Error loading media: File could not be played",r="Error loading YouTube: Video could not be played",s="Error loading player: No playable sources found",a="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.",l="The format of that video is not supported";e&&(e.type&&e.message?t=e.type+" - "+e.message:e.type?t=e.type:e.message&&(t=e.message),e.message&&(e.message===o||e.message===r?n=a:e.message===s&&(n=l))),i.event="player error",i.event_details=t,u(i,!0),d(n)}function R(){g()}var y,E,w=null,C=null,b=null,T=null,I=null,O=!0,S=!0,L=0,A=[],F=null,N=null,D=!1,G=!1,q=RiseVision.Common.Logger;return{hasStorageError:l,logEvent:u,onFileInit:c,onFileRefresh:f,pause:g,play:m,setAdditionalParams:h,showError:d,playerEnded:v,playerReady:p,playerError:V,stop:R}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function t(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(i?(i=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Video.onFileRefresh(e.detail.url):RiseVision.Video.hasStorageError()&&RiseVision.Video.onFileRefresh(e.detail.url)))}),t.addEventListener("rise-storage-no-file",function(e){var t={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-file-throttled",function(e){var t={event:"storage file throttled",url:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),t.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("There was a problem retrieving the file from Rise Cache.")}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go())}var i=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function t(){return _.pluck(l,"url")}function i(e){return _.find(l,function(t){return e.name===t.name})}function n(e){var t=i(e);t&&l.splice(l.indexOf(t),1)}function o(e){var t=i(e);t&&(t.url=e.url)}function r(e){var t=i(e);t||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function s(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){var i=e.detail;if(i.added&&(r(i),a))return a=!1,RiseVision.Video.onFileInit(t()),void 0;if(i.hasOwnProperty("changed"))if(i.changed)o(i);else if(!RiseVision.Video.hasStorageError())return;i.deleted&&n(i),RiseVision.Video.onFileRefresh(t())}),i.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),i.addEventListener("rise-storage-no-folder",function(e){var t={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected folder does not exist or has been moved to Trash.")}),i.addEventListener("rise-storage-folder-invalid",function(){var e={event:"storage folder format(s) invalid"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any supported video formats.")}),i.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),i.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("There was a problem retrieving the file from Rise Cache.")}),i.setAttribute("fileType","video"),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("folder",e.storage.folder),i.setAttribute("env",config.STORAGE_ENV),i.go())}var a=!0,l=[];return{init:s}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function t(e){o.getFile(l,function(e,t){t?(RiseVision.Video.logEvent({event:"non-storage error",event_details:t.message,url:e.url},!0),RiseVision.Video.showError("There was a problem retrieving the file from Rise Cache.")):a?(a=!1,RiseVision.Video.onFileInit(e.url),i()):RiseVision.Video.onFileRefresh(e.url)},e)}function i(){null===s&&(s=setInterval(function(){t(!1)},r))}function n(){l=e.url&&""!==e.url?e.url:e.selector.url,t(!0)}var o=RiseVision.Common.RiseCache,r=9e5,s=null,a=!0,l="";return{init:n}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function t(t){var i,n=e(t);return i=n.querySelector("iframe"),i?i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument:null}function i(i){var n,o=e(i),r=t(i);r&&(n=o.querySelector("iframe"),r.remove(),n.setAttribute("src","about:blank"))}function n(t){var i=e(t),n=document.createElement("iframe");n.setAttribute("allowTransparency",!0),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),i.appendChild(n)}function o(i,n,o,r,s){var a,l=e(i),d=t(i);d&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,d.init(n,o,r),d.load()},a.setAttribute("src",s))}function r(t){var i=e(t);i.style.visibility="hidden"}function s(e,t){var n=document.getElementById(l+e);i(e),setTimeout(function(){for(;n.firstChild;)n.removeChild(n.firstChild);t&&"function"==typeof t&&t()},200)}function a(t){var i=e(t);i.style.visibility="visible"}var l="if_";return{add:n,createFramePlayer:o,getFrameContainer:e,getFrameObject:t,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function i(){try{t.style.height=e.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function o(i){var n,o=document.createDocumentFragment();r?(n=t.querySelector(".message"),n.innerHTML=i):(e.style.visibility="hidden",t.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),o.appendChild(n),t.appendChild(o),r=!0)}var r=!1;return i(),{hide:n,show:o}},function(e,t){"use strict";function i(e,t){var i,n;Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&(i=JSON.parse(t[0]),n=0!==Object.keys(i.storage).length?i.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(i,n))}function n(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function r(){RiseVision.Video.stop()}function s(){e.removeEventListener("WebComponentsReady",s),l&&""!==l&&(t.rpc.register("rscmd_play_"+l,n),t.rpc.register("rscmd_pause_"+l,o),t.rpc.register("rscmd_stop_"+l,r),t.rpc.register("rsparam_set_"+l,i),t.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var a=new t.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",s)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdhZGdldHMiLCJzZXRJZHMiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhbnlJZCIsImRpc3BsYXlJZCIsImNhbGxiYWNrIiwiZ2V0RXZlbnRQYXJhbXMiLCJwYXJhbXMiLCJjYiIsImpzb24iLCJldmVudCIsImV2ZW50X2RldGFpbHMiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImdldElkcyIsImNvbXBhbnlfaWQiLCJkaXNwbGF5X2lkIiwiaWQiLCJycGMiLCJyZWdpc3RlciIsImNhbGwiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInRlc3QiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJnZXRJbnNlcnREYXRhIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsInJvd3MiLCJpbnNlcnRJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRUYWJsZSIsIm5hbWUiLCJkYXRlIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwibW9udGgiLCJnZXRVVENNb250aCIsImRheSIsImdldFVUQ0RhdGUiLCJsb2dFdmVudCIsInRhYmxlIiwiTG9nZ2VyIiwibG9nIiwiUHJlZnMiLCJnZXRTdHJpbmciLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiciIsIkJBU0VfQ0FDSEVfVVJMIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIl9waW5nUmVjZWl2ZWQiLCJzdGF0dXMiLCJfaXNDYWNoZVJ1bm5pbmciLCJyZXNwb25zZVRleHQiLCJjb25zb2xlIiwiZGVidWciLCJlIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsImlzQ2FjaGVSdW5uaW5nIiwic2VwYXJhdG9yIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0VGltZSIsInNwbGl0IiwibWFrZVJlcXVlc3QiLCJtZXRob2QiLCJyZXF1ZXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkVycm9yIiwidGhpcyIsImNvbmZpZyIsIlNLSU4iLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJWaWRlbyIsIl9kb25lIiwiX3ByZWZzIiwiX2Vycm9yTG9nIiwiX3JlYWR5IiwiX2NsZWFyRXJyb3JUaW1lciIsImNsZWFyVGltZW91dCIsIl9lcnJvclRpbWVyIiwiX3N0YXJ0RXJyb3JUaW1lciIsIl9nZXRDdXJyZW50RmlsZURhdGEiLCJmcmFtZU9iaiIsIl9mcmFtZUNvbnRyb2xsZXIiLCJnZXRGcmFtZU9iamVjdCIsIl9jdXJyZW50RnJhbWUiLCJnZXRQbGF5YmFja0RhdGEiLCJfZ2V0Q3VycmVudEZpbGUiLCJmaWxlRGF0YSIsIl9jdXJyZW50RmlsZXMiLCJfbW9kZSIsImluZGV4IiwiX2dldExvZ2dlclBhcmFtcyIsImhhc1N0b3JhZ2VFcnJvciIsIl9zdG9yYWdlRXJyb3JGbGFnIiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImlzU3RvcmFnZUVycm9yIiwiX2Vycm9yRmxhZyIsIl9tZXNzYWdlIiwic2hvdyIsInJlbW92ZSIsIl92aWV3ZXJQYXVzZWQiLCJpc0Vycm9yIiwiX2xvZ2dlciIsIm9uRmlsZUluaXQiLCJ1cmxzIiwiaGlkZSIsInBsYXkiLCJvbkZpbGVSZWZyZXNoIiwicGF1c2UiLCJfcmVzdW1lIiwiYWRkIiwiY3JlYXRlRnJhbWVQbGF5ZXIiLCJfYWRkaXRpb25hbFBhcmFtcyIsInBsYXllckVuZGVkIiwicGxheWVyUmVhZHkiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwibW9kZSIsImlzU3RvcmFnZUZpbGUiLCJsb2dQYXJhbXMiLCJkZXRhaWxzIiwiXyIsImNsb25lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiaGVpZ2h0IiwiZ2V0SW50Iiwid2lkdGgiLCJ2aWRlbyIsInJlc3VtZSIsIk1lc3NhZ2UiLCJGcmFtZUNvbnRyb2xsZXIiLCJPYmplY3QiLCJrZXlzIiwic3RvcmFnZSIsIl9zdG9yYWdlIiwiU3RvcmFnZUZpbGUiLCJpbml0IiwiX25vblN0b3JhZ2UiLCJOb25TdG9yYWdlIiwiU3RvcmFnZUZvbGRlciIsInBsYXllckVycm9yIiwiZXJyb3IiLCJNRURJQV9FUlJPUiIsIllPVVRVQkVfRVJST1IiLCJQTEFZRVJfRVJST1IiLCJFTkNPRElOR19NRVNTQUdFIiwiRk9STUFUX01FU1NBR0UiLCJ0eXBlIiwic3RvcCIsImRldGFpbCIsIl9pbml0aWFsTG9hZCIsImNoYW5nZWQiLCJjdXJyZW50VGFyZ2V0Iiwic2V0QXR0cmlidXRlIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJnbyIsIl9nZXRVcmxzIiwicGx1Y2siLCJfZmlsZXMiLCJfZ2V0RXhpc3RpbmdGaWxlIiwiZmlsZSIsImZpbmQiLCJmIiwiX2RlbGV0ZUZpbGUiLCJleGlzdGluZyIsInNwbGljZSIsIl9jaGFuZ2VGaWxlIiwiX2FkZEZpbGUiLCJzbGljZSIsInNvcnRlZEluZGV4IiwiYWRkZWQiLCJkZWxldGVkIiwiX2dldEZpbGUiLCJvbWl0Q2FjaGVCdXN0ZXIiLCJyaXNlQ2FjaGUiLCJfdXJsIiwiX2lzTG9hZGluZyIsIl9zdGFydFJlZnJlc2hJbnRlcnZhbCIsIl9yZWZyZXNoSW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3JlZnJlc2hEdXJhdGlvbiIsInNlbGVjdG9yIiwiZ2V0RnJhbWVDb250YWluZXIiLCJQUkVGSVgiLCJpZnJhbWUiLCJmcmFtZUNvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50V2luZG93IiwiY29udGVudERvY3VtZW50IiwiX2NsZWFyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZmlsZXMiLCJza2luIiwic3JjIiwib25sb2FkIiwibG9hZCIsInZpc2liaWxpdHkiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJtYWluQ29udGFpbmVyIiwibWVzc2FnZUNvbnRhaW5lciIsIl9pbml0Iiwid2FybiIsIl9hY3RpdmUiLCJkaXNwbGF5IiwicCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImlubmVySFRNTCIsIndpbmRvdyIsImNvbmZpZ3VyZSIsImFkZGl0aW9uYWxQYXJhbXMiLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJlZnMiLCJvbmNvbnRleHRtZW51IiwiX2dhcSIsInB1c2giLCJnYSIsImFzeW5jIiwibG9jYXRpb24iLCJwcm90b2NvbCIsInMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGlu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QyxFQUFLNlAsRUFBTXBOLFVBQVUsS0FHdkIrTSxHQUFPTSxjQUFnQixXQUNyQixPQUFPLEdBc0RUTixFQUFPdEosaUJBQWlCLHFCQUFzQnlKLElBRTdDSCxPQUFROVEsUUFLWCxJQUFJcVIsTUFBT0EsUUFFWEEsTUFBS0MsTUFBTSxjQUFlLGtCQUMxQkQsS0FBS0MsTUFBTSxtQkFFWCxXQUNFLEdBQUlDLEdBQUtuRyxTQUFTc0UsY0FBYyxTQUFXNkIsR0FBR3pFLEtBQU8sa0JBQW1CeUUsRUFBR0MsT0FBUSxFQUNuRkQsRUFBR3pCLEtBQU8sVUFBWTFFLFNBQVNxRyxTQUFTQyxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJdkcsU0FBU3dHLHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFQLEVBQUlJIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgV0lER0VUX0NPTU1PTl9DT05GSUcgPSB7XG4gIEFVVEhfUEFUSF9VUkw6IFwidjEvd2lkZ2V0L2F1dGhcIixcbiAgTE9HR0VSX0NMSUVOVF9JRDogXCIxMDg4NTI3MTQ3MTA5LTZxMW8ydnRpaG4zNDI5MnBqdDRja2htaGNrMHJrMG83LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXG4gIExPR0dFUl9DTElFTlRfU0VDUkVUOiBcIm5sWnlyY1BMZzZvRXdPOWY5V2ZuMjlXaFwiLFxuICBMT0dHRVJfUkVGUkVTSF9UT0tFTjogXCIxL3h6dDRrd3pFMUg3VzlWbktCOGNBYUN4NnpiNEVzNG5LRW9xYVlIZFREMTVJZ09ySkR0ZHVuNnpLNlhpQVRDS1RcIixcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzID0gKGZ1bmN0aW9uKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgZGlzcGxheUlkID0gXCJcIixcbiAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgIGNhbGxiYWNrID0gbnVsbDtcblxuICB2YXIgQkFTRV9JTlNFUlRfU0NIRU1BID1cbiAge1xuICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICBcInNraXBJbnZhbGlkUm93c1wiOiBmYWxzZSxcbiAgICBcImlnbm9yZVVua25vd25WYWx1ZXNcIjogZmFsc2UsXG4gICAgXCJyb3dzXCI6IFt7XG4gICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICB9XVxuICB9O1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogU2V0IHRoZSBDb21wYW55IGFuZCBEaXNwbGF5IElEcy4gKi9cbiAgZnVuY3Rpb24gc2V0SWRzKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAobmFtZXNbMF0gPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZXNbMV0gPT09IFwiZGlzcGxheUlkXCIpIHtcbiAgICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIFJldHJpZXZlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLiAqL1xuICBmdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGNiKSB7XG4gICAgdmFyIGpzb24gPSBudWxsO1xuXG4gICAgLy8gZXZlbnQgaXMgcmVxdWlyZWQuXG4gICAgaWYgKHBhcmFtcy5ldmVudCkge1xuICAgICAganNvbiA9IHt9O1xuICAgICAganNvbi5ldmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgICAgaWYgKHBhcmFtcy5ldmVudF9kZXRhaWxzKSB7XG4gICAgICAgIGpzb24uZXZlbnRfZGV0YWlscyA9IHBhcmFtcy5ldmVudF9kZXRhaWxzO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLmZpbGVfdXJsKSB7XG4gICAgICAgIGpzb24uZmlsZV91cmwgPSBwYXJhbXMuZmlsZV91cmw7XG4gICAgICAgIGpzb24uZmlsZV9mb3JtYXQgPSBnZXRGaWxlRm9ybWF0KHBhcmFtcy5maWxlX3VybCk7XG4gICAgICB9XG5cbiAgICAgIGdldElkcyhmdW5jdGlvbihjb21wYW55SWQsIGRpc3BsYXlJZCkge1xuICAgICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICAgIGpzb24uZGlzcGxheV9pZCA9IGRpc3BsYXlJZDtcblxuICAgICAgICBjYihqc29uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SWRzKGNiKSB7XG4gICAgaWYgKCFjYiB8fCB0eXBlb2YgY2IgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNhbGxiYWNrID0gY2I7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhbnlJZCAmJiBkaXNwbGF5SWQpIHtcbiAgICAgIGNhbGxiYWNrKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBzZXRJZHMpO1xuICAgICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImNvbXBhbnlJZFwiLCBcImRpc3BsYXlJZFwiXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEJBU0VfSU5TRVJUX1NDSEVNQSkpO1xuXG4gICAgZGF0YS5yb3dzWzBdLmluc2VydElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLnRvVXBwZXJDYXNlKCk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGRhdGEucm93c1swXS5qc29uLnRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZShuYW1lKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lICsgeWVhciArIG1vbnRoICsgZGF5O1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SWRzXCI6IGdldElkcyxcbiAgICBcImdldEluc2VydERhdGFcIjogZ2V0SW5zZXJ0RGF0YSxcbiAgICBcImdldEZpbGVGb3JtYXRcIjogZ2V0RmlsZUZvcm1hdCxcbiAgICBcImdldFRhYmxlXCI6IGdldFRhYmxlLFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnRcbiAgfTtcbn0pKGdhZGdldHMpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHV0aWxzLmdldFRhYmxlKHRhYmxlTmFtZSkpO1xuICAgICAgcmVmcmVzaERhdGUgPSByZWZyZXNoRGF0YS5yZWZyZXNoZWRBdCB8fCByZWZyZXNoRGF0ZTtcbiAgICAgIHRva2VuID0gcmVmcmVzaERhdGEudG9rZW4gfHwgdG9rZW47XG4gICAgICBpbnNlcnREYXRhID0gdXRpbHMuZ2V0SW5zZXJ0RGF0YShwYXJhbXMpO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGRhdGEuXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHRva2VuKTtcblxuICAgICAgaWYgKHBhcmFtcy5jYiAmJiB0eXBlb2YgcGFyYW1zLmNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBhcmFtcy5jYih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShpbnNlcnREYXRhKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZnJlc2hUb2tlbihpbnNlcnRXaXRoVG9rZW4pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ1wiOiBsb2dcbiAgfTtcbn0pKFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzKTtcbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZSA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBCQVNFX0NBQ0hFX1VSTCA9IFwiaHR0cDovL2xvY2FsaG9zdDo5NDk0L1wiO1xuXG4gIHZhciBfcGluZ1JlY2VpdmVkID0gZmFsc2UsXG4gICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gcGluZyhjYWxsYmFjaykge1xuICAgIHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgci5vcGVuKFwiR0VUXCIsIEJBU0VfQ0FDSEVfVVJMICsgXCJwaW5nP2NhbGxiYWNrPV9cIiwgdHJ1ZSk7XG4gICAgci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgIC8vIHNhdmUgdGhpcyByZXN1bHQgZm9yIHVzZSBpbiBnZXRGaWxlKClcbiAgICAgICAgICBfcGluZ1JlY2VpdmVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmKHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZ1wiKTtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiQ2F1Z2h0IGV4Y2VwdGlvbjogXCIsIGUuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgfTtcbiAgICByLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGUoZmlsZVVybCwgY2FsbGJhY2ssIG5vY2FjaGVidXN0ZXIpIHtcbiAgICBpZiAoIWZpbGVVcmwgfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgIHZhciB1cmwsIHN0ciwgc2VwYXJhdG9yO1xuXG4gICAgICBpZiAoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIHVybCB3aXRoIGNhY2hlYnVzdGVyIG9yIG5vdFxuICAgICAgICB1cmwgPSAobm9jYWNoZWJ1c3RlcikgPyBCQVNFX0NBQ0hFX1VSTCArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKSA6XG4gICAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgIGlmIChzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNlcnZlciBtYXkgbm90IHN1cHBvcnQgSEVBRCByZXF1ZXN0LiBGYWxsYmFjayB0byBhIEdFVCByZXF1ZXN0LlxuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QsIG5ldyBFcnJvcihcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIHN0YXR1cykpO1xuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRvIGF2b2lkIHRocm93aW5nIGFuIGVycm9yIHdoZW4gdGhlcmUgaXMgYSBjcm9zcyBkb21haW4gaXNzdWVcbiAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG5cbiAgICBpZiAoIV9waW5nUmVjZWl2ZWQpIHtcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHJldHVybiB0aGlzLnBpbmcoZmlsZVJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsZVJlcXVlc3QoX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBwaW5nOiBwaW5nXG4gIH07XG5cbn0pKCk7XG5cbi8qIGdsb2JhbCBjb25maWc6IHRydWUgKi9cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBjb25maWcgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBTS0lOOiBcInNraW4vUlZTa2luLnhtbFwiLFxuICAgIFNUT1JBR0VfRU5WOiBcInByb2RcIlxuICB9O1xuXG4gIGlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG4gIH1cbn1cblxuLyogZ2xvYmFsIGdhZGdldHMsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0ge307XG5cblJpc2VWaXNpb24uVmlkZW8gPSAoZnVuY3Rpb24gKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hZGRpdGlvbmFsUGFyYW1zLCBfbW9kZTtcblxuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGwsXG4gICAgX25vblN0b3JhZ2UgPSBudWxsLFxuICAgIF9tZXNzYWdlID0gbnVsbCxcbiAgICBfZnJhbWVDb250cm9sbGVyID0gbnVsbDtcblxuICB2YXIgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgdmFyIF9yZXN1bWUgPSB0cnVlO1xuXG4gIHZhciBfY3VycmVudEZyYW1lID0gMDtcblxuICB2YXIgX2N1cnJlbnRGaWxlcyA9IFtdO1xuXG4gIHZhciBfZXJyb3JMb2cgPSBudWxsLFxuICAgIF9lcnJvclRpbWVyID0gbnVsbCxcbiAgICBfZXJyb3JGbGFnID0gZmFsc2U7XG5cbiAgdmFyIF9zdG9yYWdlRXJyb3JGbGFnID0gZmFsc2U7XG5cbiAgdmFyIF9sb2dnZXIgPSBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX2RvbmUoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfZG9uZVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIikpO1xuXG4gICAgLy8gQW55IGVycm9ycyBuZWVkIHRvIGJlIGxvZ2dlZCBiZWZvcmUgdGhlIGRvbmUgZXZlbnQuXG4gICAgaWYgKF9lcnJvckxvZyAhPT0gbnVsbCkge1xuICAgICAgbG9nRXZlbnQoX2Vycm9yTG9nLCB0cnVlKTtcbiAgICB9XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJkb25lXCIgfSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NsZWFyRXJyb3JUaW1lcigpIHtcbiAgICBjbGVhclRpbWVvdXQoX2Vycm9yVGltZXIpO1xuICAgIF9lcnJvclRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydEVycm9yVGltZXIoKSB7XG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgX2Vycm9yVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG5vdGlmeSBWaWV3ZXIgd2lkZ2V0IGlzIGRvbmVcbiAgICAgIF9kb25lKCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q3VycmVudEZpbGVEYXRhKCkge1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIHJldHVybiBmcmFtZU9iai5nZXRQbGF5YmFja0RhdGEoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZSgpIHtcbiAgICB2YXIgZmlsZURhdGEgPSBudWxsO1xuXG4gICAgaWYgKF9jdXJyZW50RmlsZXMgJiYgX2N1cnJlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIHJldHVybiBfY3VycmVudEZpbGVzWzBdO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgICAgLy8gcmV0cmlldmUgdGhlIGN1cnJlbnRseSBwbGF5ZWQgZmlsZSBpbmZvIGZyb20gcGxheWVyXG4gICAgICAgIGZpbGVEYXRhID0gX2dldEN1cnJlbnRGaWxlRGF0YSgpO1xuXG4gICAgICAgIGlmIChmaWxlRGF0YSkge1xuICAgICAgICAgIHJldHVybiBfY3VycmVudEZpbGVzW2ZpbGVEYXRhLmluZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGV2ZW50IGxvZ2dlci5cbiAgZnVuY3Rpb24gX2dldExvZ2dlclBhcmFtcyhwYXJhbXMsIGNiKSB7XG4gICAgdmFyIGpzb24gPSB7fSxcbiAgICAgIHV0aWxzID0gUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMsXG4gICAgICB1cmwgPSBudWxsO1xuXG4gICAgaWYgKHBhcmFtcy5ldmVudCkge1xuICAgICAganNvbi5ldmVudCA9IHBhcmFtcy5ldmVudDtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLmV2ZW50X2RldGFpbHMpIHtcbiAgICAgIGpzb24uZXZlbnRfZGV0YWlscyA9IHBhcmFtcy5ldmVudF9kZXRhaWxzO1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMudXJsKSB7XG4gICAgICB1cmwgPSBwYXJhbXMudXJsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHVybCA9IF9nZXRDdXJyZW50RmlsZSgpO1xuICAgIH1cblxuICAgIGpzb24uZmlsZV91cmwgPSB1cmw7XG4gICAganNvbi5maWxlX2Zvcm1hdCA9IHV0aWxzLmdldEZpbGVGb3JtYXQodXJsKTtcblxuICAgIHV0aWxzLmdldElkcyhmdW5jdGlvbihjb21wYW55SWQsIGRpc3BsYXlJZCkge1xuICAgICAganNvbi5jb21wYW55X2lkID0gY29tcGFueUlkO1xuICAgICAganNvbi5kaXNwbGF5X2lkID0gZGlzcGxheUlkO1xuXG4gICAgICBjYihqc29uKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGFzU3RvcmFnZUVycm9yKCkge1xuICAgIHJldHVybiBfc3RvcmFnZUVycm9yRmxhZztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlLCBpc1N0b3JhZ2VFcnJvcikge1xuICAgIF9lcnJvckZsYWcgPSB0cnVlO1xuICAgIF9zdG9yYWdlRXJyb3JGbGFnID0gdHlwZW9mIGlzU3RvcmFnZUVycm9yICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgX21lc3NhZ2Uuc2hvdyhtZXNzYWdlKTtcblxuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGlmIFdpZGdldCBpcyBwbGF5aW5nIHJpZ2h0IG5vdywgcnVuIHRoZSB0aW1lclxuICAgICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcywgaXNFcnJvcikge1xuICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICBfZXJyb3JMb2cgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgX2dldExvZ2dlclBhcmFtcyhwYXJhbXMsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIF9sb2dnZXIubG9nKFwidmlkZW9fZXZlbnRzXCIsIGpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlSW5pdCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXlcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZVJlZnJlc2godXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZyBvZiBvbmUgdXJsXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXkgb2YgdXJsc1xuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG4gICAgfVxuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuICAgIF9zdG9yYWdlRXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX2Vycm9yTG9nID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICAgIC8vIGluIGNhc2UgZXJyb3IgdGltZXIgc3RpbGwgcnVubmluZyAobm8gY29uZGl0aW9uYWwgY2hlY2sgb24gZXJyb3JGbGFnLCBpdCBtYXkgaGF2ZSBiZWVuIHJlc2V0IGluIG9uRmlsZVJlZnJlc2gpXG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICAvLyBEZXN0cm95IHBsYXllciBpZnJhbWUuXG4gICAgICBpZiAoIV9yZXN1bWUpIHtcbiAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5yZW1vdmUoX2N1cnJlbnRGcmFtZSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZnJhbWVPYmoucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJwbGF5XCIgfSwgZmFsc2UpO1xuXG4gICAgaWYgKF9lcnJvckZsYWcpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICAgIC8vIGFkZCBmcmFtZSBhbmQgY3JlYXRlIHRoZSBwbGF5ZXJcbiAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmFkZCgwKTtcbiAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzWzBdLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZmlsZS5odG1sXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5jcmVhdGVGcmFtZVBsYXllcigwLCBfYWRkaXRpb25hbFBhcmFtcywgX2N1cnJlbnRGaWxlcywgY29uZmlnLlNLSU4sIFwicGxheWVyLWZvbGRlci5odG1sXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJFbmRlZCgpIHtcbiAgICBfZnJhbWVDb250cm9sbGVyLnJlbW92ZShfY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfZG9uZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheWVyUmVhZHkoKSB7XG4gICAgdmFyIGZyYW1lT2JqO1xuXG4gICAgLy8gRW5zdXJlcyBtZXNzYWdpbmcgaXMgaGlkZGVuIGZvciBub24tc3RvcmFnZSB2aWRlbyBmaWxlXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgICBmcmFtZU9iai5wbGF5KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhwYXJhbXMsIG1vZGUpIHtcbiAgICB2YXIgbG9nUGFyYW1zID0ge30sXG4gICAgICBkZXRhaWxzID0gbnVsbCxcbiAgICAgIGlzU3RvcmFnZUZpbGU7XG5cbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IF8uY2xvbmUocGFyYW1zKTtcbiAgICBfbW9kZSA9IG1vZGU7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcblxuICAgIF9hZGRpdGlvbmFsUGFyYW1zLndpZHRoID0gX3ByZWZzLmdldEludChcInJzV1wiKTtcbiAgICBfYWRkaXRpb25hbFBhcmFtcy5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpO1xuXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnZpZGVvLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpKSB7XG4gICAgICBfcmVzdW1lID0gX2FkZGl0aW9uYWxQYXJhbXMudmlkZW8ucmVzdW1lO1xuICAgIH1cblxuICAgIF9tZXNzYWdlID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0NvbnRhaW5lclwiKSxcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKSk7XG5cbiAgICAvLyBzaG93IHdhaXQgbWVzc2FnZSB3aGlsZSBTdG9yYWdlIGluaXRpYWxpemVzXG4gICAgX21lc3NhZ2Uuc2hvdyhcIlBsZWFzZSB3YWl0IHdoaWxlIHlvdXIgdmlkZW8gaXMgZG93bmxvYWRlZC5cIik7XG5cbiAgICBfZnJhbWVDb250cm9sbGVyID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLlZpZGVvLkZyYW1lQ29udHJvbGxlcigpO1xuXG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgaXNTdG9yYWdlRmlsZSA9IChPYmplY3Qua2V5cyhfYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApO1xuXG4gICAgICBpZiAoIWlzU3RvcmFnZUZpbGUpIHtcbiAgICAgICAgZGV0YWlscyA9IFwiY3VzdG9tXCI7XG5cbiAgICAgICAgX25vblN0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5Ob25TdG9yYWdlKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgX25vblN0b3JhZ2UuaW5pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV0YWlscyA9IFwic3RvcmFnZSBmaWxlXCI7XG5cbiAgICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZpbGUgaW5zdGFuY2VcbiAgICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIGRldGFpbHMgPSBcInN0b3JhZ2UgZm9sZGVyXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmb2xkZXIgaW5zdGFuY2VcbiAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZvbGRlcihfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICBfc3RvcmFnZS5pbml0KCk7XG4gICAgfVxuXG4gICAgbG9nUGFyYW1zLmV2ZW50ID0gXCJjb25maWd1cmF0aW9uXCI7XG4gICAgbG9nUGFyYW1zLmV2ZW50X2RldGFpbHMgPSBkZXRhaWxzO1xuICAgIGxvZ0V2ZW50KGxvZ1BhcmFtcywgZmFsc2UpO1xuXG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICAvLyBBbiBlcnJvciBvY2N1cnJlZCB3aXRoIEpXIFBsYXllci5cbiAgZnVuY3Rpb24gcGxheWVyRXJyb3IoZXJyb3IpIHtcbiAgICB2YXIgZGV0YWlscyA9IG51bGwsXG4gICAgICBwYXJhbXMgPSB7fSxcbiAgICAgIG1lc3NhZ2UgPSBcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvLlwiLFxuICAgICAgTUVESUFfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgbWVkaWE6IEZpbGUgY291bGQgbm90IGJlIHBsYXllZFwiLFxuICAgICAgWU9VVFVCRV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBZb3VUdWJlOiBWaWRlbyBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBQTEFZRVJfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgcGxheWVyOiBObyBwbGF5YWJsZSBzb3VyY2VzIGZvdW5kXCIsXG4gICAgICBFTkNPRElOR19NRVNTQUdFID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhhdCB2aWRlby4gSXQgY291bGQgYmUgdGhhdCB3ZSBkb24ndCBcIiArXG4gICAgICAgIFwic3VwcG9ydCB0aGF0IGZvcm1hdCBvciBpdCBpcyBub3QgZW5jb2RlZCBjb3JyZWN0bHkuXCIsXG4gICAgICBGT1JNQVRfTUVTU0FHRSA9IFwiVGhlIGZvcm1hdCBvZiB0aGF0IHZpZGVvIGlzIG5vdCBzdXBwb3J0ZWRcIjtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLnR5cGUgJiYgZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IudHlwZSArIFwiIC0gXCIgKyBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXJyb3IudHlwZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IudHlwZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICAgIC8vIERpc3BsYXkgYXBwcm9wcmlhdGUgb24tc2NyZWVuIGVycm9yIG1lc3NhZ2UuXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBpZiAoKGVycm9yLm1lc3NhZ2UgPT09IE1FRElBX0VSUk9SKSB8fCAoZXJyb3IubWVzc2FnZSA9PT0gWU9VVFVCRV9FUlJPUikpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRU5DT0RJTkdfTUVTU0FHRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlID09PSBQTEFZRVJfRVJST1IpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRk9STUFUX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJhbXMuZXZlbnQgPSBcInBsYXllciBlcnJvclwiO1xuICAgIHBhcmFtcy5ldmVudF9kZXRhaWxzID0gZGV0YWlscztcblxuICAgIGxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBwYXVzZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImhhc1N0b3JhZ2VFcnJvclwiOiBoYXNTdG9yYWdlRXJyb3IsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcIm9uRmlsZUluaXRcIjogb25GaWxlSW5pdCxcbiAgICBcIm9uRmlsZVJlZnJlc2hcIjogb25GaWxlUmVmcmVzaCxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwic2hvd0Vycm9yXCI6IHNob3dFcnJvcixcbiAgICBcInBsYXllckVuZGVkXCI6IHBsYXllckVuZGVkLFxuICAgIFwicGxheWVyUmVhZHlcIjogcGxheWVyUmVhZHksXG4gICAgXCJwbGF5ZXJFcnJvclwiOiBwbGF5ZXJFcnJvcixcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xuXG59KShnYWRnZXRzKTtcblxuLyogZ2xvYmFsIGNvbmZpZyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaW5pdGlhbExvYWQgPSB0cnVlO1xuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TdG9yYWdlXCIpO1xuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQoZS5kZXRhaWwudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBjaGVjayBmb3IgXCJjaGFuZ2VkXCIgcHJvcGVydHlcbiAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpKSB7XG4gICAgICAgICAgICBpZiAoZS5kZXRhaWwuY2hhbmdlZCkge1xuICAgICAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2goZS5kZXRhaWwudXJsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLyBpbiB0aGUgZXZlbnQgb2YgYSBuZXR3b3JrIGZhaWx1cmUgYW5kIHJlY292ZXJ5LCBjaGVjayBpZiB0aGUgV2lkZ2V0IGlzIGluIGEgc3RhdGUgb2Ygc3RvcmFnZSBlcnJvclxuICAgICAgICAgICAgICBpZiAoUmlzZVZpc2lvbi5WaWRlby5oYXNTdG9yYWdlRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZmlsZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIG5vdCBmb3VuZFwiLCBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZpbGUtdGhyb3R0bGVkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZpbGUgdGhyb3R0bGVkXCIsIFwidXJsXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiKTtcbiAgICB9KTtcblxuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLnN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgdmFyIF9maWxlcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9nZXRVcmxzKCkge1xuICAgIHJldHVybiBfLnBsdWNrKF9maWxlcywgXCJ1cmxcIik7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpIHtcbiAgICByZXR1cm4gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGYubmFtZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWxldGVGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBfZmlsZXMuc3BsaWNlKF9maWxlcy5pbmRleE9mKGV4aXN0aW5nKSwgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoYW5nZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGV4aXN0aW5nLnVybCA9IGZpbGUudXJsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9hZGRGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKCFleGlzdGluZykge1xuICAgICAgLy8gZXh0cmFjdCB0aGUgYWN0dWFsIGZpbGUgbmFtZSBhbmQgc3RvcmUgaW4gbmV3IHByb3BlcnR5IG9uIGZpbGUgb2JqZWN0XG4gICAgICBmaWxlLmZpbGVOYW1lID0gZmlsZS5uYW1lLnNsaWNlKGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBpbnNlcnQgZmlsZSB0byBfZmlsZXMgbGlzdCBhdCBzcGVjaWZpYyBpbmRleCBiYXNlZCBvbiBhbHBoYWJldGljYWwgb3JkZXIgb2YgZmlsZSBuYW1lXG4gICAgICBfZmlsZXMuc3BsaWNlKF8uc29ydGVkSW5kZXgoX2ZpbGVzLCBmaWxlLCBcImZpbGVOYW1lXCIpLCAwLCBmaWxlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZSA9IGUuZGV0YWlsO1xuXG4gICAgICAvLyBBZGRlZFxuICAgICAgaWYoZmlsZS5hZGRlZCkge1xuICAgICAgICBfYWRkRmlsZShmaWxlKTtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KF9nZXRVcmxzKCkpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoYW5nZWQgb3IgdW5jaGFuZ2VkXG4gICAgICBpZiAoZmlsZS5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikpIHtcbiAgICAgICAgaWYoZmlsZS5jaGFuZ2VkKSB7XG4gICAgICAgICAgX2NoYW5nZUZpbGUoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgICAgICBpZiAoIVJpc2VWaXNpb24uVmlkZW8uaGFzU3RvcmFnZUVycm9yKCkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgcHJvY2VlZCB3aXRoIHJlZnJlc2ggbG9naWMgYmVsb3cgaWYgdGhlcmUncyBiZWVuIGEgc3RvcmFnZSBlcnJvciwgb3RoZXJ3aXNlIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHZpZGVvIGFnYWluIGZyb20gYSBuZXR3b3JrIHJlY292ZXJ5XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZWRcbiAgICAgIGlmKGZpbGUuZGVsZXRlZCkge1xuICAgICAgICBfZGVsZXRlRmlsZShmaWxlKTtcbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKF9nZXRVcmxzKCkpO1xuXG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZW1wdHktZm9sZGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBlbXB0eVwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBjb250YWluIGFueSB2aWRlb3MuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZvbGRlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGRvZXNuJ3QgZXhpc3RcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBleGlzdCBvciBoYXMgYmVlbiBtb3ZlZCB0byBUcmFzaC5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZm9sZGVyLWludmFsaWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGZvcm1hdChzKSBpbnZhbGlkXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHN1cHBvcnRlZCB2aWRlbyBmb3JtYXRzLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZVR5cGVcIiwgXCJ2aWRlb1wiKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZvbGRlclwiLCBkYXRhLnN0b3JhZ2UuZm9sZGVyKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuXG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciByaXNlQ2FjaGUgPSBSaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGU7XG5cbiAgdmFyIF9yZWZyZXNoRHVyYXRpb24gPSA5MDAwMDAsICAvLyAxNSBtaW51dGVzXG4gICAgX3JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcblxuICB2YXIgX2lzTG9hZGluZyA9IHRydWU7XG5cbiAgdmFyIF91cmwgPSBcIlwiO1xuXG4gIGZ1bmN0aW9uIF9nZXRGaWxlKG9taXRDYWNoZUJ1c3Rlcikge1xuICAgIHJpc2VDYWNoZS5nZXRGaWxlKF91cmwsIGZ1bmN0aW9uIChyZXNwb25zZSwgZXJyb3IpIHtcbiAgICAgIGlmICghZXJyb3IpIHtcblxuICAgICAgICBpZiAoX2lzTG9hZGluZykge1xuICAgICAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChyZXNwb25zZS51cmwpO1xuXG4gICAgICAgICAgLy8gc3RhcnQgdGhlIHJlZnJlc2ggaW50ZXJ2YWxcbiAgICAgICAgICBfc3RhcnRSZWZyZXNoSW50ZXJ2YWwoKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChyZXNwb25zZS51cmwpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVycm9yIG9jY3VycmVkXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQoe1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJub24tc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIFwidXJsXCI6IHJlc3BvbnNlLnVybFxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZXJlIHdhcyBhIHByb2JsZW0gcmV0cmlldmluZyB0aGUgZmlsZSBmcm9tIFJpc2UgQ2FjaGUuXCIpO1xuICAgICAgfVxuICAgIH0sIG9taXRDYWNoZUJ1c3Rlcik7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRSZWZyZXNoSW50ZXJ2YWwoKSB7XG4gICAgaWYgKF9yZWZyZXNoSW50ZXJ2YWxJZCA9PT0gbnVsbCkge1xuICAgICAgX3JlZnJlc2hJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBfZ2V0RmlsZShmYWxzZSk7XG4gICAgICB9LCBfcmVmcmVzaER1cmF0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgLy8gSGFuZGxlIHByZS1tZXJnZSB1c2Ugb2YgXCJ1cmxcIiBzZXR0aW5nIHByb3BlcnR5XG4gICAgX3VybCA9IChkYXRhLnVybCAmJiBkYXRhLnVybCAhPT0gXCJcIikgPyBkYXRhLnVybCA6IGRhdGEuc2VsZWN0b3IudXJsO1xuXG4gICAgX2dldEZpbGUodHJ1ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5WaWRlbyA9IFJpc2VWaXNpb24uQ29tbW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5WaWRlby5GcmFtZUNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBQUkVGSVggPSBcImlmX1wiO1xuXG4gIGZ1bmN0aW9uIGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBSRUZJWCArIGluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZyYW1lT2JqZWN0KGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgaWZyYW1lO1xuXG4gICAgaWZyYW1lID0gZnJhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcblxuICAgIGlmIChpZnJhbWUpIHtcbiAgICAgIHJldHVybiAoaWZyYW1lLmNvbnRlbnRXaW5kb3cpID8gaWZyYW1lLmNvbnRlbnRXaW5kb3cgOlxuICAgICAgICAoaWZyYW1lLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudCkgPyBpZnJhbWUuY29udGVudERvY3VtZW50LmRvY3VtZW50IDogaWZyYW1lLmNvbnRlbnREb2N1bWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhcihpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGZyYW1lT2JqID0gZ2V0RnJhbWVPYmplY3QoaW5kZXgpLFxuICAgICAgaWZyYW1lO1xuXG4gICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuICAgICAgZnJhbWVPYmoucmVtb3ZlKCk7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiYWJvdXQ6YmxhbmtcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkKGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcblxuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1RyYW5zcGFyZW5jeVwiLCB0cnVlKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwiZnJhbWVib3JkZXJcIiwgXCIwXCIpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIiwgXCJub1wiKTtcblxuICAgIGZyYW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVGcmFtZVBsYXllcihpbmRleCwgcGFyYW1zLCBmaWxlcywgc2tpbiwgc3JjKSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgZnJhbWVPYmogPSBnZXRGcmFtZU9iamVjdChpbmRleCksXG4gICAgICBpZnJhbWU7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG5cbiAgICAgIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmcmFtZS5vbmxvYWQgPSBudWxsO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemUgYW5kIGxvYWQgdGhlIHBsYXllciBpbnNpZGUgdGhlIGlmcmFtZVxuICAgICAgICBmcmFtZU9iai5pbml0KHBhcmFtcywgZmlsZXMsIHNraW4pO1xuICAgICAgICBmcmFtZU9iai5sb2FkKCk7XG4gICAgICB9O1xuXG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNyYyk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBoaWRlKGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpO1xuXG4gICAgZnJhbWVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUoaW5kZXgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUFJFRklYICsgaW5kZXgpO1xuXG4gICAgX2NsZWFyKGluZGV4KTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gcmVtb3ZlIHRoZSBpZnJhbWUgYnkgY2xlYXJpbmcgYWxsIGVsZW1lbnRzIGluc2lkZSBkaXYgY29udGFpbmVyXG4gICAgICB3aGlsZSAoZnJhbWVDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBmcmFtZUNvbnRhaW5lci5yZW1vdmVDaGlsZChmcmFtZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSwgMjAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3coaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCk7XG5cbiAgICBmcmFtZUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZDogYWRkLFxuICAgIGNyZWF0ZUZyYW1lUGxheWVyOiBjcmVhdGVGcmFtZVBsYXllcixcbiAgICBnZXRGcmFtZUNvbnRhaW5lcjogZ2V0RnJhbWVDb250YWluZXIsXG4gICAgZ2V0RnJhbWVPYmplY3Q6IGdldEZyYW1lT2JqZWN0LFxuICAgIGhpZGU6IGhpZGUsXG4gICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgc2hvdzogc2hvd1xuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmIChfYWN0aXZlKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIC8vIHNob3cgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICAvLyBjcmVhdGUgbWVzc2FnZSBlbGVtZW50XG4gICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICBwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZVwiKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIFJpc2VWaXNpb24gKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICB2YXIgYWRkaXRpb25hbFBhcmFtcywgbW9kZTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIG5hbWVzWzBdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIC8vIHN0b3JhZ2UgZmlsZSBvciBmb2xkZXIgc2VsZWN0ZWRcbiAgICAgICAgICBpZiAoIWFkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgLy8gZm9sZGVyIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZm9sZGVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtb2RlID0gXCJmaWxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vbi1zdG9yYWdlIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5zZXRBZGRpdGlvbmFsUGFyYW1zKGFkZGl0aW9uYWxQYXJhbXMsIG1vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8uc3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9seW1lclJlYWR5KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuXG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGNvbmZpZ3VyZSk7XG4gICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTInXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
