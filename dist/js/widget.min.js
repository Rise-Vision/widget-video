var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,i){var n=null;e.event?(n=e,n.file_url&&(n.file_format=t(n.file_url)),n.company_id=a,n.display_id=s,i(n)):i(n)}function i(){var e=new Date,i=e.getUTCFullYear(),t=e.getUTCMonth()+1,n=e.getUTCDate();return 10>t&&(t="0"+t),10>n&&(n="0"+n),i+t+n}function t(e){var i,t=/[?#&]/;return e&&"string"==typeof e?(i=e.substr(e.lastIndexOf(".")+1),t.test(i)&&(i=i.substr(0,-1!==i.indexOf("?")?i.indexOf("?"):i.length),i=i.substr(0,-1!==i.indexOf("#")?i.indexOf("#"):i.length),i=i.substr(0,-1!==i.indexOf("&")?i.indexOf("&"):i.length)),i.toLowerCase()):null}function n(e){var t={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:i(),rows:[{insertId:""}]},n=JSON.parse(JSON.stringify(t));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(e)),n.rows[0].json.ts=(new Date).toISOString(),n}function o(i,t){e(t,function(e){null!==e&&RiseVision.Common.Logger.log(i,e)})}function r(e,i){a=e,s=i}var s="",a="";return{getInsertData:n,getFileFormat:t,logEvent:o,setIds:r}}(),RiseVision.Common.Logger=function(e){"use strict";function i(e){var i=new XMLHttpRequest;return new Date-d<358e4?e({}):(i.open("POST",o,!0),i.onloadend=function(){var t=JSON.parse(i.response);e({token:t.access_token,refreshedAt:new Date})},i.send(),void 0)}function t(e){return s&&l===e}function n(n,o){function c(i){var t,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",n),d=i.refreshedAt||d,u=i.token||u,t=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(t))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&t(o.event)))return s=!0,l=o.event,setTimeout(function(){s=!1},a),i(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var i=new XMLHttpRequest;e&&"function"==typeof e&&(i.open("GET",t+"ping?callback=_",!0),i.onreadystatechange=function(){try{4===i.readyState&&(n=!0,200===i.status?(o=!0,e(!0,i.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(t){console.debug("Caught exception: ",t.description)}},i.send())}function i(e,i,r){function s(i){var n,o,s;i?n=r?t+"?url="+encodeURIComponent(e):t+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?n=e:(o=e.split("?"),s=1===o.length?"?":"&",n=e+s+"cb="+(new Date).getTime()),a("HEAD",n)}function a(e,t){var n=new XMLHttpRequest,r={xhr:n,url:t};n.open(e,t,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?i(r):"HEAD"===e?a("GET",t):o?i(r,new Error("The request failed with status code: "+s)):i(r)}),n.send()}if(e&&i&&"function"==typeof i)return n?s(o):this.ping(s)}var t="//localhost:9494/",n=!1,o=!1;return{getFile:i,ping:e}}(),"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function i(){e.rpc.call("","rsevent_done",null,C.getString("id")),null!==x&&d(x,!0),d({event:"done"},!1)}function t(){e.rpc.call("","rsevent_ready",null,C.getString("id"),!0,!0,!0,!0,!0)}function n(){clearTimeout(D),D=null}function o(){n(),D=setTimeout(function(){i()},5e3)}function r(){var e=S.getFrameObject(F);return e?e.getPlaybackData():null}function s(){var e=null;if(N&&N.length>0){if("file"===E)return N[0];if("folder"===E&&(e=r()))return N[e.index]}return null}function a(){return q}function l(e,i){G=!0,q="undefined"!=typeof i,I.show(e),S.remove(F,function(){L||o()})}function d(e,i){i&&(x=e),e.file_url||(e.file_url=s()),RiseVision.Common.LoggerUtils.logEvent(m(),e)}function u(e){"file"===E?N[0]=e:"folder"===E&&(N=e),I.hide(),L||g()}function c(e){"file"===E?N[0]=e:"folder"===E&&(N=e),G=!1,q=!1,x=null}function f(){var e=S.getFrameObject(F);L=!0,n(),e&&(A?e.pause():S.remove(F))}function g(){var e={},i=S.getFrameObject(F);return w&&(w=!1,e.event="configuration",e.event_details=b,d(e,!1)),L=!1,d({event:"play"},!1),G?(o(),void 0):(i?i.play():N&&N.length>0&&("file"===E?(S.add(0),S.createFramePlayer(0,y,N[0],config.SKIN,"player-file.html")):"folder"===E&&(S.add(0),S.createFramePlayer(0,y,N,config.SKIN,"player-folder.html"))),void 0)}function m(){return"video_events"}function v(){S.remove(F,function(){i()})}function p(){var e;I.hide(),L||(e=S.getFrameObject(F),e&&e.play())}function V(i,n){var o;y=_.clone(i),E=n,C=new e.Prefs,document.getElementById("videoContainer").style.height=C.getInt("rsH")+"px",y.width=C.getInt("rsW"),y.height=C.getInt("rsH"),y.video.hasOwnProperty("resume")&&(A=y.video.resume),I=new RiseVision.Common.Message(document.getElementById("videoContainer"),document.getElementById("messageContainer")),I.show("Please wait while your video is downloaded."),S=new RiseVision.Common.Video.FrameController,"file"===E?(o=0!==Object.keys(y.storage).length,o?(b="storage file",T=new RiseVision.Video.StorageFile(y),T.init()):(b="custom",O=new RiseVision.Video.NonStorage(y),O.init())):"folder"===E&&(b="storage folder",T=new RiseVision.Video.StorageFolder(y),T.init()),t()}function h(e){var i=null,t={},n="Sorry, there was a problem playing the video.",o="Error loading media: File could not be played",r="Error loading YouTube: Video could not be played",s="Error loading player: No playable sources found",a="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.",u="The format of that video is not supported";e&&(e.type&&e.message?i=e.type+" - "+e.message:e.type?i=e.type:e.message&&(i=e.message),e.message&&(e.message===o||e.message===r?n=a:e.message===s&&(n=u))),t.event="player error",t.event_details=i,d(t,!0),l(n)}function R(){f()}var y,E,w=!0,b=null,C=null,T=null,O=null,I=null,S=null,L=!0,A=!0,F=0,N=[],x=null,D=null,G=!1,q=!1;return{getTableName:m,hasStorageError:a,logEvent:d,onFileInit:u,onFileRefresh:c,pause:f,play:g,setAdditionalParams:V,showError:l,playerEnded:v,playerReady:p,playerError:h,stop:R}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function i(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(t?(t=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Video.onFileRefresh(e.detail.url):RiseVision.Video.hasStorageError()&&RiseVision.Video.onFileRefresh(e.detail.url)))}),i.addEventListener("rise-storage-no-file",function(e){var i={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),i.addEventListener("rise-storage-file-throttled",function(e){var i={event:"storage file throttled",file_url:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),i.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),i.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),i.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0);var t=e.detail.error.currentTarget.status,n="There was a problem retrieving the file from Rise Cache.";404===t&&(n="The image does not exist or cannot be accessed."),RiseVision.Video.showError(n)}),i.setAttribute("folder",e.storage.folder),i.setAttribute("fileName",e.storage.fileName),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("env",config.STORAGE_ENV),i.go())}var t=!0;return{init:i}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function i(){return _.pluck(l,"url")}function t(e){return _.find(l,function(i){return e.name===i.name})}function n(e){var i=t(e);i&&l.splice(l.indexOf(i),1)}function o(e){var i=t(e);i&&(i.url=e.url)}function r(e){var i=t(e);i||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function s(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){var t=e.detail;if(t.added&&(r(t),a))return a=!1,RiseVision.Video.onFileInit(i()),void 0;if(t.hasOwnProperty("changed"))if(t.changed)o(t);else if(!RiseVision.Video.hasStorageError())return;t.deleted&&n(t),RiseVision.Video.onFileRefresh(i())}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),t.addEventListener("rise-storage-no-folder",function(e){var i={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected folder does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-folder-invalid",function(){var e={event:"storage folder format(s) invalid"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any supported video formats.")}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0);var t=e.detail.error.currentTarget.status,n="There was a problem retrieving the file from Rise Cache.";404===t&&(n="The image does not exist or cannot be accessed."),RiseVision.Video.showError(n)}),t.setAttribute("fileType","video"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go())}var a=!0,l=[];return{init:s}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function i(e){o.getFile(l,function(e,i){if(i){RiseVision.Video.logEvent({event:"non-storage error",event_details:i.message,file_url:e.url},!0);var n=i.message.substring(i.message.indexOf(":")+2),o="There was a problem retrieving the file from Rise Cache.";"404"===n&&(o="The image does not exist or cannot be accessed."),RiseVision.Video.showError(o)}else a?(a=!1,RiseVision.Video.onFileInit(e.url),t()):RiseVision.Video.onFileRefresh(e.url)},e)}function t(){null===s&&(s=setInterval(function(){i(!1)},r))}function n(){l=e.url&&""!==e.url?e.url:e.selector.url,i(!0)}var o=RiseVision.Common.RiseCache,r=9e5,s=null,a=!0,l="";return{init:n}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function i(i){var t,n=e(i);return t=n.querySelector("iframe"),t?t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument:null}function t(t){var n,o=e(t),r=i(t);r&&(n=o.querySelector("iframe"),r.remove(),n.setAttribute("src","about:blank"))}function n(i){var t=e(i),n=document.createElement("iframe");n.setAttribute("allowTransparency",!0),n.setAttribute("frameborder","0"),n.setAttribute("scrolling","no"),t.appendChild(n)}function o(t,n,o,r,s){var a,l=e(t),d=i(t);d&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,d.init(n,o,r),d.load()},a.setAttribute("src",s))}function r(i){var t=e(i);t.style.visibility="hidden"}function s(e,i){var n=document.getElementById(l+e);t(e),setTimeout(function(){for(;n.firstChild;)n.removeChild(n.firstChild);i&&"function"==typeof i&&i()},200)}function a(i){var t=e(i);t.style.visibility="visible"}var l="if_";return{add:n,createFramePlayer:o,getFrameContainer:e,getFrameObject:i,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,i){"use strict";function t(){try{i.style.height=e.style.height}catch(t){console.warn("Can't initialize Message - ",t.message)}}function n(){if(r){for(;i.firstChild;)i.removeChild(i.firstChild);i.style.display="none",e.style.visibility="visible",r=!1}}function o(t){var n,o=document.createDocumentFragment();r?(n=i.querySelector(".message"),n.innerHTML=t):(e.style.visibility="hidden",i.style.display="block",n=document.createElement("p"),n.innerHTML=t,n.setAttribute("class","message"),o.appendChild(n),i.appendChild(o),r=!0)}var r=!1;return t(),{hide:n,show:o}},function(e,i){"use strict";function t(e,i){var t=null,n="",o="",r="";Array.isArray(e)&&e.length>0&&Array.isArray(i)&&i.length>0&&("companyId"===e[0]&&(o=i[0]),"displayId"===e[1]&&(r=i[1]?i[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,r),"additionalParams"===e[2]&&(t=JSON.parse(i[2]),n=0!==Object.keys(t.storage).length?t.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(t,n)))}function n(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function r(){RiseVision.Video.stop()}function s(){e.removeEventListener("WebComponentsReady",s),l&&""!==l&&(i.rpc.register("rscmd_play_"+l,n),i.rpc.register("rscmd_pause_"+l,o),i.rpc.register("rscmd_stop_"+l,r),i.rpc.register("rsparam_set_"+l,t),i.rpc.call("","rsparam_get",null,l,["companyId","displayId","additionalParams"]))}var a=new i.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",s)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdldEV2ZW50UGFyYW1zIiwicGFyYW1zIiwiY2IiLCJqc29uIiwiZXZlbnQiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImNvbXBhbnlfaWQiLCJjb21wYW55SWQiLCJkaXNwbGF5X2lkIiwiZGlzcGxheUlkIiwiZ2V0U3VmZml4IiwiZGF0ZSIsIkRhdGUiLCJ5ZWFyIiwiZ2V0VVRDRnVsbFllYXIiLCJtb250aCIsImdldFVUQ01vbnRoIiwiZGF5IiwiZ2V0VVRDRGF0ZSIsInVybCIsInN0ciIsImhhc1BhcmFtcyIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwidGVzdCIsImluZGV4T2YiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsImdldEluc2VydERhdGEiLCJCQVNFX0lOU0VSVF9TQ0hFTUEiLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInRlbXBsYXRlU3VmZml4Iiwicm93cyIsImluc2VydElkIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJ0b0lTT1N0cmluZyIsImxvZ0V2ZW50IiwidGFibGUiLCJMb2dnZXIiLCJsb2ciLCJzZXRJZHMiLCJjb21wYW55IiwiZGlzcGxheSIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiY2FsbGJhY2siLCJyIiwiQkFTRV9DQUNIRV9VUkwiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiX3BpbmdSZWNlaXZlZCIsInN0YXR1cyIsIl9pc0NhY2hlUnVubmluZyIsInJlc3BvbnNlVGV4dCIsImNvbnNvbGUiLCJkZWJ1ZyIsImUiLCJkZXNjcmlwdGlvbiIsImdldEZpbGUiLCJmaWxlVXJsIiwibm9jYWNoZWJ1c3RlciIsImZpbGVSZXF1ZXN0IiwiaXNDYWNoZVJ1bm5pbmciLCJzZXBhcmF0b3IiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXRUaW1lIiwic3BsaXQiLCJtYWtlUmVxdWVzdCIsIm1ldGhvZCIsInJlcXVlc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiRXJyb3IiLCJ0aGlzIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU0tJTiIsIlZpZGVvIiwiZ2FkZ2V0cyIsIl9kb25lIiwicnBjIiwiY2FsbCIsIl9wcmVmcyIsImdldFN0cmluZyIsIl9lcnJvckxvZyIsIl9yZWFkeSIsIl9jbGVhckVycm9yVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfZXJyb3JUaW1lciIsIl9zdGFydEVycm9yVGltZXIiLCJfZ2V0Q3VycmVudEZpbGVEYXRhIiwiZnJhbWVPYmoiLCJfZnJhbWVDb250cm9sbGVyIiwiZ2V0RnJhbWVPYmplY3QiLCJfY3VycmVudEZyYW1lIiwiZ2V0UGxheWJhY2tEYXRhIiwiX2dldEN1cnJlbnRGaWxlIiwiZmlsZURhdGEiLCJfY3VycmVudEZpbGVzIiwiX21vZGUiLCJpbmRleCIsImhhc1N0b3JhZ2VFcnJvciIsIl9zdG9yYWdlRXJyb3JGbGFnIiwic2hvd0Vycm9yIiwibWVzc2FnZSIsImlzU3RvcmFnZUVycm9yIiwiX2Vycm9yRmxhZyIsIl9tZXNzYWdlIiwic2hvdyIsInJlbW92ZSIsIl92aWV3ZXJQYXVzZWQiLCJpc0Vycm9yIiwiZ2V0VGFibGVOYW1lIiwib25GaWxlSW5pdCIsInVybHMiLCJoaWRlIiwicGxheSIsIm9uRmlsZVJlZnJlc2giLCJwYXVzZSIsIl9yZXN1bWUiLCJsb2dQYXJhbXMiLCJfaXNMb2FkaW5nIiwiZXZlbnRfZGV0YWlscyIsIl9jb25maWdEZXRhaWxzIiwiYWRkIiwiY3JlYXRlRnJhbWVQbGF5ZXIiLCJfYWRkaXRpb25hbFBhcmFtcyIsInBsYXllckVuZGVkIiwicGxheWVyUmVhZHkiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwibW9kZSIsImlzU3RvcmFnZUZpbGUiLCJfIiwiY2xvbmUiLCJQcmVmcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImhlaWdodCIsImdldEludCIsIndpZHRoIiwidmlkZW8iLCJyZXN1bWUiLCJNZXNzYWdlIiwiRnJhbWVDb250cm9sbGVyIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JhZ2UiLCJfc3RvcmFnZSIsIlN0b3JhZ2VGaWxlIiwiaW5pdCIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJwbGF5ZXJFcnJvciIsImVycm9yIiwiZGV0YWlscyIsIk1FRElBX0VSUk9SIiwiWU9VVFVCRV9FUlJPUiIsIlBMQVlFUl9FUlJPUiIsIkVOQ09ESU5HX01FU1NBR0UiLCJGT1JNQVRfTUVTU0FHRSIsInR5cGUiLCJzdG9wIiwiZGV0YWlsIiwiX2luaXRpYWxMb2FkIiwiY2hhbmdlZCIsImN1cnJlbnRUYXJnZXQiLCJzdGF0dXNDb2RlIiwiZXJyb3JNZXNzYWdlIiwic2V0QXR0cmlidXRlIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJnbyIsIl9nZXRVcmxzIiwicGx1Y2siLCJfZmlsZXMiLCJfZ2V0RXhpc3RpbmdGaWxlIiwiZmlsZSIsImZpbmQiLCJmIiwibmFtZSIsIl9kZWxldGVGaWxlIiwiZXhpc3RpbmciLCJzcGxpY2UiLCJfY2hhbmdlRmlsZSIsIl9hZGRGaWxlIiwic2xpY2UiLCJzb3J0ZWRJbmRleCIsImFkZGVkIiwiZGVsZXRlZCIsIl9nZXRGaWxlIiwib21pdENhY2hlQnVzdGVyIiwicmlzZUNhY2hlIiwiX3VybCIsInN1YnN0cmluZyIsIl9zdGFydFJlZnJlc2hJbnRlcnZhbCIsIl9yZWZyZXNoSW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiX3JlZnJlc2hEdXJhdGlvbiIsInNlbGVjdG9yIiwiZ2V0RnJhbWVDb250YWluZXIiLCJQUkVGSVgiLCJpZnJhbWUiLCJmcmFtZUNvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50V2luZG93IiwiY29udGVudERvY3VtZW50IiwiX2NsZWFyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiZmlsZXMiLCJza2luIiwic3JjIiwib25sb2FkIiwibG9hZCIsInZpc2liaWxpdHkiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJtYWluQ29udGFpbmVyIiwibWVzc2FnZUNvbnRhaW5lciIsIl9pbml0Iiwid2FybiIsIl9hY3RpdmUiLCJwIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaW5uZXJIVE1MIiwid2luZG93IiwiY29uZmlndXJlIiwibmFtZXMiLCJ2YWx1ZXMiLCJhZGRpdGlvbmFsUGFyYW1zIiwiQXJyYXkiLCJpc0FycmF5IiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlkIiwicmVnaXN0ZXIiLCJwcmVmcyIsIm9uY29udGV4dG1lbnUiLCJfZ2FxIiwicHVzaCIsImdhIiwiYXN5bmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwi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ZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLNUcsU0FBUzBFLGNBQWMsU0FBV2tDLEdBQUdqRixLQUFPLGtCQUFtQmlGLEVBQUdDLE9BQVEsRUFDbkZELEVBQUc5QixLQUFPLFVBQVk5RSxTQUFTOEcsU0FBU0MsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSWhILFNBQVNpSCxxQkFBcUIsVUFBVSxFQUFJRCxHQUFFRSxXQUFXQyxhQUFhUCxFQUFJSSIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIFdJREdFVF9DT01NT05fQ09ORklHID0ge1xuICBBVVRIX1BBVEhfVVJMOiBcInYxL3dpZGdldC9hdXRoXCIsXG4gIExPR0dFUl9DTElFTlRfSUQ6IFwiMTA4ODUyNzE0NzEwOS02cTFvMnZ0aWhuMzQyOTJwanQ0Y2tobWhjazByazBvNy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbVwiLFxuICBMT0dHRVJfQ0xJRU5UX1NFQ1JFVDogXCJubFp5cmNQTGc2b0V3TzlmOVdmbjI5V2hcIixcbiAgTE9HR0VSX1JFRlJFU0hfVE9LRU46IFwiMS94enQ0a3d6RTFIN1c5Vm5LQjhjQWFDeDZ6YjRFczRuS0VvcWFZSGRURDE1SWdPckpEdGR1bjZ6SzZYaUFUQ0tUXCIsXG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIixcbiAgU1RPUkVfVVJMOiBcImh0dHBzOi8vc3RvcmUtZG90LXJ2YXNlcnZlcjIuYXBwc3BvdC5jb20vXCJcbn07XG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyA9IChmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBkaXNwbGF5SWQgPSBcIlwiLFxuICAgIGNvbXBhbnlJZCA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cblxuICAvKiBSZXRyaWV2ZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGV2ZW50IGxvZ2dlci4gKi9cbiAgZnVuY3Rpb24gZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBjYikge1xuICAgIHZhciBqc29uID0gbnVsbDtcblxuICAgIC8vIGV2ZW50IGlzIHJlcXVpcmVkLlxuICAgIGlmIChwYXJhbXMuZXZlbnQpIHtcbiAgICAgIGpzb24gPSBwYXJhbXM7XG5cbiAgICAgIGlmIChqc29uLmZpbGVfdXJsKSB7XG4gICAgICAgIGpzb24uZmlsZV9mb3JtYXQgPSBnZXRGaWxlRm9ybWF0KGpzb24uZmlsZV91cmwpO1xuICAgICAgfVxuXG4gICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBzdWZmaXggZm9yIEJRIHRhYmxlIG5hbWUuXG4gIGZ1bmN0aW9uIGdldFN1ZmZpeCgpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgICAgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XG5cbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIH1cblxuICAgIGlmIChkYXkgPCAxMCkge1xuICAgICAgZGF5ID0gXCIwXCIgKyBkYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHllYXIgKyBtb250aCArIGRheTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIEJBU0VfSU5TRVJUX1NDSEVNQSA9IHtcbiAgICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICAgIFwic2tpcEludmFsaWRSb3dzXCI6IGZhbHNlLFxuICAgICAgXCJpZ25vcmVVbmtub3duVmFsdWVzXCI6IGZhbHNlLFxuICAgICAgXCJ0ZW1wbGF0ZVN1ZmZpeFwiOiBnZXRTdWZmaXgoKSxcbiAgICAgIFwicm93c1wiOiBbe1xuICAgICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShCQVNFX0lOU0VSVF9TQ0hFTUEpKTtcblxuICAgIGRhdGEucm93c1swXS5pbnNlcnRJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKS50b1VwcGVyQ2FzZSgpO1xuICAgIGRhdGEucm93c1swXS5qc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbi50cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMoY29tcGFueSwgZGlzcGxheSkge1xuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnk7XG4gICAgZGlzcGxheUlkID0gZGlzcGxheTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRJbnNlcnREYXRhXCI6IGdldEluc2VydERhdGEsXG4gICAgXCJnZXRGaWxlRm9ybWF0XCI6IGdldEZpbGVGb3JtYXQsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcInNldElkc1wiOiBzZXRJZHNcbiAgfTtcbn0pKCk7XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlciA9IChmdW5jdGlvbih1dGlscykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgUkVGUkVTSF9VUkwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbj9jbGllbnRfaWQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX0lEICtcbiAgICAgIFwiJmNsaWVudF9zZWNyZXQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX1NFQ1JFVCArXG4gICAgICBcIiZyZWZyZXNoX3Rva2VuPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX1JFRlJFU0hfVE9LRU4gK1xuICAgICAgXCImZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuXCI7XG5cbiAgdmFyIHNlcnZpY2VVcmwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2JpZ3F1ZXJ5L3YyL3Byb2plY3RzL2NsaWVudC1zaWRlLWV2ZW50cy9kYXRhc2V0cy9XaWRnZXRfRXZlbnRzL3RhYmxlcy9UQUJMRV9JRC9pbnNlcnRBbGxcIixcbiAgICB0aHJvdHRsZSA9IGZhbHNlLFxuICAgIHRocm90dGxlRGVsYXkgPSAxMDAwLFxuICAgIGxhc3RFdmVudCA9IFwiXCIsXG4gICAgcmVmcmVzaERhdGUgPSAwLFxuICAgIHRva2VuID0gXCJcIjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiByZWZyZXNoVG9rZW4oY2IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAobmV3IERhdGUoKSAtIHJlZnJlc2hEYXRlIDwgMzU4MDAwMCkge1xuICAgICAgcmV0dXJuIGNiKHt9KTtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIlBPU1RcIiwgUkVGUkVTSF9VUkwsIHRydWUpO1xuICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuXG4gICAgICBjYih7IHRva2VuOiByZXNwLmFjY2Vzc190b2tlbiwgcmVmcmVzaGVkQXQ6IG5ldyBEYXRlKCkgfSk7XG4gICAgfTtcblxuICAgIHhoci5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1Rocm90dGxlZChldmVudCkge1xuICAgIHJldHVybiB0aHJvdHRsZSAmJiAobGFzdEV2ZW50ID09PSBldmVudCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGxvZyh0YWJsZU5hbWUsIHBhcmFtcykge1xuICAgIGlmICghdGFibGVOYW1lIHx8ICFwYXJhbXMgfHwgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmICFwYXJhbXMuZXZlbnQpIHx8XG4gICAgICAocGFyYW1zLmhhc093blByb3BlcnR5KFwiZXZlbnRcIikgJiYgaXNUaHJvdHRsZWQocGFyYW1zLmV2ZW50KSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdHRsZSA9IHRydWU7XG4gICAgbGFzdEV2ZW50ID0gcGFyYW1zLmV2ZW50O1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdHRsZSA9IGZhbHNlO1xuICAgIH0sIHRocm90dGxlRGVsYXkpO1xuXG4gICAgZnVuY3Rpb24gaW5zZXJ0V2l0aFRva2VuKHJlZnJlc2hEYXRhKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIGluc2VydERhdGEsIHVybDtcblxuICAgICAgdXJsID0gc2VydmljZVVybC5yZXBsYWNlKFwiVEFCTEVfSURcIiwgdGFibGVOYW1lKTtcbiAgICAgIHJlZnJlc2hEYXRlID0gcmVmcmVzaERhdGEucmVmcmVzaGVkQXQgfHwgcmVmcmVzaERhdGU7XG4gICAgICB0b2tlbiA9IHJlZnJlc2hEYXRhLnRva2VuIHx8IHRva2VuO1xuICAgICAgaW5zZXJ0RGF0YSA9IHV0aWxzLmdldEluc2VydERhdGEocGFyYW1zKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBkYXRhLlxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCZWFyZXIgXCIgKyB0b2tlbik7XG5cbiAgICAgIGlmIChwYXJhbXMuY2IgJiYgdHlwZW9mIHBhcmFtcy5jYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwYXJhbXMuY2IoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoaW5zZXJ0RGF0YSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZWZyZXNoVG9rZW4oaW5zZXJ0V2l0aFRva2VuKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJsb2dcIjogbG9nXG4gIH07XG59KShSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyk7XG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUgPSAoZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgQkFTRV9DQUNIRV9VUkwgPSBcIi8vbG9jYWxob3N0Ojk0OTQvXCI7XG5cbiAgdmFyIF9waW5nUmVjZWl2ZWQgPSBmYWxzZSxcbiAgICBfaXNDYWNoZVJ1bm5pbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBwaW5nKGNhbGxiYWNrKSB7XG4gICAgdmFyIHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwgKyBcInBpbmc/Y2FsbGJhY2s9X1wiLCB0cnVlKTtcbiAgICByLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG4gICAgICAgICAgLy8gc2F2ZSB0aGlzIHJlc3VsdCBmb3IgdXNlIGluIGdldEZpbGUoKVxuICAgICAgICAgIF9waW5nUmVjZWl2ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYoci5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgICBfaXNDYWNoZVJ1bm5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayh0cnVlLCByLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJSaXNlIENhY2hlIGlzIG5vdCBydW5uaW5nXCIpO1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJDYXVnaHQgZXhjZXB0aW9uOiBcIiwgZS5kZXNjcmlwdGlvbik7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZShmaWxlVXJsLCBjYWxsYmFjaywgbm9jYWNoZWJ1c3Rlcikge1xuICAgIGlmICghZmlsZVVybCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWxlUmVxdWVzdChpc0NhY2hlUnVubmluZykge1xuICAgICAgdmFyIHVybCwgc3RyLCBzZXBhcmF0b3I7XG5cbiAgICAgIGlmIChpc0NhY2hlUnVubmluZykge1xuICAgICAgICAvLyBjb25maWd1cmUgdXJsIHdpdGggY2FjaGVidXN0ZXIgb3Igbm90XG4gICAgICAgIHVybCA9IChub2NhY2hlYnVzdGVyKSA/IEJBU0VfQ0FDSEVfVVJMICsgXCI/dXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVVcmwpIDpcbiAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgIGlmIChzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNlcnZlciBtYXkgbm90IHN1cHBvcnQgSEVBRCByZXF1ZXN0LiBGYWxsYmFjayB0byBhIEdFVCByZXF1ZXN0LlxuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QsIG5ldyBFcnJvcihcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIHN0YXR1cykpO1xuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRvIGF2b2lkIHRocm93aW5nIGFuIGVycm9yIHdoZW4gdGhlcmUgaXMgYSBjcm9zcyBkb21haW4gaXNzdWVcbiAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG5cbiAgICBpZiAoIV9waW5nUmVjZWl2ZWQpIHtcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHJldHVybiB0aGlzLnBpbmcoZmlsZVJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsZVJlcXVlc3QoX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBwaW5nOiBwaW5nXG4gIH07XG5cbn0pKCk7XG5cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcbn1cblxudmFyICBjb25maWcgPSB7XG4gIFNLSU46IFwic2tpbi9SVlNraW4ueG1sXCIsXG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIlxufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0ge307XG5cblJpc2VWaXNpb24uVmlkZW8gPSAoZnVuY3Rpb24gKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hZGRpdGlvbmFsUGFyYW1zLCBfbW9kZTtcblxuICB2YXIgX2lzTG9hZGluZyA9IHRydWUsXG4gICAgX2NvbmZpZ0RldGFpbHMgPSBudWxsO1xuXG4gIHZhciBfcHJlZnMgPSBudWxsLFxuICAgIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfbm9uU3RvcmFnZSA9IG51bGwsXG4gICAgX21lc3NhZ2UgPSBudWxsLFxuICAgIF9mcmFtZUNvbnRyb2xsZXIgPSBudWxsO1xuXG4gIHZhciBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICB2YXIgX3Jlc3VtZSA9IHRydWU7XG5cbiAgdmFyIF9jdXJyZW50RnJhbWUgPSAwO1xuXG4gIHZhciBfY3VycmVudEZpbGVzID0gW107XG5cbiAgdmFyIF9lcnJvckxvZyA9IG51bGwsXG4gICAgX2Vycm9yVGltZXIgPSBudWxsLFxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcblxuICB2YXIgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG5cbiAgICAvLyBBbnkgZXJyb3JzIG5lZWQgdG8gYmUgbG9nZ2VkIGJlZm9yZSB0aGUgZG9uZSBldmVudC5cbiAgICBpZiAoX2Vycm9yTG9nICE9PSBudWxsKSB7XG4gICAgICBsb2dFdmVudChfZXJyb3JMb2csIHRydWUpO1xuICAgIH1cblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcImRvbmVcIiB9LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXJFcnJvclRpbWVyKCkge1xuICAgIGNsZWFyVGltZW91dChfZXJyb3JUaW1lcik7XG4gICAgX2Vycm9yVGltZXIgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0RXJyb3JUaW1lcigpIHtcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBfZXJyb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbm90aWZ5IFZpZXdlciB3aWRnZXQgaXMgZG9uZVxuICAgICAgX2RvbmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZURhdGEoKSB7XG4gICAgdmFyIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgcmV0dXJuIGZyYW1lT2JqLmdldFBsYXliYWNrRGF0YSgpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlKCkge1xuICAgIHZhciBmaWxlRGF0YSA9IG51bGw7XG5cbiAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbMF07XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICAvLyByZXRyaWV2ZSB0aGUgY3VycmVudGx5IHBsYXllZCBmaWxlIGluZm8gZnJvbSBwbGF5ZXJcbiAgICAgICAgZmlsZURhdGEgPSBfZ2V0Q3VycmVudEZpbGVEYXRhKCk7XG5cbiAgICAgICAgaWYgKGZpbGVEYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbZmlsZURhdGEuaW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhhc1N0b3JhZ2VFcnJvcigpIHtcbiAgICByZXR1cm4gX3N0b3JhZ2VFcnJvckZsYWc7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSwgaXNTdG9yYWdlRXJyb3IpIHtcbiAgICBfZXJyb3JGbGFnID0gdHJ1ZTtcbiAgICBfc3RvcmFnZUVycm9yRmxhZyA9IHR5cGVvZiBpc1N0b3JhZ2VFcnJvciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgIF9tZXNzYWdlLnNob3cobWVzc2FnZSk7XG5cbiAgICBfZnJhbWVDb250cm9sbGVyLnJlbW92ZShfY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBpZiBXaWRnZXQgaXMgcGxheWluZyByaWdodCBub3csIHJ1biB0aGUgdGltZXJcbiAgICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudChwYXJhbXMsIGlzRXJyb3IpIHtcbiAgICBpZiAoaXNFcnJvcikge1xuICAgICAgX2Vycm9yTG9nID0gcGFyYW1zO1xuICAgIH1cblxuICAgIGlmICghcGFyYW1zLmZpbGVfdXJsKSB7XG4gICAgICBwYXJhbXMuZmlsZV91cmwgPSBfZ2V0Q3VycmVudEZpbGUoKTtcbiAgICB9XG5cbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5sb2dFdmVudChnZXRUYWJsZU5hbWUoKSwgcGFyYW1zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZUluaXQodXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZ1xuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5XG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcbiAgICB9XG5cbiAgICBfbWVzc2FnZS5oaWRlKCk7XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIHBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVSZWZyZXNoKHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmcgb2Ygb25lIHVybFxuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5IG9mIHVybHNcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIC8vIGluIGNhc2UgcmVmcmVzaGVkIGZpbGUgZml4ZXMgYW4gZXJyb3Igd2l0aCBwcmV2aW91cyBmaWxlLCBlbnN1cmUgZmxhZyBpcyByZW1vdmVkIHNvIHBsYXliYWNrIGlzIGF0dGVtcHRlZCBhZ2FpblxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfc3RvcmFnZUVycm9yRmxhZyA9IGZhbHNlO1xuICAgIF9lcnJvckxvZyA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICB2YXIgZnJhbWVPYmogPSBfZnJhbWVDb250cm9sbGVyLmdldEZyYW1lT2JqZWN0KF9jdXJyZW50RnJhbWUpO1xuXG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgICAvLyBpbiBjYXNlIGVycm9yIHRpbWVyIHN0aWxsIHJ1bm5pbmcgKG5vIGNvbmRpdGlvbmFsIGNoZWNrIG9uIGVycm9yRmxhZywgaXQgbWF5IGhhdmUgYmVlbiByZXNldCBpbiBvbkZpbGVSZWZyZXNoKVxuICAgIF9jbGVhckVycm9yVGltZXIoKTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgLy8gRGVzdHJveSBwbGF5ZXIgaWZyYW1lLlxuICAgICAgaWYgKCFfcmVzdW1lKSB7XG4gICAgICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGZyYW1lT2JqLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICB2YXIgbG9nUGFyYW1zID0ge30sXG4gICAgICBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBpZiAoX2lzTG9hZGluZykge1xuICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBMb2cgY29uZmlndXJhdGlvbiBldmVudC5cbiAgICAgIGxvZ1BhcmFtcy5ldmVudCA9IFwiY29uZmlndXJhdGlvblwiO1xuICAgICAgbG9nUGFyYW1zLmV2ZW50X2RldGFpbHMgPSBfY29uZmlnRGV0YWlscztcbiAgICAgIGxvZ0V2ZW50KGxvZ1BhcmFtcywgZmFsc2UpO1xuICAgIH1cblxuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcInBsYXlcIiB9LCBmYWxzZSk7XG5cbiAgICBpZiAoX2Vycm9yRmxhZykge1xuICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgZnJhbWVPYmoucGxheSgpO1xuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmIChfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgICAgLy8gYWRkIGZyYW1lIGFuZCBjcmVhdGUgdGhlIHBsYXllclxuICAgICAgICAgIF9mcmFtZUNvbnRyb2xsZXIuYWRkKDApO1xuICAgICAgICAgIF9mcmFtZUNvbnRyb2xsZXIuY3JlYXRlRnJhbWVQbGF5ZXIoMCwgX2FkZGl0aW9uYWxQYXJhbXMsIF9jdXJyZW50RmlsZXNbMF0sIGNvbmZpZy5TS0lOLCBcInBsYXllci1maWxlLmh0bWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmFkZCgwKTtcbiAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZm9sZGVyLmh0bWxcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRhYmxlTmFtZSgpIHtcbiAgICByZXR1cm4gXCJ2aWRlb19ldmVudHNcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllckVuZGVkKCkge1xuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9kb25lKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJSZWFkeSgpIHtcbiAgICB2YXIgZnJhbWVPYmo7XG5cbiAgICAvLyBFbnN1cmVzIG1lc3NhZ2luZyBpcyBoaWRkZW4gZm9yIG5vbi1zdG9yYWdlIHZpZGVvIGZpbGVcbiAgICBfbWVzc2FnZS5oaWRlKCk7XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKHBhcmFtcywgbW9kZSkge1xuICAgIHZhciBpc1N0b3JhZ2VGaWxlO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBfLmNsb25lKHBhcmFtcyk7XG4gICAgX21vZGUgPSBtb2RlO1xuICAgIF9wcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvQ29udGFpbmVyXCIpLnN0eWxlLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIikgKyBcInB4XCI7XG5cbiAgICBfYWRkaXRpb25hbFBhcmFtcy53aWR0aCA9IF9wcmVmcy5nZXRJbnQoXCJyc1dcIik7XG4gICAgX2FkZGl0aW9uYWxQYXJhbXMuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKTtcblxuICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy52aWRlby5oYXNPd25Qcm9wZXJ0eShcInJlc3VtZVwiKSkge1xuICAgICAgX3Jlc3VtZSA9IF9hZGRpdGlvbmFsUGFyYW1zLnZpZGVvLnJlc3VtZTtcbiAgICB9XG5cbiAgICBfbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIiksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2Ugd2hpbGUgU3RvcmFnZSBpbml0aWFsaXplc1xuICAgIF9tZXNzYWdlLnNob3coXCJQbGVhc2Ugd2FpdCB3aGlsZSB5b3VyIHZpZGVvIGlzIGRvd25sb2FkZWQuXCIpO1xuXG4gICAgX2ZyYW1lQ29udHJvbGxlciA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlby5GcmFtZUNvbnRyb2xsZXIoKTtcblxuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIGlzU3RvcmFnZUZpbGUgPSAoT2JqZWN0LmtleXMoX2FkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZSkubGVuZ3RoICE9PSAwKTtcblxuICAgICAgaWYgKCFpc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAgIF9jb25maWdEZXRhaWxzID0gXCJjdXN0b21cIjtcblxuICAgICAgICBfbm9uU3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICBfbm9uU3RvcmFnZS5pbml0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfY29uZmlnRGV0YWlscyA9IFwic3RvcmFnZSBmaWxlXCI7XG5cbiAgICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZpbGUgaW5zdGFuY2VcbiAgICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIF9jb25maWdEZXRhaWxzID0gXCJzdG9yYWdlIGZvbGRlclwiO1xuXG4gICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZm9sZGVyIGluc3RhbmNlXG4gICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGb2xkZXIoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgIH1cblxuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgLy8gQW4gZXJyb3Igb2NjdXJyZWQgd2l0aCBKVyBQbGF5ZXIuXG4gIGZ1bmN0aW9uIHBsYXllckVycm9yKGVycm9yKSB7XG4gICAgdmFyIGRldGFpbHMgPSBudWxsLFxuICAgICAgcGFyYW1zID0ge30sXG4gICAgICBtZXNzYWdlID0gXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoZSB2aWRlby5cIixcbiAgICAgIE1FRElBX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIG1lZGlhOiBGaWxlIGNvdWxkIG5vdCBiZSBwbGF5ZWRcIixcbiAgICAgIFlPVVRVQkVfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgWW91VHViZTogVmlkZW8gY291bGQgbm90IGJlIHBsYXllZFwiLFxuICAgICAgUExBWUVSX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIHBsYXllcjogTm8gcGxheWFibGUgc291cmNlcyBmb3VuZFwiLFxuICAgICAgRU5DT0RJTkdfTUVTU0FHRSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoYXQgdmlkZW8uIEl0IGNvdWxkIGJlIHRoYXQgd2UgZG9uJ3QgXCIgK1xuICAgICAgICBcInN1cHBvcnQgdGhhdCBmb3JtYXQgb3IgaXQgaXMgbm90IGVuY29kZWQgY29ycmVjdGx5LlwiLFxuICAgICAgRk9STUFUX01FU1NBR0UgPSBcIlRoZSBmb3JtYXQgb2YgdGhhdCB2aWRlbyBpcyBub3Qgc3VwcG9ydGVkXCI7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci50eXBlICYmIGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGUgKyBcIiAtIFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLnR5cGUpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuXG4gICAgICAvLyBEaXNwbGF5IGFwcHJvcHJpYXRlIG9uLXNjcmVlbiBlcnJvciBtZXNzYWdlLlxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKChlcnJvci5tZXNzYWdlID09PSBNRURJQV9FUlJPUikgfHwgKGVycm9yLm1lc3NhZ2UgPT09IFlPVVRVQkVfRVJST1IpKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IEVOQ09ESU5HX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXJyb3IubWVzc2FnZSA9PT0gUExBWUVSX0VSUk9SKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IEZPUk1BVF9NRVNTQUdFO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFyYW1zLmV2ZW50ID0gXCJwbGF5ZXIgZXJyb3JcIjtcbiAgICBwYXJhbXMuZXZlbnRfZGV0YWlscyA9IGRldGFpbHM7XG5cbiAgICBsb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIHNob3dFcnJvcihtZXNzYWdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRUYWJsZU5hbWVcIjogZ2V0VGFibGVOYW1lLFxuICAgIFwiaGFzU3RvcmFnZUVycm9yXCI6IGhhc1N0b3JhZ2VFcnJvcixcbiAgICBcImxvZ0V2ZW50XCI6IGxvZ0V2ZW50LFxuICAgIFwib25GaWxlSW5pdFwiOiBvbkZpbGVJbml0LFxuICAgIFwib25GaWxlUmVmcmVzaFwiOiBvbkZpbGVSZWZyZXNoLFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJzaG93RXJyb3JcIjogc2hvd0Vycm9yLFxuICAgIFwicGxheWVyRW5kZWRcIjogcGxheWVyRW5kZWQsXG4gICAgXCJwbGF5ZXJSZWFkeVwiOiBwbGF5ZXJSZWFkeSxcbiAgICBcInBsYXllckVycm9yXCI6IHBsYXllckVycm9yLFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG5cbn0pKGdhZGdldHMpO1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGaWxlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChlLmRldGFpbC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eVxuICAgICAgICAgIGlmIChlLmRldGFpbC5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikpIHtcbiAgICAgICAgICAgIGlmIChlLmRldGFpbC5jaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGluIHRoZSBldmVudCBvZiBhIG5ldHdvcmsgZmFpbHVyZSBhbmQgcmVjb3ZlcnksIGNoZWNrIGlmIHRoZSBXaWRnZXQgaXMgaW4gYSBzdGF0ZSBvZiBzdG9yYWdlIGVycm9yXG4gICAgICAgICAgICAgIGlmIChSaXNlVmlzaW9uLlZpZGVvLmhhc1N0b3JhZ2VFcnJvcigpKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJvY2VlZCB3aXRoIHJlZnJlc2ggbG9naWMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHZpZGVvIGFnYWluIGZyb20gYSBuZXR3b3JrIHJlY292ZXJ5XG4gICAgICAgICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKGUuZGV0YWlsLnVybCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1maWxlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZpbGUgbm90IGZvdW5kXCIsIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCB2aWRlbyBkb2VzIG5vdCBleGlzdCBvciBoYXMgYmVlbiBtb3ZlZCB0byBUcmFzaC5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZmlsZS10aHJvdHRsZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZmlsZSB0aHJvdHRsZWRcIiwgXCJmaWxlX3VybFwiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCB2aWRlbyBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWV4cGlyZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXhwaXJlZFwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiUmlzZSBTdG9yYWdlIHN1YnNjcmlwdGlvbiBpcyBub3QgYWN0aXZlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuXG4gICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1cztcblxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSByZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gUmlzZSBDYWNoZS5cIjtcbiAgICAgIGlmKHN0YXR1c0NvZGUgPT09IDQwNCl7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGltYWdlIGRvZXMgbm90IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cIjtcbiAgICAgIH1cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfSk7XG5cblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuc3RvcmFnZS5mb2xkZXIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS5zdG9yYWdlLmZpbGVOYW1lKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZvbGRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaW5pdGlhbExvYWQgPSB0cnVlO1xuXG4gIHZhciBfZmlsZXMgPSBbXTtcblxuICBmdW5jdGlvbiBfZ2V0VXJscygpIHtcbiAgICByZXR1cm4gXy5wbHVjayhfZmlsZXMsIFwidXJsXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEV4aXN0aW5nRmlsZShmaWxlKSB7XG4gICAgcmV0dXJuIF8uZmluZChfZmlsZXMsIGZ1bmN0aW9uIChmKSB7XG4gICAgICByZXR1cm4gZmlsZS5uYW1lID09PSBmLm5hbWU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVsZXRlRmlsZShmaWxlKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gX2dldEV4aXN0aW5nRmlsZShmaWxlKTtcblxuICAgIGlmIChleGlzdGluZykge1xuICAgICAgX2ZpbGVzLnNwbGljZShfZmlsZXMuaW5kZXhPZihleGlzdGluZyksIDEpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9jaGFuZ2VGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBleGlzdGluZy51cmwgPSBmaWxlLnVybDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfYWRkRmlsZShmaWxlKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gX2dldEV4aXN0aW5nRmlsZShmaWxlKTtcblxuICAgIGlmICghZXhpc3RpbmcpIHtcbiAgICAgIC8vIGV4dHJhY3QgdGhlIGFjdHVhbCBmaWxlIG5hbWUgYW5kIHN0b3JlIGluIG5ldyBwcm9wZXJ0eSBvbiBmaWxlIG9iamVjdFxuICAgICAgZmlsZS5maWxlTmFtZSA9IGZpbGUubmFtZS5zbGljZShmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIvXCIpICsgMSwgZmlsZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgLy8gaW5zZXJ0IGZpbGUgdG8gX2ZpbGVzIGxpc3QgYXQgc3BlY2lmaWMgaW5kZXggYmFzZWQgb24gYWxwaGFiZXRpY2FsIG9yZGVyIG9mIGZpbGUgbmFtZVxuICAgICAgX2ZpbGVzLnNwbGljZShfLnNvcnRlZEluZGV4KF9maWxlcywgZmlsZSwgXCJmaWxlTmFtZVwiKSwgMCwgZmlsZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGZpbGUgPSBlLmRldGFpbDtcblxuICAgICAgLy8gQWRkZWRcbiAgICAgIGlmKGZpbGUuYWRkZWQpIHtcbiAgICAgICAgX2FkZEZpbGUoZmlsZSk7XG5cbiAgICAgICAgaWYgKF9pbml0aWFsTG9hZCkge1xuICAgICAgICAgIF9pbml0aWFsTG9hZCA9IGZhbHNlO1xuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChfZ2V0VXJscygpKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGFuZ2VkIG9yIHVuY2hhbmdlZFxuICAgICAgaWYgKGZpbGUuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpKSB7XG4gICAgICAgIGlmKGZpbGUuY2hhbmdlZCkge1xuICAgICAgICAgIF9jaGFuZ2VGaWxlKGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGluIHRoZSBldmVudCBvZiBhIG5ldHdvcmsgZmFpbHVyZSBhbmQgcmVjb3ZlcnksIGNoZWNrIGlmIHRoZSBXaWRnZXQgaXMgaW4gYSBzdGF0ZSBvZiBzdG9yYWdlIGVycm9yXG4gICAgICAgICAgaWYgKCFSaXNlVmlzaW9uLlZpZGVvLmhhc1N0b3JhZ2VFcnJvcigpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIGJlbG93IGlmIHRoZXJlJ3MgYmVlbiBhIHN0b3JhZ2UgZXJyb3IsIG90aGVyd2lzZSBkbyBub3RoaW5nXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGVkXG4gICAgICBpZihmaWxlLmRlbGV0ZWQpIHtcbiAgICAgICAgX2RlbGV0ZUZpbGUoZmlsZSk7XG4gICAgICB9XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChfZ2V0VXJscygpKTtcblxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVtcHR5LWZvbGRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZW1wdHlcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgY29udGFpbiBhbnkgdmlkZW9zLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1mb2xkZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBkb2Vzbid0IGV4aXN0XCIsIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZvbGRlci1pbnZhbGlkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBmb3JtYXQocykgaW52YWxpZFwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBjb250YWluIGFueSBzdXBwb3J0ZWQgdmlkZW8gZm9ybWF0cy5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWV4cGlyZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXhwaXJlZFwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiUmlzZSBTdG9yYWdlIHN1YnNjcmlwdGlvbiBpcyBub3QgYWN0aXZlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuXG4gICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1cztcblxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSByZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gUmlzZSBDYWNoZS5cIjtcbiAgICAgIGlmKHN0YXR1c0NvZGUgPT09IDQwNCl7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGltYWdlIGRvZXMgbm90IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cIjtcbiAgICAgIH1cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVUeXBlXCIsIFwidmlkZW9cIik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcmlzZUNhY2hlID0gUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlO1xuXG4gIHZhciBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAgLy8gMTUgbWludXRlc1xuICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IG51bGw7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlO1xuXG4gIHZhciBfdXJsID0gXCJcIjtcblxuICBmdW5jdGlvbiBfZ2V0RmlsZShvbWl0Q2FjaGVCdXN0ZXIpIHtcbiAgICByaXNlQ2FjaGUuZ2V0RmlsZShfdXJsLCBmdW5jdGlvbiAocmVzcG9uc2UsIGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG5cbiAgICAgICAgaWYgKF9pc0xvYWRpbmcpIHtcbiAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQocmVzcG9uc2UudXJsKTtcblxuICAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIGludGVydmFsXG4gICAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2gocmVzcG9uc2UudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlcnJvciBvY2N1cnJlZFxuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwibm9uLXN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IHJlc3BvbnNlLnVybFxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IGVycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG5cbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSByZXRyaWV2aW5nIHRoZSBmaWxlIGZyb20gUmlzZSBDYWNoZS5cIjtcbiAgICAgICAgaWYoc3RhdHVzQ29kZSA9PT0gXCI0MDRcIil7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgaW1hZ2UgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgICB9XG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSwgb21pdENhY2hlQnVzdGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICBpZiAoX3JlZnJlc2hJbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICBfcmVmcmVzaEludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9nZXRGaWxlKGZhbHNlKTtcbiAgICAgIH0sIF9yZWZyZXNoRHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBIYW5kbGUgcHJlLW1lcmdlIHVzZSBvZiBcInVybFwiIHNldHRpbmcgcHJvcGVydHlcbiAgICBfdXJsID0gKGRhdGEudXJsICYmIGRhdGEudXJsICE9PSBcIlwiKSA/IGRhdGEudXJsIDogZGF0YS5zZWxlY3Rvci51cmw7XG5cbiAgICBfZ2V0RmlsZSh0cnVlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlZpZGVvID0gUmlzZVZpc2lvbi5Db21tb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlZpZGVvLkZyYW1lQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFBSRUZJWCA9IFwiaWZfXCI7XG5cbiAgZnVuY3Rpb24gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUFJFRklYICsgaW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RnJhbWVPYmplY3QoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBpZnJhbWU7XG5cbiAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuXG4gICAgaWYgKGlmcmFtZSkge1xuICAgICAgcmV0dXJuIChpZnJhbWUuY29udGVudFdpbmRvdykgPyBpZnJhbWUuY29udGVudFdpbmRvdyA6XG4gICAgICAgIChpZnJhbWUuY29udGVudERvY3VtZW50LmRvY3VtZW50KSA/IGlmcmFtZS5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnQgOiBpZnJhbWUuY29udGVudERvY3VtZW50O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NsZWFyKGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgZnJhbWVPYmogPSBnZXRGcmFtZU9iamVjdChpbmRleCksXG4gICAgICBpZnJhbWU7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG4gICAgICBmcmFtZU9iai5yZW1vdmUoKTtcbiAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJhYm91dDpibGFua1wiKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGQoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImFsbG93VHJhbnNwYXJlbmN5XCIsIHRydWUpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJmcmFtZWJvcmRlclwiLCBcIjBcIik7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNjcm9sbGluZ1wiLCBcIm5vXCIpO1xuXG4gICAgZnJhbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUZyYW1lUGxheWVyKGluZGV4LCBwYXJhbXMsIGZpbGVzLCBza2luLCBzcmMpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBmcmFtZU9iaiA9IGdldEZyYW1lT2JqZWN0KGluZGV4KSxcbiAgICAgIGlmcmFtZTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgaWZyYW1lID0gZnJhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcblxuICAgICAgaWZyYW1lLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWZyYW1lLm9ubG9hZCA9IG51bGw7XG5cbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhbmQgbG9hZCB0aGUgcGxheWVyIGluc2lkZSB0aGUgaWZyYW1lXG4gICAgICAgIGZyYW1lT2JqLmluaXQocGFyYW1zLCBmaWxlcywgc2tpbik7XG4gICAgICAgIGZyYW1lT2JqLmxvYWQoKTtcbiAgICAgIH07XG5cbiAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgc3JjKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGUoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCk7XG5cbiAgICBmcmFtZUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZShpbmRleCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQUkVGSVggKyBpbmRleCk7XG5cbiAgICBfY2xlYXIoaW5kZXgpO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyByZW1vdmUgdGhlIGlmcmFtZSBieSBjbGVhcmluZyBhbGwgZWxlbWVudHMgaW5zaWRlIGRpdiBjb250YWluZXJcbiAgICAgIHdoaWxlIChmcmFtZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIGZyYW1lQ29udGFpbmVyLnJlbW92ZUNoaWxkKGZyYW1lQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9LCAyMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KTtcblxuICAgIGZyYW1lQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgYWRkOiBhZGQsXG4gICAgY3JlYXRlRnJhbWVQbGF5ZXI6IGNyZWF0ZUZyYW1lUGxheWVyLFxuICAgIGdldEZyYW1lQ29udGFpbmVyOiBnZXRGcmFtZUNvbnRhaW5lcixcbiAgICBnZXRGcmFtZU9iamVjdDogZ2V0RnJhbWVPYmplY3QsXG4gICAgaGlkZTogaGlkZSxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBzaG93OiBzaG93XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlID0gZnVuY3Rpb24gKG1haW5Db250YWluZXIsIG1lc3NhZ2VDb250YWluZXIpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hY3RpdmUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBfaW5pdCgpIHtcbiAgICB0cnkge1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDYW4ndCBpbml0aWFsaXplIE1lc3NhZ2UgLSBcIiwgZS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgaWYgKF9hY3RpdmUpIHtcbiAgICAgIC8vIGNsZWFyIGNvbnRlbnQgb2YgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIHdoaWxlIChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5yZW1vdmVDaGlsZChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvLyBoaWRlIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgLy8gc2hvdyBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG5cbiAgICAgIF9hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzaG93KG1lc3NhZ2UpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBwO1xuXG4gICAgaWYgKCFfYWN0aXZlKSB7XG4gICAgICAvLyBoaWRlIG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBtZXNzYWdlIGVsZW1lbnRcbiAgICAgIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgIHAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtZXNzYWdlXCIpO1xuXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChwKTtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG4gICAgICBfYWN0aXZlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbWVzc2FnZSBhbHJlYWR5IGJlaW5nIHNob3duLCB1cGRhdGUgbWVzc2FnZSB0ZXh0XG4gICAgICBwID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLm1lc3NhZ2VcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgfVxuICB9XG5cbiAgX2luaXQoKTtcblxuICByZXR1cm4ge1xuICAgIFwiaGlkZVwiOiBoaWRlLFxuICAgIFwic2hvd1wiOiBzaG93XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cywgUmlzZVZpc2lvbiAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25maWd1cmUobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciBhZGRpdGlvbmFsUGFyYW1zID0gbnVsbCxcbiAgICAgIG1vZGUgPSBcIlwiLFxuICAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgIGRpc3BsYXlJZCA9IFwiXCI7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChuYW1lc1swXSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGlmIChuYW1lc1sxXSA9PT0gXCJkaXNwbGF5SWRcIikge1xuICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gdmFsdWVzWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IFwicHJldmlld1wiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLnNldElkcyhjb21wYW55SWQsIGRpc3BsYXlJZCk7XG5cbiAgICAgIGlmIChuYW1lc1syXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzJdKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCFhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIGZvbGRlciB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZvbGRlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub24tc3RvcmFnZSBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJjb21wYW55SWRcIiwgXCJkaXNwbGF5SWRcIiwgXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0yJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
