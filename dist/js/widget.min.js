var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,i){var n=null;e.event?(n=e,n.file_url&&(n.file_format=t(n.file_url)),n.company_id=l,n.display_id=a,d&&(n.version=d),i(n)):i(n)}function i(){var e=new Date,i=e.getUTCFullYear(),t=e.getUTCMonth()+1,n=e.getUTCDate();return 10>t&&(t="0"+t),10>n&&(n="0"+n),i+t+n}function t(e){var i,t=/[?#&]/;return e&&"string"==typeof e?(i=e.substr(e.lastIndexOf(".")+1),t.test(i)&&(i=i.substr(0,-1!==i.indexOf("?")?i.indexOf("?"):i.length),i=i.substr(0,-1!==i.indexOf("#")?i.indexOf("#"):i.length),i=i.substr(0,-1!==i.indexOf("&")?i.indexOf("&"):i.length)),i.toLowerCase()):null}function n(e){var t={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:i(),rows:[{insertId:""}]},n=JSON.parse(JSON.stringify(t));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(e)),n.rows[0].json.ts=(new Date).toISOString(),n}function o(i,t){e(t,function(e){null!==e&&RiseVision.Common.Logger.log(i,e)})}function s(e,i){l=e,a=i}function r(e){d=e}var a="",l="",d=null;return{getInsertData:n,getFileFormat:t,logEvent:o,setIds:s,setVersion:r}}(),RiseVision.Common.Logger=function(e){"use strict";function i(e){var i=new XMLHttpRequest;return new Date-d<358e4?e({}):(i.open("POST",o,!0),i.onloadend=function(){var t=JSON.parse(i.response);e({token:t.access_token,refreshedAt:new Date})},i.send(),void 0)}function t(e){return r&&l===e}function n(n,o){function c(i){var t,r,a=new XMLHttpRequest;r=s.replace("TABLE_ID",n),d=i.refreshedAt||d,u=i.token||u,t=e.getInsertData(o),a.open("POST",r,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(t))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&t(o.event)))return r=!0,l=o.event,setTimeout(function(){r=!1},a),i(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",s="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",r=!1,a=1e3,l="",d=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,i){var t="font-family: "+decodeURIComponent(i.font.family).replace(/'/g,"")+"; ",n="color: "+(i.color?i.color:i.forecolor)+"; ",o="font-size: "+(-1===i.size.indexOf("px")?i.size+"px; ":i.size+"; "),s="font-weight: "+(i.bold?"bold":"normal")+"; ",r="font-style: "+(i.italic?"italic":"normal")+"; ",a="text-decoration: "+(i.underline?"underline":"none")+"; ",l="background-color: "+(i.highlightColor?i.highlightColor:i.backcolor)+";";return"."+e+" {"+t+n+o+s+r+a+l+"}"}function i(e){for(var i=document.createElement("style"),t=0,n=e.length;n>t;t++)i.appendChild(document.createTextNode(e[t]));document.head.appendChild(i)}function t(t,s){function r(){s&&"function"==typeof s&&s()}function a(){r()}var l=null,d=[],u=[],c=[];if(!t||0===t.length)return r(),void 0;t.forEach(function(t){t.class&&t.fontStyle&&i([e(t.class,t.fontStyle)])});for(var f=0;f<t.length;f++)t[f].fontStyle&&t[f].fontStyle.font.type&&"google"===t[f].fontStyle.font.type&&(l=t[f].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),d.push(l));for(f=0;f<t.length;f++)t[f].fontStyle&&t[f].fontStyle.font.type&&"custom"===t[f].fontStyle.font.type&&(u.push(decodeURIComponent(t[f].fontStyle.font.family).replace(/'/g,"")),c.push(t[f].fontStyle.font.url.replace(/'/g,"\\'")));if(0===d.length&&0===u.length)r();else{for(var g=0;g<u.length;g+=1)n(u[g],c[g]);d.length>0?o(d,a):r()}}function n(e,i,t){var n=null,o="font-family: "+e+"; src: url('"+i+"');";t=t||document,n=t.styleSheets[0],null!==n&&n.addRule("@font-face",o)}function o(e,i){WebFont.load({google:{families:e},active:function(){i&&"function"==typeof i&&i()},inactive:function(){i&&"function"==typeof i&&i()},timeout:2e3})}function s(e){for(var i=e.length,t=[],n=0;i>n;n++)t[n]=new Image,t[n].src=e[n]}function r(e){for(var i,t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++)if(i=n[o].split("="),i[0]==e)return decodeURIComponent(i[1]);return""}function a(e){var i="";switch(e){case 404:i="The file does not exist or cannot be accessed.";break;case 507:i="There is not enough disk space to save the file on Rise Cache.";break;default:i="There was a problem retrieving the file from Rise Cache."}return i}function l(e){var i=document.createElement("div");return i.innerHTML=e,i.textContent}function d(e,i){var t=new XMLHttpRequest;if(e&&i&&"function"==typeof i){t.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{t.send(),i(t.status>=200&&t.status<304)}catch(n){i(!1)}}}function u(){var e=25,i=navigator.userAgent.match(/Chrome\/(\S+)/),t=i?i[1]:0;return t&&(t=parseInt(t.substring(0,t.indexOf("."))),e>=t)?!0:!1}return{getQueryParameter:r,getFontCssStyle:e,addCSSRules:i,loadFonts:t,loadCustomFont:n,loadGoogleFonts:o,preloadImages:s,getRiseCacheErrorMessage:a,unescapeHTML:l,hasInternetConnection:d,isLegacy:u}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var i=new XMLHttpRequest;e&&"function"==typeof e&&(i.open("GET",n+"ping?callback=_",!0),i.onreadystatechange=function(){try{4===i.readyState&&(o=!0,200===i.status?(s=!0,e(!0,i.responseText)):(console.debug("Rise Cache is not running"),s=!1,e(!1,null)))}catch(t){console.debug("Caught exception: ",t.description)}},i.send())}function i(e,i,t){function r(){var i,o,r;s?i=t?n+"?url="+encodeURIComponent(e):n+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):t?i=e:(o=e.split("?"),r=1===o.length?"?":"&",i=e+r+"cb="+(new Date).getTime()),a("HEAD",i)}function a(e,t){var n=new XMLHttpRequest,o={xhr:n,url:t};s?(n.open(e,t,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?i(o):"HEAD"===e?a("GET",t):i(o,new Error("The request failed with status code: "+s))}),n.send()):i(o)}if(e&&i&&"function"==typeof i)return o?r():this.ping(r)}function t(e){return e&&"function"==typeof e?o?(e(s),void 0):this.ping(function(){e(s)}):void 0}var n="//localhost:9494/",o=!1,s=!1;return{getFile:i,isRiseCacheRunning:t,ping:e}}();var version="1.1.0";"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e,i){"use strict";function t(){i.rpc.call("","rsevent_done",null,I.getString("id")),null!==k&&u(k,!0),u({event:"done"},!1)}function n(){i.rpc.call("","rsevent_ready",null,I.getString("id"),!0,!0,!0,!0,!0)}function o(){clearTimeout(U),U=null}function s(){o(),U=setTimeout(function(){t()},5e3)}function r(){if(F&&F.length>0){if("file"===C)return F[0];if("folder"===C&&P)return F[P]}return null}function a(){return M}function l(){return D}function d(e,i){G=!0,M="undefined"!=typeof i,O.show(e),P=null,N||s()}function u(e,i){i&&(k=e),e.file_url||(e.file_url=r()),RiseVision.Common.LoggerUtils.logEvent(v(),e)}function c(e){"file"===C?F[0]=e:"folder"===C&&(F=e),O.hide(),N||p()}function f(e){"file"===C?F[0]=e:"folder"===C&&(F=e),x&&x.update(F),G=!1,D=!1,M=!1,k=null}function g(){N=!0,o(),x&&(A?x.pause():(P=null,x.reset()))}function p(){return T&&(T=!1,u({event:"configuration",event_details:b},!1)),N=!1,u({event:"play"},!1),G?(s(),void 0):(x?(O.hide(),x.play()):F&&F.length>0&&(x=new RiseVision.Video.Player(w,C),x.init(F)),void 0)}function v(){return"video_v2_events"}function m(){P=null,t()}function h(){O.hide(),!N&&x&&x.play()}function V(e){P=e}function R(e,t){var o;w=_.clone(e),C=t,I=new i.Prefs,document.getElementById("container").style.width=I.getInt("rsW")+"px",document.getElementById("container").style.height=I.getInt("rsH")+"px",w.width=I.getInt("rsW"),w.height=I.getInt("rsH"),w.video.hasOwnProperty("resume")&&(A=w.video.resume),O=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),RiseVision.Common.Utilities.isLegacy()?d("This version of Video Widget is not supported on this version of Rise Player. Please use the latest Rise Player version available at https://help.risevision.com/user/create-a-display"):(O.show("Please wait while your video is downloaded."),"file"===C?(o=0!==Object.keys(w.storage).length,o?(b="storage file",S=new RiseVision.Video.StorageFile(w),S.init()):(b="custom",L=new RiseVision.Video.NonStorage(w),L.init())):"folder"===C&&(b="storage folder",S=new RiseVision.Video.StorageFolder(w),S.init())),n()}function y(e){var i=null,t={},n="Sorry, there was a problem playing the video.",o="Error loading media: File could not be played",s="Error loading YouTube: Video could not be played",r="Error loading player: No media sources found",a="Error loading playlist: No playable sources found",l="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.",c="The format of that video is not supported";e&&(e.type&&e.message?i=e.type+" - "+e.message:e.type?i=e.type:e.message&&(i=e.message),e.message&&(e.message===o||e.message===s?n=l:(e.message===r||e.message===a)&&(n=c))),t.event="player error",t.event_details=i,D=!0,u(t,!0),d(n)}function E(){g()}var w,C,T=!0,b=null,I=null,S=null,L=null,O=null,x=null,N=!0,A=!0,F=[],P=null,k=null,U=null,G=!1,M=!1,D=!1;return{getTableName:v,hasPlayerError:l,hasStorageError:a,logEvent:u,onFileInit:c,onFileRefresh:f,pause:g,play:p,setAdditionalParams:R,showError:d,playerEnded:m,playerReady:h,playerError:y,playerItemChange:V,stop:E}}(window,gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.PlayerUtils=function(){"use strict";function e(e){for(var i=[],t=0;t<e.length;t+=1)i.push({file:e[t],type:this.getVideoFileType(e[t])});return i}function i(e){var i,t=[".mp4",".webm"],n=e.toLowerCase(),o=null;for(i=0;i<=t.length;i+=1)if(-1!==n.indexOf(t[i])){o=t[i].substr(t[i].lastIndexOf(".")+1);break}return o}return{getPlaylist:e,getVideoFileType:i}}();var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function i(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(t?(t=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Video.onFileRefresh(e.detail.url):(RiseVision.Video.hasStorageError()||RiseVision.Video.hasPlayerError())&&RiseVision.Video.onFileRefresh(e.detail.url)))}),i.addEventListener("rise-storage-api-error",function(e){var i={event:"storage api error",event_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.")}),i.addEventListener("rise-storage-no-file",function(e){var i={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),i.addEventListener("rise-storage-file-throttled",function(e){var i={event:"storage file throttled",file_url:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),i.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),i.addEventListener("rise-storage-subscription-error",function(e){var i={event:"storage subscription error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0)}),i.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),i.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Video.logEvent(i,!0);var t=0;e.detail.error.message&&(t=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var n=RiseVision.Common.Utilities.getRiseCacheErrorMessage(t);RiseVision.Video.showError(n)}),i.addEventListener("rise-cache-not-running",function(e){var i={event:"rise cache not running",event_details:e.detail&&e.detail.error?e.detail.error.message:""};RiseVision.Video.logEvent(i,!0)}),i.setAttribute("folder",e.storage.folder),i.setAttribute("fileName",e.storage.fileName),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("env",config.STORAGE_ENV),i.go())}var t=!0;return{init:i}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function i(){return _.pluck(l,"url")}function t(e){return _.find(l,function(i){return e.name===i.name})}function n(e){var i=t(e);i&&l.splice(l.indexOf(i),1)}function o(e){var i=t(e);i&&(i.url=e.url)}function s(e){var i=t(e);i||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function r(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){var t=e.detail;if(t.added&&(s(t),a))return a=!1,RiseVision.Video.onFileInit(i()),void 0;if(t.hasOwnProperty("changed"))if(t.changed)o(t);else if(!RiseVision.Video.hasStorageError()&&!RiseVision.Video.hasPlayerError())return;t.deleted&&n(t),RiseVision.Video.onFileRefresh(i())}),t.addEventListener("rise-storage-api-error",function(e){var i={event:"storage api error",event_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),t.addEventListener("rise-storage-no-folder",function(e){var i={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected folder does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-folder-invalid",function(){var e={event:"storage folder format(s) invalid"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any supported video formats.")}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-subscription-error",function(e){var i={event:"storage subscription error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0)}),t.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Video.logEvent(i,!0);var t=0;e.detail.error.message&&(t=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var n=RiseVision.Common.Utilities.getRiseCacheErrorMessage(t);RiseVision.Video.showError(n)}),t.addEventListener("rise-cache-not-running",function(e){var i={event:"rise cache not running",event_details:e.detail&&e.detail.error?e.detail.error.message:""};RiseVision.Video.logEvent(i,!0)}),t.setAttribute("fileType","video"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go())}var a=!0,l=[];return{init:r}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function i(e){o.getFile(l,function(e,i){if(i){RiseVision.Video.logEvent({event:"non-storage error",event_details:i.message,file_url:e.url},!0);var n=0;i.message&&(n=+i.message.substring(i.message.indexOf(":")+2));var o=RiseVision.Common.Utilities.getRiseCacheErrorMessage(n);RiseVision.Video.showError(o)}else a?(a=!1,RiseVision.Video.onFileInit(e.url),t()):RiseVision.Video.onFileRefresh(e.url)},e)}function t(){null===r&&(r=setInterval(function(){i(!1)},s))}function n(){l=e.url&&""!==e.url?e.url:e.selector.url,i(!0)}var o=RiseVision.Common.RiseCache,s=9e5,r=null,a=!0,l="";return{init:n}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.Player=function(e){"use strict";function i(){RiseVision.Video.playerEnded()}function t(){V||(clearTimeout(R),R=setTimeout(function(){"PLAYING"!==m.getState().toUpperCase()&&m.play()},1e3*v))}function n(e){RiseVision.Video.playerItemChange(e)}function o(e){e&&RiseVision.Video.playerError({type:"video",message:e.message})}function s(e){e&&RiseVision.Video.playerError({type:"setup",message:e.message})}function r(){m.on("setupError",function(e){s(e)}),m.on("ready",function(){m.on("playlistComplete",function(){i()}),m.on("playlistItem",function(e){n(e.index)}),m.on("error",function(e){o(e)}),m.setVolume(e.video.volume),e.video.controls&&v>1&&m.on("pause",function(){t()}),RiseVision.Video.playerReady()})}function a(i){return{controls:e.video.controls,height:e.height,playlist:h.getPlaylist(i),skin:{name:"rise"},stretching:p,width:e.width}}function l(i){m=jwplayer("player"),y=i,p=e.video.scaleToFit?"uniform":"none",g=e.video.controls?e.video.autoplay:!0,e.video.pause?(e.video.pause="string"==typeof e.video.pause?parseInt(e.video.pause,10):e.video.pause,v=isNaN(e.video.pause)?0:e.video.pause):v=0,m.setup(a(i)),r()}function d(){V=!1,E&&(E=!1,m.load(h.getPlaylist(y))),g&&m.play()}function u(){V=!0,clearTimeout(R),"PLAYING"===m.getState().toUpperCase()&&m.pause()}function c(){function e(){m.off("play",e),m.pause()}function i(){m.off("seeked",i),m.pause()}u(),"COMPLETE"!==m.getState().toUpperCase()&&setTimeout(function(){0!==m.getPlaylistIndex()?(m.on("play",e),m.playlistItem(0)):(m.on("seeked",i),m.seek(0))},100)}function f(e){y=e,E=!0}var g,p,v,m=null,h=RiseVision.Video.PlayerUtils,V=!1,R=null,y=null,E=!1;return{init:l,pause:u,play:d,reset:c,update:f}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,i){"use strict";function t(){try{i.style.height=e.style.height}catch(t){console.warn("Can't initialize Message - ",t.message)}}function n(){if(s){for(;i.firstChild;)i.removeChild(i.firstChild);i.style.display="none",e.style.display="block",s=!1}}function o(t){var n,o=document.createDocumentFragment();s?(n=i.querySelector(".message"),n.innerHTML=t):(e.style.display="none",i.style.display="block",n=document.createElement("p"),n.innerHTML=t,n.setAttribute("class","message"),o.appendChild(n),i.appendChild(o),s=!0)}var s=!1;return t(),{hide:n,show:o}},function(e,i){"use strict";function t(e,i){var t=null,n="",o="",s="";Array.isArray(e)&&e.length>0&&Array.isArray(i)&&i.length>0&&("companyId"===e[0]&&(o=i[0]),"displayId"===e[1]&&(s=i[1]?i[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,s),RiseVision.Common.LoggerUtils.setVersion(version),"additionalParams"===e[2]&&(t=JSON.parse(i[2]),n=0!==Object.keys(t.storage).length?t.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(t,n)))}function n(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function s(){RiseVision.Video.stop()}function r(){e.removeEventListener("WebComponentsReady",r),l&&""!==l&&(i.rpc.register("rscmd_play_"+l,n),i.rpc.register("rscmd_pause_"+l,o),i.rpc.register("rscmd_stop_"+l,s),i.rpc.register("rsparam_set_"+l,t),i.rpc.call("","rsparam_get",null,l,["companyId","displayId","additionalParams"]))}var a=new i.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",r)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdldEV2ZW50UGFyYW1zIiwicGFyYW1zIiwiY2IiLCJqc29uIiwiZXZlbnQiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImNvbXBhbnlfaWQiLCJjb21wYW55SWQiLCJkaXNwbGF5X2lkIiwiZGlzcGxheUlkIiwidmVyc2lvbiIsImdldFN1ZmZpeCIsImRhdGUiLCJEYXRlIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwibW9udGgiLCJnZXRVVENNb250aCIsImRheSIsImdldFVUQ0RhdGUiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInRlc3QiLCJpbmRleE9mIiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJnZXRJbnNlcnREYXRhIiwiQkFTRV9JTlNFUlRfU0NIRU1BIiwia2luZCIsInNraXBJbnZhbGlkUm93cyIsImlnbm9yZVVua25vd25WYWx1ZXMiLCJ0ZW1wbGF0ZVN1ZmZpeCIsInJvd3MiLCJpbnNlcnRJZCIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJ0b1VwcGVyQ2FzZSIsInRzIiwidG9JU09TdHJpbmciLCJsb2dFdmVudCIsInRhYmxlIiwiTG9nZ2VyIiwibG9nIiwic2V0SWRzIiwiY29tcGFueSIsImRpc3BsYXkiLCJzZXRWZXJzaW9uIiwidmFsdWUiLCJ1dGlscyIsInJlZnJlc2hUb2tlbiIsInhociIsIlhNTEh0dHBSZXF1ZXN0IiwicmVmcmVzaERhdGUiLCJvcGVuIiwiUkVGUkVTSF9VUkwiLCJvbmxvYWRlbmQiLCJyZXNwIiwicmVzcG9uc2UiLCJ0b2tlbiIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hlZEF0Iiwic2VuZCIsImlzVGhyb3R0bGVkIiwidGhyb3R0bGUiLCJsYXN0RXZlbnQiLCJ0YWJsZU5hbWUiLCJpbnNlcnRXaXRoVG9rZW4iLCJyZWZyZXNoRGF0YSIsImluc2VydERhdGEiLCJzZXJ2aWNlVXJsIiwicmVwbGFjZSIsInNldFJlcXVlc3RIZWFkZXIiLCJoYXNPd25Qcm9wZXJ0eSIsInNldFRpbWVvdXQiLCJ0aHJvdHRsZURlbGF5IiwiVXRpbGl0aWVzIiwiZ2V0Rm9udENzc1N0eWxlIiwiY2xhc3NOYW1lIiwiZm9udE9iaiIsImZhbWlseSIsImRlY29kZVVSSUNvbXBvbmVudCIsImZvbnQiLCJjb2xvciIsImZvcmVjb2xvciIsInNpemUiLCJ3ZWlnaHQiLCJib2xkIiwiaXRhbGljIiwidW5kZXJsaW5lIiwiaGlnaGxpZ2h0IiwiaGlnaGxpZ2h0Q29sb3IiLCJiYWNrY29sb3IiLCJhZGRDU1NSdWxlcyIsInJ1bGVzIiwic3R5bGUiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImhlYWQiLCJsb2FkRm9udHMiLCJzZXR0aW5ncyIsImNhbGxiYWNrIiwib25Hb29nbGVGb250c0xvYWRlZCIsImZhbWlsaWVzIiwiZ29vZ2xlRmFtaWxpZXMiLCJjdXN0b21GYW1pbGllcyIsImN1c3RvbVVybHMiLCJmb3JFYWNoIiwiaXRlbSIsImNsYXNzIiwiZm9udFN0eWxlIiwidHlwZSIsInNwbGl0IiwicHVzaCIsImoiLCJsb2FkQ3VzdG9tRm9udCIsImxvYWRHb29nbGVGb250cyIsImNvbnRlbnREb2MiLCJzaGVldCIsInJ1bGUiLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJXZWJGb250IiwibG9hZCIsImdvb2dsZSIsImFjdGl2ZSIsImluYWN0aXZlIiwidGltZW91dCIsInByZWxvYWRJbWFnZXMiLCJ1cmxzIiwiaW1hZ2VzIiwiSW1hZ2UiLCJzcmMiLCJnZXRRdWVyeVBhcmFtZXRlciIsInBhcmFtIiwicGFpciIsInF1ZXJ5Iiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdWJzdHJpbmciLCJ2YXJzIiwiZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlIiwic3RhdHVzQ29kZSIsImVycm9yTWVzc2FnZSIsInVuZXNjYXBlSFRNTCIsImh0bWwiLCJkaXYiLCJpbm5lckhUTUwiLCJ0ZXh0Q29udGVudCIsImhhc0ludGVybmV0Q29ubmVjdGlvbiIsImZpbGVQYXRoIiwiZ2V0VGltZSIsInN0YXR1cyIsImUiLCJpc0xlZ2FjeSIsImxlZ2FjeVZlcnNpb24iLCJtYXRjaCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInBhcnNlSW50IiwiUmlzZUNhY2hlIiwicGluZyIsInIiLCJCQVNFX0NBQ0hFX1VSTCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJfcGluZ1JlY2VpdmVkIiwiX2lzQ2FjaGVSdW5uaW5nIiwicmVzcG9uc2VUZXh0IiwiY29uc29sZSIsImRlYnVnIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsInNlcGFyYXRvciIsImVuY29kZVVSSUNvbXBvbmVudCIsIm1ha2VSZXF1ZXN0IiwibWV0aG9kIiwicmVxdWVzdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJFcnJvciIsInRoaXMiLCJpc1Jpc2VDYWNoZVJ1bm5pbmciLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJjb25maWciLCJWaWRlbyIsImdhZGdldHMiLCJfZG9uZSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfZXJyb3JMb2ciLCJfcmVhZHkiLCJfY2xlYXJFcnJvclRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiX2Vycm9yVGltZXIiLCJfc3RhcnRFcnJvclRpbWVyIiwiX2dldEN1cnJlbnRGaWxlIiwiX2N1cnJlbnRGaWxlcyIsIl9tb2RlIiwiX2N1cnJlbnRQbGF5bGlzdEluZGV4IiwiaGFzU3RvcmFnZUVycm9yIiwiX3N0b3JhZ2VFcnJvckZsYWciLCJoYXNQbGF5ZXJFcnJvciIsIl9wbGF5ZXJFcnJvckZsYWciLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiaXNTdG9yYWdlRXJyb3IiLCJfZXJyb3JGbGFnIiwiX21lc3NhZ2UiLCJzaG93IiwiX3ZpZXdlclBhdXNlZCIsImlzRXJyb3IiLCJnZXRUYWJsZU5hbWUiLCJvbkZpbGVJbml0IiwiaGlkZSIsInBsYXkiLCJvbkZpbGVSZWZyZXNoIiwiX3BsYXllciIsInVwZGF0ZSIsInBhdXNlIiwiX3Jlc3VtZSIsInJlc2V0IiwiX2lzTG9hZGluZyIsImV2ZW50X2RldGFpbHMiLCJfY29uZmlnRGV0YWlscyIsIlBsYXllciIsIl9hZGRpdGlvbmFsUGFyYW1zIiwiaW5pdCIsInBsYXllckVuZGVkIiwicGxheWVyUmVhZHkiLCJwbGF5ZXJJdGVtQ2hhbmdlIiwiaW5kZXgiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwibW9kZSIsImlzU3RvcmFnZUZpbGUiLCJfIiwiY2xvbmUiLCJQcmVmcyIsImdldEVsZW1lbnRCeUlkIiwid2lkdGgiLCJnZXRJbnQiLCJoZWlnaHQiLCJ2aWRlbyIsInJlc3VtZSIsIk1lc3NhZ2UiLCJPYmplY3QiLCJrZXlzIiwic3RvcmFnZSIsIl9zdG9yYWdlIiwiU3RvcmFnZUZpbGUiLCJfbm9uU3RvcmFnZSIsIk5vblN0b3JhZ2UiLCJTdG9yYWdlRm9sZGVyIiwicGxheWVyRXJyb3IiLCJlcnJvciIsImRldGFpbHMiLCJNRURJQV9FUlJPUiIsIllPVVRVQkVfRVJST1IiLCJQTEFZRVJfRVJST1IiLCJQTEFZTElTVF9FUlJPUiIsIkVOQ09ESU5HX01FU1NBR0UiLCJGT1JNQVRfTUVTU0FHRSIsInN0b3AiLCJQbGF5ZXJVdGlscyIsImdldFBsYXlsaXN0IiwibGlzdCIsInBsYXlsaXN0IiwiZmlsZSIsImdldFZpZGVvRmlsZVR5cGUiLCJleHRlbnNpb25zIiwidXJsTG93ZXJjYXNlIiwiZGV0YWlsIiwiX2luaXRpYWxMb2FkIiwiY2hhbmdlZCIsImNvZGUiLCJjdXJyZW50VGFyZ2V0Iiwic2V0QXR0cmlidXRlIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJnbyIsIl9nZXRVcmxzIiwicGx1Y2siLCJfZmlsZXMiLCJfZ2V0RXhpc3RpbmdGaWxlIiwiZmluZCIsImYiLCJuYW1lIiwiX2RlbGV0ZUZpbGUiLCJleGlzdGluZyIsInNwbGljZSIsIl9jaGFuZ2VGaWxlIiwiX2FkZEZpbGUiLCJzbGljZSIsInNvcnRlZEluZGV4IiwiYWRkZWQiLCJkZWxldGVkIiwiX2dldEZpbGUiLCJvbWl0Q2FjaGVCdXN0ZXIiLCJyaXNlQ2FjaGUiLCJfdXJsIiwiX3N0YXJ0UmVmcmVzaEludGVydmFsIiwiX3JlZnJlc2hJbnRlcnZhbElkIiwic2V0SW50ZXJ2YWwiLCJfcmVmcmVzaER1cmF0aW9uIiwic2VsZWN0b3IiLCJfb25Db21wbGV0ZSIsIl9vblBhdXNlIiwiX3BhdXNlVGltZXIiLCJfcGxheWVySW5zdGFuY2UiLCJnZXRTdGF0ZSIsIl9wYXVzZUR1cmF0aW9uIiwiX29uUGxheWxpc3RJdGVtIiwiX29uUGxheWVyRXJyb3IiLCJfb25TZXR1cEVycm9yIiwiX2NvbmZpZ3VyZUhhbmRsZXJzIiwib24iLCJzZXRWb2x1bWUiLCJ2b2x1bWUiLCJjb250cm9scyIsIl9nZXRTZXR1cERhdGEiLCJmaWxlcyIsIl91dGlscyIsInNraW4iLCJzdHJldGNoaW5nIiwiX3N0cmV0Y2hpbmciLCJqd3BsYXllciIsIl9hdXRvUGxheSIsImF1dG9wbGF5IiwiaXNOYU4iLCJzZXR1cCIsIl91cGRhdGVXYWl0aW5nIiwib25QbGF5Iiwib2ZmIiwib25TZWVrZWQiLCJnZXRQbGF5bGlzdEluZGV4IiwicGxheWxpc3RJdGVtIiwic2VlayIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJ3YXJuIiwiX2FjdGl2ZSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsInAiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uZmlndXJlIiwibmFtZXMiLCJ2YWx1ZXMiLCJhZGRpdGlvbmFsUGFyYW1zIiwiQXJyYXkiLCJpc0FycmF5IiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImlkIiwicmVnaXN0ZXIiLCJwcmVmcyIsIm9uY29udGV4dG1lbnUiLCJfZ2FxIiwiZ2EiLCJhc3luYyIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsdUJBQ0ZDLGNBQWUsaUJBQ2ZDLGlCQUFrQiw0RUFDbEJDLHFCQUFzQiwyQkFDdEJDLHFCQUFzQixxRUFDdEJDLFlBQWEsT0FDYkMsVUFBVyw2Q0FJVEMsV0FBYUEsY0FDakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPQyxZQUFjLFdBQzlCLFlBV0EsU0FBU0MsR0FBZUMsRUFBUUMsR0FDOUIsR0FBSUMsR0FBTyxJQUdQRixHQUFPRyxPQUNURCxFQUFPRixFQUVIRSxFQUFLRSxXQUNQRixFQUFLRyxZQUFjQyxFQUFjSixFQUFLRSxXQUd4Q0YsRUFBS0ssV0FBYUMsRUFDbEJOLEVBQUtPLFdBQWFDLEVBRWRDLElBQ0ZULEVBQUtTLFFBQVVBLEdBR2pCVixFQUFHQyxJQUdIRCxFQUFHQyxHQUtQLFFBQVNVLEtBQ1AsR0FBSUMsR0FBTyxHQUFJQyxNQUNiQyxFQUFPRixFQUFLRyxpQkFDWkMsRUFBUUosRUFBS0ssY0FBZ0IsRUFDN0JDLEVBQU1OLEVBQUtPLFlBVWIsT0FSWSxJQUFSSCxJQUNGQSxFQUFRLElBQU1BLEdBR04sR0FBTkUsSUFDRkEsRUFBTSxJQUFNQSxHQUdQSixFQUFPRSxFQUFRRSxFQU14QixRQUFTYixHQUFjZSxHQUNyQixHQUNFQyxHQURFQyxFQUFZLE9BR2hCLE9BQUtGLElBQXNCLGdCQUFSQSxJQUluQkMsRUFB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QUlHIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBleHBvcnRlZCBXSURHRVRfQ09NTU9OX0NPTkZJRyAqL1xudmFyIFdJREdFVF9DT01NT05fQ09ORklHID0ge1xuICBBVVRIX1BBVEhfVVJMOiBcInYxL3dpZGdldC9hdXRoXCIsXG4gIExPR0dFUl9DTElFTlRfSUQ6IFwiMTA4ODUyNzE0NzEwOS02cTFvMnZ0aWhuMzQyOTJwanQ0Y2tobWhjazByazBvNy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbVwiLFxuICBMT0dHRVJfQ0xJRU5UX1NFQ1JFVDogXCJubFp5cmNQTGc2b0V3TzlmOVdmbjI5V2hcIixcbiAgTE9HR0VSX1JFRlJFU0hfVE9LRU46IFwiMS94enQ0a3d6RTFIN1c5Vm5LQjhjQWFDeDZ6YjRFczRuS0VvcWFZSGRURDE1SWdPckpEdGR1bjZ6SzZYaUFUQ0tUXCIsXG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIixcbiAgU1RPUkVfVVJMOiBcImh0dHBzOi8vc3RvcmUtZG90LXJ2YXNlcnZlcjIuYXBwc3BvdC5jb20vXCJcbn07XG4vKiBnbG9iYWwgV0lER0VUX0NPTU1PTl9DT05GSUcgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMgPSAoZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gICB2YXIgZGlzcGxheUlkID0gXCJcIixcbiAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgdmVyc2lvbiA9IG51bGw7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cblxuICAvKiBSZXRyaWV2ZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGV2ZW50IGxvZ2dlci4gKi9cbiAgZnVuY3Rpb24gZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBjYikge1xuICAgIHZhciBqc29uID0gbnVsbDtcblxuICAgIC8vIGV2ZW50IGlzIHJlcXVpcmVkLlxuICAgIGlmIChwYXJhbXMuZXZlbnQpIHtcbiAgICAgIGpzb24gPSBwYXJhbXM7XG5cbiAgICAgIGlmIChqc29uLmZpbGVfdXJsKSB7XG4gICAgICAgIGpzb24uZmlsZV9mb3JtYXQgPSBnZXRGaWxlRm9ybWF0KGpzb24uZmlsZV91cmwpO1xuICAgICAgfVxuXG4gICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGpzb24udmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBzdWZmaXggZm9yIEJRIHRhYmxlIG5hbWUuXG4gIGZ1bmN0aW9uIGdldFN1ZmZpeCgpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgICAgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XG5cbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIH1cblxuICAgIGlmIChkYXkgPCAxMCkge1xuICAgICAgZGF5ID0gXCIwXCIgKyBkYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHllYXIgKyBtb250aCArIGRheTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIEJBU0VfSU5TRVJUX1NDSEVNQSA9IHtcbiAgICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICAgIFwic2tpcEludmFsaWRSb3dzXCI6IGZhbHNlLFxuICAgICAgXCJpZ25vcmVVbmtub3duVmFsdWVzXCI6IGZhbHNlLFxuICAgICAgXCJ0ZW1wbGF0ZVN1ZmZpeFwiOiBnZXRTdWZmaXgoKSxcbiAgICAgIFwicm93c1wiOiBbe1xuICAgICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShCQVNFX0lOU0VSVF9TQ0hFTUEpKTtcblxuICAgIGRhdGEucm93c1swXS5pbnNlcnRJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKS50b1VwcGVyQ2FzZSgpO1xuICAgIGRhdGEucm93c1swXS5qc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbi50cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMoY29tcGFueSwgZGlzcGxheSkge1xuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnk7XG4gICAgZGlzcGxheUlkID0gZGlzcGxheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFZlcnNpb24odmFsdWUpIHtcbiAgICB2ZXJzaW9uID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SW5zZXJ0RGF0YVwiOiBnZXRJbnNlcnREYXRhLFxuICAgIFwiZ2V0RmlsZUZvcm1hdFwiOiBnZXRGaWxlRm9ybWF0LFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJzZXRJZHNcIjogc2V0SWRzLFxuICAgIFwic2V0VmVyc2lvblwiOiBzZXRWZXJzaW9uXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHRhYmxlTmFtZSk7XG4gICAgICByZWZyZXNoRGF0ZSA9IHJlZnJlc2hEYXRhLnJlZnJlc2hlZEF0IHx8IHJlZnJlc2hEYXRlO1xuICAgICAgdG9rZW4gPSByZWZyZXNoRGF0YS50b2tlbiB8fCB0b2tlbjtcbiAgICAgIGluc2VydERhdGEgPSB1dGlscy5nZXRJbnNlcnREYXRhKHBhcmFtcyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgZGF0YS5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgICBpZiAocGFyYW1zLmNiICYmIHR5cGVvZiBwYXJhbXMuY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGFyYW1zLmNiKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGluc2VydERhdGEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVmcmVzaFRva2VuKGluc2VydFdpdGhUb2tlbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibG9nXCI6IGxvZ1xuICB9O1xufSkoUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMpO1xuLyogZ2xvYmFsIFdlYkZvbnQgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OiBcIiArIGRlY29kZVVSSUNvbXBvbmVudChmb250T2JqLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpICsgXCI7IFwiO1xuICAgIHZhciBjb2xvciA9IFwiY29sb3I6IFwiICsgKGZvbnRPYmouY29sb3IgPyBmb250T2JqLmNvbG9yIDogZm9udE9iai5mb3JlY29sb3IpICsgXCI7IFwiO1xuICAgIHZhciBzaXplID0gXCJmb250LXNpemU6IFwiICsgKGZvbnRPYmouc2l6ZS5pbmRleE9mKFwicHhcIikgPT09IC0xID8gZm9udE9iai5zaXplICsgXCJweDsgXCIgOiBmb250T2JqLnNpemUgKyBcIjsgXCIpO1xuICAgIHZhciB3ZWlnaHQgPSBcImZvbnQtd2VpZ2h0OiBcIiArIChmb250T2JqLmJvbGQgPyBcImJvbGRcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciBpdGFsaWMgPSBcImZvbnQtc3R5bGU6IFwiICsgKGZvbnRPYmouaXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciB1bmRlcmxpbmUgPSBcInRleHQtZGVjb3JhdGlvbjogXCIgKyAoZm9udE9iai51bmRlcmxpbmUgPyBcInVuZGVybGluZVwiIDogXCJub25lXCIpICsgXCI7IFwiO1xuICAgIHZhciBoaWdobGlnaHQgPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgKGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgPyBmb250T2JqLmhpZ2hsaWdodENvbG9yIDogZm9udE9iai5iYWNrY29sb3IpICsgXCI7XCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjYikge1xuICAgIHZhciBmYW1pbGllcyA9IG51bGwsXG4gICAgICBnb29nbGVGYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tRmFtaWxpZXMgPSBbXSxcbiAgICAgIGN1c3RvbVVybHMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Hb29nbGVGb250c0xvYWRlZCgpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncyB8fCBzZXR0aW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGN1c3RvbSBjc3MgY2xhc3MgbmFtZXMgYW5kIGFkZCBydWxlcyBpZiBzb1xuICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0uY2xhc3MgJiYgaXRlbS5mb250U3R5bGUpIHtcbiAgICAgICAgYWRkQ1NTUnVsZXMoWyBnZXRGb250Q3NzU3R5bGUoaXRlbS5jbGFzcywgaXRlbS5mb250U3R5bGUpIF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR29vZ2xlIGZvbnRzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImdvb2dsZVwiKSkge1xuICAgICAgICAvLyBSZW1vdmUgZmFsbGJhY2sgZm9udC5cbiAgICAgICAgZmFtaWxpZXMgPSBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkuc3BsaXQoXCIsXCIpWzBdO1xuXG4gICAgICAgIC8vIHN0cmlwIHBvc3NpYmxlIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgZmFtaWxpZXMgPSBmYW1pbGllcy5yZXBsYWNlKC8nL2csIFwiXCIpO1xuXG4gICAgICAgIGdvb2dsZUZhbWlsaWVzLnB1c2goZmFtaWxpZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN1c3RvbSBmb250c1xuICAgIGZvciAoaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImN1c3RvbVwiKSkge1xuICAgICAgICAvLyBkZWNvZGUgdmFsdWUgYW5kIHN0cmlwIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgY3VzdG9tRmFtaWxpZXMucHVzaChkZWNvZGVVUklDb21wb25lbnQoc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpKTtcbiAgICAgICAgLy8gc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21VcmxzLnB1c2goc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQudXJsLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdvb2dsZUZhbWlsaWVzLmxlbmd0aCA9PT0gMCAmJiBjdXN0b21GYW1pbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgZm9udHNcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3VzdG9tRmFtaWxpZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgbG9hZEN1c3RvbUZvbnQoY3VzdG9tRmFtaWxpZXNbal0sIGN1c3RvbVVybHNbal0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2FkR29vZ2xlRm9udHMoZ29vZ2xlRmFtaWxpZXMsIG9uR29vZ2xlRm9udHNMb2FkZWQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnRzKGZhbWlsaWVzLCBjYikge1xuICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICBnb29nbGU6IHtcbiAgICAgICAgZmFtaWxpZXM6IGZhbWlsaWVzXG4gICAgICB9LFxuICAgICAgYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRpbWVvdXQ6IDIwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXModXJscykge1xuICAgIHZhciBsZW5ndGggPSB1cmxzLmxlbmd0aCxcbiAgICAgIGltYWdlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaW1hZ2VzW2ldID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaV0uc3JjID0gdXJsc1tpXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtZXRlcihwYXJhbSkge1xuICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgdmFycyA9IHF1ZXJ5LnNwbGl0KFwiJlwiKSxcbiAgICAgIHBhaXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgaWYgKHBhaXJbMF0gPT0gcGFyYW0pIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSkge1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgY2FzZSA0MDQ6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTA3OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIGlzIG5vdCBlbm91Z2ggZGlzayBzcGFjZSB0byBzYXZlIHRoZSBmaWxlIG9uIFJpc2UgQ2FjaGUuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiO1xuICAgIH1cblxuICAgIHJldHVybiBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBmdW5jdGlvbiB1bmVzY2FwZUhUTUwoaHRtbCkge1xuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICByZXR1cm4gZGl2LnRleHRDb250ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzSW50ZXJuZXRDb25uZWN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghZmlsZVBhdGggfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJIRUFEXCIsIGZpbGVQYXRoICsgXCI/Y2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZmFsc2UpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGNhbGxiYWNrKCh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzA0KSk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNocm9tZSB2ZXJzaW9uIGlzIHVuZGVyIGEgY2VydGFpbiB2ZXJzaW9uXG4gICAqL1xuICBmdW5jdGlvbiBpc0xlZ2FjeSgpIHtcbiAgICB2YXIgbGVnYWN5VmVyc2lvbiA9IDI1O1xuXG4gICAgdmFyIG1hdGNoID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFxcUyspLyk7XG4gICAgdmFyIHZlcnNpb24gPSBtYXRjaCA/IG1hdGNoWzFdIDogMDtcblxuICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICB2ZXJzaW9uID0gcGFyc2VJbnQodmVyc2lvbi5zdWJzdHJpbmcoMCx2ZXJzaW9uLmluZGV4T2YoXCIuXCIpKSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uIDw9IGxlZ2FjeVZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRRdWVyeVBhcmFtZXRlcjogZ2V0UXVlcnlQYXJhbWV0ZXIsXG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgZ2V0Rm9udENzc1N0eWxlLFxuICAgIGFkZENTU1J1bGVzOiAgICAgIGFkZENTU1J1bGVzLFxuICAgIGxvYWRGb250czogICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICBsb2FkQ3VzdG9tRm9udCxcbiAgICBsb2FkR29vZ2xlRm9udHM6ICAgbG9hZEdvb2dsZUZvbnRzLFxuICAgIHByZWxvYWRJbWFnZXM6ICAgIHByZWxvYWRJbWFnZXMsXG4gICAgZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlOiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UsXG4gICAgdW5lc2NhcGVIVE1MOiB1bmVzY2FwZUhUTUwsXG4gICAgaGFzSW50ZXJuZXRDb25uZWN0aW9uOiBoYXNJbnRlcm5ldENvbm5lY3Rpb24sXG4gICAgaXNMZWdhY3k6IGlzTGVnYWN5XG4gIH07XG59KSgpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUgPSAoZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgQkFTRV9DQUNIRV9VUkwgPSBcIi8vbG9jYWxob3N0Ojk0OTQvXCI7XG5cbiAgdmFyIF9waW5nUmVjZWl2ZWQgPSBmYWxzZSxcbiAgICBfaXNDYWNoZVJ1bm5pbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBwaW5nKGNhbGxiYWNrKSB7XG4gICAgdmFyIHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwgKyBcInBpbmc/Y2FsbGJhY2s9X1wiLCB0cnVlKTtcbiAgICByLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG4gICAgICAgICAgLy8gc2F2ZSB0aGlzIHJlc3VsdCBmb3IgdXNlIGluIGdldEZpbGUoKVxuICAgICAgICAgIF9waW5nUmVjZWl2ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYoci5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgICBfaXNDYWNoZVJ1bm5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayh0cnVlLCByLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJSaXNlIENhY2hlIGlzIG5vdCBydW5uaW5nXCIpO1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJDYXVnaHQgZXhjZXB0aW9uOiBcIiwgZS5kZXNjcmlwdGlvbik7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZShmaWxlVXJsLCBjYWxsYmFjaywgbm9jYWNoZWJ1c3Rlcikge1xuICAgIGlmICghZmlsZVVybCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWxlUmVxdWVzdCgpIHtcbiAgICAgIHZhciB1cmwsIHN0ciwgc2VwYXJhdG9yO1xuXG4gICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSB1cmwgd2l0aCBjYWNoZWJ1c3RlciBvciBub3RcbiAgICAgICAgdXJsID0gKG5vY2FjaGVidXN0ZXIpID8gQkFTRV9DQUNIRV9VUkwgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCkgOlxuICAgICAgICBCQVNFX0NBQ0hFX1VSTCArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChub2NhY2hlYnVzdGVyKSB7XG4gICAgICAgICAgdXJsID0gZmlsZVVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSBmaWxlVXJsLnNwbGl0KFwiP1wiKTtcbiAgICAgICAgICBzZXBhcmF0b3IgPSAoc3RyLmxlbmd0aCA9PT0gMSkgPyBcIj9cIiA6IFwiJlwiO1xuICAgICAgICAgIHVybCA9IGZpbGVVcmwgKyBzZXBhcmF0b3IgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWFrZVJlcXVlc3QoXCJIRUFEXCIsIHVybCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgcmVxdWVzdCA9IHtcbiAgICAgICAgICB4aHI6IHhocixcbiAgICAgICAgICB1cmw6IHVybFxuICAgICAgICB9O1xuXG4gICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzIHx8IDA7XG5cbiAgICAgICAgICBpZiAoc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTZXJ2ZXIgbWF5IG5vdCBzdXBwb3J0IEhFQUQgcmVxdWVzdC4gRmFsbGJhY2sgdG8gYSBHRVQgcmVxdWVzdC5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICAgIG1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LCBuZXcgRXJyb3IoXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBzdGF0dXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZyAocHJldmlldyksIHNraXAgSEVBRCByZXF1ZXN0IGFuZCBleGVjdXRlIGNhbGxiYWNrIGltbWVkaWF0ZWx5XG4gICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZpbGVSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbGVSZXF1ZXN0KCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBpc1Jpc2VDYWNoZVJ1bm5pbmcoY2FsbGJhY2spIHtcbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2soX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhfaXNDYWNoZVJ1bm5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBpc1Jpc2VDYWNoZVJ1bm5pbmc6IGlzUmlzZUNhY2hlUnVubmluZyxcbiAgICBwaW5nOiBwaW5nXG4gIH07XG5cbn0pKCk7XG5cbi8qIGV4cG9ydGVkIHZlcnNpb24gKi9cbnZhciB2ZXJzaW9uID0gXCIxLjEuMFwiO1xuLyogZXhwb3J0ZWQgY29uZmlnICovXG5pZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLmNvbW1vbi5pMThuLmNvbmZpZ1wiLCBbXSlcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xufVxuXG52YXIgIGNvbmZpZyA9IHtcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiXG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0ge307XG5cblJpc2VWaXNpb24uVmlkZW8gPSAoZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FkZGl0aW9uYWxQYXJhbXMsIF9tb2RlO1xuXG4gIHZhciBfaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBfY29uZmlnRGV0YWlscyA9IG51bGw7XG5cbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxuICAgIF9ub25TdG9yYWdlID0gbnVsbCxcbiAgICBfbWVzc2FnZSA9IG51bGwsXG4gICAgX3BsYXllciA9IG51bGw7XG5cbiAgdmFyIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gIHZhciBfcmVzdW1lID0gdHJ1ZTtcblxuICB2YXIgX2N1cnJlbnRGaWxlcyA9IFtdO1xuXG4gIHZhciBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuXG4gIHZhciBfZXJyb3JMb2cgPSBudWxsLFxuICAgIF9lcnJvclRpbWVyID0gbnVsbCxcbiAgICBfZXJyb3JGbGFnID0gZmFsc2U7XG5cbiAgdmFyIF9zdG9yYWdlRXJyb3JGbGFnID0gZmFsc2UsXG4gICAgX3BsYXllckVycm9yRmxhZyA9IGZhbHNlO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9kb25lKCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X2RvbmVcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpKTtcblxuICAgIC8vIEFueSBlcnJvcnMgbmVlZCB0byBiZSBsb2dnZWQgYmVmb3JlIHRoZSBkb25lIGV2ZW50LlxuICAgIGlmIChfZXJyb3JMb2cgIT09IG51bGwpIHtcbiAgICAgIGxvZ0V2ZW50KF9lcnJvckxvZywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwiZG9uZVwiIH0sIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhckVycm9yVGltZXIoKSB7XG4gICAgY2xlYXJUaW1lb3V0KF9lcnJvclRpbWVyKTtcbiAgICBfZXJyb3JUaW1lciA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRFcnJvclRpbWVyKCkge1xuICAgIF9jbGVhckVycm9yVGltZXIoKTtcblxuICAgIF9lcnJvclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBub3RpZnkgVmlld2VyIHdpZGdldCBpcyBkb25lXG4gICAgICBfZG9uZSgpO1xuICAgIH0sIDUwMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlKCkge1xuICAgIGlmIChfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1swXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAgIGlmIChfY3VycmVudFBsYXlsaXN0SW5kZXgpIHtcbiAgICAgICAgICAvLyByZXRyaWV2ZSB0aGUgY3VycmVudGx5IHBsYXllZCBmaWxlXG4gICAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbX2N1cnJlbnRQbGF5bGlzdEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoYXNTdG9yYWdlRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9zdG9yYWdlRXJyb3JGbGFnO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzUGxheWVyRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9wbGF5ZXJFcnJvckZsYWc7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSwgaXNTdG9yYWdlRXJyb3IpIHtcbiAgICBfZXJyb3JGbGFnID0gdHJ1ZTtcbiAgICBfc3RvcmFnZUVycm9yRmxhZyA9IHR5cGVvZiBpc1N0b3JhZ2VFcnJvciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgIF9tZXNzYWdlLnNob3cobWVzc2FnZSk7XG5cbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuXG4gICAgLy8gaWYgV2lkZ2V0IGlzIHBsYXlpbmcgcmlnaHQgbm93LCBydW4gdGhlIHRpbWVyXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudChwYXJhbXMsIGlzRXJyb3IpIHtcbiAgICBpZiAoaXNFcnJvcikge1xuICAgICAgX2Vycm9yTG9nID0gcGFyYW1zO1xuICAgIH1cblxuICAgIGlmICghcGFyYW1zLmZpbGVfdXJsKSB7XG4gICAgICBwYXJhbXMuZmlsZV91cmwgPSBfZ2V0Q3VycmVudEZpbGUoKTtcbiAgICB9XG5cbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5sb2dFdmVudChnZXRUYWJsZU5hbWUoKSwgcGFyYW1zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZUluaXQodXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZ1xuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5XG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcbiAgICB9XG5cbiAgICBfbWVzc2FnZS5oaWRlKCk7XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIHBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVSZWZyZXNoKHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmcgb2Ygb25lIHVybFxuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5IG9mIHVybHNcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIGlmIChfcGxheWVyKSB7XG4gICAgICBfcGxheWVyLnVwZGF0ZShfY3VycmVudEZpbGVzKTsgIFxuICAgIH1cblxuICAgIC8vIGluIGNhc2UgcmVmcmVzaGVkIGZpbGUgZml4ZXMgYW4gZXJyb3Igd2l0aCBwcmV2aW91cyBmaWxlLCBlbnN1cmUgZmxhZyBpcyByZW1vdmVkIHNvIHBsYXliYWNrIGlzIGF0dGVtcHRlZCBhZ2FpblxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfcGxheWVyRXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfZXJyb3JMb2cgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICAgIC8vIGluIGNhc2UgZXJyb3IgdGltZXIgc3RpbGwgcnVubmluZyAobm8gY29uZGl0aW9uYWwgY2hlY2sgb24gZXJyb3JGbGFnLCBpdCBtYXkgaGF2ZSBiZWVuIHJlc2V0IGluIG9uRmlsZVJlZnJlc2gpXG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgaWYgKF9wbGF5ZXIpIHtcbiAgICAgIGlmICghX3Jlc3VtZSkge1xuICAgICAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuICAgICAgICBfcGxheWVyLnJlc2V0KCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgX3BsYXllci5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoX2lzTG9hZGluZykge1xuICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBMb2cgY29uZmlndXJhdGlvbiBldmVudC5cbiAgICAgIGxvZ0V2ZW50KHtcbiAgICAgICAgZXZlbnQ6IFwiY29uZmlndXJhdGlvblwiLFxuICAgICAgICBldmVudF9kZXRhaWxzOiBfY29uZmlnRGV0YWlsc1xuICAgICAgfSwgZmFsc2UpO1xuICAgIH1cblxuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcInBsYXlcIiB9LCBmYWxzZSk7XG5cbiAgICBpZiAoX2Vycm9yRmxhZykge1xuICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChfcGxheWVyKSB7XG4gICAgICAvLyBFbnN1cmVzIHBvc3NpYmxlIGVycm9yIG1lc3NhZ2luZyBnZXRzIGhpZGRlbiBhbmQgdmlkZW8gZ2V0cyBzaG93blxuICAgICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgICBfcGxheWVyLnBsYXkoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgX3BsYXllciA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlBsYXllcihfYWRkaXRpb25hbFBhcmFtcywgX21vZGUpO1xuICAgICAgICBfcGxheWVyLmluaXQoX2N1cnJlbnRGaWxlcyk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuIFwidmlkZW9fdjJfZXZlbnRzXCI7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJFbmRlZCgpIHtcbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuXG4gICAgX2RvbmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllclJlYWR5KCkge1xuICAgIC8vIEVuc3VyZXMgbG9hZGluZyBtZXNzYWdpbmcgaXMgaGlkZGVuIGFuZCB2aWRlbyBnZXRzIHNob3duXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkICYmIF9wbGF5ZXIpIHtcbiAgICAgIF9wbGF5ZXIucGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllckl0ZW1DaGFuZ2UoaW5kZXgpIHtcbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMocGFyYW1zLCBtb2RlKSB7XG4gICAgdmFyIGlzU3RvcmFnZUZpbGU7XG5cbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IF8uY2xvbmUocGFyYW1zKTtcbiAgICBfbW9kZSA9IG1vZGU7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLnN0eWxlLndpZHRoID0gX3ByZWZzLmdldEludChcInJzV1wiKSArIFwicHhcIjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMud2lkdGggPSBfcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMudmlkZW8uaGFzT3duUHJvcGVydHkoXCJyZXN1bWVcIikpIHtcbiAgICAgIF9yZXN1bWUgPSBfYWRkaXRpb25hbFBhcmFtcy52aWRlby5yZXN1bWU7XG4gICAgfVxuXG4gICAgX21lc3NhZ2UgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKSk7XG5cbiAgICBpZiAoUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLmlzTGVnYWN5KCkpIHtcbiAgICAgIHNob3dFcnJvcihcIlRoaXMgdmVyc2lvbiBvZiBWaWRlbyBXaWRnZXQgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHZlcnNpb24gb2YgUmlzZSBQbGF5ZXIuIFwiICtcbiAgICAgICAgXCJQbGVhc2UgdXNlIHRoZSBsYXRlc3QgUmlzZSBQbGF5ZXIgdmVyc2lvbiBhdmFpbGFibGUgYXQgaHR0cHM6Ly9oZWxwLnJpc2V2aXNpb24uY29tL3VzZXIvY3JlYXRlLWEtZGlzcGxheVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2Ugd2hpbGUgU3RvcmFnZSBpbml0aWFsaXplc1xuICAgICAgX21lc3NhZ2Uuc2hvdyhcIlBsZWFzZSB3YWl0IHdoaWxlIHlvdXIgdmlkZW8gaXMgZG93bmxvYWRlZC5cIik7XG5cbiAgICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgaXNTdG9yYWdlRmlsZSA9IChPYmplY3Qua2V5cyhfYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApO1xuXG4gICAgICAgIGlmICghaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICAgIF9jb25maWdEZXRhaWxzID0gXCJjdXN0b21cIjtcblxuICAgICAgICAgIF9ub25TdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgX25vblN0b3JhZ2UuaW5pdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9jb25maWdEZXRhaWxzID0gXCJzdG9yYWdlIGZpbGVcIjtcblxuICAgICAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmaWxlIGluc3RhbmNlXG4gICAgICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICBfY29uZmlnRGV0YWlscyA9IFwic3RvcmFnZSBmb2xkZXJcIjtcblxuICAgICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZm9sZGVyIGluc3RhbmNlXG4gICAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZvbGRlcihfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8vIEFuIGVycm9yIG9jY3VycmVkIHdpdGggSlcgUGxheWVyLlxuICBmdW5jdGlvbiBwbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIHZhciBkZXRhaWxzID0gbnVsbCxcbiAgICAgIHBhcmFtcyA9IHt9LFxuICAgICAgbWVzc2FnZSA9IFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8uXCIsXG4gICAgICBNRURJQV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBtZWRpYTogRmlsZSBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBZT1VUVUJFX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIFlvdVR1YmU6IFZpZGVvIGNvdWxkIG5vdCBiZSBwbGF5ZWRcIixcbiAgICAgIFBMQVlFUl9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBwbGF5ZXI6IE5vIG1lZGlhIHNvdXJjZXMgZm91bmRcIixcbiAgICAgIFBMQVlMSVNUX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIHBsYXlsaXN0OiBObyBwbGF5YWJsZSBzb3VyY2VzIGZvdW5kXCIsXG4gICAgICBFTkNPRElOR19NRVNTQUdFID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhhdCB2aWRlby4gSXQgY291bGQgYmUgdGhhdCB3ZSBkb24ndCBcIiArXG4gICAgICAgIFwic3VwcG9ydCB0aGF0IGZvcm1hdCBvciBpdCBpcyBub3QgZW5jb2RlZCBjb3JyZWN0bHkuXCIsXG4gICAgICBGT1JNQVRfTUVTU0FHRSA9IFwiVGhlIGZvcm1hdCBvZiB0aGF0IHZpZGVvIGlzIG5vdCBzdXBwb3J0ZWRcIjtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLnR5cGUgJiYgZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IudHlwZSArIFwiIC0gXCIgKyBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXJyb3IudHlwZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IudHlwZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICAgIC8vIERpc3BsYXkgYXBwcm9wcmlhdGUgb24tc2NyZWVuIGVycm9yIG1lc3NhZ2UuXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBpZiAoKGVycm9yLm1lc3NhZ2UgPT09IE1FRElBX0VSUk9SKSB8fCAoZXJyb3IubWVzc2FnZSA9PT0gWU9VVFVCRV9FUlJPUikpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRU5DT0RJTkdfTUVTU0FHRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlID09PSBQTEFZRVJfRVJST1IgfHwgZXJyb3IubWVzc2FnZSA9PT0gUExBWUxJU1RfRVJST1IpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRk9STUFUX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJhbXMuZXZlbnQgPSBcInBsYXllciBlcnJvclwiO1xuICAgIHBhcmFtcy5ldmVudF9kZXRhaWxzID0gZGV0YWlscztcbiAgICBfcGxheWVyRXJyb3JGbGFnID0gdHJ1ZTtcblxuICAgIGxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBwYXVzZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldFRhYmxlTmFtZVwiOiBnZXRUYWJsZU5hbWUsXG4gICAgXCJoYXNQbGF5ZXJFcnJvclwiOiBoYXNQbGF5ZXJFcnJvcixcbiAgICBcImhhc1N0b3JhZ2VFcnJvclwiOiBoYXNTdG9yYWdlRXJyb3IsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcIm9uRmlsZUluaXRcIjogb25GaWxlSW5pdCxcbiAgICBcIm9uRmlsZVJlZnJlc2hcIjogb25GaWxlUmVmcmVzaCxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwic2hvd0Vycm9yXCI6IHNob3dFcnJvcixcbiAgICBcInBsYXllckVuZGVkXCI6IHBsYXllckVuZGVkLFxuICAgIFwicGxheWVyUmVhZHlcIjogcGxheWVyUmVhZHksXG4gICAgXCJwbGF5ZXJFcnJvclwiOiBwbGF5ZXJFcnJvcixcbiAgICBcInBsYXllckl0ZW1DaGFuZ2VcIjogcGxheWVySXRlbUNoYW5nZSxcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXJVdGlscyA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qXG4gICAqICBQdWJsaWMgIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldFBsYXlsaXN0IChsaXN0KSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICBcbiAgICB2YXIgcGxheWxpc3QgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgcGxheWxpc3QucHVzaCh7XG4gICAgICAgIGZpbGU6IGxpc3RbaV0sXG4gICAgICAgIHR5cGU6IHRoaXMuZ2V0VmlkZW9GaWxlVHlwZShsaXN0W2ldKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBsYXlsaXN0O1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRWaWRlb0ZpbGVUeXBlICh1cmwpIHtcbiAgICB2YXIgZXh0ZW5zaW9ucyA9IFtcIi5tcDRcIiwgXCIud2VibVwiXSxcbiAgICAgIHVybExvd2VyY2FzZSA9IHVybC50b0xvd2VyQ2FzZSgpLFxuICAgICAgdHlwZSA9IG51bGwsXG4gICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8PSBleHRlbnNpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodXJsTG93ZXJjYXNlLmluZGV4T2YoZXh0ZW5zaW9uc1tpXSkgIT09IC0xKSB7XG4gICAgICAgIHR5cGUgPSBleHRlbnNpb25zW2ldLnN1YnN0cihleHRlbnNpb25zW2ldLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRQbGF5bGlzdFwiOiBnZXRQbGF5bGlzdCxcbiAgICBcImdldFZpZGVvRmlsZVR5cGVcIjogZ2V0VmlkZW9GaWxlVHlwZVxuICB9O1xuXG59KSgpO1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGaWxlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChlLmRldGFpbC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eVxuICAgICAgICAgIGlmIChlLmRldGFpbC5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikpIHtcbiAgICAgICAgICAgIGlmIChlLmRldGFpbC5jaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGluIHRoZSBldmVudCBvZiBhIG5ldHdvcmsgZmFpbHVyZSBhbmQgcmVjb3ZlcnksIGNoZWNrIGlmIHRoZSBXaWRnZXQgaXMgaW4gYSBzdGF0ZSBvZiBzdG9yYWdlIGVycm9yXG4gICAgICAgICAgICAgIGlmIChSaXNlVmlzaW9uLlZpZGVvLmhhc1N0b3JhZ2VFcnJvcigpIHx8IFJpc2VWaXNpb24uVmlkZW8uaGFzUGxheWVyRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtYXBpLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJzdG9yYWdlIGFwaSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJSZXNwb25zZSBjb2RlOiBcIiArIGUuZGV0YWlsLmNvZGUgKyBcIiwgbWVzc2FnZTogXCIgKyBlLmRldGFpbC5tZXNzYWdlXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZpbGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZmlsZSBub3QgZm91bmRcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1maWxlLXRocm90dGxlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIHRocm90dGxlZFwiLCBcImZpbGVfdXJsXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1zdWJzY3JpcHRpb24tZXhwaXJlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIHN1YnNjcmlwdGlvbiBleHBpcmVkXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJSaXNlIFN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGlzIG5vdCBhY3RpdmUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcbiAgICAgICAgXCJldmVudFwiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2Ugc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2UgY2FjaGUgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcblxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSAwO1xuICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgIGlmKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2Upe1xuICAgICAgICBzdGF0dXNDb2RlID0gK2UuZGV0YWlsLmVycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG4gICAgICB9XG5cbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtbm90LXJ1bm5pbmdcIiwgZnVuY3Rpb24oZSkge1xuXG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBub3QgcnVubmluZ1wiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogKGUuZGV0YWlsICYmIGUuZGV0YWlsLmVycm9yKT8gZS5kZXRhaWwuZXJyb3IubWVzc2FnZTogXCJcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIH0pO1xuXG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZvbGRlclwiLCBkYXRhLnN0b3JhZ2UuZm9sZGVyKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEuc3RvcmFnZS5maWxlTmFtZSk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgY29uZmlnLCBfICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGb2xkZXIgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2luaXRpYWxMb2FkID0gdHJ1ZTtcblxuICB2YXIgX2ZpbGVzID0gW107XG5cbiAgZnVuY3Rpb24gX2dldFVybHMoKSB7XG4gICAgcmV0dXJuIF8ucGx1Y2soX2ZpbGVzLCBcInVybFwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSkge1xuICAgIHJldHVybiBfLmZpbmQoX2ZpbGVzLCBmdW5jdGlvbiAoZikge1xuICAgICAgcmV0dXJuIGZpbGUubmFtZSA9PT0gZi5uYW1lO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RlbGV0ZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIF9maWxlcy5zcGxpY2UoX2ZpbGVzLmluZGV4T2YoZXhpc3RpbmcpLCAxKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY2hhbmdlRmlsZShmaWxlKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gX2dldEV4aXN0aW5nRmlsZShmaWxlKTtcblxuICAgIGlmIChleGlzdGluZykge1xuICAgICAgZXhpc3RpbmcudXJsID0gZmlsZS51cmw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2FkZEZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAvLyBleHRyYWN0IHRoZSBhY3R1YWwgZmlsZSBuYW1lIGFuZCBzdG9yZSBpbiBuZXcgcHJvcGVydHkgb24gZmlsZSBvYmplY3RcbiAgICAgIGZpbGUuZmlsZU5hbWUgPSBmaWxlLm5hbWUuc2xpY2UoZmlsZS5uYW1lLmxhc3RJbmRleE9mKFwiL1wiKSArIDEsIGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIC8vIGluc2VydCBmaWxlIHRvIF9maWxlcyBsaXN0IGF0IHNwZWNpZmljIGluZGV4IGJhc2VkIG9uIGFscGhhYmV0aWNhbCBvcmRlciBvZiBmaWxlIG5hbWVcbiAgICAgIF9maWxlcy5zcGxpY2UoXy5zb3J0ZWRJbmRleChfZmlsZXMsIGZpbGUsIFwiZmlsZU5hbWVcIiksIDAsIGZpbGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TdG9yYWdlXCIpO1xuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBmaWxlID0gZS5kZXRhaWw7XG5cbiAgICAgIC8vIEFkZGVkXG4gICAgICBpZihmaWxlLmFkZGVkKSB7XG4gICAgICAgIF9hZGRGaWxlKGZpbGUpO1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQoX2dldFVybHMoKSk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2hhbmdlZCBvciB1bmNoYW5nZWRcbiAgICAgIGlmIChmaWxlLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSkge1xuICAgICAgICBpZihmaWxlLmNoYW5nZWQpIHtcbiAgICAgICAgICBfY2hhbmdlRmlsZShmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBpbiB0aGUgZXZlbnQgb2YgYSBuZXR3b3JrIGZhaWx1cmUgYW5kIHJlY292ZXJ5LCBjaGVjayBpZiB0aGUgV2lkZ2V0IGlzIGluIGEgc3RhdGUgb2Ygc3RvcmFnZSBlcnJvclxuICAgICAgICAgIGlmICghUmlzZVZpc2lvbi5WaWRlby5oYXNTdG9yYWdlRXJyb3IoKSAmJiAhUmlzZVZpc2lvbi5WaWRlby5oYXNQbGF5ZXJFcnJvcigpKSB7XG4gICAgICAgICAgICAvLyBvbmx5IHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIGJlbG93IGlmIHRoZXJlJ3MgYmVlbiBhIHN0b3JhZ2UgZXJyb3IsIG90aGVyd2lzZSBkbyBub3RoaW5nXG4gICAgICAgICAgICAvLyB0aGlzIGlzIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGVkXG4gICAgICBpZihmaWxlLmRlbGV0ZWQpIHtcbiAgICAgICAgX2RlbGV0ZUZpbGUoZmlsZSk7XG4gICAgICB9XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChfZ2V0VXJscygpKTtcblxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWFwaS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwic3RvcmFnZSBhcGkgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiUmVzcG9uc2UgY29kZTogXCIgKyBlLmRldGFpbC5jb2RlICsgXCIsIG1lc3NhZ2U6IFwiICsgZS5kZXRhaWwubWVzc2FnZVxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lbXB0eS1mb2xkZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGVtcHR5XCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHZpZGVvcy5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZm9sZGVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZG9lc24ndCBleGlzdFwiLCBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1mb2xkZXItaW52YWxpZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZm9ybWF0KHMpIGludmFsaWRcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgY29udGFpbiBhbnkgc3VwcG9ydGVkIHZpZGVvIGZvcm1hdHMuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1leHBpcmVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGV4cGlyZWRcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlJpc2UgU3RvcmFnZSBzdWJzY3JpcHRpb24gaXMgbm90IGFjdGl2ZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJzdG9yYWdlIHN1YnNjcmlwdGlvbiBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIHN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIiwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbC5lcnJvci5tZXNzYWdlXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG5cbiAgICAgIHZhciBzdGF0dXNDb2RlID0gMDtcbiAgICAgIC8vIFNob3cgYSBkaWZmZXJlbnQgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIDQwNCBjb21pbmcgZnJvbSByaXNlIGNhY2hlXG4gICAgICBpZihlLmRldGFpbC5lcnJvci5tZXNzYWdlKXtcbiAgICAgICAgc3RhdHVzQ29kZSA9ICtlLmRldGFpbC5lcnJvci5tZXNzYWdlLnN1YnN0cmluZyhlLmRldGFpbC5lcnJvci5tZXNzYWdlLmluZGV4T2YoXCI6XCIpKzIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLmdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLW5vdC1ydW5uaW5nXCIsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2UgY2FjaGUgbm90IHJ1bm5pbmdcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IChlLmRldGFpbCAmJiBlLmRldGFpbC5lcnJvcik/IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2U6IFwiXCJcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZVR5cGVcIiwgXCJ2aWRlb1wiKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZvbGRlclwiLCBkYXRhLnN0b3JhZ2UuZm9sZGVyKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuXG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciByaXNlQ2FjaGUgPSBSaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGU7XG5cbiAgdmFyIF9yZWZyZXNoRHVyYXRpb24gPSA5MDAwMDAsICAvLyAxNSBtaW51dGVzXG4gICAgX3JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcblxuICB2YXIgX2lzTG9hZGluZyA9IHRydWU7XG5cbiAgdmFyIF91cmwgPSBcIlwiO1xuXG4gIGZ1bmN0aW9uIF9nZXRGaWxlKG9taXRDYWNoZUJ1c3Rlcikge1xuICAgIHJpc2VDYWNoZS5nZXRGaWxlKF91cmwsIGZ1bmN0aW9uIChyZXNwb25zZSwgZXJyb3IpIHtcbiAgICAgIGlmICghZXJyb3IpIHtcblxuICAgICAgICBpZiAoX2lzTG9hZGluZykge1xuICAgICAgICAgIF9pc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChyZXNwb25zZS51cmwpO1xuXG4gICAgICAgICAgLy8gc3RhcnQgdGhlIHJlZnJlc2ggaW50ZXJ2YWxcbiAgICAgICAgICBfc3RhcnRSZWZyZXNoSW50ZXJ2YWwoKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChyZXNwb25zZS51cmwpO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGVycm9yIG9jY3VycmVkXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQoe1xuICAgICAgICAgIFwiZXZlbnRcIjogXCJub24tc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIFwiZmlsZV91cmxcIjogcmVzcG9uc2UudXJsXG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIHZhciBzdGF0dXNDb2RlID0gMDtcbiAgICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgICAgaWYoZXJyb3IubWVzc2FnZSl7XG4gICAgICAgICAgc3RhdHVzQ29kZSA9ICtlcnJvci5tZXNzYWdlLnN1YnN0cmluZyhlcnJvci5tZXNzYWdlLmluZGV4T2YoXCI6XCIpKzIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcy5nZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSk7XG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSwgb21pdENhY2hlQnVzdGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpIHtcbiAgICBpZiAoX3JlZnJlc2hJbnRlcnZhbElkID09PSBudWxsKSB7XG4gICAgICBfcmVmcmVzaEludGVydmFsSWQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9nZXRGaWxlKGZhbHNlKTtcbiAgICAgIH0sIF9yZWZyZXNoRHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAvLyBIYW5kbGUgcHJlLW1lcmdlIHVzZSBvZiBcInVybFwiIHNldHRpbmcgcHJvcGVydHlcbiAgICBfdXJsID0gKGRhdGEudXJsICYmIGRhdGEudXJsICE9PSBcIlwiKSA/IGRhdGEudXJsIDogZGF0YS5zZWxlY3Rvci51cmw7XG5cbiAgICBfZ2V0RmlsZSh0cnVlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBqd3BsYXllciAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYXV0b1BsYXksIF9zdHJldGNoaW5nLCBfcGF1c2VEdXJhdGlvbjtcblxuICB2YXIgX3BsYXllckluc3RhbmNlID0gbnVsbDtcblxuICB2YXIgX3V0aWxzID0gUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXJVdGlscztcblxuICB2YXIgX3ZpZXdlclBhdXNlZCA9IGZhbHNlLFxuICAgIF9wYXVzZVRpbWVyID0gbnVsbDtcblxuICB2YXIgX2ZpbGVzID0gbnVsbCxcbiAgICBfdXBkYXRlV2FpdGluZyA9IGZhbHNlO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9vbkNvbXBsZXRlKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheWVyRW5kZWQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vblBhdXNlKCkge1xuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgLy8gdXNlciBoYXMgcGF1c2VkLCBzZXQgYSB0aW1lciB0byBwbGF5IGFnYWluXG4gICAgICBjbGVhclRpbWVvdXQoX3BhdXNlVGltZXIpO1xuXG4gICAgICBfcGF1c2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3BsYXllckluc3RhbmNlLmdldFN0YXRlKCkudG9VcHBlckNhc2UoKSAhPT0gXCJQTEFZSU5HXCIpIHtcbiAgICAgICAgICAvLyBjb250aW51ZSBwbGF5aW5nIHRoZSBjdXJyZW50IHZpZGVvXG4gICAgICAgICAgX3BsYXllckluc3RhbmNlLnBsYXkoKTtcbiAgICAgICAgfVxuICAgICAgfSwgX3BhdXNlRHVyYXRpb24gKiAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfb25QbGF5bGlzdEl0ZW0oaW5kZXgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXllckl0ZW1DaGFuZ2UoaW5kZXgpO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uUGxheWVyRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheWVyRXJyb3Ioe1xuICAgICAgICB0eXBlOiBcInZpZGVvXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9vblNldHVwRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheWVyRXJyb3Ioe1xuICAgICAgICB0eXBlOiBcInNldHVwXCIsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb25maWd1cmVIYW5kbGVycygpIHtcbiAgICAvL3ZhciBwbGF5Rm4gPSBwbGF5O1xuXG4gICAgLy8gaGFuZGxlIGEgSldQbGF5ZXIgc2V0dXAgZXJyb3JcbiAgICBfcGxheWVySW5zdGFuY2Uub24oXCJzZXR1cEVycm9yXCIsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgX29uU2V0dXBFcnJvcihlcnJvcik7XG4gICAgfSk7XG5cbiAgICAvLyBoYW5kbGUgd2hlbiBKV1BsYXllciBpcyByZWFkeVxuICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInJlYWR5XCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgICBfcGxheWVySW5zdGFuY2Uub24oXCJwbGF5bGlzdENvbXBsZXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX29uQ29tcGxldGUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBfcGxheWVySW5zdGFuY2Uub24oXCJwbGF5bGlzdEl0ZW1cIiwgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBfb25QbGF5bGlzdEl0ZW0oZGF0YS5pbmRleCk7XG4gICAgICB9KTtcblxuICAgICAgX3BsYXllckluc3RhbmNlLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIF9vblBsYXllckVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBfcGxheWVySW5zdGFuY2Uuc2V0Vm9sdW1lKHBhcmFtcy52aWRlby52b2x1bWUpO1xuXG4gICAgICBpZiAocGFyYW1zLnZpZGVvLmNvbnRyb2xzICYmIF9wYXVzZUR1cmF0aW9uID4gMSkge1xuICAgICAgICBfcGxheWVySW5zdGFuY2Uub24oXCJwYXVzZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX29uUGF1c2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIHBsYXllciBpcyByZWFkeVxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJSZWFkeSgpO1xuXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0U2V0dXBEYXRhKGZpbGVzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xzOiBwYXJhbXMudmlkZW8uY29udHJvbHMsXG4gICAgICBoZWlnaHQ6IHBhcmFtcy5oZWlnaHQsXG4gICAgICBwbGF5bGlzdDogX3V0aWxzLmdldFBsYXlsaXN0KGZpbGVzKSxcbiAgICAgIHNraW46IHtuYW1lOiBcInJpc2VcIn0sXG4gICAgICBzdHJldGNoaW5nIDogX3N0cmV0Y2hpbmcsXG4gICAgICB3aWR0aDogcGFyYW1zLndpZHRoXG4gICAgfTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdChmaWxlcykge1xuICAgIF9wbGF5ZXJJbnN0YW5jZSA9IGp3cGxheWVyKFwicGxheWVyXCIpO1xuXG4gICAgX2ZpbGVzID0gZmlsZXM7XG5cbiAgICBfc3RyZXRjaGluZyA9IChwYXJhbXMudmlkZW8uc2NhbGVUb0ZpdCkgPyBcInVuaWZvcm1cIiA6IFwibm9uZVwiO1xuXG4gICAgLy8gZW5zdXJlIGF1dG9QbGF5IGlzIHRydWUgaWYgY29udHJvbHMgdmFsdWUgaXMgZmFsc2UsIG90aGVyd2lzZSB1c2UgcGFyYW1zIHZhbHVlXG4gICAgX2F1dG9QbGF5ID0gKCFwYXJhbXMudmlkZW8uY29udHJvbHMpID8gdHJ1ZSA6IHBhcmFtcy52aWRlby5hdXRvcGxheTtcblxuICAgIC8vIGNoZWNrIGlmIHRoaXMgc2V0dGluZyBleGlzdHMgZHVlIHRvIG1lcmdlIG9mIGZpbGUgYW5kIGZvbGRlclxuICAgIGlmIChwYXJhbXMudmlkZW8ucGF1c2UpIHtcbiAgICAgIC8vIGNvbnZlcnQgcGF1c2UgdmFsdWUgdG8gbnVtYmVyIGlmIHR5cGUgaXMgXCJzdHJpbmdcIlxuICAgICAgcGFyYW1zLnZpZGVvLnBhdXNlID0gKHR5cGVvZiBwYXJhbXMudmlkZW8ucGF1c2UgPT09IFwic3RyaW5nXCIpID8gcGFyc2VJbnQocGFyYW1zLnZpZGVvLnBhdXNlLCAxMCkgOiBwYXJhbXMudmlkZW8ucGF1c2U7XG5cbiAgICAgIC8vIGlmIG5vdCBvZiB0eXBlIFwibnVtYmVyXCIsIHNldCBpdHMgdmFsdWUgdG8gMCBzbyBhIHBhdXNlIGRvZXMgbm90IGdldCBhcHBsaWVkXG4gICAgICBfcGF1c2VEdXJhdGlvbiA9IChpc05hTihwYXJhbXMudmlkZW8ucGF1c2UpKSA/IDAgOiBwYXJhbXMudmlkZW8ucGF1c2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGVuc3VyZSBubyBwYXVzZSBkdXJhdGlvbiBvY2N1cnNcbiAgICAgIF9wYXVzZUR1cmF0aW9uID0gMDtcbiAgICB9XG5cbiAgICAvLyBzZXR1cCBKV1BsYXllclxuICAgIF9wbGF5ZXJJbnN0YW5jZS5zZXR1cChfZ2V0U2V0dXBEYXRhKGZpbGVzKSk7XG4gICAgX2NvbmZpZ3VyZUhhbmRsZXJzKCk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgX3ZpZXdlclBhdXNlZCA9IGZhbHNlO1xuXG4gICAgaWYgKF91cGRhdGVXYWl0aW5nKSB7XG4gICAgICBfdXBkYXRlV2FpdGluZyA9IGZhbHNlO1xuICAgICAgLy8gbG9hZCBhIG5ldyBwbGF5bGlzdFxuICAgICAgX3BsYXllckluc3RhbmNlLmxvYWQoX3V0aWxzLmdldFBsYXlsaXN0KF9maWxlcykpO1xuICAgIH1cblxuICAgIGlmIChfYXV0b1BsYXkpIHtcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5wbGF5KCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcbiAgICBjbGVhclRpbWVvdXQoX3BhdXNlVGltZXIpO1xuXG4gICAgaWYgKF9wbGF5ZXJJbnN0YW5jZS5nZXRTdGF0ZSgpLnRvVXBwZXJDYXNlKCkgPT09IFwiUExBWUlOR1wiKSB7XG4gICAgICBfcGxheWVySW5zdGFuY2UucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZXNldCgpIHtcblxuICAgIHBhdXNlKCk7XG5cbiAgICBmdW5jdGlvbiBvblBsYXkoKSB7XG4gICAgICAvLyByZW1vdmUgaGFuZGxpbmcgdGhlIHBsYXkgZXZlbnRcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vZmYoXCJwbGF5XCIsIG9uUGxheSk7XG5cbiAgICAgIC8vIHBhdXNlIHRoZSB2aWRlbyBhdCB0aGUgc3RhcnRcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5wYXVzZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uU2Vla2VkKCkge1xuICAgICAgLy8gcmVtb3ZlIGhhbmRsaW5nIHRoZSBzZWVrZWQgZXZlbnRcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vZmYoXCJzZWVrZWRcIiwgb25TZWVrZWQpO1xuXG4gICAgICAvLyBwYXVzZSB0aGUgdmlkZW8gYXQgdGhlIHN0YXJ0XG4gICAgICBfcGxheWVySW5zdGFuY2UucGF1c2UoKTtcbiAgICB9XG5cbiAgICAvLyBpZiBzdGF0dXMgaXMgQ09NUExFVEUsIGEgZnV0dXJlIHBsYXkgY2FsbCB3aWxsIHN0YXJ0IHBsYXlsaXN0IG92ZXIgZnJvbSBiZWdpbm5pbmcgYXV0b21hdGljYWxseVxuICAgIGlmIChfcGxheWVySW5zdGFuY2UuZ2V0U3RhdGUoKS50b1VwcGVyQ2FzZSgpICE9PSBcIkNPTVBMRVRFXCIpIHtcblxuICAgICAgLy8gYXZvaWQgandwbGF5ZXIgcHJvbWlzZSBlcnJvciBpbiBjb25zb2xlIHdpdGggc2V0VGltZW91dCAtIGh0dHA6Ly9nb28uZ2wvTDRna1RtXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF9wbGF5ZXJJbnN0YW5jZS5nZXRQbGF5bGlzdEluZGV4KCkgIT09IDApIHtcbiAgICAgICAgICBfcGxheWVySW5zdGFuY2Uub24oXCJwbGF5XCIsIG9uUGxheSk7XG5cbiAgICAgICAgICAvLyBjaGFuZ2UgdG8gZmlyc3QgdmlkZW8gaW4gbGlzdFxuICAgICAgICAgIF9wbGF5ZXJJbnN0YW5jZS5wbGF5bGlzdEl0ZW0oMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gaGFuZGxlIHdoZW4gdmlkZW8gY29udGludWVzIHBsYXlpbmcgYWZ0ZXIgc2Vla2luZyB0byBwb3NpdGlvblxuICAgICAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInNlZWtlZFwiLCBvblNlZWtlZCk7XG5cbiAgICAgICAgICAvLyBtb3ZlIHBvc2l0aW9uIGJhY2sgdG8gc3RhcnQgb2YgdmlkZW9cbiAgICAgICAgICBfcGxheWVySW5zdGFuY2Uuc2VlaygwKTtcbiAgICAgICAgfVxuICAgICAgfSwxMDApO1xuICAgICAgXG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiB1cGRhdGUoZmlsZXMpIHtcbiAgICBfZmlsZXMgPSBmaWxlcztcbiAgICBfdXBkYXRlV2FpdGluZyA9IHRydWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0LFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJyZXNldFwiOiByZXNldCxcbiAgICBcInVwZGF0ZVwiOiB1cGRhdGVcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FjdGl2ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIHRyeSB7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG1haW5Db250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNhbid0IGluaXRpYWxpemUgTWVzc2FnZSAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoX2FjdGl2ZSkge1xuICAgICAgLy8gY2xlYXIgY29udGVudCBvZiBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgd2hpbGUgKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgIF9hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzaG93KG1lc3NhZ2UpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBwO1xuXG4gICAgaWYgKCFfYWN0aXZlKSB7XG4gICAgICAvLyBoaWRlIG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICAvLyBjcmVhdGUgbWVzc2FnZSBlbGVtZW50XG4gICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICBwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZVwiKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIFJpc2VWaXNpb24gKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICB2YXIgYWRkaXRpb25hbFBhcmFtcyA9IG51bGwsXG4gICAgICBtb2RlID0gXCJcIixcbiAgICAgIGNvbXBhbnlJZCA9IFwiXCIsXG4gICAgICBkaXNwbGF5SWQgPSBcIlwiO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAobmFtZXNbMF0gPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgICAgY29tcGFueUlkID0gdmFsdWVzWzBdO1xuICAgICAgfVxuXG4gICAgICBpZiAobmFtZXNbMV0gPT09IFwiZGlzcGxheUlkXCIpIHtcbiAgICAgICAgaWYgKHZhbHVlc1sxXSkge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IHZhbHVlc1sxXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkaXNwbGF5SWQgPSBcInByZXZpZXdcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5zZXRJZHMoY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMuc2V0VmVyc2lvbih2ZXJzaW9uKTtcblxuICAgICAgaWYgKG5hbWVzWzJdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMl0pO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIC8vIHN0b3JhZ2UgZmlsZSBvciBmb2xkZXIgc2VsZWN0ZWRcbiAgICAgICAgICBpZiAoIWFkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgLy8gZm9sZGVyIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZm9sZGVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtb2RlID0gXCJmaWxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vbi1zdG9yYWdlIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5zZXRBZGRpdGlvbmFsUGFyYW1zKGFkZGl0aW9uYWxQYXJhbXMsIG1vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8uc3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9seW1lclJlYWR5KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuXG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGNvbmZpZ3VyZSk7XG4gICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImNvbXBhbnlJZFwiLCBcImRpc3BsYXlJZFwiLCBcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTInXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
