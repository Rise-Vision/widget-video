var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(e){"use strict";function n(e,n){Array.isArray(e)&&e.length>0&&Array.isArray(n)&&n.length>0&&("companyId"===e[0]&&(l=n[0]),"displayId"===e[1]&&(a=n[1]?n[1]:"preview"),d(l,a))}function t(t){t&&"function"==typeof t&&(d=t,l&&a?d(l,a):s&&""!==s&&(e.rpc.register("rsparam_set_"+s,n),e.rpc.call("","rsparam_get",null,s,["companyId","displayId"])))}function i(e){var n,t=/[?#&]/;return e&&"string"==typeof e?(n=e.substr(e.lastIndexOf(".")+1),t.test(n)&&(n=n.substr(0,-1!==n.indexOf("?")?n.indexOf("?"):n.length),n=n.substr(0,-1!==n.indexOf("#")?n.indexOf("#"):n.length),n=n.substr(0,-1!==n.indexOf("&")?n.indexOf("&"):n.length)),n.toLowerCase()):null}function o(e){var n=JSON.parse(JSON.stringify(u));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(e)),n.rows[0].json.ts=(new Date).toISOString(),n}function r(e){var n=new Date,t=n.getUTCFullYear(),i=n.getUTCMonth()+1,o=n.getUTCDate();return 10>i&&(i="0"+i),10>o&&(o="0"+o),e+t+i+o}var s=(new e.Prefs).getString("id"),a="",l="",d=null,u={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:""}]};return{getIds:t,getInsertData:o,getFileFormat:i,getTable:r}}(gadgets),RiseVision.Common.Logger=function(e){"use strict";function n(e){var n=new XMLHttpRequest;return new Date-d<358e4?e({}):(n.open("POST",o,!0),n.onloadend=function(){var t=JSON.parse(n.response);e({token:t.access_token,refreshedAt:new Date})},n.send(),void 0)}function t(e){return s&&l===e}function i(i,o){function c(n){var t,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",e.getTable(i)),d=n.refreshedAt||d,u=n.token||u,t=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(t))}if(i&&o&&o.event&&!t(o.event))return s=!0,l=o.event,setTimeout(function(){s=!1},a),n(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:i}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};if(RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var n=new XMLHttpRequest;e&&"function"==typeof e&&(n.open("GET",t+"ping?callback=_",!0),n.onreadystatechange=function(){try{4===n.readyState&&(i=!0,200===n.status?(o=!0,e(!0,n.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(t){console.debug("Caught exception: ",t.description)}},n.send())}function n(e,n,r){function s(n){var i,o,s;n?i=r?t+"?url="+encodeURIComponent(e):t+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?i=e:(o=e.split("?"),s=1===o.length?"?":"&",i=e+s+"cb="+(new Date).getTime()),a("HEAD",i)}function a(e,t){var i=new XMLHttpRequest,o={xhr:i,url:t};i.open(e,t,!0),i.addEventListener("loadend",function(){var r=i.status||0;r>=200&&300>r?n(o):"HEAD"===e?a("GET",t):n(o,new Error("The request failed with status code: "+r))}),i.send()}if(e&&n&&"function"==typeof n)return i?s(o):this.ping(s)}var t="http://localhost:9494/",i=!1,o=!1;return{getFile:n,ping:e}}(),"undefined"==typeof config){var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function n(){e.rpc.call("","rsevent_done",null,E.getString("id")),null!==L&&d(L,!0),d({event:"done"},!1)}function t(){e.rpc.call("","rsevent_ready",null,E.getString("id"),!0,!0,!0,!0,!0)}function i(){clearTimeout(F),F=null}function o(){i(),F=setTimeout(function(){n()},5e3)}function r(){var e=I.getFrameObject(S);return e?e.getPlaybackData():null}function s(){var e=null;if(A&&A.length>0){if("file"===y)return A[0];if("folder"===y&&(e=r()))return A[e.index]}return null}function a(e,n){var t={},i=RiseVision.Common.LoggerUtils,o=null;e.event&&(t.event=e.event),e.event_details&&(t.event_details=e.event_details),o=e.url?e.url:s(),t.file_url=o,t.file_format=i.getFileFormat(o),i.getIds(function(e,i){t.company_id=e,t.display_id=i,n(t)})}function l(e){N=!0,b.show(e),I.remove(S,function(){T||o()})}function d(e,n){n&&(L=e),a(e,function(e){D.log("video_events",e)})}function u(e){"file"===y?A[0]=e:"folder"===y&&(A=e),b.hide(),T||g()}function c(e){"file"===y?A[0]=e:"folder"===y&&(A=e),O=!1,L=null}function f(){var e=I.getFrameObject(S);return T=!0,N?(i(),void 0):(e&&e.pause(),void 0)}function g(){var e=I.getFrameObject(S);return T=!1,d({event:"play"},!1),N?(o(),void 0):(O||(e?e.play():A&&A.length>0&&("file"===y?(I.add(0),I.createFramePlayer(0,R,A[0],config.SKIN,"player-file.html")):"folder"===y&&(I.add(0),I.createFramePlayer(0,R,A,config.SKIN,"player-folder.html")))),void 0)}function m(){I.remove(S,function(){n()})}function v(){var e;b.hide(),T||(e=I.getFrameObject(S),e&&e.play())}function p(n,i){var o,r={},s=null;R=_.clone(n),y=i,E=new e.Prefs,document.getElementById("videoContainer").style.height=E.getInt("rsH")+"px",R.width=E.getInt("rsW"),R.height=E.getInt("rsH"),b=new RiseVision.Common.Message(document.getElementById("videoContainer"),document.getElementById("messageContainer")),b.show("Please wait while your video is downloaded."),I=new RiseVision.Common.Video.FrameController,"file"===y?(o=0!==Object.keys(R.storage).length,o?(s="storage",w=new RiseVision.Video.StorageFile(R),w.init()):(s="custom",C=new RiseVision.Video.NonStorage(R),C.init())):"folder"===y&&(s="storage",w=new RiseVision.Video.StorageFolder(R),w.init()),r.event="configuration",r.event_details=s,d(r,!1),t()}function V(e){var n=null,t={},i="",o="Sorry, there was a problem playing the video.",r="Error loading media: File could not be played",a="Error loading YouTube: Video could not be played",u="Error loading player: No playable sources found",c="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.";O=!0,e&&(e.type&&e.message?n=e.type+" - "+e.message:e.type?n=e.type:e.message&&(n=e.message),e.message&&(e.message===r||e.message===a?o=c:e.message===u&&(i=s(),i&&i.indexOf("www.youtube.com")>-1&&(o=c)))),t.event="player error",t.event_details=n,d(t,!0),l(o)}function h(){f()}var R,y,E=null,w=null,C=null,b=null,I=null,O=!1,T=!0,S=0,A=[],L=null,F=null,N=!1,D=RiseVision.Common.Logger;return{logEvent:d,onFileInit:u,onFileRefresh:c,pause:f,play:g,setAdditionalParams:p,showError:l,playerEnded:m,playerReady:v,playerError:V,stop:h}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function n(){var n=document.getElementById("videoStorage");n&&(n.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(t?(t=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&e.detail.changed&&RiseVision.Video.onFileRefresh(e.detail.url))}),n.addEventListener("rise-storage-no-file",function(e){var n={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(n,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),n.addEventListener("rise-storage-file-throttled",function(e){var n={event:"storage file throttled",url:e.detail};RiseVision.Video.logEvent(n,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),n.addEventListener("rise-storage-error",function(){var e={event:"storage error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Storage.")}),n.addEventListener("rise-cache-error",function(){var e={event:"cache error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Cache.")}),n.setAttribute("folder",e.storage.folder),n.setAttribute("fileName",e.storage.fileName),n.setAttribute("companyId",e.storage.companyId),n.setAttribute("env",config.STORAGE_ENV),n.go())}var t=!0;return{init:n}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function n(){return _.pluck(l,"url")}function t(e){return _.find(l,function(n){return e.name===n.name})}function i(e){var n=t(e);n&&l.splice(l.indexOf(n),1)}function o(e){var n=t(e);n&&(n.url=e.url)}function r(e){var n=t(e);n||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function s(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){var t=e.detail;return t.added&&(r(t),a)?(a=!1,RiseVision.Video.onFileInit(n()),void 0):(t.changed&&o(t),t.deleted&&i(t),RiseVision.Video.onFileRefresh(n()),void 0)}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),t.addEventListener("rise-storage-no-folder",function(e){var n={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(n,!0),RiseVision.Video.showError("The selected folder does not exist.")}),t.addEventListener("rise-storage-error",function(){var e={event:"storage error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Storage.")}),t.addEventListener("rise-cache-error",function(){var e={event:"cache error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Cache.")}),t.setAttribute("fileType","video"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go())}var a=!0,l=[];return{init:s}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function n(e){o.getFile(l,function(e,n){n?(RiseVision.Video.logEvent({event:"non-storage error",event_details:n.message,url:e.url},!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")):a?(a=!1,RiseVision.Video.onFileInit(e.url),t()):RiseVision.Video.onFileRefresh(e.url)},e)}function t(){null===s&&(s=setInterval(function(){n(!1)},r))}function i(){l=e.url&&""!==e.url?e.url:e.selector.url,n(!0)}var o=RiseVision.Common.RiseCache,r=9e5,s=null,a=!0,l="";return{init:i}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function n(n){var t,i=e(n);return t=i.querySelector("iframe"),t?t.contentWindow?t.contentWindow:t.contentDocument.document?t.contentDocument.document:t.contentDocument:null}function t(t){var i,o=e(t),r=n(t);r&&(i=o.querySelector("iframe"),r.remove(),i.setAttribute("src","about:blank"))}function i(n){var t=e(n),i=document.createElement("iframe");i.setAttribute("allowTransparency",!0),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),t.appendChild(i)}function o(t,i,o,r,s){var a,l=e(t),d=n(t);d&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,d.init(i,o,r),d.load()},a.setAttribute("src",s))}function r(n){var t=e(n);t.style.visibility="hidden"}function s(e,n){var i=document.getElementById(l+e);t(e),setTimeout(function(){for(;i.firstChild;)i.removeChild(i.firstChild);n&&"function"==typeof n&&n()},200)}function a(n){var t=e(n);t.style.visibility="visible"}var l="if_";return{add:i,createFramePlayer:o,getFrameContainer:e,getFrameObject:n,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,n){"use strict";function t(){try{n.style.height=e.style.height}catch(t){console.warn("Can't initialize Message - ",t.message)}}function i(){if(r){for(;n.firstChild;)n.removeChild(n.firstChild);n.style.display="none",e.style.visibility="visible",r=!1}}function o(t){var i,o=document.createDocumentFragment();r?(i=n.querySelector(".message"),i.innerHTML=t):(e.style.visibility="hidden",n.style.display="block",i=document.createElement("p"),i.innerHTML=t,i.setAttribute("class","message"),o.appendChild(i),n.appendChild(o),r=!0)}var r=!1;return t(),{hide:i,show:o}},function(e,n){"use strict";function t(e,n){var t,i;Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(n)&&n.length>0&&(t=JSON.parse(n[0]),i=0!==Object.keys(t.storage).length?t.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(t,i))}function i(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function r(){RiseVision.Video.stop()}function s(){e.removeEventListener("WebComponentsReady",s),l&&""!==l&&(n.rpc.register("rscmd_play_"+l,i),n.rpc.register("rscmd_pause_"+l,o),n.rpc.register("rscmd_stop_"+l,r),n.rpc.register("rsparam_set_"+l,t),n.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var a=new n.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",s)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdhZGdldHMiLCJzZXRJZHMiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhbnlJZCIsImRpc3BsYXlJZCIsImNhbGxiYWNrIiwiZ2V0SWRzIiwiY2IiLCJpZCIsInJwYyIsInJlZ2lzdGVyIiwiY2FsbCIsImdldEZpbGVGb3JtYXQiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInRlc3QiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJnZXRJbnNlcnREYXRhIiwicGFyYW1zIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsInJvd3MiLCJpbnNlcnRJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwianNvbiIsInRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZ2V0VGFibGUiLCJuYW1lIiwiZGF0ZSIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJkYXkiLCJnZXRVVENEYXRlIiwiUHJlZnMiLCJnZXRTdHJpbmciLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsIkxvZ2dlciIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJldmVudCIsInRocm90dGxlIiwibGFzdEV2ZW50IiwibG9nIiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInJlcGxhY2UiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiciIsIkJBU0VfQ0FDSEVfVVJMIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIl9waW5nUmVjZWl2ZWQiLCJzdGF0dXMiLCJfaXNDYWNoZVJ1bm5pbmciLCJyZXNwb25zZVRleHQiLCJjb25zb2xlIiwiZGVidWciLCJlIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsImlzQ2FjaGVSdW5uaW5nIiwic2VwYXJhdG9yIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0VGltZSIsInNwbGl0IiwibWFrZVJlcXVlc3QiLCJtZXRob2QiLCJyZXF1ZXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIkVycm9yIiwidGhpcyIsImNvbmZpZyIsIlNLSU4iLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJWaWRlbyIsIl9kb25lIiwiX3ByZWZzIiwiX2Vycm9yIiwibG9nRXZlbnQiLCJfcmVhZHkiLCJfY2xlYXJFcnJvclRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiX2Vycm9yVGltZXIiLCJfc3RhcnRFcnJvclRpbWVyIiwiX2dldEN1cnJlbnRGaWxlRGF0YSIsImZyYW1lT2JqIiwiX2ZyYW1lQ29udHJvbGxlciIsImdldEZyYW1lT2JqZWN0IiwiX2N1cnJlbnRGcmFtZSIsImdldFBsYXliYWNrRGF0YSIsIl9nZXRDdXJyZW50RmlsZSIsImZpbGVEYXRhIiwiX2N1cnJlbnRGaWxlcyIsIl9tb2RlIiwiaW5kZXgiLCJfZ2V0TG9nZ2VyUGFyYW1zIiwiZXZlbnRfZGV0YWlscyIsImZpbGVfdXJsIiwiZmlsZV9mb3JtYXQiLCJjb21wYW55X2lkIiwiZGlzcGxheV9pZCIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJfZXJyb3JGbGFnIiwiX21lc3NhZ2UiLCJzaG93IiwicmVtb3ZlIiwiX3ZpZXdlclBhdXNlZCIsImlzRXJyb3IiLCJfbG9nZ2VyIiwib25GaWxlSW5pdCIsInVybHMiLCJoaWRlIiwicGxheSIsIm9uRmlsZVJlZnJlc2giLCJfcGxheWJhY2tFcnJvciIsInBhdXNlIiwiYWRkIiwiY3JlYXRlRnJhbWVQbGF5ZXIiLCJfYWRkaXRpb25hbFBhcmFtcyIsInBsYXllckVuZGVkIiwicGxheWVyUmVhZHkiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwibW9kZSIsImlzU3RvcmFnZUZpbGUiLCJsb2dQYXJhbXMiLCJkZXRhaWxzIiwiXyIsImNsb25lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiaGVpZ2h0IiwiZ2V0SW50Iiwid2lkdGgiLCJNZXNzYWdlIiwiRnJhbWVDb250cm9sbGVyIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JhZ2UiLCJfc3RvcmFnZSIsIlN0b3JhZ2VGaWxlIiwiaW5pdCIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJwbGF5ZXJFcnJvciIsImVycm9yIiwiTUVESUFfRVJST1IiLCJZT1VUVUJFX0VSUk9SIiwiUExBWUVSX0VSUk9SIiwiRk9STUFUX01FU1NBR0UiLCJ0eXBlIiwic3RvcCIsImRldGFpbCIsIl9pbml0aWFsTG9hZCIsImhhc093blByb3BlcnR5IiwiY2hhbmdlZCIsInNldEF0dHJpYnV0ZSIsImZvbGRlciIsImZpbGVOYW1lIiwiZ28iLCJfZ2V0VXJscyIsInBsdWNrIiwiX2ZpbGVzIiwiX2dldEV4aXN0aW5nRmlsZSIsImZpbGUiLCJmaW5kIiwiZiIsIl9kZWxldGVGaWxlIiwiZXhpc3RpbmciLCJzcGxpY2UiLCJfY2hhbmdlRmlsZSIsIl9hZGRGaWxlIiwic2xpY2UiLCJzb3J0ZWRJbmRleCIsImFkZGVkIiwiZGVsZXRlZCIsIl9nZXRGaWxlIiwib21pdENhY2hlQnVzdGVyIiwicmlzZUNhY2hlIiwiX3VybCIsIl9pc0xvYWRpbmciLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJzZWxlY3RvciIsImdldEZyYW1lQ29udGFpbmVyIiwiUFJFRklYIiwiaWZyYW1lIiwiZnJhbWVDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudFdpbmRvdyIsImNvbnRlbnREb2N1bWVudCIsIl9jbGVhciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImZpbGVzIiwic2tpbiIsInNyYyIsIm9ubG9hZCIsImxvYWQiLCJ2aXNpYmlsaXR5IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwibWFpbkNvbnRhaW5lciIsIm1lc3NhZ2VDb250YWluZXIiLCJfaW5pdCIsIndhcm4iLCJfYWN0aXZlIiwiZGlzcGxheSIsInAiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpbm5lckhUTUwiLCJ3aW5kb3ciLCJjb25maWd1cmUiLCJhZGRpdGlvbmFsUGFyYW1zIiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJhc3luYyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSx1QkFDRkMsY0FBZSxpQkFDZkMsaUJBQWtCLDRFQUNsQkMscUJBQXNCLDJCQUN0QkMscUJBQXNCLHFFQUN0QkMsWUFBYSxPQUNiQyxVQUFXLDZDQUlUQyxXQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9DLFlBQWMsU0FBVUMsR0FDeEMsWUFzQkEsU0FBU0MsR0FBT0MsRUFBT0MsR0FDakJDLE1BQU1DLFFBQVFILElBQVVBLEVBQU1JLE9BQVMsR0FDckNGLE1BQU1DLFFBQVFGLElBQVdBLEVBQU9HLE9BQVMsSUFDMUIsY0FBYkosRUFBTSxLQUNSSyxFQUFZSixFQUFPLElBR0osY0FBYkQsRUFBTSxLQUVOTSxFQURFTCxFQUFPLEdBQ0dBLEVBQU8sR0FHUCxXQUloQk0sRUFBU0YsRUFBV0MsSUFRMUIsUUFBU0UsR0FBT0MsR0FDVEEsR0FBb0Isa0JBQVBBLEtBSWhCRixFQUFXRSxFQUdUSixHQUFhQyxFQUNmQyxFQUFTRixFQUFXQyxHQUdoQkksR0FBYSxLQUFQQSxJQUNSWixFQUFRYSxJQUFJQyxTQUFTLGVBQWlCRixFQUFJWCxHQUMxQ0QsRUFBUWEsSUFBSUUsS0FBSyxHQUFJLGNBQWUsS0FBTUgsR0FBSyxZQUFhLGdCQUtsRSxRQUFTSSxHQUFjQyxHQUNyQixHQUNFQyxHQURFQyxFQUFZLE9BR2hCLE9BQUtGLElBQXNCLGdCQUFSQSxJQUluQkMsRUFBTUQsRUFBSUcsT0FBT0gsRUFBSUksWUFBWSxLQUFPLEdBR3BDRixFQUFVRyxLQUFLSixLQUNqQkEsRUFBTUEsRUFBSUUsT0FBTyxFQUF5QixLQUFyQkYsRUFBSUssUUFBUSxLQUFlTCxFQUFJSyxRQUFRLEtBQU9MLEVBQUlaLFFBRXZFWSxFQUFNQSxFQUFJRSxPQUFPLEVBQXlCLEtBQXJCRixFQUFJSyxRQUFRLEtBQWVMLEVBQUlLLFFBQVEsS0FBT0wsRUFBSVosUUFFdkVZLEVBQU1BLEVBQUlFLE9BQU8sRUFBeUIsS0FBckJGLEVBQUlLLFFBQVEsS0FBZUwsRUFBSUssUUFBUSxLQUFPTCxFQUFJWixTQUdsRVksRUFBSU0sZUFkRixLQWlCWCxRQUFTQyxHQUFjQyxHQUNyQixHQUFJQyxHQUFPQyxLQUFLQyxNQUFNRCxLQUFLRSxVQUFVQyxHQU1yQyxPQUpBSixHQUFLSyxLQUFLLEdBQUdDLFNBQVdDLEtBQUtDLFNBQVNDLFNBQVMsSUFBSWhCLE9BQU8sR0FBR2lCLGNBQzdEVixFQUFLSyxLQUFLLEdBQUdNLEtBQU9WLEtBQUtDLE1BQU1ELEtBQUtFLFVBQVVKLElBQzlDQyxFQUFLSyxLQUFLLEdBQUdNLEtBQUtDLElBQUssR0FBSUMsT0FBT0MsY0FFM0JkLEVBR1QsUUFBU2UsR0FBU0MsR0FDaEIsR0FBSUMsR0FBTyxHQUFJSixNQUNiSyxFQUFPRCxFQUFLRSxpQkFDWkMsRUFBUUgsRUFBS0ksY0FBZ0IsRUFDN0JDLEVBQU1MLEVBQUtNLFlBVWIsT0FSWSxJQUFSSCxJQUNGQSxFQUFRLElBQU1BLEdBR04sR0FBTkUsSUFDRkEsRUFBTSxJQUFNQSxHQUdQTixFQUFPRSxFQUFPRSxFQUFRRSxFQTdHOUIsR0FBSXJDLElBQUssR0FBSVosR0FBUW1ELE9BQVFDLFVBQVUsTUFDdEM1QyxFQUFZLEdBQ1pELEVBQVksR0FDWkUsRUFBVyxLQUVUc0IsR0FFRnNCLEtBQVEscUNBQ1JDLGlCQUFtQixFQUNuQkMscUJBQXVCLEVBQ3ZCdkIsT0FDRUMsU0FBWSxLQXFHaEIsUUFDRXZCLE9BQVVBLEVBQ1ZlLGNBQWlCQSxFQUNqQlQsY0FBaUJBLEVBQ2pCMEIsU0FBWUEsSUFFYjFDLFNBRUhILFdBQVdDLE9BQU8wRCxPQUFTLFNBQVVDLEdBQ25DLFlBaUJBLFNBQVNDLEdBQWEvQyxHQUNwQixHQUFJZ0QsR0FBTSxHQUFJQyxlQUVkLE9BQUksSUFBSXBCLE1BQVNxQixFQUFjLE1BQ3RCbEQsT0FHVGdELEVBQUlHLEtBQUssT0FBUUMsR0FBYSxHQUM5QkosRUFBSUssVUFBWSxXQUNkLEdBQUlDLEdBQU9yQyxLQUFLQyxNQUFNOEIsRUFBSU8sU0FFMUJ2RCxJQUFLd0QsTUFBT0YsRUFBS0csYUFBY0MsWUFBYSxHQUFJN0IsU0FHbERtQixFQUFJVyxPQVBKWCxRQVVGLFFBQVNZLEdBQVlDLEdBQ25CLE1BQU9DLElBQWFDLElBQWNGLEVBTXBDLFFBQVNHLEdBQUlDLEVBQVdsRCxHQVl0QixRQUFTbUQsR0FBZ0JDLEdBQ3ZCLEdBQ0VDLEdBQVk5RCxFQURWMEMsRUFBTSxHQUFJQyxlQUdkM0MsR0FBTStELEVBQVdDLFFBQVEsV0FBWXhCLEVBQU1mLFNBQVNrQyxJQUNwRGYsRUFBY2lCLEVBQVlULGFBQWVSLEVBQ3pDTSxFQUFRVyxFQUFZWCxPQUFTQSxFQUM3QlksRUFBYXRCLEVBQU1oQyxjQUFjQyxHQUdqQ2lDLEVBQUlHLEtBQUssT0FBUTdDLEdBQUssR0FDdEIwQyxFQUFJdUIsaUJBQWlCLGVBQWdCLG9CQUNyQ3ZCLEVBQUl1QixpQkFBaUIsZ0JBQWlCLFVBQVlmLEdBRTlDekMsRUFBT2YsSUFBMkIsa0JBQWRlLEdBQU9mLEtBQzdCZ0QsRUFBSUssVUFBWSxXQUNkdEMsRUFBT2YsR0FBR2dELEVBQUlPLFlBSWxCUCxFQUFJVyxLQUFLMUMsS0FBS0UsVUFBVWlELElBL0IxQixHQUFLSCxHQUFjbEQsR0FBV0EsRUFBTzhDLFFBQVNELEVBQVk3QyxFQUFPOEMsT0FrQ2pFLE1BOUJBQyxJQUFXLEVBQ1hDLEVBQVloRCxFQUFPOEMsTUFFbkJXLFdBQVcsV0FDVFYsR0FBVyxHQUNWVyxHQXlCSTFCLEVBQWFtQixHQTFFdEIsR0FBSWQsR0FBYyx3REFBMER6RSxxQkFBcUJFLGlCQUM3RixrQkFBb0JGLHFCQUFxQkcscUJBQ3pDLGtCQUFvQkgscUJBQXFCSSxxQkFDekMsNEJBRUFzRixFQUFhLHNIQUNmUCxHQUFXLEVBQ1hXLEVBQWdCLElBQ2hCVixFQUFZLEdBQ1piLEVBQWMsRUFDZE0sRUFBUSxFQW1FVixRQUNFUSxJQUFPQSxJQUVSOUUsV0FBV0MsT0FBT0MsWUFDckIsSUFBSUYsWUFBYUEsY0FvSGpCLElBbkhBQSxXQUFXQyxPQUFTRCxXQUFXQyxXQUUvQkQsV0FBV0MsT0FBT3VGLFVBQVksV0FDNUIsWUFPQSxTQUFTQyxHQUFLN0UsR0FDWixHQUFJOEUsR0FBSSxHQUFJM0IsZUFFUG5ELElBQWdDLGtCQUFiQSxLQUl4QjhFLEVBQUV6QixLQUFLLE1BQU8wQixFQUFpQixtQkFBbUIsR0FDbERELEVBQUVFLG1CQUFxQixXQUNyQixJQUN1QixJQUFqQkYsRUFBRUcsYUFFSkMsR0FBZ0IsRUFFQSxNQUFiSixFQUFFSyxRQUNIQyxHQUFrQixFQUVsQnBGLEdBQVMsRUFBTThFLEVBQUVPLGdCQUVqQkMsUUFBUUMsTUFBTSw2QkFDZEgsR0FBa0IsRUFFbEJwRixHQUFTLEVBQU8sUUFJdEIsTUFBT3dGLEdBQ0xGLFFBQVFDLE1BQU0scUJBQXNCQyxFQUFFQyxlQUkxQ1gsRUFBRWpCLFFBR0osUUFBUzZCLEdBQVFDLEVBQVMzRixFQUFVNEYsR0FLbEMsUUFBU0MsR0FBWUMsR0FDbkIsR0FBSXRGLEdBQUtDLEVBQUtzRixDQUVWRCxHQUVGdEYsRUFBTSxFQUFrQnVFLEVBQWlCLFFBQVVpQixtQkFBbUJMLEdBQ3BFWixFQUFpQixPQUFRLEdBQUloRCxPQUFPa0UsVUFBWSxRQUFVRCxtQkFBbUJMLEdBRTNFQyxFQUNGcEYsRUFBTW1GLEdBRU5sRixFQUFNa0YsRUFBUU8sTUFBTSxLQUNwQkgsRUFBNEIsSUFBZnRGLEVBQUlaLE9BQWdCLElBQU0sSUFDdkNXLEVBQU1tRixFQUFVSSxFQUFZLE9BQVEsR0FBSWhFLE9BQU9rRSxXQUluREUsRUFBWSxPQUFRM0YsR0FHdEIsUUFBUzJGLEdBQVlDLEVBQVE1RixHQUMzQixHQUFJMEMsR0FBTSxHQUFJQyxnQkFDWmtELEdBQ0VuRCxJQUFLQSxFQUNMMUMsSUFBS0EsRUFHVDBDLEdBQUlHLEtBQUsrQyxFQUFRNUYsR0FBSyxHQUV0QjBDLEVBQUlvRCxpQkFBaUIsVUFBVyxXQUM5QixHQUFJbkIsR0FBU2pDLEVBQUlpQyxRQUFVLENBRXZCQSxJQUFVLEtBQWdCLElBQVRBLEVBQ25CbkYsRUFBU3FHLEdBR00sU0FBWEQsRUFDRkQsRUFBWSxNQUFPM0YsR0FHbkJSLEVBQVNxRyxFQUFTLEdBQUlFLE9BQU0sd0NBQTBDcEIsTUFLNUVqQyxFQUFJVyxPQWpETixHQUFLOEIsR0FBWTNGLEdBQWdDLGtCQUFiQSxHQW9EcEMsTUFBS2tGLEdBSUlXLEVBQVlULEdBRlpvQixLQUFLM0IsS0FBS2dCLEdBOUZyQixHQUFJZCxHQUFpQix5QkFFakJHLEdBQWdCLEVBQ2xCRSxHQUFrQixDQWtHcEIsUUFDRU0sUUFBU0EsRUFDVGIsS0FBTUEsTUFPWSxtQkFBWDRCLFFBQXdCLENBQ2pDLEdBQUlBLFNBQ0ZDLEtBQU0sa0JBQ054SCxZQUFhLE9BR1Esb0JBQVp5SCxVQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix3QkFDM0JBLFNBQVMsZ0JBQWlCLFNBTWpDLEdBQUl6SCxZQUFhQSxjQUNqQkEsWUFBVzBILFNBRVgxSCxXQUFXMEgsTUFBUSxTQUFXdkgsR0FDNUIsWUEwQkEsU0FBU3dILEtBQ1B4SCxFQUFRYSxJQUFJRSxLQUFLLEdBQUksZUFBZ0IsS0FBTTBHLEVBQU9yRSxVQUFVLE9BRzdDLE9BQVhzRSxHQUNGQyxFQUFTRCxHQUFRLEdBR25CQyxHQUFXbkQsTUFBUyxTQUFVLEdBR2hDLFFBQVNvRCxLQUNQNUgsRUFBUWEsSUFBSUUsS0FBSyxHQUFJLGdCQUFpQixLQUFNMEcsRUFBT3JFLFVBQVUsT0FDM0QsR0FBTSxHQUFNLEdBQU0sR0FBTSxHQUc1QixRQUFTeUUsS0FDUEMsYUFBYUMsR0FDYkEsRUFBYyxLQUdoQixRQUFTQyxLQUNQSCxJQUVBRSxFQUFjNUMsV0FBVyxXQUV2QnFDLEtBQ0MsS0FHTCxRQUFTUyxLQUNQLEdBQUlDLEdBQVdDLEVBQWlCQyxlQUFlQyxFQUUvQyxPQUFJSCxHQUNLQSxFQUFTSSxrQkFHWCxLQUdULFFBQVNDLEtBQ1AsR0FBSUMsR0FBVyxJQUVmLElBQUlDLEdBQWlCQSxFQUFjbkksT0FBUyxFQUFHLENBQzdDLEdBQWMsU0FBVm9JLEVBQ0YsTUFBT0QsR0FBYyxFQUVsQixJQUFjLFdBQVZDLElBRVBGLEVBQVdQLEtBR1QsTUFBT1EsR0FBY0QsRUFBU0csT0FLcEMsTUFBTyxNQUlULFFBQVNDLEdBQWlCbEgsRUFBUWYsR0FDaEMsR0FBSTJCLE1BQ0ZtQixFQUFRNUQsV0FBV0MsT0FBT0MsWUFDMUJrQixFQUFNLElBRUpTLEdBQU84QyxRQUNUbEMsRUFBS2tDLE1BQVE5QyxFQUFPOEMsT0FHbEI5QyxFQUFPbUgsZ0JBQ1R2RyxFQUFLdUcsY0FBZ0JuSCxFQUFPbUgsZUFJNUI1SCxFQURFUyxFQUFPVCxJQUNIUyxFQUFPVCxJQUdQc0gsSUFHUmpHLEVBQUt3RyxTQUFXN0gsRUFDaEJxQixFQUFLeUcsWUFBY3RGLEVBQU16QyxjQUFjQyxHQUV2Q3dDLEVBQU0vQyxPQUFPLFNBQVNILEVBQVdDLEdBQy9COEIsRUFBSzBHLFdBQWF6SSxFQUNsQitCLEVBQUsyRyxXQUFhekksRUFFbEJHLEVBQUcyQixLQU9QLFFBQVM0RyxHQUFVQyxHQUNqQkMsR0FBYSxFQUViQyxFQUFTQyxLQUFLSCxHQUVkaEIsRUFBaUJvQixPQUFPbEIsRUFBZSxXQUVoQ21CLEdBQ0h4QixNQUtOLFFBQVNMLEdBQVNqRyxFQUFRK0gsR0FDcEJBLElBQ0YvQixFQUFTaEcsR0FHWGtILEVBQWlCbEgsRUFBUSxTQUFTWSxHQUNoQ29ILEVBQVEvRSxJQUFJLGVBQWdCckMsS0FJaEMsUUFBU3FILEdBQVdDLEdBQ0osU0FBVmxCLEVBRUZELEVBQWMsR0FBS21CLEVBQ0EsV0FBVmxCLElBRVRELEVBQWdCbUIsR0FHbEJQLEVBQVNRLE9BRUpMLEdBQ0hNLElBSUosUUFBU0MsR0FBY0gsR0FDUCxTQUFWbEIsRUFFRkQsRUFBYyxHQUFLbUIsRUFDQSxXQUFWbEIsSUFFVEQsRUFBZ0JtQixHQUlsQkksR0FBaUIsRUFDakJ0QyxFQUFTLEtBR1gsUUFBU3VDLEtBQ1AsR0FBSS9CLEdBQVdDLEVBQWlCQyxlQUFlQyxFQUkvQyxPQUZBbUIsSUFBZ0IsRUFFWkosR0FDRnZCLElBQ0EsU0FHRUssR0FDRkEsRUFBUytCLFFBRFgsUUFLRixRQUFTSCxLQUNQLEdBQUk1QixHQUFXQyxFQUFpQkMsZUFBZUMsRUFNL0MsT0FKQW1CLElBQWdCLEVBRWhCN0IsR0FBV25ELE1BQVMsU0FBVSxHQUUxQjRFLEdBQ0ZwQixJQUNBLFNBR0dnQyxJQUNDOUIsRUFDRkEsRUFBUzRCLE9BR0xyQixHQUFpQkEsRUFBY25JLE9BQVMsSUFDNUIsU0FBVm9JLEdBRUZQLEVBQWlCK0IsSUFBSSxHQUNyQi9CLEVBQWlCZ0Msa0JBQWtCLEVBQUdDLEVBQW1CM0IsRUFBYyxHQUFJdkIsT0FBT0MsS0FBTSxxQkFFdkUsV0FBVnVCLElBQ1BQLEVBQWlCK0IsSUFBSSxHQUNyQi9CLEVBQWlCZ0Msa0JBQWtCLEVBQUdDLEVBQW1CM0IsRUFBZXZCLE9BQU9DLEtBQU0seUJBYjdGLFFBcUJGLFFBQVNrRCxLQUNQbEMsRUFBaUJvQixPQUFPbEIsRUFBZSxXQUNyQ2IsTUFJSixRQUFTOEMsS0FDUCxHQUFJcEMsRUFHSm1CLEdBQVNRLE9BRUpMLElBQ0h0QixFQUFXQyxFQUFpQkMsZUFBZUMsR0FFdkNILEdBQ0ZBLEVBQVM0QixRQUtmLFFBQVNTLEdBQW9CN0ksRUFBUThJLEdBQ25DLEdBRUVDLEdBRkVDLEtBQ0ZDLEVBQVUsSUFHWlAsR0FBb0JRLEVBQUVDLE1BQU1uSixHQUM1QmdILEVBQVE4QixFQUNSL0MsRUFBUyxHQUFJekgsR0FBUW1ELE1BRXJCMkgsU0FBU0MsZUFBZSxrQkFBa0JDLE1BQU1DLE9BQVN4RCxFQUFPeUQsT0FBTyxPQUFTLEtBRWhGZCxFQUFrQmUsTUFBUTFELEVBQU95RCxPQUFPLE9BQ3hDZCxFQUFrQmEsT0FBU3hELEVBQU95RCxPQUFPLE9BRXpDN0IsRUFBVyxHQUFJeEosWUFBV0MsT0FBT3NMLFFBQVFOLFNBQVNDLGVBQWUsa0JBQy9ERCxTQUFTQyxlQUFlLHFCQUcxQjFCLEVBQVNDLEtBQUssK0NBRWRuQixFQUFtQixHQUFJdEksWUFBV0MsT0FBT3lILE1BQU04RCxnQkFFakMsU0FBVjNDLEdBQ0YrQixFQUFtRSxJQUFsRGEsT0FBT0MsS0FBS25CLEVBQWtCb0IsU0FBU2xMLE9BRW5EbUssR0FNSEUsRUFBVSxVQUdWYyxFQUFXLEdBQUk1TCxZQUFXMEgsTUFBTW1FLFlBQVl0QixHQUM1Q3FCLEVBQVNFLFNBVFRoQixFQUFVLFNBRVZpQixFQUFjLEdBQUkvTCxZQUFXMEgsTUFBTXNFLFdBQVd6QixHQUM5Q3dCLEVBQVlELFNBU0csV0FBVmpELElBQ1BpQyxFQUFVLFVBR1ZjLEVBQVcsR0FBSTVMLFlBQVcwSCxNQUFNdUUsY0FBYzFCLEdBQzlDcUIsRUFBU0UsUUFHWGpCLEVBQVVsRyxNQUFRLGdCQUNsQmtHLEVBQVU3QixjQUFnQjhCLEVBQzFCaEQsRUFBUytDLEdBQVcsR0FFcEI5QyxJQUlGLFFBQVNtRSxHQUFZQyxHQUNuQixHQUFJckIsR0FBVSxLQUNaakosS0FDQVQsRUFBTSxHQUNOa0ksRUFBVSxnREFDVjhDLEVBQWMsZ0RBQ2RDLEVBQWdCLG1EQUNoQkMsRUFBZSxrREFDZkMsRUFBaUIsdUhBR25CcEMsSUFBaUIsRUFFYmdDLElBQ0VBLEVBQU1LLE1BQVFMLEVBQU03QyxRQUN0QndCLEVBQVVxQixFQUFNSyxLQUFPLE1BQVFMLEVBQU03QyxRQUU5QjZDLEVBQU1LLEtBQ2IxQixFQUFVcUIsRUFBTUssS0FFVEwsRUFBTTdDLFVBQ2J3QixFQUFVcUIsRUFBTTdDLFNBSWQ2QyxFQUFNN0MsVUFDSDZDLEVBQU03QyxVQUFZOEMsR0FBaUJELEVBQU03QyxVQUFZK0MsRUFDeEQvQyxFQUFVaUQsRUFFSEosRUFBTTdDLFVBQVlnRCxJQUN6QmxMLEVBQU1zSCxJQUdGdEgsR0FBT0EsRUFBSU0sUUFBUSxtQkFBcUIsS0FDMUM0SCxFQUFVaUQsTUFNbEIxSyxFQUFPOEMsTUFBUSxlQUNmOUMsRUFBT21ILGNBQWdCOEIsRUFFdkJoRCxFQUFTakcsR0FBUSxHQUNqQndILEVBQVVDLEdBR1osUUFBU21ELEtBQ1ByQyxJQXZWRixHQUFJRyxHQUFtQjFCLEVBRW5CakIsRUFBUyxLQUNYZ0UsRUFBVyxLQUNYRyxFQUFjLEtBQ2R2QyxFQUFXLEtBQ1hsQixFQUFtQixLQUVqQjZCLEdBQWlCLEVBQ25CUixHQUFnQixFQUVkbkIsRUFBZ0IsRUFFaEJJLEtBRUFmLEVBQVMsS0FDWEssRUFBYyxLQUNkcUIsR0FBYSxFQUVYTSxFQUFVN0osV0FBV0MsT0FBTzBELE1BdVVoQyxRQUNFbUUsU0FBWUEsRUFDWmdDLFdBQWNBLEVBQ2RJLGNBQWlCQSxFQUNqQkUsTUFBU0EsRUFDVEgsS0FBUUEsRUFDUlMsb0JBQXVCQSxFQUN2QnJCLFVBQWFBLEVBQ2JtQixZQUFlQSxFQUNmQyxZQUFlQSxFQUNmeUIsWUFBZUEsRUFDZk8sS0FBUUEsSUFHVHRNLFFBSUgsSUFBSUgsWUFBYUEsY0FDakJBLFlBQVcwSCxNQUFRMUgsV0FBVzBILFVBRTlCMUgsV0FBVzBILE1BQU1tRSxZQUFjLFNBQVUvSixHQUN2QyxZQU9BLFNBQVNnSyxLQUNQLEdBQUlILEdBQVVWLFNBQVNDLGVBQWUsZUFFakNTLEtBSUxBLEVBQVF6RSxpQkFBaUIsd0JBQXlCLFNBQVNkLEdBQ3JEQSxFQUFFc0csUUFBVXRHLEVBQUVzRyxPQUFPdEwsTUFFbkJ1TCxHQUNGQSxHQUFlLEVBRWYzTSxXQUFXMEgsTUFBTW9DLFdBQVcxRCxFQUFFc0csT0FBT3RMLE1BSWpDZ0YsRUFBRXNHLE9BQU9FLGVBQWUsWUFBY3hHLEVBQUVzRyxPQUFPRyxTQUNqRDdNLFdBQVcwSCxNQUFNd0MsY0FBYzlELEVBQUVzRyxPQUFPdEwsUUFNaER1SyxFQUFRekUsaUJBQWlCLHVCQUF3QixTQUFTZCxHQUN4RCxHQUFJdkUsSUFBVzhDLE1BQVMseUJBQTBCcUUsY0FBaUI1QyxFQUFFc0csT0FFckUxTSxZQUFXMEgsTUFBTUksU0FBU2pHLEdBQVEsR0FDbEM3QixXQUFXMEgsTUFBTTJCLFVBQVUsbUVBRzdCc0MsRUFBUXpFLGlCQUFpQiw4QkFBK0IsU0FBU2QsR0FDL0QsR0FBSXZFLElBQVc4QyxNQUFTLHlCQUEwQnZELElBQU9nRixFQUFFc0csT0FFM0QxTSxZQUFXMEgsTUFBTUksU0FBU2pHLEdBQVEsR0FDbEM3QixXQUFXMEgsTUFBTTJCLFVBQVUsb0RBRzdCc0MsRUFBUXpFLGlCQUFpQixxQkFBc0IsV0FDN0MsR0FBSXJGLElBQVc4QyxNQUFTLGdCQUV4QjNFLFlBQVcwSCxNQUFNSSxTQUFTakcsR0FBUSxHQUNsQzdCLFdBQVcwSCxNQUFNMkIsVUFBVSxnRUFHN0JzQyxFQUFRekUsaUJBQWlCLG1CQUFvQixXQUMzQyxHQUFJckYsSUFBVzhDLE1BQVMsY0FFeEIzRSxZQUFXMEgsTUFBTUksU0FBU2pHLEdBQVEsR0FDbEM3QixXQUFXMEgsTUFBTTJCLFVBQVUsOERBSTdCc0MsRUFBUW1CLGFBQWEsU0FBVWhMLEVBQUs2SixRQUFRb0IsUUFDNUNwQixFQUFRbUIsYUFBYSxXQUFZaEwsRUFBSzZKLFFBQVFxQixVQUM5Q3JCLEVBQVFtQixhQUFhLFlBQWFoTCxFQUFLNkosUUFBUWpMLFdBQy9DaUwsRUFBUW1CLGFBQWEsTUFBT3pGLE9BQU92SCxhQUNuQzZMLEVBQVFzQixNQTlEVixHQUFJTixJQUFlLENBaUVuQixRQUNFYixLQUFRQSxHQU1aLElBQUk5TCxZQUFhQSxjQUNqQkEsWUFBVzBILE1BQVExSCxXQUFXMEgsVUFFOUIxSCxXQUFXMEgsTUFBTXVFLGNBQWdCLFNBQVVuSyxHQUN6QyxZQU1BLFNBQVNvTCxLQUNQLE1BQU9uQyxHQUFFb0MsTUFBTUMsRUFBUSxPQUd6QixRQUFTQyxHQUFpQkMsR0FDeEIsTUFBT3ZDLEdBQUV3QyxLQUFLSCxFQUFRLFNBQVVJLEdBQzlCLE1BQU9GLEdBQUt4SyxPQUFTMEssRUFBRTFLLE9BSTNCLFFBQVMySyxHQUFZSCxHQUNuQixHQUFJSSxHQUFXTCxFQUFpQkMsRUFFNUJJLElBQ0ZOLEVBQU9PLE9BQU9QLEVBQU8xTCxRQUFRZ00sR0FBVyxHQUk1QyxRQUFTRSxHQUFZTixHQUNuQixHQUFJSSxHQUFXTCxFQUFpQkMsRUFFNUJJLEtBQ0ZBLEVBQVN0TSxJQUFNa00sRUFBS2xNLEtBSXhCLFFBQVN5TSxHQUFTUCxHQUNoQixHQUFJSSxHQUFXTCxFQUFpQkMsRUFFM0JJLEtBRUhKLEVBQUtOLFNBQVdNLEVBQUt4SyxLQUFLZ0wsTUFBTVIsRUFBS3hLLEtBQUt0QixZQUFZLEtBQU8sRUFBRzhMLEVBQUt4SyxLQUFLdEIsWUFBWSxNQUFNRyxjQUc1RnlMLEVBQU9PLE9BQU81QyxFQUFFZ0QsWUFBWVgsRUFBUUUsRUFBTSxZQUFhLEVBQUdBLElBTzlELFFBQVN4QixLQUNQLEdBQUlILEdBQVVWLFNBQVNDLGVBQWUsZUFFakNTLEtBSUxBLEVBQVF6RSxpQkFBaUIsd0JBQXlCLFNBQVNkLEdBQ3pELEdBQUlrSCxHQUFPbEgsRUFBRXNHLE1BR2IsT0FBR1ksR0FBS1UsUUFDTkgsRUFBU1AsR0FFTFgsSUFDRkEsR0FBZSxFQUNmM00sV0FBVzBILE1BQU1vQyxXQUFXb0QsS0FFNUIsU0FLREksRUFBS1QsU0FDTmUsRUFBWU4sR0FJWEEsRUFBS1csU0FDTlIsRUFBWUgsR0FHZHROLFdBQVcwSCxNQUFNd0MsY0FBY2dELEtBVC9CLFVBYUZ2QixFQUFRekUsaUJBQWlCLDRCQUE2QixXQUNwRCxHQUFJckYsSUFBVzhDLE1BQVMsdUJBRXhCM0UsWUFBVzBILE1BQU1JLFNBQVNqRyxHQUFRLEdBQ2xDN0IsV0FBVzBILE1BQU0yQixVQUFVLHNEQUc3QnNDLEVBQVF6RSxpQkFBaUIseUJBQTBCLFNBQVVkLEdBQzNELEdBQUl2RSxJQUFXOEMsTUFBUywrQkFBZ0NxRSxjQUFpQjVDLEVBQUVzRyxPQUUzRTFNLFlBQVcwSCxNQUFNSSxTQUFTakcsR0FBUSxHQUNsQzdCLFdBQVcwSCxNQUFNMkIsVUFBVSx5Q0FHN0JzQyxFQUFRekUsaUJBQWlCLHFCQUFzQixXQUM3QyxHQUFJckYsSUFBVzhDLE1BQVMsZ0JBRXhCM0UsWUFBVzBILE1BQU1JLFNBQVNqRyxHQUFRLEdBQ2xDN0IsV0FBVzBILE1BQU0yQixVQUFVLGdFQUc3QnNDLEVBQVF6RSxpQkFBaUIsbUJBQW9CLFdBQzNDLEdBQUlyRixJQUFXOEMsTUFBUyxjQUV4QjNFLFlBQVcwSCxNQUFNSSxTQUFTakcsR0FBUSxHQUNsQzdCLFdBQVcwSCxNQUFNMkIsVUFBVSw4REFHN0JzQyxFQUFRbUIsYUFBYSxXQUFZLFNBQ2pDbkIsRUFBUW1CLGFBQWEsWUFBYWhMLEVBQUs2SixRQUFRakwsV0FDL0NpTCxFQUFRbUIsYUFBYSxTQUFVaEwsRUFBSzZKLFFBQVFvQixRQUM1Q3BCLEVBQVFtQixhQUFhLE1BQU96RixPQUFPdkgsYUFFbkM2TCxFQUFRc0IsTUFsSFYsR0FBSU4sSUFBZSxFQUVmUyxJQW1ISixRQUNFdEIsS0FBUUEsR0FJWixJQUFJOUwsWUFBYUEsY0FDakJBLFlBQVcwSCxNQUFRMUgsV0FBVzBILFVBRTlCMUgsV0FBVzBILE1BQU1zRSxXQUFhLFNBQVVsSyxHQUN0QyxZQVdBLFNBQVNvTSxHQUFTQyxHQUNoQkMsRUFBVTlILFFBQVErSCxFQUFNLFNBQVVoSyxFQUFVOEgsR0FDckNBLEdBZ0JIbk0sV0FBVzBILE1BQU1JLFVBQ2ZuRCxNQUFTLG9CQUNUcUUsY0FBaUJtRCxFQUFNN0MsUUFDdkJsSSxJQUFPaUQsRUFBU2pELE1BQ2YsR0FFSHBCLFdBQVcwSCxNQUFNMkIsVUFBVSxrRUFwQnZCaUYsR0FDRkEsR0FBYSxFQUVidE8sV0FBVzBILE1BQU1vQyxXQUFXekYsRUFBU2pELEtBR3JDbU4sS0FHQXZPLFdBQVcwSCxNQUFNd0MsY0FBYzdGLEVBQVNqRCxNQWEzQytNLEdBR0wsUUFBU0ksS0FDb0IsT0FBdkJDLElBQ0ZBLEVBQXFCQyxZQUFZLFdBQy9CUCxHQUFTLElBQ1JRLElBT1AsUUFBUzVDLEtBRVB1QyxFQUFRdk0sRUFBS1YsS0FBb0IsS0FBYlUsRUFBS1YsSUFBY1UsRUFBS1YsSUFBTVUsRUFBSzZNLFNBQVN2TixJQUVoRThNLEdBQVMsR0FyRFgsR0FBSUUsR0FBWXBPLFdBQVdDLE9BQU91RixVQUU5QmtKLEVBQW1CLElBQ3JCRixFQUFxQixLQUVuQkYsR0FBYSxFQUViRCxFQUFPLEVBaURYLFFBQ0V2QyxLQUFRQSxHQUlaLElBQUk5TCxZQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU95SCxNQUFRMUgsV0FBV0MsT0FBT3lILFVBRTVDMUgsV0FBV0MsT0FBT3lILE1BQU04RCxnQkFBa0IsV0FDeEMsWUFJQSxTQUFTb0QsR0FBa0I5RixHQUN6QixNQUFPbUMsVUFBU0MsZUFBZTJELEVBQVMvRixHQUcxQyxRQUFTUCxHQUFlTyxHQUN0QixHQUNFZ0csR0FERUMsRUFBaUJILEVBQWtCOUYsRUFLdkMsT0FGQWdHLEdBQVNDLEVBQWVDLGNBQWMsVUFFbENGLEVBQ01BLEVBQW9CLGNBQUlBLEVBQU9HLGNBQ3BDSCxFQUFPSSxnQkFBd0IsU0FBSUosRUFBT0ksZ0JBQWdCakUsU0FBVzZELEVBQU9JLGdCQUcxRSxLQUdULFFBQVNDLEdBQU9yRyxHQUNkLEdBRUVnRyxHQUZFQyxFQUFpQkgsRUFBa0I5RixHQUNyQ1QsRUFBV0UsRUFBZU8sRUFHeEJULEtBQ0Z5RyxFQUFTQyxFQUFlQyxjQUFjLFVBQ3RDM0csRUFBU3FCLFNBQ1RvRixFQUFPaEMsYUFBYSxNQUFPLGdCQUkvQixRQUFTekMsR0FBSXZCLEdBQ1gsR0FBSWlHLEdBQWlCSCxFQUFrQjlGLEdBQ3JDZ0csRUFBUzdELFNBQVNtRSxjQUFjLFNBRWxDTixHQUFPaEMsYUFBYSxxQkFBcUIsR0FDekNnQyxFQUFPaEMsYUFBYSxjQUFlLEtBQ25DZ0MsRUFBT2hDLGFBQWEsWUFBYSxNQUVqQ2lDLEVBQWVNLFlBQVlQLEdBRzdCLFFBQVN4RSxHQUFrQnhCLEVBQU9qSCxFQUFReU4sRUFBT0MsRUFBTUMsR0FDckQsR0FFRVYsR0FGRUMsRUFBaUJILEVBQWtCOUYsR0FDckNULEVBQVdFLEVBQWVPLEVBR3hCVCxLQUNGeUcsRUFBU0MsRUFBZUMsY0FBYyxVQUV0Q0YsRUFBT1csT0FBUyxXQUNkWCxFQUFPVyxPQUFTLEtBR2hCcEgsRUFBU3lELEtBQUtqSyxFQUFReU4sRUFBT0MsR0FDN0JsSCxFQUFTcUgsUUFHWFosRUFBT2hDLGFBQWEsTUFBTzBDLElBSy9CLFFBQVN4RixHQUFLbEIsR0FDWixHQUFJaUcsR0FBaUJILEVBQWtCOUYsRUFFdkNpRyxHQUFlNUQsTUFBTXdFLFdBQWEsU0FHcEMsUUFBU2pHLEdBQU9aLEVBQU9sSSxHQUNyQixHQUFJbU8sR0FBaUI5RCxTQUFTQyxlQUFlMkQsRUFBUy9GLEVBRXREcUcsR0FBT3JHLEdBRVB4RCxXQUFXLFdBRVQsS0FBT3lKLEVBQWVhLFlBQ3BCYixFQUFlYyxZQUFZZCxFQUFlYSxXQUd4Q2hQLElBQWdDLGtCQUFiQSxJQUNyQkEsS0FFRCxLQUdMLFFBQVM2SSxHQUFLWCxHQUNaLEdBQUlpRyxHQUFpQkgsRUFBa0I5RixFQUV2Q2lHLEdBQWU1RCxNQUFNd0UsV0FBYSxVQTFGcEMsR0FBSWQsR0FBUyxLQTZGYixRQUNFeEUsSUFBS0EsRUFDTEMsa0JBQW1CQSxFQUNuQnNFLGtCQUFtQkEsRUFDbkJyRyxlQUFnQkEsRUFDaEJ5QixLQUFNQSxFQUNOTixPQUFRQSxFQUNSRCxLQUFNQSxHQUlWLElBQUl6SixZQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9zTCxRQUFVLFNBQVV1RSxFQUFlQyxHQUNuRCxZQUlBLFNBQVNDLEtBQ1AsSUFDRUQsRUFBaUI1RSxNQUFNQyxPQUFTMEUsRUFBYzNFLE1BQU1DLE9BQ3BELE1BQU9oRixHQUNQRixRQUFRK0osS0FBSyw4QkFBK0I3SixFQUFFa0QsVUFPbEQsUUFBU1UsS0FDUCxHQUFJa0csRUFBUyxDQUVYLEtBQU9ILEVBQWlCSCxZQUN0QkcsRUFBaUJGLFlBQVlFLEVBQWlCSCxXQUloREcsR0FBaUI1RSxNQUFNZ0YsUUFBVSxPQUdqQ0wsRUFBYzNFLE1BQU13RSxXQUFhLFVBRWpDTyxHQUFVLEdBSWQsUUFBU3pHLEdBQUtILEdBQ1osR0FDRThHLEdBREVDLEVBQVdwRixTQUFTcUYsd0JBR25CSixJQWlCSEUsRUFBSUwsRUFBaUJmLGNBQWMsWUFDbkNvQixFQUFFRyxVQUFZakgsSUFoQmR3RyxFQUFjM0UsTUFBTXdFLFdBQWEsU0FFakNJLEVBQWlCNUUsTUFBTWdGLFFBQVUsUUFHakNDLEVBQUluRixTQUFTbUUsY0FBYyxLQUMzQmdCLEVBQUVHLFVBQVlqSCxFQUNkOEcsRUFBRXRELGFBQWEsUUFBUyxXQUV4QnVELEVBQVNoQixZQUFZZSxHQUNyQkwsRUFBaUJWLFlBQVlnQixHQUU3QkgsR0FBVSxHQWhEZCxHQUFJQSxJQUFVLENBMERkLE9BRkFGLE1BR0VoRyxLQUFRQSxFQUNSUCxLQUFRQSxJQU1aLFNBQVcrRyxFQUFRclEsR0FDakIsWUFVQSxTQUFTc1EsR0FBVXBRLEVBQU9DLEdBQ3hCLEdBQUlvUSxHQUFrQi9GLENBRWxCcEssT0FBTUMsUUFBUUgsSUFBVUEsRUFBTUksT0FBUyxHQUFrQixxQkFBYkosRUFBTSxJQUNoREUsTUFBTUMsUUFBUUYsSUFBV0EsRUFBT0csT0FBUyxJQUMzQ2lRLEVBQW1CM08sS0FBS0MsTUFBTTFCLEVBQU8sSUFTakNxSyxFQVBpRCxJQUFqRGMsT0FBT0MsS0FBS2dGLEVBQWlCL0UsU0FBU2xMLE9BRW5DaVEsRUFBaUIvRSxRQUFRcUIsU0FLckIsT0FIQSxTQU9GLE9BR1RoTixXQUFXMEgsTUFBTWdELG9CQUFvQmdHLEVBQWtCL0YsSUFLN0QsUUFBU1YsS0FDUGpLLFdBQVcwSCxNQUFNdUMsT0FHbkIsUUFBU0csS0FDUHBLLFdBQVcwSCxNQUFNMEMsUUFHbkIsUUFBU3FDLEtBQ1B6TSxXQUFXMEgsTUFBTStFLE9BR25CLFFBQVNrRSxLQUNQSCxFQUFPSSxvQkFBb0IscUJBQXNCRCxHQUU3QzVQLEdBQWEsS0FBUEEsSUFDUlosRUFBUWEsSUFBSUMsU0FBUyxjQUFnQkYsRUFBSWtKLEdBQ3pDOUosRUFBUWEsSUFBSUMsU0FBUyxlQUFpQkYsRUFBSXFKLEdBQzFDakssRUFBUWEsSUFBSUMsU0FBUyxjQUFnQkYsRUFBSTBMLEdBRXpDdE0sRUFBUWEsSUFBSUMsU0FBUyxlQUFpQkYsRUFBSTBQLEdBQzFDdFEsRUFBUWEsSUFBSUUsS0FBSyxHQUFJLGNBQWUsS0FBTUgsR0FBSyxzQkF2RG5ELEdBQUk4UCxHQUFRLEdBQUkxUSxHQUFRbUQsTUFDdEJ2QyxFQUFLOFAsRUFBTXROLFVBQVUsS0FHdkJpTixHQUFPTSxjQUFnQixXQUNyQixPQUFPLEdBc0RUTixFQUFPdEosaUJBQWlCLHFCQUFzQnlKLElBRTdDSCxPQUFRclEsUUFLWCxJQUFJNFEsTUFBT0EsUUFFWEEsTUFBS0MsTUFBTSxjQUFlLGtCQUMxQkQsS0FBS0MsTUFBTSxtQkFFWCxXQUNFLEdBQUlDLEdBQUtoRyxTQUFTbUUsY0FBYyxTQUFXNkIsR0FBR3pFLEtBQU8sa0JBQW1CeUUsRUFBR0MsT0FBUSxFQUNuRkQsRUFBR3pCLEtBQU8sVUFBWXZFLFNBQVNrRyxTQUFTQyxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJcEcsU0FBU3FHLHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFQLEVBQUlJIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgV0lER0VUX0NPTU1PTl9DT05GSUcgPSB7XG4gIEFVVEhfUEFUSF9VUkw6IFwidjEvd2lkZ2V0L2F1dGhcIixcbiAgTE9HR0VSX0NMSUVOVF9JRDogXCIxMDg4NTI3MTQ3MTA5LTZxMW8ydnRpaG4zNDI5MnBqdDRja2htaGNrMHJrMG83LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXG4gIExPR0dFUl9DTElFTlRfU0VDUkVUOiBcIm5sWnlyY1BMZzZvRXdPOWY5V2ZuMjlXaFwiLFxuICBMT0dHRVJfUkVGUkVTSF9UT0tFTjogXCIxL3h6dDRrd3pFMUg3VzlWbktCOGNBYUN4NnpiNEVzNG5LRW9xYVlIZFREMTVJZ09ySkR0ZHVuNnpLNlhpQVRDS1RcIixcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzID0gKGZ1bmN0aW9uKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgZGlzcGxheUlkID0gXCJcIixcbiAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgIGNhbGxiYWNrID0gbnVsbDtcblxuICB2YXIgQkFTRV9JTlNFUlRfU0NIRU1BID1cbiAge1xuICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICBcInNraXBJbnZhbGlkUm93c1wiOiBmYWxzZSxcbiAgICBcImlnbm9yZVVua25vd25WYWx1ZXNcIjogZmFsc2UsXG4gICAgXCJyb3dzXCI6IFt7XG4gICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICB9XVxuICB9O1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogU2V0IHRoZSBDb21wYW55IGFuZCBEaXNwbGF5IElEcy4gKi9cbiAgZnVuY3Rpb24gc2V0SWRzKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAobmFtZXNbMF0gPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZXNbMV0gPT09IFwiZGlzcGxheUlkXCIpIHtcbiAgICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SWRzKGNiKSB7XG4gICAgaWYgKCFjYiB8fCB0eXBlb2YgY2IgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNhbGxiYWNrID0gY2I7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhbnlJZCAmJiBkaXNwbGF5SWQpIHtcbiAgICAgIGNhbGxiYWNrKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBzZXRJZHMpO1xuICAgICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImNvbXBhbnlJZFwiLCBcImRpc3BsYXlJZFwiXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEJBU0VfSU5TRVJUX1NDSEVNQSkpO1xuXG4gICAgZGF0YS5yb3dzWzBdLmluc2VydElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLnRvVXBwZXJDYXNlKCk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGRhdGEucm93c1swXS5qc29uLnRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZShuYW1lKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lICsgeWVhciArIG1vbnRoICsgZGF5O1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldElkc1wiOiBnZXRJZHMsXG4gICAgXCJnZXRJbnNlcnREYXRhXCI6IGdldEluc2VydERhdGEsXG4gICAgXCJnZXRGaWxlRm9ybWF0XCI6IGdldEZpbGVGb3JtYXQsXG4gICAgXCJnZXRUYWJsZVwiOiBnZXRUYWJsZVxuICB9O1xufSkoZ2FkZ2V0cyk7XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlciA9IChmdW5jdGlvbih1dGlscykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgUkVGUkVTSF9VUkwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbj9jbGllbnRfaWQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX0lEICtcbiAgICAgIFwiJmNsaWVudF9zZWNyZXQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX1NFQ1JFVCArXG4gICAgICBcIiZyZWZyZXNoX3Rva2VuPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX1JFRlJFU0hfVE9LRU4gK1xuICAgICAgXCImZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuXCI7XG5cbiAgdmFyIHNlcnZpY2VVcmwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2JpZ3F1ZXJ5L3YyL3Byb2plY3RzL2NsaWVudC1zaWRlLWV2ZW50cy9kYXRhc2V0cy9XaWRnZXRfRXZlbnRzL3RhYmxlcy9UQUJMRV9JRC9pbnNlcnRBbGxcIixcbiAgICB0aHJvdHRsZSA9IGZhbHNlLFxuICAgIHRocm90dGxlRGVsYXkgPSAxMDAwLFxuICAgIGxhc3RFdmVudCA9IFwiXCIsXG4gICAgcmVmcmVzaERhdGUgPSAwLFxuICAgIHRva2VuID0gXCJcIjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiByZWZyZXNoVG9rZW4oY2IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAobmV3IERhdGUoKSAtIHJlZnJlc2hEYXRlIDwgMzU4MDAwMCkge1xuICAgICAgcmV0dXJuIGNiKHt9KTtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIlBPU1RcIiwgUkVGUkVTSF9VUkwsIHRydWUpO1xuICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuXG4gICAgICBjYih7IHRva2VuOiByZXNwLmFjY2Vzc190b2tlbiwgcmVmcmVzaGVkQXQ6IG5ldyBEYXRlKCkgfSk7XG4gICAgfTtcblxuICAgIHhoci5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1Rocm90dGxlZChldmVudCkge1xuICAgIHJldHVybiB0aHJvdHRsZSAmJiAobGFzdEV2ZW50ID09PSBldmVudCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGxvZyh0YWJsZU5hbWUsIHBhcmFtcykge1xuICAgIGlmICghdGFibGVOYW1lIHx8ICFwYXJhbXMgfHwgIXBhcmFtcy5ldmVudCB8fCBpc1Rocm90dGxlZChwYXJhbXMuZXZlbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHV0aWxzLmdldFRhYmxlKHRhYmxlTmFtZSkpO1xuICAgICAgcmVmcmVzaERhdGUgPSByZWZyZXNoRGF0YS5yZWZyZXNoZWRBdCB8fCByZWZyZXNoRGF0ZTtcbiAgICAgIHRva2VuID0gcmVmcmVzaERhdGEudG9rZW4gfHwgdG9rZW47XG4gICAgICBpbnNlcnREYXRhID0gdXRpbHMuZ2V0SW5zZXJ0RGF0YShwYXJhbXMpO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGRhdGEuXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHRva2VuKTtcblxuICAgICAgaWYgKHBhcmFtcy5jYiAmJiB0eXBlb2YgcGFyYW1zLmNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBhcmFtcy5jYih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShpbnNlcnREYXRhKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZnJlc2hUb2tlbihpbnNlcnRXaXRoVG9rZW4pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ1wiOiBsb2dcbiAgfTtcbn0pKFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzKTtcbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZSA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBCQVNFX0NBQ0hFX1VSTCA9IFwiaHR0cDovL2xvY2FsaG9zdDo5NDk0L1wiO1xuXG4gIHZhciBfcGluZ1JlY2VpdmVkID0gZmFsc2UsXG4gICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gcGluZyhjYWxsYmFjaykge1xuICAgIHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgci5vcGVuKFwiR0VUXCIsIEJBU0VfQ0FDSEVfVVJMICsgXCJwaW5nP2NhbGxiYWNrPV9cIiwgdHJ1ZSk7XG4gICAgci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgIC8vIHNhdmUgdGhpcyByZXN1bHQgZm9yIHVzZSBpbiBnZXRGaWxlKClcbiAgICAgICAgICBfcGluZ1JlY2VpdmVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmKHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZ1wiKTtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiQ2F1Z2h0IGV4Y2VwdGlvbjogXCIsIGUuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgfTtcbiAgICByLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGUoZmlsZVVybCwgY2FsbGJhY2ssIG5vY2FjaGVidXN0ZXIpIHtcbiAgICBpZiAoIWZpbGVVcmwgfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgIHZhciB1cmwsIHN0ciwgc2VwYXJhdG9yO1xuXG4gICAgICBpZiAoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIHVybCB3aXRoIGNhY2hlYnVzdGVyIG9yIG5vdFxuICAgICAgICB1cmwgPSAobm9jYWNoZWJ1c3RlcikgPyBCQVNFX0NBQ0hFX1VSTCArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKSA6XG4gICAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgIGlmIChzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNlcnZlciBtYXkgbm90IHN1cHBvcnQgSEVBRCByZXF1ZXN0LiBGYWxsYmFjayB0byBhIEdFVCByZXF1ZXN0LlxuICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QsIG5ldyBFcnJvcihcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIHN0YXR1cykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZpbGVSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbGVSZXF1ZXN0KF9pc0NhY2hlUnVubmluZyk7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldEZpbGU6IGdldEZpbGUsXG4gICAgcGluZzogcGluZ1xuICB9O1xuXG59KSgpO1xuXG4vKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgU0tJTjogXCJza2luL1JWU2tpbi54bWxcIixcbiAgICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbiAgfTtcblxuICBpZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xuICB9XG59XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvID0gKGZ1bmN0aW9uIChnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWRkaXRpb25hbFBhcmFtcywgX21vZGU7XG5cbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxuICAgIF9ub25TdG9yYWdlID0gbnVsbCxcbiAgICBfbWVzc2FnZSA9IG51bGwsXG4gICAgX2ZyYW1lQ29udHJvbGxlciA9IG51bGw7XG5cbiAgdmFyIF9wbGF5YmFja0Vycm9yID0gZmFsc2UsXG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgdmFyIF9jdXJyZW50RnJhbWUgPSAwO1xuXG4gIHZhciBfY3VycmVudEZpbGVzID0gW107XG5cbiAgdmFyIF9lcnJvciA9IG51bGwsXG4gICAgX2Vycm9yVGltZXIgPSBudWxsLFxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcblxuICB2YXIgX2xvZ2dlciA9IFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlcjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG5cbiAgICAvLyBBbnkgZXJyb3JzIG5lZWQgdG8gYmUgbG9nZ2VkIGJlZm9yZSB0aGUgZG9uZSBldmVudC5cbiAgICBpZiAoX2Vycm9yICE9PSBudWxsKSB7XG4gICAgICBsb2dFdmVudChfZXJyb3IsIHRydWUpO1xuICAgIH1cblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcImRvbmVcIiB9LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXJFcnJvclRpbWVyKCkge1xuICAgIGNsZWFyVGltZW91dChfZXJyb3JUaW1lcik7XG4gICAgX2Vycm9yVGltZXIgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0RXJyb3JUaW1lcigpIHtcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBfZXJyb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbm90aWZ5IFZpZXdlciB3aWRnZXQgaXMgZG9uZVxuICAgICAgX2RvbmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZURhdGEoKSB7XG4gICAgdmFyIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgcmV0dXJuIGZyYW1lT2JqLmdldFBsYXliYWNrRGF0YSgpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlKCkge1xuICAgIHZhciBmaWxlRGF0YSA9IG51bGw7XG5cbiAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbMF07XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICAvLyByZXRyaWV2ZSB0aGUgY3VycmVudGx5IHBsYXllZCBmaWxlIGluZm8gZnJvbSBwbGF5ZXJcbiAgICAgICAgZmlsZURhdGEgPSBfZ2V0Q3VycmVudEZpbGVEYXRhKCk7XG5cbiAgICAgICAgaWYgKGZpbGVEYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbZmlsZURhdGEuaW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBHZXQgdGhlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLlxuICBmdW5jdGlvbiBfZ2V0TG9nZ2VyUGFyYW1zKHBhcmFtcywgY2IpIHtcbiAgICB2YXIganNvbiA9IHt9LFxuICAgICAgdXRpbHMgPSBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyxcbiAgICAgIHVybCA9IG51bGw7XG5cbiAgICBpZiAocGFyYW1zLmV2ZW50KSB7XG4gICAgICBqc29uLmV2ZW50ID0gcGFyYW1zLmV2ZW50O1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMuZXZlbnRfZGV0YWlscykge1xuICAgICAganNvbi5ldmVudF9kZXRhaWxzID0gcGFyYW1zLmV2ZW50X2RldGFpbHM7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy51cmwpIHtcbiAgICAgIHVybCA9IHBhcmFtcy51cmw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdXJsID0gX2dldEN1cnJlbnRGaWxlKCk7XG4gICAgfVxuXG4gICAganNvbi5maWxlX3VybCA9IHVybDtcbiAgICBqc29uLmZpbGVfZm9ybWF0ID0gdXRpbHMuZ2V0RmlsZUZvcm1hdCh1cmwpO1xuXG4gICAgdXRpbHMuZ2V0SWRzKGZ1bmN0aW9uKGNvbXBhbnlJZCwgZGlzcGxheUlkKSB7XG4gICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgIGNiKGpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSkge1xuICAgIF9lcnJvckZsYWcgPSB0cnVlO1xuXG4gICAgX21lc3NhZ2Uuc2hvdyhtZXNzYWdlKTtcblxuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGlmIFdpZGdldCBpcyBwbGF5aW5nIHJpZ2h0IG5vdywgcnVuIHRoZSB0aW1lclxuICAgICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcywgaXNFcnJvcikge1xuICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICBfZXJyb3IgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgX2dldExvZ2dlclBhcmFtcyhwYXJhbXMsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIF9sb2dnZXIubG9nKFwidmlkZW9fZXZlbnRzXCIsIGpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlSW5pdCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXlcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZVJlZnJlc2godXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZyBvZiBvbmUgdXJsXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXkgb2YgdXJsc1xuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG4gICAgfVxuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX3BsYXliYWNrRXJyb3IgPSBmYWxzZTtcbiAgICBfZXJyb3IgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgdmFyIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gICAgaWYgKF9lcnJvckZsYWcpIHtcbiAgICAgIF9jbGVhckVycm9yVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGZyYW1lT2JqLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICB2YXIgZnJhbWVPYmogPSBfZnJhbWVDb250cm9sbGVyLmdldEZyYW1lT2JqZWN0KF9jdXJyZW50RnJhbWUpO1xuXG4gICAgX3ZpZXdlclBhdXNlZCA9IGZhbHNlO1xuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwicGxheVwiIH0sIGZhbHNlKTtcblxuICAgIGlmIChfZXJyb3JGbGFnKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFfcGxheWJhY2tFcnJvcikge1xuICAgICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgaWYgKF9jdXJyZW50RmlsZXMgJiYgX2N1cnJlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICAgICAgLy8gYWRkIGZyYW1lIGFuZCBjcmVhdGUgdGhlIHBsYXllclxuICAgICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzWzBdLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZmlsZS5odG1sXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZm9sZGVyLmh0bWxcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJFbmRlZCgpIHtcbiAgICBfZnJhbWVDb250cm9sbGVyLnJlbW92ZShfY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfZG9uZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheWVyUmVhZHkoKSB7XG4gICAgdmFyIGZyYW1lT2JqO1xuXG4gICAgLy8gRW5zdXJlcyBtZXNzYWdpbmcgaXMgaGlkZGVuIGZvciBub24tc3RvcmFnZSB2aWRlbyBmaWxlXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgICBmcmFtZU9iai5wbGF5KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhwYXJhbXMsIG1vZGUpIHtcbiAgICB2YXIgbG9nUGFyYW1zID0ge30sXG4gICAgICBkZXRhaWxzID0gbnVsbCxcbiAgICAgIGlzU3RvcmFnZUZpbGU7XG5cbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IF8uY2xvbmUocGFyYW1zKTtcbiAgICBfbW9kZSA9IG1vZGU7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcblxuICAgIF9hZGRpdGlvbmFsUGFyYW1zLndpZHRoID0gX3ByZWZzLmdldEludChcInJzV1wiKTtcbiAgICBfYWRkaXRpb25hbFBhcmFtcy5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpO1xuXG4gICAgX21lc3NhZ2UgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvQ29udGFpbmVyXCIpLFxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtZXNzYWdlQ29udGFpbmVyXCIpKTtcblxuICAgIC8vIHNob3cgd2FpdCBtZXNzYWdlIHdoaWxlIFN0b3JhZ2UgaW5pdGlhbGl6ZXNcbiAgICBfbWVzc2FnZS5zaG93KFwiUGxlYXNlIHdhaXQgd2hpbGUgeW91ciB2aWRlbyBpcyBkb3dubG9hZGVkLlwiKTtcblxuICAgIF9mcmFtZUNvbnRyb2xsZXIgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uVmlkZW8uRnJhbWVDb250cm9sbGVyKCk7XG5cbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICBpc1N0b3JhZ2VGaWxlID0gKE9iamVjdC5rZXlzKF9hZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XG5cbiAgICAgIGlmICghaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICBkZXRhaWxzID0gXCJjdXN0b21cIjtcblxuICAgICAgICBfbm9uU3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICBfbm9uU3RvcmFnZS5pbml0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXRhaWxzID0gXCJzdG9yYWdlXCI7XG5cbiAgICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZpbGUgaW5zdGFuY2VcbiAgICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIGRldGFpbHMgPSBcInN0b3JhZ2VcIjtcblxuICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZvbGRlciBpbnN0YW5jZVxuICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICB9XG5cbiAgICBsb2dQYXJhbXMuZXZlbnQgPSBcImNvbmZpZ3VyYXRpb25cIjtcbiAgICBsb2dQYXJhbXMuZXZlbnRfZGV0YWlscyA9IGRldGFpbHM7XG4gICAgbG9nRXZlbnQobG9nUGFyYW1zLCBmYWxzZSk7XG5cbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8vIEFuIGVycm9yIG9jY3VycmVkIHdpdGggSlcgUGxheWVyLlxuICBmdW5jdGlvbiBwbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIHZhciBkZXRhaWxzID0gbnVsbCxcbiAgICAgIHBhcmFtcyA9IHt9LFxuICAgICAgdXJsID0gXCJcIixcbiAgICAgIG1lc3NhZ2UgPSBcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvLlwiLFxuICAgICAgTUVESUFfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgbWVkaWE6IEZpbGUgY291bGQgbm90IGJlIHBsYXllZFwiLFxuICAgICAgWU9VVFVCRV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBZb3VUdWJlOiBWaWRlbyBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBQTEFZRVJfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgcGxheWVyOiBObyBwbGF5YWJsZSBzb3VyY2VzIGZvdW5kXCIsXG4gICAgICBGT1JNQVRfTUVTU0FHRSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoYXQgdmlkZW8uIEl0IGNvdWxkIGJlIHRoYXQgd2UgZG9uJ3QgXCIgK1xuICAgICAgICBcInN1cHBvcnQgdGhhdCBmb3JtYXQgb3IgaXQgaXMgbm90IGVuY29kZWQgY29ycmVjdGx5LlwiO1xuXG4gICAgX3BsYXliYWNrRXJyb3IgPSB0cnVlO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IudHlwZSAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci50eXBlICsgXCIgLSBcIiArIGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlcnJvci50eXBlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci50eXBlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IubWVzc2FnZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gaXNzdWUgd2l0aCB0aGUgZm9ybWF0LlxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKChlcnJvci5tZXNzYWdlID09PSBNRURJQV9FUlJPUikgfHwgKGVycm9yLm1lc3NhZ2UgPT09IFlPVVRVQkVfRVJST1IpKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IEZPUk1BVF9NRVNTQUdFO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UgPT09IFBMQVlFUl9FUlJPUikge1xuICAgICAgICAgIHVybCA9IF9nZXRDdXJyZW50RmlsZSgpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIFlvdXR1YmUgdmlkZW8uXG4gICAgICAgICAgaWYgKHVybCAmJiB1cmwuaW5kZXhPZihcInd3dy55b3V0dWJlLmNvbVwiKSA+IC0xKSB7XG4gICAgICAgICAgICBtZXNzYWdlID0gRk9STUFUX01FU1NBR0U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFyYW1zLmV2ZW50ID0gXCJwbGF5ZXIgZXJyb3JcIjtcbiAgICBwYXJhbXMuZXZlbnRfZGV0YWlscyA9IGRldGFpbHM7XG5cbiAgICBsb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIHNob3dFcnJvcihtZXNzYWdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcIm9uRmlsZUluaXRcIjogb25GaWxlSW5pdCxcbiAgICBcIm9uRmlsZVJlZnJlc2hcIjogb25GaWxlUmVmcmVzaCxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwic2hvd0Vycm9yXCI6IHNob3dFcnJvcixcbiAgICBcInBsYXllckVuZGVkXCI6IHBsYXllckVuZGVkLFxuICAgIFwicGxheWVyUmVhZHlcIjogcGxheWVyUmVhZHksXG4gICAgXCJwbGF5ZXJFcnJvclwiOiBwbGF5ZXJFcnJvcixcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xuXG59KShnYWRnZXRzKTtcblxuLyogZ2xvYmFsIGNvbmZpZyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaW5pdGlhbExvYWQgPSB0cnVlO1xuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TdG9yYWdlXCIpO1xuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGlmIChlLmRldGFpbCAmJiBlLmRldGFpbC51cmwpIHtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQoZS5kZXRhaWwudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBjaGVjayBmb3IgXCJjaGFuZ2VkXCIgcHJvcGVydHkgYW5kIGVuc3VyZSBpdCBpcyB0cnVlXG4gICAgICAgICAgaWYgKGUuZGV0YWlsLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSAmJiBlLmRldGFpbC5jaGFuZ2VkKSB7XG4gICAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2goZS5kZXRhaWwudXJsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1maWxlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZpbGUgbm90IGZvdW5kXCIsIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCB2aWRlbyBkb2VzIG5vdCBleGlzdCBvciBoYXMgYmVlbiBtb3ZlZCB0byBUcmFzaC5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZmlsZS10aHJvdHRsZWRcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZmlsZSB0aHJvdHRsZWRcIiwgXCJ1cmxcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZXJyb3JcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvIGZyb20gU3RvcmFnZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcImNhY2hlIGVycm9yXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoZSB2aWRlbyBmcm9tIENhY2hlLlwiKTtcbiAgICB9KTtcblxuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLnN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgdmFyIF9maWxlcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9nZXRVcmxzKCkge1xuICAgIHJldHVybiBfLnBsdWNrKF9maWxlcywgXCJ1cmxcIik7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpIHtcbiAgICByZXR1cm4gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGYubmFtZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWxldGVGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBfZmlsZXMuc3BsaWNlKF9maWxlcy5pbmRleE9mKGV4aXN0aW5nKSwgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoYW5nZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGV4aXN0aW5nLnVybCA9IGZpbGUudXJsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9hZGRGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKCFleGlzdGluZykge1xuICAgICAgLy8gZXh0cmFjdCB0aGUgYWN0dWFsIGZpbGUgbmFtZSBhbmQgc3RvcmUgaW4gbmV3IHByb3BlcnR5IG9uIGZpbGUgb2JqZWN0XG4gICAgICBmaWxlLmZpbGVOYW1lID0gZmlsZS5uYW1lLnNsaWNlKGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBpbnNlcnQgZmlsZSB0byBfZmlsZXMgbGlzdCBhdCBzcGVjaWZpYyBpbmRleCBiYXNlZCBvbiBhbHBoYWJldGljYWwgb3JkZXIgb2YgZmlsZSBuYW1lXG4gICAgICBfZmlsZXMuc3BsaWNlKF8uc29ydGVkSW5kZXgoX2ZpbGVzLCBmaWxlLCBcImZpbGVOYW1lXCIpLCAwLCBmaWxlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZSA9IGUuZGV0YWlsO1xuXG4gICAgICAvLyBBZGRlZFxuICAgICAgaWYoZmlsZS5hZGRlZCkge1xuICAgICAgICBfYWRkRmlsZShmaWxlKTtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KF9nZXRVcmxzKCkpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoYW5nZWRcbiAgICAgIGlmKGZpbGUuY2hhbmdlZCkge1xuICAgICAgICBfY2hhbmdlRmlsZShmaWxlKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlZFxuICAgICAgaWYoZmlsZS5kZWxldGVkKSB7XG4gICAgICAgIF9kZWxldGVGaWxlKGZpbGUpO1xuICAgICAgfVxuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2goX2dldFVybHMoKSk7XG5cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lbXB0eS1mb2xkZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGVtcHR5XCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHZpZGVvcy5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZm9sZGVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZG9lc24ndCBleGlzdFwiLCBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGV4aXN0LlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGVycm9yXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoZSB2aWRlbyBmcm9tIFN0b3JhZ2UuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJjYWNoZSBlcnJvclwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8gZnJvbSBDYWNoZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVUeXBlXCIsIFwidmlkZW9cIik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcmlzZUNhY2hlID0gUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlO1xuXG4gIHZhciBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAgLy8gMTUgbWludXRlc1xuICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IG51bGw7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlO1xuXG4gIHZhciBfdXJsID0gXCJcIjtcblxuICBmdW5jdGlvbiBfZ2V0RmlsZShvbWl0Q2FjaGVCdXN0ZXIpIHtcbiAgICByaXNlQ2FjaGUuZ2V0RmlsZShfdXJsLCBmdW5jdGlvbiAocmVzcG9uc2UsIGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG5cbiAgICAgICAgaWYgKF9pc0xvYWRpbmcpIHtcbiAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQocmVzcG9uc2UudXJsKTtcblxuICAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIGludGVydmFsXG4gICAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2gocmVzcG9uc2UudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlcnJvciBvY2N1cnJlZFxuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwibm9uLXN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBcInVybFwiOiByZXNwb25zZS51cmxcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgICAgfVxuICAgIH0sIG9taXRDYWNoZUJ1c3Rlcik7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRSZWZyZXNoSW50ZXJ2YWwoKSB7XG4gICAgaWYgKF9yZWZyZXNoSW50ZXJ2YWxJZCA9PT0gbnVsbCkge1xuICAgICAgX3JlZnJlc2hJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBfZ2V0RmlsZShmYWxzZSk7XG4gICAgICB9LCBfcmVmcmVzaER1cmF0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgLy8gSGFuZGxlIHByZS1tZXJnZSB1c2Ugb2YgXCJ1cmxcIiBzZXR0aW5nIHByb3BlcnR5XG4gICAgX3VybCA9IChkYXRhLnVybCAmJiBkYXRhLnVybCAhPT0gXCJcIikgPyBkYXRhLnVybCA6IGRhdGEuc2VsZWN0b3IudXJsO1xuXG4gICAgX2dldEZpbGUodHJ1ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5WaWRlbyA9IFJpc2VWaXNpb24uQ29tbW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5WaWRlby5GcmFtZUNvbnRyb2xsZXIgPSBmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBQUkVGSVggPSBcImlmX1wiO1xuXG4gIGZ1bmN0aW9uIGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBSRUZJWCArIGluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZyYW1lT2JqZWN0KGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgaWZyYW1lO1xuXG4gICAgaWZyYW1lID0gZnJhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcblxuICAgIGlmIChpZnJhbWUpIHtcbiAgICAgIHJldHVybiAoaWZyYW1lLmNvbnRlbnRXaW5kb3cpID8gaWZyYW1lLmNvbnRlbnRXaW5kb3cgOlxuICAgICAgICAoaWZyYW1lLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudCkgPyBpZnJhbWUuY29udGVudERvY3VtZW50LmRvY3VtZW50IDogaWZyYW1lLmNvbnRlbnREb2N1bWVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhcihpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGZyYW1lT2JqID0gZ2V0RnJhbWVPYmplY3QoaW5kZXgpLFxuICAgICAgaWZyYW1lO1xuXG4gICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuICAgICAgZnJhbWVPYmoucmVtb3ZlKCk7XG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiYWJvdXQ6YmxhbmtcIik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYWRkKGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgaWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcblxuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJhbGxvd1RyYW5zcGFyZW5jeVwiLCB0cnVlKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwiZnJhbWVib3JkZXJcIiwgXCIwXCIpO1xuICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJzY3JvbGxpbmdcIiwgXCJub1wiKTtcblxuICAgIGZyYW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGlmcmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVGcmFtZVBsYXllcihpbmRleCwgcGFyYW1zLCBmaWxlcywgc2tpbiwgc3JjKSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpLFxuICAgICAgZnJhbWVPYmogPSBnZXRGcmFtZU9iamVjdChpbmRleCksXG4gICAgICBpZnJhbWU7XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG5cbiAgICAgIGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmcmFtZS5vbmxvYWQgPSBudWxsO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemUgYW5kIGxvYWQgdGhlIHBsYXllciBpbnNpZGUgdGhlIGlmcmFtZVxuICAgICAgICBmcmFtZU9iai5pbml0KHBhcmFtcywgZmlsZXMsIHNraW4pO1xuICAgICAgICBmcmFtZU9iai5sb2FkKCk7XG4gICAgICB9O1xuXG4gICAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNyYyk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBoaWRlKGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpO1xuXG4gICAgZnJhbWVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUoaW5kZXgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoUFJFRklYICsgaW5kZXgpO1xuXG4gICAgX2NsZWFyKGluZGV4KTtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gcmVtb3ZlIHRoZSBpZnJhbWUgYnkgY2xlYXJpbmcgYWxsIGVsZW1lbnRzIGluc2lkZSBkaXYgY29udGFpbmVyXG4gICAgICB3aGlsZSAoZnJhbWVDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBmcmFtZUNvbnRhaW5lci5yZW1vdmVDaGlsZChmcmFtZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfSwgMjAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3coaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCk7XG5cbiAgICBmcmFtZUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGFkZDogYWRkLFxuICAgIGNyZWF0ZUZyYW1lUGxheWVyOiBjcmVhdGVGcmFtZVBsYXllcixcbiAgICBnZXRGcmFtZUNvbnRhaW5lcjogZ2V0RnJhbWVDb250YWluZXIsXG4gICAgZ2V0RnJhbWVPYmplY3Q6IGdldEZyYW1lT2JqZWN0LFxuICAgIGhpZGU6IGhpZGUsXG4gICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgc2hvdzogc2hvd1xuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmIChfYWN0aXZlKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIC8vIHNob3cgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcblxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICAvLyBjcmVhdGUgbWVzc2FnZSBlbGVtZW50XG4gICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgICBwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWVzc2FnZVwiKTtcblxuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocCk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgICAgX2FjdGl2ZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG1lc3NhZ2UgYWxyZWFkeSBiZWluZyBzaG93biwgdXBkYXRlIG1lc3NhZ2UgdGV4dFxuICAgICAgcCA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5tZXNzYWdlXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBcImhpZGVcIjogaGlkZSxcbiAgICBcInNob3dcIjogc2hvd1xuICB9O1xufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIFJpc2VWaXNpb24gKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29uZmlndXJlKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICB2YXIgYWRkaXRpb25hbFBhcmFtcywgbW9kZTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIG5hbWVzWzBdID09PSBcImFkZGl0aW9uYWxQYXJhbXNcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xuXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgIC8vIHN0b3JhZ2UgZmlsZSBvciBmb2xkZXIgc2VsZWN0ZWRcbiAgICAgICAgICBpZiAoIWFkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZS5maWxlTmFtZSkge1xuICAgICAgICAgICAgLy8gZm9sZGVyIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZm9sZGVyXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtb2RlID0gXCJmaWxlXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vbi1zdG9yYWdlIGZpbGUgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5zZXRBZGRpdGlvbmFsUGFyYW1zKGFkZGl0aW9uYWxQYXJhbXMsIG1vZGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8uc3RvcCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcG9seW1lclJlYWR5KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuXG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGNvbmZpZ3VyZSk7XG4gICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImFkZGl0aW9uYWxQYXJhbXNcIl0pO1xuICAgIH1cbiAgfVxuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiV2ViQ29tcG9uZW50c1JlYWR5XCIsIHBvbHltZXJSZWFkeSk7XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTInXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
