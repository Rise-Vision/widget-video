var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(e){"use strict";function n(e,n){Array.isArray(e)&&e.length>0&&Array.isArray(n)&&n.length>0&&("companyId"===e[0]&&(l=n[0]),"displayId"===e[1]&&(a=n[1]?n[1]:"preview"),d(l,a))}function i(i){i&&"function"==typeof i&&(d=i,l&&a?d(l,a):s&&""!==s&&(e.rpc.register("rsparam_set_"+s,n),e.rpc.call("","rsparam_get",null,s,["companyId","displayId"])))}function t(e){var n,i=/[?#&]/;return e&&"string"==typeof e?(n=e.substr(e.lastIndexOf(".")+1),i.test(n)&&(n=n.substr(0,-1!==n.indexOf("?")?n.indexOf("?"):n.length),n=n.substr(0,-1!==n.indexOf("#")?n.indexOf("#"):n.length),n=n.substr(0,-1!==n.indexOf("&")?n.indexOf("&"):n.length)),n.toLowerCase()):null}function o(e){var n=JSON.parse(JSON.stringify(u));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(e)),n.rows[0].json.ts=(new Date).toISOString(),n}function r(e){var n=new Date,i=n.getUTCFullYear(),t=n.getUTCMonth()+1,o=n.getUTCDate();return 10>t&&(t="0"+t),10>o&&(o="0"+o),e+i+t+o}var s=(new e.Prefs).getString("id"),a="",l="",d=null,u={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:""}]};return{getIds:i,getInsertData:o,getFileFormat:t,getTable:r}}(gadgets),RiseVision.Common.Logger=function(e){"use strict";function n(e){var n=new XMLHttpRequest;return new Date-d<358e4?e({}):(n.open("POST",o,!0),n.onloadend=function(){var i=JSON.parse(n.response);e({token:i.access_token,refreshedAt:new Date})},n.send(),void 0)}function i(e){return s&&l===e}function t(t,o){function c(n){var i,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",e.getTable(t)),d=n.refreshedAt||d,u=n.token||u,i=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(i))}if(t&&o&&o.event&&!i(o.event))return s=!0,l=o.event,setTimeout(function(){s=!1},a),n(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:t}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};if(RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var n=new XMLHttpRequest;e&&"function"==typeof e&&(n.open("GET",i+"ping?callback=_",!0),n.onreadystatechange=function(){try{4===n.readyState&&(t=!0,200===n.status?(o=!0,e(!0,n.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(i){console.debug("Caught exception: ",i.description)}},n.send())}function n(e,n,r){function s(t){var o,s,a,l,d=new XMLHttpRequest;t?(o=r?i+"?url="+encodeURIComponent(e):i+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e),l={xhr:d,url:o},d.open("GET",o,!0),d.addEventListener("loadend",function(){var e=d.status||0;e>=200&&300>e?n(l):n(l,new Error("The request failed with status code: "+e))}),d.send()):(r?o=e:(s=e.split("?"),a=1===s.length?"?":"&",o=e+a+"cb="+(new Date).getTime()),l={xhr:null,url:o},n(l))}if(e&&n&&"function"==typeof n)return t?s(o):this.ping(s)}var i="http://localhost:9494/",t=!1,o=!1;return{getFile:n,ping:e}}(),"undefined"==typeof config){var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function n(){e.rpc.call("","rsevent_done",null,E.getString("id")),null!==A&&d(A,!0),d({event:"done"},!1)}function i(){e.rpc.call("","rsevent_ready",null,E.getString("id"),!0,!0,!0,!0,!0)}function t(){clearTimeout(F),F=null}function o(){t(),F=setTimeout(function(){n()},5e3)}function r(){var e=I.getFrameObject(S);return e?e.getPlaybackData():null}function s(){var e=null;if(L&&L.length>0){if("file"===y)return L[0];if("folder"===y&&(e=r()))return L[e.index]}return null}function a(e,n){var i={},t=RiseVision.Common.LoggerUtils,o=null;e.event&&(i.event=e.event),e.event_details&&(i.event_details=e.event_details),o=e.url?e.url:s(),i.file_url=o,i.file_format=t.getFileFormat(o),t.getIds(function(e,t){i.company_id=e,i.display_id=t,n(i)})}function l(e){N=!0,b.show(e),I.remove(S,function(){T||o()})}function d(e,n){n&&(A=e),a(e,function(e){x.log("video_events",e)})}function u(e){"file"===y?L[0]=e:"folder"===y&&(L=e),b.hide(),T||g()}function c(e){"file"===y?L[0]=e:"folder"===y&&(L=e),O=!1,A=null}function f(){var e=I.getFrameObject(S);return T=!0,N?(t(),void 0):(e&&e.pause(),void 0)}function g(){var e=I.getFrameObject(S);return T=!1,d({event:"play"},!1),N?(o(),void 0):(O||(e?e.play():L&&L.length>0&&("file"===y?(I.add(0),I.createFramePlayer(0,R,L[0],config.SKIN,"player-file.html")):"folder"===y&&(I.add(0),I.createFramePlayer(0,R,L,config.SKIN,"player-folder.html")))),void 0)}function m(){I.remove(S,function(){n()})}function v(){var e;b.hide(),T||(e=I.getFrameObject(S),e&&e.play())}function p(n,t){var o;R=_.clone(n),y=t,E=new e.Prefs,document.getElementById("videoContainer").style.height=E.getInt("rsH")+"px",R.width=E.getInt("rsW"),R.height=E.getInt("rsH"),b=new RiseVision.Common.Message(document.getElementById("videoContainer"),document.getElementById("messageContainer")),b.show("Please wait while your video is downloaded."),I=new RiseVision.Common.Video.FrameController,"file"===y?(o=0!==Object.keys(R.storage).length,o?(w=new RiseVision.Video.StorageFile(R),w.init()):(C=new RiseVision.Video.NonStorage(R),C.init())):"folder"===y&&(w=new RiseVision.Video.StorageFolder(R),w.init()),i()}function V(e){var n=null,i={},t="",o="Sorry, there was a problem playing the video.",r="Error loading media: File could not be played",a="Error loading YouTube: Video could not be played",u="Error loading player: No playable sources found",c="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.";O=!0,e&&(e.type&&e.message?n=e.type+" - "+e.message:e.type?n=e.type:e.message&&(n=e.message),e.message&&(e.message===r||e.message===a?o=c:e.message===u&&(t=s(),t&&t.indexOf("www.youtube.com")>-1&&(o=c)))),i.event="player error",i.event_details=n,d(i,!0),l(o)}function h(){f()}var R,y,E=null,w=null,C=null,b=null,I=null,O=!1,T=!0,S=0,L=[],A=null,F=null,N=!1,x=RiseVision.Common.Logger;return{logEvent:d,onFileInit:u,onFileRefresh:c,pause:f,play:g,setAdditionalParams:p,showError:l,playerEnded:m,playerReady:v,playerError:V,stop:h}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function n(){var n=document.getElementById("videoStorage");n&&(n.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(i?(i=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&e.detail.changed&&RiseVision.Video.onFileRefresh(e.detail.url))}),n.addEventListener("rise-storage-no-file",function(e){var n={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(n,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),n.addEventListener("rise-storage-file-throttled",function(e){var n={event:"storage file throttled",url:e.detail};RiseVision.Video.logEvent(n,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),n.addEventListener("rise-storage-error",function(){var e={event:"storage error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Storage.")}),n.addEventListener("rise-cache-error",function(){var e={event:"cache error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Cache.")}),n.setAttribute("folder",e.storage.folder),n.setAttribute("fileName",e.storage.fileName),n.setAttribute("companyId",e.storage.companyId),n.setAttribute("env",config.STORAGE_ENV),n.go())}var i=!0;return{init:n}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function n(){return _.pluck(l,"url")}function i(e){return _.find(l,function(n){return e.name===n.name})}function t(e){var n=i(e);n&&l.splice(l.indexOf(n),1)}function o(e){var n=i(e);n&&(n.url=e.url)}function r(e){var n=i(e);n||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function s(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){var i=e.detail;return i.added&&(r(i),a)?(a=!1,RiseVision.Video.onFileInit(n()),void 0):(i.changed&&o(i),i.deleted&&t(i),RiseVision.Video.onFileRefresh(n()),void 0)}),i.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),i.addEventListener("rise-storage-no-folder",function(e){var n={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(n,!0),RiseVision.Video.showError("The selected folder does not exist.")}),i.addEventListener("rise-storage-error",function(){var e={event:"storage error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Storage.")}),i.addEventListener("rise-cache-error",function(){var e={event:"cache error"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Cache.")}),i.setAttribute("fileType","video"),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("folder",e.storage.folder),i.setAttribute("env",config.STORAGE_ENV),i.go())}var a=!0,l=[];return{init:s}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function n(n){o.getFile(e.url,function(e,n){n?(RiseVision.Video.logEvent({event:"non-storage error",event_details:n.message,url:e.url},!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")):a?(a=!1,RiseVision.Video.onFileInit(e.url),i()):RiseVision.Video.onFileRefresh(e.url)},n)}function i(){null===s&&(s=setInterval(function(){n(!1)},r))}function t(){n(!0)}var o=RiseVision.Common.RiseCache,r=9e5,s=null,a=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function n(n){var i,t=e(n);return i=t.querySelector("iframe"),i?i.contentWindow?i.contentWindow:i.contentDocument.document?i.contentDocument.document:i.contentDocument:null}function i(i){var t,o=e(i),r=n(i);r&&(t=o.querySelector("iframe"),r.remove(),t.setAttribute("src","about:blank"))}function t(n){var i=e(n),t=document.createElement("iframe");t.setAttribute("allowTransparency",!0),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),i.appendChild(t)}function o(i,t,o,r,s){var a,l=e(i),d=n(i);d&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,d.init(t,o,r),d.load()},a.setAttribute("src",s))}function r(n){var i=e(n);i.style.visibility="hidden"}function s(e,n){var t=document.getElementById(l+e);i(e),setTimeout(function(){for(;t.firstChild;)t.removeChild(t.firstChild);n&&"function"==typeof n&&n()},200)}function a(n){var i=e(n);i.style.visibility="visible"}var l="if_";return{add:t,createFramePlayer:o,getFrameContainer:e,getFrameObject:n,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,n){"use strict";function i(){try{n.style.height=e.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function t(){if(r){for(;n.firstChild;)n.removeChild(n.firstChild);n.style.display="none",e.style.visibility="visible",r=!1}}function o(i){var t,o=document.createDocumentFragment();r?(t=n.querySelector(".message"),t.innerHTML=i):(e.style.visibility="hidden",n.style.display="block",t=document.createElement("p"),t.innerHTML=i,t.setAttribute("class","message"),o.appendChild(t),n.appendChild(o),r=!0)}var r=!1;return i(),{hide:t,show:o}},function(e,n){"use strict";function i(e,n){var i,t;Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(n)&&n.length>0&&(i=JSON.parse(n[0]),t=0!==Object.keys(i.storage).length?i.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(i,t))}function t(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function r(){RiseVision.Video.stop()}function s(){e.removeEventListener("WebComponentsReady",s),l&&""!==l&&(n.rpc.register("rscmd_play_"+l,t),n.rpc.register("rscmd_pause_"+l,o),n.rpc.register("rscmd_stop_"+l,r),n.rpc.register("rsparam_set_"+l,i),n.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var a=new n.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",s)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdhZGdldHMiLCJzZXRJZHMiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhbnlJZCIsImRpc3BsYXlJZCIsImNhbGxiYWNrIiwiZ2V0SWRzIiwiY2IiLCJpZCIsInJwYyIsInJlZ2lzdGVyIiwiY2FsbCIsImdldEZpbGVGb3JtYXQiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInRlc3QiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJnZXRJbnNlcnREYXRhIiwicGFyYW1zIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsInJvd3MiLCJpbnNlcnRJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwianNvbiIsInRzIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZ2V0VGFibGUiLCJuYW1lIiwiZGF0ZSIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJkYXkiLCJnZXRVVENEYXRlIiwiUHJlZnMiLCJnZXRTdHJpbmciLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsIkxvZ2dlciIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJldmVudCIsInRocm90dGxlIiwibGFzdEV2ZW50IiwibG9nIiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInJlcGxhY2UiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiciIsIkJBU0VfQ0FDSEVfVVJMIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIl9waW5nUmVjZWl2ZWQiLCJzdGF0dXMiLCJfaXNDYWNoZVJ1bm5pbmciLCJyZXNwb25zZVRleHQiLCJjb25zb2xlIiwiZGVidWciLCJlIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsImlzQ2FjaGVSdW5uaW5nIiwic2VwYXJhdG9yIiwicmVxdWVzdCIsImVuY29kZVVSSUNvbXBvbmVudCIsImdldFRpbWUiLCJhZGRFdmVudExpc3RlbmVyIiwiRXJyb3IiLCJzcGxpdCIsInRoaXMiLCJjb25maWciLCJTS0lOIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiVmlkZW8iLCJfZG9uZSIsIl9wcmVmcyIsIl9lcnJvciIsImxvZ0V2ZW50IiwiX3JlYWR5IiwiX2NsZWFyRXJyb3JUaW1lciIsImNsZWFyVGltZW91dCIsIl9lcnJvclRpbWVyIiwiX3N0YXJ0RXJyb3JUaW1lciIsIl9nZXRDdXJyZW50RmlsZURhdGEiLCJmcmFtZU9iaiIsIl9mcmFtZUNvbnRyb2xsZXIiLCJnZXRGcmFtZU9iamVjdCIsIl9jdXJyZW50RnJhbWUiLCJnZXRQbGF5YmFja0RhdGEiLCJfZ2V0Q3VycmVudEZpbGUiLCJmaWxlRGF0YSIsIl9jdXJyZW50RmlsZXMiLCJfbW9kZSIsImluZGV4IiwiX2dldExvZ2dlclBhcmFtcyIsImV2ZW50X2RldGFpbHMiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiY29tcGFueV9pZCIsImRpc3BsYXlfaWQiLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiX2Vycm9yRmxhZyIsIl9tZXNzYWdlIiwic2hvdyIsInJlbW92ZSIsIl92aWV3ZXJQYXVzZWQiLCJpc0Vycm9yIiwiX2xvZ2dlciIsIm9uRmlsZUluaXQiLCJ1cmxzIiwiaGlkZSIsInBsYXkiLCJvbkZpbGVSZWZyZXNoIiwiX3BsYXliYWNrRXJyb3IiLCJwYXVzZSIsImFkZCIsImNyZWF0ZUZyYW1lUGxheWVyIiwiX2FkZGl0aW9uYWxQYXJhbXMiLCJwbGF5ZXJFbmRlZCIsInBsYXllclJlYWR5Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsIm1vZGUiLCJpc1N0b3JhZ2VGaWxlIiwiXyIsImNsb25lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiaGVpZ2h0IiwiZ2V0SW50Iiwid2lkdGgiLCJNZXNzYWdlIiwiRnJhbWVDb250cm9sbGVyIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JhZ2UiLCJfc3RvcmFnZSIsIlN0b3JhZ2VGaWxlIiwiaW5pdCIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJwbGF5ZXJFcnJvciIsImVycm9yIiwiZGV0YWlscyIsIk1FRElBX0VSUk9SIiwiWU9VVFVCRV9FUlJPUiIsIlBMQVlFUl9FUlJPUiIsIkZPUk1BVF9NRVNTQUdFIiwidHlwZSIsInN0b3AiLCJkZXRhaWwiLCJfaW5pdGlhbExvYWQiLCJoYXNPd25Qcm9wZXJ0eSIsImNoYW5nZWQiLCJzZXRBdHRyaWJ1dGUiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImdvIiwiX2dldFVybHMiLCJwbHVjayIsIl9maWxlcyIsIl9nZXRFeGlzdGluZ0ZpbGUiLCJmaWxlIiwiZmluZCIsImYiLCJfZGVsZXRlRmlsZSIsImV4aXN0aW5nIiwic3BsaWNlIiwiX2NoYW5nZUZpbGUiLCJfYWRkRmlsZSIsInNsaWNlIiwic29ydGVkSW5kZXgiLCJhZGRlZCIsImRlbGV0ZWQiLCJfZ2V0RmlsZSIsIm9taXRDYWNoZUJ1c3RlciIsInJpc2VDYWNoZSIsIl9pc0xvYWRpbmciLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJnZXRGcmFtZUNvbnRhaW5lciIsIlBSRUZJWCIsImlmcmFtZSIsImZyYW1lQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnRXaW5kb3ciLCJjb250ZW50RG9jdW1lbnQiLCJfY2xlYXIiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJmaWxlcyIsInNraW4iLCJzcmMiLCJvbmxvYWQiLCJsb2FkIiwidmlzaWJpbGl0eSIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsIm1haW5Db250YWluZXIiLCJtZXNzYWdlQ29udGFpbmVyIiwiX2luaXQiLCJ3YXJuIiwiX2FjdGl2ZSIsImRpc3BsYXkiLCJwIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaW5uZXJIVE1MIiwid2luZG93IiwiY29uZmlndXJlIiwiYWRkaXRpb25hbFBhcmFtcyIsInBvbHltZXJSZWFkeSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwcmVmcyIsIm9uY29udGV4dG1lbnUiLCJfZ2FxIiwicHVzaCIsImdhIiwiYXN5bmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsdUJBQ0ZDLGNBQWUsaUJBQ2ZDLGlCQUFrQiw0RUFDbEJDLHFCQUFzQiwyQkFDdEJDLHFCQUFzQixxRUFDdEJDLFlBQWEsT0FDYkMsVUFBVyw2Q0FJVEMsV0FBYUEsY0FDakJBLFlBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPQyxZQUFjLFNBQVVDLEdBQ3hDLFlBc0JBLFNBQVND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V0FBV3dILE1BQU11QyxPQUduQixRQUFTRyxLQUNQbEssV0FBV3dILE1BQU0wQyxRQUduQixRQUFTb0MsS0FDUHRNLFdBQVd3SCxNQUFNOEUsT0FHbkIsUUFBU2dFLEtBQ1BILEVBQU9JLG9CQUFvQixxQkFBc0JELEdBRTdDdlAsR0FBYSxLQUFQQSxJQUNSWixFQUFRYSxJQUFJQyxTQUFTLGNBQWdCRixFQUFJZ0osR0FDekM1SixFQUFRYSxJQUFJQyxTQUFTLGVBQWlCRixFQUFJbUosR0FDMUMvSixFQUFRYSxJQUFJQyxTQUFTLGNBQWdCRixFQUFJdUwsR0FFekNuTSxFQUFRYSxJQUFJQyxTQUFTLGVBQWlCRixFQUFJcVAsR0FDMUNqUSxFQUFRYSxJQUFJRSxLQUFLLEdBQUksY0FBZSxLQUFNSCxHQUFLLHNCQXZEbkQsR0FBSXlQLEdBQVEsR0FBSXJRLEdBQVFtRCxNQUN0QnZDLEVBQUt5UCxFQUFNak4sVUFBVSxLQUd2QjRNLEdBQU9NLGNBQWdCLFdBQ3JCLE9BQU8sR0FzRFROLEVBQU9wSixpQkFBaUIscUJBQXNCdUosSUFFN0NILE9BQVFoUSxRQUtYLElBQUl1USxNQUFPQSxRQUVYQSxNQUFLQyxNQUFNLGNBQWUsa0JBQzFCRCxLQUFLQyxNQUFNLG1CQUVYLFdBQ0UsR0FBSUMsR0FBSy9GLFNBQVNrRSxjQUFjLFNBQVc2QixHQUFHdkUsS0FBTyxrQkFBbUJ1RSxFQUFHQyxPQUFRLEVBQ25GRCxFQUFHekIsS0FBTyxVQUFZdEUsU0FBU2lHLFNBQVNDLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUluRyxTQUFTb0cscUJBQXFCLFVBQVUsRUFBSUQsR0FBRUUsV0FBV0MsYUFBYVAsRUFBSUkiLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBXSURHRVRfQ09NTU9OX0NPTkZJRyA9IHtcbiAgQVVUSF9QQVRIX1VSTDogXCJ2MS93aWRnZXQvYXV0aFwiLFxuICBMT0dHRVJfQ0xJRU5UX0lEOiBcIjEwODg1MjcxNDcxMDktNnExbzJ2dGlobjM0MjkycGp0NGNraG1oY2swcmswbzcuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIixcbiAgTE9HR0VSX0NMSUVOVF9TRUNSRVQ6IFwibmxaeXJjUExnNm9Fd085ZjlXZm4yOVdoXCIsXG4gIExPR0dFUl9SRUZSRVNIX1RPS0VOOiBcIjEveHp0NGt3ekUxSDdXOVZuS0I4Y0FhQ3g2emI0RXM0bktFb3FhWUhkVEQxNUlnT3JKRHRkdW42eks2WGlBVENLVFwiLFxuICBTVE9SQUdFX0VOVjogXCJwcm9kXCIsXG4gIFNUT1JFX1VSTDogXCJodHRwczovL3N0b3JlLWRvdC1ydmFzZXJ2ZXIyLmFwcHNwb3QuY29tL1wiXG59O1xuLyogZ2xvYmFsIGdhZGdldHMgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMgPSAoZnVuY3Rpb24oZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAgdmFyIGlkID0gbmV3IGdhZGdldHMuUHJlZnMoKS5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICBkaXNwbGF5SWQgPSBcIlwiLFxuICAgIGNvbXBhbnlJZCA9IFwiXCIsXG4gICAgY2FsbGJhY2sgPSBudWxsO1xuXG4gIHZhciBCQVNFX0lOU0VSVF9TQ0hFTUEgPVxuICB7XG4gICAgXCJraW5kXCI6IFwiYmlncXVlcnkjdGFibGVEYXRhSW5zZXJ0QWxsUmVxdWVzdFwiLFxuICAgIFwic2tpcEludmFsaWRSb3dzXCI6IGZhbHNlLFxuICAgIFwiaWdub3JlVW5rbm93blZhbHVlc1wiOiBmYWxzZSxcbiAgICBcInJvd3NcIjogW3tcbiAgICAgIFwiaW5zZXJ0SWRcIjogXCJcIlxuICAgIH1dXG4gIH07XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMobmFtZXMsIHZhbHVlcykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChuYW1lc1swXSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgICAgIGNvbXBhbnlJZCA9IHZhbHVlc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuYW1lc1sxXSA9PT0gXCJkaXNwbGF5SWRcIikge1xuICAgICAgICAgIGlmICh2YWx1ZXNbMV0pIHtcbiAgICAgICAgICAgIGRpc3BsYXlJZCA9IHZhbHVlc1sxXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkaXNwbGF5SWQgPSBcInByZXZpZXdcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhjb21wYW55SWQsIGRpc3BsYXlJZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRJZHMoY2IpIHtcbiAgICBpZiAoIWNiIHx8IHR5cGVvZiBjYiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2FsbGJhY2sgPSBjYjtcbiAgICB9XG5cbiAgICBpZiAoY29tcGFueUlkICYmIGRpc3BsYXlJZCkge1xuICAgICAgY2FsbGJhY2soY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIHNldElkcyk7XG4gICAgICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiY29tcGFueUlkXCIsIFwiZGlzcGxheUlkXCJdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGaWxlRm9ybWF0KHVybCkge1xuICAgIHZhciBoYXNQYXJhbXMgPSAvWz8jJl0vLFxuICAgICAgc3RyO1xuXG4gICAgaWYgKCF1cmwgfHwgdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3RyID0gdXJsLnN1YnN0cih1cmwubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG5cbiAgICAvLyBkb24ndCBpbmNsdWRlIGFueSBwYXJhbXMgYWZ0ZXIgdGhlIGZpbGVuYW1lXG4gICAgaWYgKGhhc1BhcmFtcy50ZXN0KHN0cikpIHtcbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCAsKHN0ci5pbmRleE9mKFwiP1wiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCI/XCIpIDogc3RyLmxlbmd0aCk7XG5cbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCwgKHN0ci5pbmRleE9mKFwiI1wiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCIjXCIpIDogc3RyLmxlbmd0aCk7XG5cbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCwgKHN0ci5pbmRleE9mKFwiJlwiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCImXCIpIDogc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW5zZXJ0RGF0YShwYXJhbXMpIHtcbiAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoQkFTRV9JTlNFUlRfU0NIRU1BKSk7XG5cbiAgICBkYXRhLnJvd3NbMF0uaW5zZXJ0SWQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMikudG9VcHBlckNhc2UoKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24udHMgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG5cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRhYmxlKG5hbWUpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgICAgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XG5cbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIH1cblxuICAgIGlmIChkYXkgPCAxMCkge1xuICAgICAgZGF5ID0gXCIwXCIgKyBkYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWUgKyB5ZWFyICsgbW9udGggKyBkYXk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SWRzXCI6IGdldElkcyxcbiAgICBcImdldEluc2VydERhdGFcIjogZ2V0SW5zZXJ0RGF0YSxcbiAgICBcImdldEZpbGVGb3JtYXRcIjogZ2V0RmlsZUZvcm1hdCxcbiAgICBcImdldFRhYmxlXCI6IGdldFRhYmxlXG4gIH07XG59KShnYWRnZXRzKTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyID0gKGZ1bmN0aW9uKHV0aWxzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBSRUZSRVNIX1VSTCA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YzL3Rva2VuP2NsaWVudF9pZD1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9DTElFTlRfSUQgK1xuICAgICAgXCImY2xpZW50X3NlY3JldD1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9DTElFTlRfU0VDUkVUICtcbiAgICAgIFwiJnJlZnJlc2hfdG9rZW49XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfUkVGUkVTSF9UT0tFTiArXG4gICAgICBcIiZncmFudF90eXBlPXJlZnJlc2hfdG9rZW5cIjtcblxuICB2YXIgc2VydmljZVVybCA9IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYmlncXVlcnkvdjIvcHJvamVjdHMvY2xpZW50LXNpZGUtZXZlbnRzL2RhdGFzZXRzL1dpZGdldF9FdmVudHMvdGFibGVzL1RBQkxFX0lEL2luc2VydEFsbFwiLFxuICAgIHRocm90dGxlID0gZmFsc2UsXG4gICAgdGhyb3R0bGVEZWxheSA9IDEwMDAsXG4gICAgbGFzdEV2ZW50ID0gXCJcIixcbiAgICByZWZyZXNoRGF0ZSA9IDAsXG4gICAgdG9rZW4gPSBcIlwiO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIHJlZnJlc2hUb2tlbihjYikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmIChuZXcgRGF0ZSgpIC0gcmVmcmVzaERhdGUgPCAzNTgwMDAwKSB7XG4gICAgICByZXR1cm4gY2Ioe30pO1xuICAgIH1cblxuICAgIHhoci5vcGVuKFwiUE9TVFwiLCBSRUZSRVNIX1VSTCwgdHJ1ZSk7XG4gICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3AgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZSk7XG5cbiAgICAgIGNiKHsgdG9rZW46IHJlc3AuYWNjZXNzX3Rva2VuLCByZWZyZXNoZWRBdDogbmV3IERhdGUoKSB9KTtcbiAgICB9O1xuXG4gICAgeGhyLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVGhyb3R0bGVkKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRocm90dGxlICYmIChsYXN0RXZlbnQgPT09IGV2ZW50KTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gbG9nKHRhYmxlTmFtZSwgcGFyYW1zKSB7XG4gICAgaWYgKCF0YWJsZU5hbWUgfHwgIXBhcmFtcyB8fCAhcGFyYW1zLmV2ZW50IHx8IGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdHRsZSA9IHRydWU7XG4gICAgbGFzdEV2ZW50ID0gcGFyYW1zLmV2ZW50O1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdHRsZSA9IGZhbHNlO1xuICAgIH0sIHRocm90dGxlRGVsYXkpO1xuXG4gICAgZnVuY3Rpb24gaW5zZXJ0V2l0aFRva2VuKHJlZnJlc2hEYXRhKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIGluc2VydERhdGEsIHVybDtcblxuICAgICAgdXJsID0gc2VydmljZVVybC5yZXBsYWNlKFwiVEFCTEVfSURcIiwgdXRpbHMuZ2V0VGFibGUodGFibGVOYW1lKSk7XG4gICAgICByZWZyZXNoRGF0ZSA9IHJlZnJlc2hEYXRhLnJlZnJlc2hlZEF0IHx8IHJlZnJlc2hEYXRlO1xuICAgICAgdG9rZW4gPSByZWZyZXNoRGF0YS50b2tlbiB8fCB0b2tlbjtcbiAgICAgIGluc2VydERhdGEgPSB1dGlscy5nZXRJbnNlcnREYXRhKHBhcmFtcyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgZGF0YS5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgICBpZiAocGFyYW1zLmNiICYmIHR5cGVvZiBwYXJhbXMuY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGFyYW1zLmNiKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGluc2VydERhdGEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVmcmVzaFRva2VuKGluc2VydFdpdGhUb2tlbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibG9nXCI6IGxvZ1xuICB9O1xufSkoUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMpO1xudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlID0gKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIEJBU0VfQ0FDSEVfVVJMID0gXCJodHRwOi8vbG9jYWxob3N0Ojk0OTQvXCI7XG5cbiAgdmFyIF9waW5nUmVjZWl2ZWQgPSBmYWxzZSxcbiAgICBfaXNDYWNoZVJ1bm5pbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBwaW5nKGNhbGxiYWNrKSB7XG4gICAgdmFyIHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwgKyBcInBpbmc/Y2FsbGJhY2s9X1wiLCB0cnVlKTtcbiAgICByLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG4gICAgICAgICAgLy8gc2F2ZSB0aGlzIHJlc3VsdCBmb3IgdXNlIGluIGdldEZpbGUoKVxuICAgICAgICAgIF9waW5nUmVjZWl2ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYoci5zdGF0dXMgPT09IDIwMCl7XG4gICAgICAgICAgICBfaXNDYWNoZVJ1bm5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayh0cnVlLCByLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJSaXNlIENhY2hlIGlzIG5vdCBydW5uaW5nXCIpO1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJDYXVnaHQgZXhjZXB0aW9uOiBcIiwgZS5kZXNjcmlwdGlvbik7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZShmaWxlVXJsLCBjYWxsYmFjaywgbm9jYWNoZWJ1c3Rlcikge1xuICAgIGlmICghZmlsZVVybCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWxlUmVxdWVzdChpc0NhY2hlUnVubmluZykge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICB1cmwsIHN0ciwgc2VwYXJhdG9yLCByZXF1ZXN0O1xuXG4gICAgICBpZiAoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIHVybCB3aXRoIGNhY2hlYnVzdGVyIG9yIG5vdFxuICAgICAgICB1cmwgPSAobm9jYWNoZWJ1c3RlcikgPyBCQVNFX0NBQ0hFX1VSTCArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKSA6XG4gICAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG5cbiAgICAgICAgLy8gY3VzdG9tIHJlcXVlc3Qgb2JqZWN0IHRvIHByb3ZpZGUgaW4gcmVzcG9uc2VcbiAgICAgICAgcmVxdWVzdCA9IHtcbiAgICAgICAgICB4aHI6IHhocixcbiAgICAgICAgICB1cmw6IHVybFxuICAgICAgICB9O1xuXG4gICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XG5cbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgICAgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCwgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgc3RhdHVzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGlmIChub2NhY2hlYnVzdGVyKSB7XG4gICAgICAgICAgdXJsID0gZmlsZVVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSBmaWxlVXJsLnNwbGl0KFwiP1wiKTtcbiAgICAgICAgICBzZXBhcmF0b3IgPSAoc3RyLmxlbmd0aCA9PT0gMSkgPyBcIj9cIiA6IFwiJlwiO1xuXG4gICAgICAgICAgdXJsID0gZmlsZVVybCArIHNlcGFyYXRvciArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGN1c3RvbSByZXF1ZXN0IG9iamVjdCB0byBwcm92aWRlIGluIHJlc3BvbnNlXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiBudWxsLFxuICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH07XG5cbiAgICAgICAgY2FsbGJhY2socmVxdWVzdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZpbGVSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbGVSZXF1ZXN0KF9pc0NhY2hlUnVubmluZyk7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldEZpbGU6IGdldEZpbGUsXG4gICAgcGluZzogcGluZ1xuICB9O1xuXG59KSgpO1xuXG4vKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgU0tJTjogXCJza2luL1JWU2tpbi54bWxcIixcbiAgICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbiAgfTtcblxuICBpZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xuICB9XG59XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvID0gKGZ1bmN0aW9uIChnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWRkaXRpb25hbFBhcmFtcywgX21vZGU7XG5cbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsLFxuICAgIF9ub25TdG9yYWdlID0gbnVsbCxcbiAgICBfbWVzc2FnZSA9IG51bGwsXG4gICAgX2ZyYW1lQ29udHJvbGxlciA9IG51bGw7XG5cbiAgdmFyIF9wbGF5YmFja0Vycm9yID0gZmFsc2UsXG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgdmFyIF9jdXJyZW50RnJhbWUgPSAwO1xuXG4gIHZhciBfY3VycmVudEZpbGVzID0gW107XG5cbiAgdmFyIF9lcnJvciA9IG51bGwsXG4gICAgX2Vycm9yVGltZXIgPSBudWxsLFxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcblxuICB2YXIgX2xvZ2dlciA9IFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlcjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG5cbiAgICAvLyBBbnkgZXJyb3JzIG5lZWQgdG8gYmUgbG9nZ2VkIGJlZm9yZSB0aGUgZG9uZSBldmVudC5cbiAgICBpZiAoX2Vycm9yICE9PSBudWxsKSB7XG4gICAgICBsb2dFdmVudChfZXJyb3IsIHRydWUpO1xuICAgIH1cblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcImRvbmVcIiB9LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfcmVhZHlcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpLFxuICAgICAgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXJFcnJvclRpbWVyKCkge1xuICAgIGNsZWFyVGltZW91dChfZXJyb3JUaW1lcik7XG4gICAgX2Vycm9yVGltZXIgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0RXJyb3JUaW1lcigpIHtcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBfZXJyb3JUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbm90aWZ5IFZpZXdlciB3aWRnZXQgaXMgZG9uZVxuICAgICAgX2RvbmUoKTtcbiAgICB9LCA1MDAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRDdXJyZW50RmlsZURhdGEoKSB7XG4gICAgdmFyIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgcmV0dXJuIGZyYW1lT2JqLmdldFBsYXliYWNrRGF0YSgpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlKCkge1xuICAgIHZhciBmaWxlRGF0YSA9IG51bGw7XG5cbiAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbMF07XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICAvLyByZXRyaWV2ZSB0aGUgY3VycmVudGx5IHBsYXllZCBmaWxlIGluZm8gZnJvbSBwbGF5ZXJcbiAgICAgICAgZmlsZURhdGEgPSBfZ2V0Q3VycmVudEZpbGVEYXRhKCk7XG5cbiAgICAgICAgaWYgKGZpbGVEYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbZmlsZURhdGEuaW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBHZXQgdGhlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLlxuICBmdW5jdGlvbiBfZ2V0TG9nZ2VyUGFyYW1zKHBhcmFtcywgY2IpIHtcbiAgICB2YXIganNvbiA9IHt9LFxuICAgICAgdXRpbHMgPSBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyxcbiAgICAgIHVybCA9IG51bGw7XG5cbiAgICBpZiAocGFyYW1zLmV2ZW50KSB7XG4gICAgICBqc29uLmV2ZW50ID0gcGFyYW1zLmV2ZW50O1xuICAgIH1cblxuICAgIGlmIChwYXJhbXMuZXZlbnRfZGV0YWlscykge1xuICAgICAganNvbi5ldmVudF9kZXRhaWxzID0gcGFyYW1zLmV2ZW50X2RldGFpbHM7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy51cmwpIHtcbiAgICAgIHVybCA9IHBhcmFtcy51cmw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdXJsID0gX2dldEN1cnJlbnRGaWxlKCk7XG4gICAgfVxuXG4gICAganNvbi5maWxlX3VybCA9IHVybDtcbiAgICBqc29uLmZpbGVfZm9ybWF0ID0gdXRpbHMuZ2V0RmlsZUZvcm1hdCh1cmwpO1xuXG4gICAgdXRpbHMuZ2V0SWRzKGZ1bmN0aW9uKGNvbXBhbnlJZCwgZGlzcGxheUlkKSB7XG4gICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgIGNiKGpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSkge1xuICAgIF9lcnJvckZsYWcgPSB0cnVlO1xuXG4gICAgX21lc3NhZ2Uuc2hvdyhtZXNzYWdlKTtcblxuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIGlmIFdpZGdldCBpcyBwbGF5aW5nIHJpZ2h0IG5vdywgcnVuIHRoZSB0aW1lclxuICAgICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcywgaXNFcnJvcikge1xuICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICBfZXJyb3IgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgX2dldExvZ2dlclBhcmFtcyhwYXJhbXMsIGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgIF9sb2dnZXIubG9nKFwidmlkZW9fZXZlbnRzXCIsIGpzb24pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlSW5pdCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXlcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZVJlZnJlc2godXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZyBvZiBvbmUgdXJsXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXkgb2YgdXJsc1xuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG4gICAgfVxuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX3BsYXliYWNrRXJyb3IgPSBmYWxzZTtcbiAgICBfZXJyb3IgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgdmFyIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gICAgaWYgKF9lcnJvckZsYWcpIHtcbiAgICAgIF9jbGVhckVycm9yVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgIGZyYW1lT2JqLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICB2YXIgZnJhbWVPYmogPSBfZnJhbWVDb250cm9sbGVyLmdldEZyYW1lT2JqZWN0KF9jdXJyZW50RnJhbWUpO1xuXG4gICAgX3ZpZXdlclBhdXNlZCA9IGZhbHNlO1xuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwicGxheVwiIH0sIGZhbHNlKTtcblxuICAgIGlmIChfZXJyb3JGbGFnKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFfcGxheWJhY2tFcnJvcikge1xuICAgICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgaWYgKF9jdXJyZW50RmlsZXMgJiYgX2N1cnJlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICAgICAgLy8gYWRkIGZyYW1lIGFuZCBjcmVhdGUgdGhlIHBsYXllclxuICAgICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzWzBdLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZmlsZS5odG1sXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICAgICAgX2ZyYW1lQ29udHJvbGxlci5hZGQoMCk7XG4gICAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmNyZWF0ZUZyYW1lUGxheWVyKDAsIF9hZGRpdGlvbmFsUGFyYW1zLCBfY3VycmVudEZpbGVzLCBjb25maWcuU0tJTiwgXCJwbGF5ZXItZm9sZGVyLmh0bWxcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJFbmRlZCgpIHtcbiAgICBfZnJhbWVDb250cm9sbGVyLnJlbW92ZShfY3VycmVudEZyYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICBfZG9uZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheWVyUmVhZHkoKSB7XG4gICAgdmFyIGZyYW1lT2JqO1xuXG4gICAgLy8gRW5zdXJlcyBtZXNzYWdpbmcgaXMgaGlkZGVuIGZvciBub24tc3RvcmFnZSB2aWRlbyBmaWxlXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgICBmcmFtZU9iai5wbGF5KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2V0QWRkaXRpb25hbFBhcmFtcyhwYXJhbXMsIG1vZGUpIHtcbiAgICB2YXIgaXNTdG9yYWdlRmlsZTtcblxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gXy5jbG9uZShwYXJhbXMpO1xuICAgIF9tb2RlID0gbW9kZTtcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0NvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMud2lkdGggPSBfcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICBfbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIiksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2Ugd2hpbGUgU3RvcmFnZSBpbml0aWFsaXplc1xuICAgIF9tZXNzYWdlLnNob3coXCJQbGVhc2Ugd2FpdCB3aGlsZSB5b3VyIHZpZGVvIGlzIGRvd25sb2FkZWQuXCIpO1xuXG4gICAgX2ZyYW1lQ29udHJvbGxlciA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlby5GcmFtZUNvbnRyb2xsZXIoKTtcblxuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIGlzU3RvcmFnZUZpbGUgPSAoT2JqZWN0LmtleXMoX2FkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZSkubGVuZ3RoICE9PSAwKTtcblxuICAgICAgaWYgKCFpc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAgIF9ub25TdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9ub25TdG9yYWdlLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmaWxlIGluc3RhbmNlXG4gICAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZpbGUoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICBfc3RvcmFnZS5pbml0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZm9sZGVyIGluc3RhbmNlXG4gICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGb2xkZXIoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgIH1cblxuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgLy8gQW4gZXJyb3Igb2NjdXJyZWQgd2l0aCBKVyBQbGF5ZXIuXG4gIGZ1bmN0aW9uIHBsYXllckVycm9yKGVycm9yKSB7XG4gICAgdmFyIGRldGFpbHMgPSBudWxsLFxuICAgICAgcGFyYW1zID0ge30sXG4gICAgICB1cmwgPSBcIlwiLFxuICAgICAgbWVzc2FnZSA9IFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8uXCIsXG4gICAgICBNRURJQV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBtZWRpYTogRmlsZSBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBZT1VUVUJFX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIFlvdVR1YmU6IFZpZGVvIGNvdWxkIG5vdCBiZSBwbGF5ZWRcIixcbiAgICAgIFBMQVlFUl9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBwbGF5ZXI6IE5vIHBsYXlhYmxlIHNvdXJjZXMgZm91bmRcIixcbiAgICAgIEZPUk1BVF9NRVNTQUdFID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhhdCB2aWRlby4gSXQgY291bGQgYmUgdGhhdCB3ZSBkb24ndCBcIiArXG4gICAgICAgIFwic3VwcG9ydCB0aGF0IGZvcm1hdCBvciBpdCBpcyBub3QgZW5jb2RlZCBjb3JyZWN0bHkuXCI7XG5cbiAgICBfcGxheWJhY2tFcnJvciA9IHRydWU7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci50eXBlICYmIGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGUgKyBcIiAtIFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLnR5cGUpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBpc3N1ZSB3aXRoIHRoZSBmb3JtYXQuXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBpZiAoKGVycm9yLm1lc3NhZ2UgPT09IE1FRElBX0VSUk9SKSB8fCAoZXJyb3IubWVzc2FnZSA9PT0gWU9VVFVCRV9FUlJPUikpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRk9STUFUX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXJyb3IubWVzc2FnZSA9PT0gUExBWUVSX0VSUk9SKSB7XG4gICAgICAgICAgdXJsID0gX2dldEN1cnJlbnRGaWxlKCk7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgWW91dHViZSB2aWRlby5cbiAgICAgICAgICBpZiAodXJsICYmIHVybC5pbmRleE9mKFwid3d3LnlvdXR1YmUuY29tXCIpID4gLTEpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBGT1JNQVRfTUVTU0FHRTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJhbXMuZXZlbnQgPSBcInBsYXllciBlcnJvclwiO1xuICAgIHBhcmFtcy5ldmVudF9kZXRhaWxzID0gZGV0YWlscztcblxuICAgIGxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBwYXVzZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ0V2ZW50XCI6IGxvZ0V2ZW50LFxuICAgIFwib25GaWxlSW5pdFwiOiBvbkZpbGVJbml0LFxuICAgIFwib25GaWxlUmVmcmVzaFwiOiBvbkZpbGVSZWZyZXNoLFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJzaG93RXJyb3JcIjogc2hvd0Vycm9yLFxuICAgIFwicGxheWVyRW5kZWRcIjogcGxheWVyRW5kZWQsXG4gICAgXCJwbGF5ZXJSZWFkeVwiOiBwbGF5ZXJSZWFkeSxcbiAgICBcInBsYXllckVycm9yXCI6IHBsYXllckVycm9yLFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG5cbn0pKGdhZGdldHMpO1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGaWxlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChlLmRldGFpbC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eSBhbmQgZW5zdXJlIGl0IGlzIHRydWVcbiAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpICYmIGUuZGV0YWlsLmNoYW5nZWQpIHtcbiAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZpbGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZmlsZSBub3QgZm91bmRcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1maWxlLXRocm90dGxlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIHRocm90dGxlZFwiLCBcInVybFwiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCB2aWRlbyBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBlcnJvclwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8gZnJvbSBTdG9yYWdlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtZXJyb3JcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwiY2FjaGUgZXJyb3JcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvIGZyb20gQ2FjaGUuXCIpO1xuICAgIH0pO1xuXG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZvbGRlclwiLCBkYXRhLnN0b3JhZ2UuZm9sZGVyKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEuc3RvcmFnZS5maWxlTmFtZSk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgY29uZmlnLCBfICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGb2xkZXIgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2luaXRpYWxMb2FkID0gdHJ1ZTtcblxuICB2YXIgX2ZpbGVzID0gW107XG5cbiAgZnVuY3Rpb24gX2dldFVybHMoKSB7XG4gICAgcmV0dXJuIF8ucGx1Y2soX2ZpbGVzLCBcInVybFwiKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSkge1xuICAgIHJldHVybiBfLmZpbmQoX2ZpbGVzLCBmdW5jdGlvbiAoZikge1xuICAgICAgcmV0dXJuIGZpbGUubmFtZSA9PT0gZi5uYW1lO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX2RlbGV0ZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIF9maWxlcy5zcGxpY2UoX2ZpbGVzLmluZGV4T2YoZXhpc3RpbmcpLCAxKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY2hhbmdlRmlsZShmaWxlKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gX2dldEV4aXN0aW5nRmlsZShmaWxlKTtcblxuICAgIGlmIChleGlzdGluZykge1xuICAgICAgZXhpc3RpbmcudXJsID0gZmlsZS51cmw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2FkZEZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgICAvLyBleHRyYWN0IHRoZSBhY3R1YWwgZmlsZSBuYW1lIGFuZCBzdG9yZSBpbiBuZXcgcHJvcGVydHkgb24gZmlsZSBvYmplY3RcbiAgICAgIGZpbGUuZmlsZU5hbWUgPSBmaWxlLm5hbWUuc2xpY2UoZmlsZS5uYW1lLmxhc3RJbmRleE9mKFwiL1wiKSArIDEsIGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIC8vIGluc2VydCBmaWxlIHRvIF9maWxlcyBsaXN0IGF0IHNwZWNpZmljIGluZGV4IGJhc2VkIG9uIGFscGhhYmV0aWNhbCBvcmRlciBvZiBmaWxlIG5hbWVcbiAgICAgIF9maWxlcy5zcGxpY2UoXy5zb3J0ZWRJbmRleChfZmlsZXMsIGZpbGUsIFwiZmlsZU5hbWVcIiksIDAsIGZpbGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9TdG9yYWdlXCIpO1xuXG4gICAgaWYgKCFzdG9yYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBmaWxlID0gZS5kZXRhaWw7XG5cbiAgICAgIC8vIEFkZGVkXG4gICAgICBpZihmaWxlLmFkZGVkKSB7XG4gICAgICAgIF9hZGRGaWxlKGZpbGUpO1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQoX2dldFVybHMoKSk7XG5cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2hhbmdlZFxuICAgICAgaWYoZmlsZS5jaGFuZ2VkKSB7XG4gICAgICAgIF9jaGFuZ2VGaWxlKGZpbGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGVkXG4gICAgICBpZihmaWxlLmRlbGV0ZWQpIHtcbiAgICAgICAgX2RlbGV0ZUZpbGUoZmlsZSk7XG4gICAgICB9XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChfZ2V0VXJscygpKTtcblxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVtcHR5LWZvbGRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZW1wdHlcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgY29udGFpbiBhbnkgdmlkZW9zLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1mb2xkZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBkb2Vzbid0IGV4aXN0XCIsIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZXJyb3JcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvIGZyb20gU3RvcmFnZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcImNhY2hlIGVycm9yXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoZSB2aWRlbyBmcm9tIENhY2hlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZVR5cGVcIiwgXCJ2aWRlb1wiKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZvbGRlclwiLCBkYXRhLnN0b3JhZ2UuZm9sZGVyKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuXG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZSA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciByaXNlQ2FjaGUgPSBSaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGU7XG5cbiAgdmFyIF9yZWZyZXNoRHVyYXRpb24gPSA5MDAwMDAsICAvLyAxNSBtaW51dGVzXG4gICAgX3JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcblxuICB2YXIgX2lzTG9hZGluZyA9IHRydWU7XG5cbiAgZnVuY3Rpb24gX2dldEZpbGUob21pdENhY2hlQnVzdGVyKSB7XG4gICAgcmlzZUNhY2hlLmdldEZpbGUoZGF0YS51cmwsIGZ1bmN0aW9uKHJlc3BvbnNlLCBlcnJvcikge1xuICAgICAgaWYgKCFlcnJvcikge1xuXG4gICAgICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KHJlc3BvbnNlLnVybCk7XG5cbiAgICAgICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBpbnRlcnZhbFxuICAgICAgICAgIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKHJlc3BvbnNlLnVybCk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXJyb3Igb2NjdXJyZWRcbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudCh7XG4gICAgICAgICAgXCJldmVudFwiOiBcIm5vbi1zdG9yYWdlIGVycm9yXCIsXG4gICAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgXCJ1cmxcIjogcmVzcG9uc2UudXJsXG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICAgIH1cbiAgICB9LCBvbWl0Q2FjaGVCdXN0ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0UmVmcmVzaEludGVydmFsKCkge1xuICAgIGlmIChfcmVmcmVzaEludGVydmFsSWQgPT09IG51bGwpIHtcbiAgICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2dldEZpbGUoZmFsc2UpO1xuICAgICAgfSwgX3JlZnJlc2hEdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIF9nZXRGaWxlKHRydWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uVmlkZW8gPSBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uVmlkZW8uRnJhbWVDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgUFJFRklYID0gXCJpZl9cIjtcblxuICBmdW5jdGlvbiBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCkge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQUkVGSVggKyBpbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGcmFtZU9iamVjdChpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGlmcmFtZTtcblxuICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG5cbiAgICBpZiAoaWZyYW1lKSB7XG4gICAgICByZXR1cm4gKGlmcmFtZS5jb250ZW50V2luZG93KSA/IGlmcmFtZS5jb250ZW50V2luZG93IDpcbiAgICAgICAgKGlmcmFtZS5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnQpID8gaWZyYW1lLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudCA6IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXIoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBmcmFtZU9iaiA9IGdldEZyYW1lT2JqZWN0KGluZGV4KSxcbiAgICAgIGlmcmFtZTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgaWZyYW1lID0gZnJhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcbiAgICAgIGZyYW1lT2JqLnJlbW92ZSgpO1xuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImFib3V0OmJsYW5rXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZChpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwiYWxsb3dUcmFuc3BhcmVuY3lcIiwgdHJ1ZSk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsIFwiMFwiKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic2Nyb2xsaW5nXCIsIFwibm9cIik7XG5cbiAgICBmcmFtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlRnJhbWVQbGF5ZXIoaW5kZXgsIHBhcmFtcywgZmlsZXMsIHNraW4sIHNyYykge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGZyYW1lT2JqID0gZ2V0RnJhbWVPYmplY3QoaW5kZXgpLFxuICAgICAgaWZyYW1lO1xuXG4gICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuXG4gICAgICBpZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZnJhbWUub25sb2FkID0gbnVsbDtcblxuICAgICAgICAvLyBpbml0aWFsaXplIGFuZCBsb2FkIHRoZSBwbGF5ZXIgaW5zaWRlIHRoZSBpZnJhbWVcbiAgICAgICAgZnJhbWVPYmouaW5pdChwYXJhbXMsIGZpbGVzLCBza2luKTtcbiAgICAgICAgZnJhbWVPYmoubG9hZCgpO1xuICAgICAgfTtcblxuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBzcmMpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gaGlkZShpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KTtcblxuICAgIGZyYW1lQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlKGluZGV4LCBjYWxsYmFjaykge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBSRUZJWCArIGluZGV4KTtcblxuICAgIF9jbGVhcihpbmRleCk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHJlbW92ZSB0aGUgaWZyYW1lIGJ5IGNsZWFyaW5nIGFsbCBlbGVtZW50cyBpbnNpZGUgZGl2IGNvbnRhaW5lclxuICAgICAgd2hpbGUgKGZyYW1lQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZnJhbWVDb250YWluZXIucmVtb3ZlQ2hpbGQoZnJhbWVDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sIDIwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93KGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpO1xuXG4gICAgZnJhbWVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGFkZCxcbiAgICBjcmVhdGVGcmFtZVBsYXllcjogY3JlYXRlRnJhbWVQbGF5ZXIsXG4gICAgZ2V0RnJhbWVDb250YWluZXI6IGdldEZyYW1lQ29udGFpbmVyLFxuICAgIGdldEZyYW1lT2JqZWN0OiBnZXRGcmFtZU9iamVjdCxcbiAgICBoaWRlOiBoaWRlLFxuICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgIHNob3c6IHNob3dcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FjdGl2ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIHRyeSB7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG1haW5Db250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNhbid0IGluaXRpYWxpemUgTWVzc2FnZSAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoX2FjdGl2ZSkge1xuICAgICAgLy8gY2xlYXIgY29udGVudCBvZiBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgd2hpbGUgKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cobWVzc2FnZSkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHA7XG5cbiAgICBpZiAoIV9hY3RpdmUpIHtcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBfaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgXCJoaWRlXCI6IGhpZGUsXG4gICAgXCJzaG93XCI6IHNob3dcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBSaXNlVmlzaW9uICovXG5cbihmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaWQgPSBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICAvLyBEaXNhYmxlIGNvbnRleHQgbWVudSAocmlnaHQgY2xpY2sgbWVudSlcbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lcywgdmFsdWVzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMsIG1vZGU7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzBdKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCFhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIGZvbGRlciB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZvbGRlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub24tc3RvcmFnZSBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0yJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
