if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","https://storage-stage.risevision.com/rva-test/dist/storage-modal.html#/files/"))}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e,t){"use strict";function n(){t.rpc.call("","rsevent_done",null,l.getString("id"))}function i(){t.rpc.call("","rsevent_ready",null,l.getString("id"),!0,!0,!0,!0,!0)}function o(){p=new RiseVision.Video.Player(g),p.init()}function a(){p.pause()}function s(){p.isInitialPlay()?g.video.autoplay&&p.play():p.userPaused()||p.play()}function r(){i()}function d(n){l=new t.Prefs,g=n,e.getElementById("videoContainer").style.height=l.getInt("rsH")+"px",m=new RiseVision.Common.Background(g),m.init(o)}function c(){a()}function u(){n()}var l=null,g={},m=null,p=null;return{pause:a,play:s,setAdditionalParams:d,playerReady:r,stop:c,videoEnded:u}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function t(){s=!0,a&&"function"==typeof a&&a()}function n(e){d.removeEventListener("rise-storage-response",n),r.style.backgroundImage=Array.isArray(e.detail)?"url("+e.detail[0]+")":"url("+e.detail+")",t()}function i(){r=document.getElementById("background"),d=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,r?e.background.useImage?(r.className=e.background.image.position,r.className=e.background.image.scale?r.className+" scale-to-fit":r.className,0===Object.keys(e.backgroundStorage).length?(r.style.backgroundImage="url("+e.background.image.url+")",t()):d?(d.addEventListener("rise-storage-response",n),d.setAttribute("folder",e.backgroundStorage.folder),d.setAttribute("fileName",e.backgroundStorage.fileName),d.setAttribute("companyId",e.backgroundStorage.companyId),d.go()):console.log("Missing element with id value of 'backgroundStorage'")):t():console.log("Missing element with id value of 'background'")}function o(e){s?e&&"function"==typeof e&&e():(e&&(a=e),i())}var a=null,s=!1,r=null,d=null;return{init:o}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.Player=function(e){"use strict";function t(){var t=e.url.substr(e.url.lastIndexOf(".")+1);return"ogv"===t&&(t="ogg"),t}function n(){m.style.visibility="visible",g.removeEventListener("loadeddata",n,!1)}function i(){RiseVision.Video.playerReady(),g.removeEventListener("canplay",i,!1)}function o(){f=!1,RiseVision.Video.videoEnded()}function a(){f=!v}function s(){p=!1,f=!1}function r(){return p}function d(){var r=document.getElementById("videoStorage"),d=document.createDocumentFragment(),c=d.appendChild(document.createElement("source")),u=document.createAttribute("src"),l=document.createAttribute("type");g.className=e.video.scaleToFit?g.className+" scale-to-fit":g.className+" no-scale",g.volume=e.video.volume/100,l.value="video/"+t(),c.setAttributeNode(l),g.addEventListener("loadeddata",n,!1),g.addEventListener("canplay",i,!1),g.addEventListener("ended",o,!1),g.addEventListener("pause",a,!1),g.addEventListener("play",s,!1),0===Object.keys(e.videoStorage).length?(u.value=e.url,c.setAttributeNode(u),g.appendChild(d)):(r.addEventListener("rise-storage-response",function(e){u.value=e.detail[0],c.setAttributeNode(u),g.appendChild(d)}),r.setAttribute("folder",e.videoStorage.folder),r.setAttribute("fileName",e.videoStorage.fileName),r.setAttribute("companyId",e.videoStorage.companyId),r.go())}function c(){v=!0,g.pause()}function u(){p=!1,v=!1,g.play()}function l(){return f}var g=document.getElementById("video"),m=document.getElementById("videoContainer"),p=!0,f=!1,v=!1;return{isInitialPlay:r,init:d,pause:c,play:u,userPaused:l}},function(e,t){"use strict";function n(){RiseVision.Video.play()}function i(){RiseVision.Video.pause()}function o(){RiseVision.Video.stop()}function a(e,t){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&RiseVision.Video.setAdditionalParams(JSON.parse(t[0]))}var s=new t.Prefs,r=s.getString("id");e.oncontextmenu=function(){return!1},r&&""!==r&&(t.rpc.register("rscmd_play_"+r,n),t.rpc.register("rscmd_pause_"+r,i),t.rpc.register("rscmd_stop_"+r,o),t.rpc.register("rsparam_set_"+r,a),t.rpc.call("","rsparam_get",null,r,["additionalParams"]))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiVmlkZW8iLCJkb2N1bWVudCIsImdhZGdldHMiLCJfZG9uZSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfcmVhZHkiLCJfYmFja2dyb3VuZFJlYWR5IiwiX3BsYXllciIsIlBsYXllciIsIl9hZGRpdGlvbmFsUGFyYW1zIiwiaW5pdCIsInBhdXNlIiwicGxheSIsImlzSW5pdGlhbFBsYXkiLCJ2aWRlbyIsImF1dG9wbGF5IiwidXNlclBhdXNlZCIsInBsYXllclJlYWR5Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsInBhcmFtcyIsIlByZWZzIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImhlaWdodCIsImdldEludCIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsInN0b3AiLCJ2aWRlb0VuZGVkIiwiZGF0YSIsIl9jYWxsYmFjayIsIl9zdG9yYWdlUmVzcG9uc2UiLCJlIiwiX3N0b3JhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYmFja2dyb3VuZEltYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwiZGV0YWlsIiwiX2NvbmZpZ3VyZSIsImJvZHkiLCJiYWNrZ3JvdW5kIiwiY29sb3IiLCJ1c2VJbWFnZSIsImNsYXNzTmFtZSIsImltYWdlIiwicG9zaXRpb24iLCJzY2FsZSIsIk9iamVjdCIsImtleXMiLCJiYWNrZ3JvdW5kU3RvcmFnZSIsImxlbmd0aCIsInVybCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRBdHRyaWJ1dGUiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImNvbXBhbnlJZCIsImdvIiwiY29uc29sZSIsImxvZyIsImNiIiwiX2dldFZpZGVvRmlsZVR5cGUiLCJ0eXBlIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJfb25Mb2FkZWREYXRhIiwiX3ZpZGVvQ29udGFpbmVyIiwidmlzaWJpbGl0eSIsIl92aWRlbyIsIl9vbkNhblBsYXkiLCJfb25FbmRlZCIsIl91c2VyUGF1c2VkIiwiX29uUGF1c2UiLCJfdmlld2VyUGF1c2VkIiwiX29uUGxheSIsIl9pbml0aWFsUGxheSIsInN0b3JhZ2UiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJzb3VyY2UiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJzcmNBdHRyIiwiY3JlYXRlQXR0cmlidXRlIiwidHlwZUF0dHIiLCJzY2FsZVRvRml0Iiwidm9sdW1lIiwic2V0QXR0cmlidXRlTm9kZSIsInZpZGVvU3RvcmFnZSIsIndpbmRvdyIsImFkZGl0aW9uYWxQYXJhbXMiLCJuYW1lcyIsInZhbHVlcyIsIkpTT04iLCJwYXJzZSIsInByZWZzIiwiaWQiLCJvbmNvbnRleHRtZW51IiwicmVnaXN0ZXIiLCJfZ2FxIiwicHVzaCIsImdhIiwiYXN5bmMiLCJzcmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBRUEsR0FBc0IsbUJBQVhBLFFBQXdCLENBQ2pDLEdBQUlBLFVBSW1CLG9CQUFaQyxXQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix1REFDM0JBLFNBQVMsZ0JBQWlCLFNBRTdCRixRQUFRQyxPQUFPLG9EQUNaRSxNQUFNLGdCQUFpQixrRkFNOUIsR0FBSUMsWUFBYUEsY0FDakJBLFlBQVdDLFNBRVhELFdBQVdDLE1BQVEsU0FBV0MsRUFBVUMsR0FDdEMsWUFVQSxTQUFTQyxLQUNQRCxFQUFRRSxJQUFJQyxLQUFLLEdBQUksZUFBZ0IsS0FBTUMsRUFBT0MsVUFBVSxPQUk5RCxRQUFTQyxLQUNQTixFQUFRRSxJQUFJQyxLQUFLLEdBQUksZ0JBQWlCLEtBQU1DLEVBQU9DLFVBQVUsT0FDM0QsR0FBTSxHQUFNLEdBQU0sR0FBTSxHQUc1QixRQUFTRSxLQUVQQyxFQUFVLEdBQUlYLFlBQVdDLE1BQU1XLE9BQU9DLEdBQ3RDRixFQUFRRyxPQU1WLFFBQVNDLEtBQ1BKLEVBQVFJLFFBR1YsUUFBU0MsS0FDSEwsRUFBUU0sZ0JBRU5KLEVBQWtCSyxNQUFNQyxVQUMxQlIsRUFBUUssT0FHTEwsRUFBUVMsY0FDWFQsRUFBUUssT0FLZCxRQUFTSyxLQUNQWixJQUdGLFFBQVNhLEdBQW9CQyxHQUMzQmhCLEVBQVMsR0FBSUosR0FBUXFCLE1BQ3JCWCxFQUFvQlUsRUFFcEJyQixFQUFTdUIsZUFBZSxrQkFBa0JDLE1BQU1DLE9BQVNwQixFQUFPcUIsT0FBTyxPQUFTLEtBR2hGQyxFQUFjLEdBQUk3QixZQUFXOEIsT0FBT0MsV0FBV2xCLEdBQy9DZ0IsRUFBWWYsS0FBS0osR0FHbkIsUUFBU3NCLEtBR1BqQixJQUdGLFFBQVNrQixLQUNQN0IsSUFsRUYsR0FBSUcsR0FBUyxLQUNYTSxLQUNBZ0IsRUFBYyxLQUNkbEIsRUFBVSxJQWtFWixRQUNFSSxNQUFTQSxFQUNUQyxLQUFRQSxFQUNSTSxvQkFBdUJBLEVBQ3ZCRCxZQUFlQSxFQUNmVyxLQUFRQSxFQUNSQyxXQUFjQSxJQUdmL0IsU0FBVUMsUUFFYixJQUFJSCxZQUFhQSxjQUNqQkEsWUFBVzhCLE9BQVM5QixXQUFXOEIsV0FFL0I5QixXQUFXOEIsT0FBT0MsV0FBYSxTQUFVRyxHQUN2QyxZQVVBLFNBQVN4QixLQUNQRCxHQUFTLEVBRUwwQixHQUFrQyxrQkFBZEEsSUFDdEJBLElBSUosUUFBU0MsR0FBaUJDLEdBQ3hCQyxFQUFTQyxvQkFBb0Isd0JBQXlCSCxHQUdwRFAsRUFBWUgsTUFBTWMsZ0JBRGhCQyxNQUFNQyxRQUFRTCxFQUFFTSxRQUNrQixPQUFTTixFQUFFTSxPQUFPLEdBQUssSUFFdkIsT0FBU04sRUFBRU0sT0FBUyxJQUUxRGpDLElBR0YsUUFBU2tDLEtBQ1BmLEVBQWMzQixTQUFTdUIsZUFBZSxjQUN0Q2EsRUFBV3BDLFNBQVN1QixlQUFlLHFCQUduQ3ZCLFNBQVMyQyxLQUFLbkIsTUFBTW9CLFdBQWFaLEVBQUtZLFdBQVdDLE1BRTdDbEIsRUFDRUssRUFBS1ksV0FBV0UsVUFDbEJuQixFQUFZb0IsVUFBWWYsRUFBS1ksV0FBV0ksTUFBTUMsU0FDOUN0QixFQUFZb0IsVUFBWWYsRUFBS1ksV0FBV0ksTUFBTUUsTUFBUXZCLEVBQVlvQixVQUFZLGdCQUMxRXBCLEVBQVlvQixVQUVtQyxJQUEvQ0ksT0FBT0MsS0FBS3BCLEVBQUtxQixtQkFBbUJDLFFBQ3RDM0IsRUFBWUgsTUFBTWMsZ0JBQWtCLE9BQVNOLEVBQUtZLFdBQVdJLE1BQU1PLElBQU0sSUFDekUvQyxLQUVJNEIsR0FFRkEsRUFBU29CLGlCQUFpQix3QkFBeUJ0QixHQUVuREUsRUFBU3FCLGFBQWEsU0FBVXpCLEVBQUtxQixrQkFBa0JLLFFBQ3ZEdEIsRUFBU3FCLGFBQWEsV0FBWXpCLEVBQUtxQixrQkFBa0JNLFVBQ3pEdkIsRUFBU3FCLGFBQWEsWUFBYXpCLEVBQUtxQixrQkFBa0JPLFdBQzFEeEIsRUFBU3lCLE1BRVRDLFFBQVFDLElBQUkseURBSWhCdkQsSUFHRnNELFFBQVFDLElBQUksaURBT2hCLFFBQVNuRCxHQUFLb0QsR0FDUHpELEVBT015RCxHQUFvQixrQkFBUEEsSUFDdEJBLEtBUElBLElBQ0YvQixFQUFZK0IsR0FHZHRCLEtBekVKLEdBQUlULEdBQVksS0FDZDFCLEdBQVMsRUFDVG9CLEVBQWMsS0FDZFMsRUFBVyxJQTZFYixRQUNFeEIsS0FBUUEsR0FJWixJQUFJZCxZQUFhQSxjQUNqQkEsWUFBV0MsTUFBUUQsV0FBV0MsVUFFOUJELFdBQVdDLE1BQU1XLE9BQVMsU0FBVXNCLEdBQ2xDLFlBV0EsU0FBU2lDLEtBQ1AsR0FBSUMsR0FBT2xDLEVBQUt1QixJQUFJWSxPQUFPbkMsRUFBS3VCLElBQUlhLFlBQVksS0FBTyxFQU12RCxPQUphLFFBQVRGLElBQ0ZBLEVBQU8sT0FHRkEsRUFHVCxRQUFTRyxLQUVQQyxFQUFnQjlDLE1BQU0rQyxXQUFhLFVBRW5DQyxFQUFPbkMsb0JBQW9CLGFBQWNnQyxHQUFlLEdBRzFELFFBQVNJLEtBRVAzRSxXQUFXQyxNQUFNb0IsY0FFakJxRCxFQUFPbkMsb0JBQW9CLFVBQVdvQyxHQUFZLEdBR3BELFFBQVNDLEtBRVBDLEdBQWMsRUFFZDdFLFdBQVdDLE1BQU1nQyxhQUduQixRQUFTNkMsS0FFUEQsR0FBZUUsRUFHakIsUUFBU0MsS0FDUEMsR0FBZSxFQUNmSixHQUFjLEVBTWhCLFFBQVM1RCxLQUNQLE1BQU9nRSxHQUdULFFBQVNuRSxLQUNQLEdBQUlvRSxHQUFVaEYsU0FBU3VCLGVBQWUsZ0JBQ3BDMEQsRUFBV2pGLFNBQVNrRix5QkFDcEJDLEVBQVNGLEVBQVNHLFlBQVlwRixTQUFTcUYsY0FBYyxXQUNyREMsRUFBVXRGLFNBQVN1RixnQkFBZ0IsT0FDbkNDLEVBQVd4RixTQUFTdUYsZ0JBQWdCLE9BRXRDZixHQUFPekIsVUFBWWYsRUFBS2hCLE1BQU15RSxXQUFhakIsRUFBT3pCLFVBQVksZ0JBQzFEeUIsRUFBT3pCLFVBQVksWUFHdkJ5QixFQUFPa0IsT0FBUzFELEVBQUtoQixNQUFNMEUsT0FBUyxJQUdwQ0YsRUFBUzNGLE1BQVEsU0FBV29FLElBQzVCa0IsRUFBT1EsaUJBQWlCSCxHQUd4QmhCLEVBQU9oQixpQkFBaUIsYUFBY2EsR0FBZSxHQUNyREcsRUFBT2hCLGlCQUFpQixVQUFXaUIsR0FBWSxHQUMvQ0QsRUFBT2hCLGlCQUFpQixRQUFTa0IsR0FBVSxHQUMzQ0YsRUFBT2hCLGlCQUFpQixRQUFTb0IsR0FBVSxHQUMzQ0osRUFBT2hCLGlCQUFpQixPQUFRc0IsR0FBUyxHQUVLLElBQTFDM0IsT0FBT0MsS0FBS3BCLEVBQUs0RCxjQUFjdEMsUUFFakNnQyxFQUFRekYsTUFBUW1DLEVBQUt1QixJQUNyQjRCLEVBQU9RLGlCQUFpQkwsR0FDeEJkLEVBQU9ZLFlBQVlILEtBSW5CRCxFQUFReEIsaUJBQWlCLHdCQUF5QixTQUFVckIsR0FDMURtRCxFQUFRekYsTUFBUXNDLEVBQUVNLE9BQU8sR0FDekIwQyxFQUFPUSxpQkFBaUJMLEdBQ3hCZCxFQUFPWSxZQUFZSCxLQUdyQkQsRUFBUXZCLGFBQWEsU0FBVXpCLEVBQUs0RCxhQUFhbEMsUUFDakRzQixFQUFRdkIsYUFBYSxXQUFZekIsRUFBSzRELGFBQWFqQyxVQUNuRHFCLEVBQVF2QixhQUFhLFlBQWF6QixFQUFLNEQsYUFBYWhDLFdBQ3BEb0IsRUFBUW5CLE1BSVosUUFBU2hELEtBQ1BnRSxHQUFnQixFQUNoQkwsRUFBTzNELFFBR1QsUUFBU0MsS0FDUGlFLEdBQWUsRUFDZkYsR0FBZ0IsRUFDaEJMLEVBQU8xRCxPQUdULFFBQVNJLEtBQ1AsTUFBT3lELEdBbEhULEdBQUlILEdBQVN4RSxTQUFTdUIsZUFBZSxTQUNuQytDLEVBQWtCdEUsU0FBU3VCLGVBQWUsa0JBQzFDd0QsR0FBZSxFQUNmSixHQUFjLEVBQ2RFLEdBQWdCLENBaUhsQixRQUNFOUQsY0FBaUJBLEVBQ2pCSCxLQUFRQSxFQUNSQyxNQUFTQSxFQUNUQyxLQUFRQSxFQUNSSSxXQUFjQSxJQU1sQixTQUFXMkUsRUFBUTVGLEdBQ2pCLFlBVUEsU0FBU2EsS0FDUGhCLFdBQVdDLE1BQU1lLE9BR25CLFFBQVNELEtBQ1BmLFdBQVdDLE1BQU1jLFFBR25CLFFBQVNpQixLQUNQaEMsV0FBV0MsTUFBTStCLE9BR25CLFFBQVNnRSxHQUFpQkMsRUFBT0MsR0FDM0J6RCxNQUFNQyxRQUFRdUQsSUFBVUEsRUFBTXpDLE9BQVMsR0FBa0IscUJBQWJ5QyxFQUFNLElBQ2hEeEQsTUFBTUMsUUFBUXdELElBQVdBLEVBQU8xQyxPQUFTLEdBQzNDeEQsV0FBV0MsTUFBTXFCLG9CQUFvQjZFLEtBQUtDLE1BQU1GLEVBQU8sS0F2QjdELEdBQUlHLEdBQVEsR0FBSWxHLEdBQVFxQixNQUN0QjhFLEVBQUtELEVBQU03RixVQUFVLEtBR3ZCdUYsR0FBT1EsY0FBZ0IsV0FDckIsT0FBTyxHQXVCTEQsR0FBYSxLQUFQQSxJQUNSbkcsRUFBUUUsSUFBSW1HLFNBQVMsY0FBZ0JGLEVBQUl0RixHQUN6Q2IsRUFBUUUsSUFBSW1HLFNBQVMsZUFBaUJGLEVBQUl2RixHQUMxQ1osRUFBUUUsSUFBSW1HLFNBQVMsY0FBZ0JGLEVBQUl0RSxHQUV6QzdCLEVBQVFFLElBQUltRyxTQUFTLGVBQWlCRixFQUFJTixHQUMxQzdGLEVBQVFFLElBQUlDLEtBQUssR0FBSSxjQUFlLEtBQU1nRyxHQUFLLHVCQUloRFAsT0FBUTVGLFFBS1gsSUFBSXNHLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLekcsU0FBU3FGLGNBQWMsU0FBV29CLEdBQUd2QyxLQUFPLGtCQUFtQnVDLEVBQUdDLE9BQVEsRUFDbkZELEVBQUdFLEtBQU8sVUFBWTNHLFNBQVM0RyxTQUFTQyxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJOUcsU0FBUytHLHFCQUFxQixVQUFVLEVBQUlELEdBQUVFLFdBQVdDLGFBQWFSLEVBQUlLIiwiZmlsZSI6ImpzL3dpZGdldC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgLy8gdmFyaWFibGVzIGdvIGhlcmVcbiAgfTtcblxuICBpZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJjb21wb25lbnRzL3J2LWNvbW1vbi1pMThuL2Rpc3QvbG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnN0b3JhZ2Utc2VsZWN0b3IuY29uZmlnXCIpXG4gICAgICAudmFsdWUoXCJTVE9SQUdFX01PREFMXCIsIFwiaHR0cHM6Ly9zdG9yYWdlLXN0YWdlLnJpc2V2aXNpb24uY29tL3J2YS10ZXN0L2Rpc3Qvc3RvcmFnZS1tb2RhbC5odG1sIy9maWxlcy9cIik7XG4gIH1cbn1cblxuLyogZ2xvYmFsIGdhZGdldHMgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvID0gKGZ1bmN0aW9uIChkb2N1bWVudCwgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHt9LFxuICAgIF9iYWNrZ3JvdW5kID0gbnVsbCxcbiAgICBfcGxheWVyID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfZG9uZSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9kb25lXCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iYWNrZ3JvdW5kUmVhZHkoKSB7XG4gICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBQbGF5ZXIgaW5zdGFuY2VcbiAgICBfcGxheWVyID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uUGxheWVyKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICBfcGxheWVyLmluaXQoKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3BsYXllci5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoX3BsYXllci5pc0luaXRpYWxQbGF5KCkpIHtcbiAgICAgIC8vIFwiYXV0b3BsYXlcIiB3YXMgc2VsZWN0ZWQgaW4gc2V0dGluZ3NcbiAgICAgIGlmIChfYWRkaXRpb25hbFBhcmFtcy52aWRlby5hdXRvcGxheSkge1xuICAgICAgICBfcGxheWVyLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFfcGxheWVyLnVzZXJQYXVzZWQoKSkge1xuICAgICAgICBfcGxheWVyLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJSZWFkeSgpIHtcbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMocGFyYW1zKSB7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHBhcmFtcztcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcblxuICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgQmFja2dyb3VuZCBpbnN0YW5jZVxuICAgIF9iYWNrZ3JvdW5kID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgIF9iYWNrZ3JvdW5kLmluaXQoX2JhY2tncm91bmRSZWFkeSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9SaXNlLVZpc2lvbi92aWV3ZXIvaXNzdWVzLzMwXG4gICAgLy8gSGF2ZSB0byBjYWxsIHBhdXNlKCkgZHVlIHRvIFZpZXdlciBpc3N1ZVxuICAgIHBhdXNlKCk7XG4gIH1cblxuICBmdW5jdGlvbiB2aWRlb0VuZGVkKCkge1xuICAgIF9kb25lKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJwbGF5ZXJSZWFkeVwiOiBwbGF5ZXJSZWFkeSxcbiAgICBcInN0b3BcIjogc3RvcCxcbiAgICBcInZpZGVvRW5kZWRcIjogdmlkZW9FbmRlZFxuICB9O1xuXG59KShkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2NhbGxiYWNrID0gbnVsbCxcbiAgICBfcmVhZHkgPSBmYWxzZSxcbiAgICBfYmFja2dyb3VuZCA9IG51bGwsXG4gICAgX3N0b3JhZ2UgPSBudWxsO1xuXG4gIC8qXG4gICAqIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcbiAgICBfcmVhZHkgPSB0cnVlO1xuXG4gICAgaWYgKF9jYWxsYmFjayAmJiB0eXBlb2YgX2NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIF9jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdG9yYWdlUmVzcG9uc2UoZSkge1xuICAgIF9zdG9yYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgX3N0b3JhZ2VSZXNwb25zZSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShlLmRldGFpbCkpIHtcbiAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZS5kZXRhaWxbMF0gKyBcIilcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBlLmRldGFpbCArIFwiKVwiO1xuICAgIH1cbiAgICBfYmFja2dyb3VuZFJlYWR5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBfY29uZmlndXJlKCkge1xuICAgIF9iYWNrZ3JvdW5kID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kXCIpO1xuICAgIF9zdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWNrZ3JvdW5kU3RvcmFnZVwiKTtcblxuICAgIC8vIHNldCB0aGUgZG9jdW1lbnQgYmFja2dyb3VuZFxuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IGRhdGEuYmFja2dyb3VuZC5jb2xvcjtcblxuICAgIGlmIChfYmFja2dyb3VuZCkge1xuICAgICAgaWYgKGRhdGEuYmFja2dyb3VuZC51c2VJbWFnZSkge1xuICAgICAgICBfYmFja2dyb3VuZC5jbGFzc05hbWUgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2UucG9zaXRpb247XG4gICAgICAgIF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS5zY2FsZSA/IF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSArIFwiIHNjYWxlLXRvLWZpdFwiXG4gICAgICAgICAgOiBfYmFja2dyb3VuZC5jbGFzc05hbWU7XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIFwiKVwiO1xuICAgICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoX3N0b3JhZ2UpIHtcbiAgICAgICAgICAgIC8vIFJpc2UgU3RvcmFnZVxuICAgICAgICAgICAgX3N0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBfc3RvcmFnZVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZm9sZGVyKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLmdvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmRTdG9yYWdlJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZCdcIik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KGNiKSB7XG4gICAgaWYgKCFfcmVhZHkpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBfY2FsbGJhY2sgPSBjYjtcbiAgICAgIH1cblxuICAgICAgX2NvbmZpZ3VyZSgpO1xuXG4gICAgfSBlbHNlIGlmIChjYiAmJiB0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXIgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX3ZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1wiKSxcbiAgICBfdmlkZW9Db250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvQ29udGFpbmVyXCIpLFxuICAgIF9pbml0aWFsUGxheSA9IHRydWUsXG4gICAgX3VzZXJQYXVzZWQgPSBmYWxzZSxcbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgLypcbiAgICogUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfZ2V0VmlkZW9GaWxlVHlwZSgpIHtcbiAgICB2YXIgdHlwZSA9IGRhdGEudXJsLnN1YnN0cihkYXRhLnVybC5sYXN0SW5kZXhPZihcIi5cIikgKyAxKTtcblxuICAgIGlmICh0eXBlID09PSBcIm9ndlwiKSB7XG4gICAgICB0eXBlID0gXCJvZ2dcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vbkxvYWRlZERhdGEoKSB7XG4gICAgLy8gYXQgbGVhc2UgMXN0IGZyYW1lIG9mIHZpZGVvIGhhcyBsb2FkZWRcbiAgICBfdmlkZW9Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgIC8vIHJlbW92ZSB0aGlzIGxpc3RlbmVyXG4gICAgX3ZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkZWRkYXRhXCIsIF9vbkxvYWRlZERhdGEsIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vbkNhblBsYXkoKSB7XG4gICAgLy8gZW5vdWdoIGRhdGEgaGFzIGxvYWRlZCB0byBzYWZlbHkgcGxheSB3aXRob3V0IGludGVycnVwdGlvblxuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheWVyUmVhZHkoKTtcbiAgICAvLyByZW1vdmUgdGhpcyBsaXN0ZW5lclxuICAgIF92aWRlby5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2FucGxheVwiLCBfb25DYW5QbGF5LCBmYWxzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBfb25FbmRlZCgpIHtcbiAgICAvLyBhIFwicGF1c2VcIiBldmVudCBpcyBhbHdheXMgZmlyZWQgYmVmb3JlIFwiZW5kZWRcIiBldmVudCwgZW5zdXJlIF91c2VyUGF1c2VkIGlzIGZhbHNlXG4gICAgX3VzZXJQYXVzZWQgPSBmYWxzZTtcbiAgICAvLyB2aWRlbyBlbmRlZFxuICAgIFJpc2VWaXNpb24uVmlkZW8udmlkZW9FbmRlZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uUGF1c2UoKSB7XG4gICAgLy8gdGhpcyBoYW5kbGVyIGFsc28gZ2V0cyBjYWxsZWQgdmlhIHB1YmxpYyBcInBhdXNlKClcIiBmdW5jdGlvbiwgb25seSBzZXQgXCJfdXNlclBhdXNlZCA9IHRydWVcIiBpZiBub3QgdGhlIGNhc2VcbiAgICBfdXNlclBhdXNlZCA9ICFfdmlld2VyUGF1c2VkO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uUGxheSgpIHtcbiAgICBfaW5pdGlhbFBsYXkgPSBmYWxzZTtcbiAgICBfdXNlclBhdXNlZCA9IGZhbHNlO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpc0luaXRpYWxQbGF5KCkge1xuICAgIHJldHVybiBfaW5pdGlhbFBsYXk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIiksXG4gICAgICBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHNvdXJjZSA9IGZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzb3VyY2VcIikpLFxuICAgICAgc3JjQXR0ciA9IGRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZShcInNyY1wiKSxcbiAgICAgIHR5cGVBdHRyID0gZG9jdW1lbnQuY3JlYXRlQXR0cmlidXRlKFwidHlwZVwiKTtcblxuICAgIF92aWRlby5jbGFzc05hbWUgPSBkYXRhLnZpZGVvLnNjYWxlVG9GaXQgPyBfdmlkZW8uY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCJcbiAgICAgIDogX3ZpZGVvLmNsYXNzTmFtZSArIFwiIG5vLXNjYWxlXCI7XG5cbiAgICAvLyBzZXQgaW5pdGlhbCB2b2x1bWUgb24gPHZpZGVvPlxuICAgIF92aWRlby52b2x1bWUgPSBkYXRhLnZpZGVvLnZvbHVtZSAvIDEwMDtcblxuICAgIC8vIHNldCB0aGUgXCJ0eXBlXCIgYXR0cmlidXRlIG9uIDxzb3VyY2U+XG4gICAgdHlwZUF0dHIudmFsdWUgPSBcInZpZGVvL1wiICsgX2dldFZpZGVvRmlsZVR5cGUoKTtcbiAgICBzb3VyY2Uuc2V0QXR0cmlidXRlTm9kZSh0eXBlQXR0cik7XG5cbiAgICAvLyB2aWRlbyBldmVudHNcbiAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZGRhdGFcIiwgX29uTG9hZGVkRGF0YSwgZmFsc2UpO1xuICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKFwiY2FucGxheVwiLCBfb25DYW5QbGF5LCBmYWxzZSk7XG4gICAgX3ZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCBfb25FbmRlZCwgZmFsc2UpO1xuICAgIF92aWRlby5hZGRFdmVudExpc3RlbmVyKFwicGF1c2VcIiwgX29uUGF1c2UsIGZhbHNlKTtcbiAgICBfdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIiwgX29uUGxheSwgZmFsc2UpO1xuXG4gICAgaWYgKE9iamVjdC5rZXlzKGRhdGEudmlkZW9TdG9yYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIE5vbiBzdG9yYWdlIFVSTFxuICAgICAgc3JjQXR0ci52YWx1ZSA9IGRhdGEudXJsO1xuICAgICAgc291cmNlLnNldEF0dHJpYnV0ZU5vZGUoc3JjQXR0cik7XG4gICAgICBfdmlkZW8uYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJpc2UgU3RvcmFnZVxuICAgICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHNyY0F0dHIudmFsdWUgPSBlLmRldGFpbFswXTtcbiAgICAgICAgc291cmNlLnNldEF0dHJpYnV0ZU5vZGUoc3JjQXR0cik7XG4gICAgICAgIF92aWRlby5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICB9KTtcblxuICAgICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS52aWRlb1N0b3JhZ2UuZm9sZGVyKTtcbiAgICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS52aWRlb1N0b3JhZ2UuZmlsZU5hbWUpO1xuICAgICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS52aWRlb1N0b3JhZ2UuY29tcGFueUlkKTtcbiAgICAgIHN0b3JhZ2UuZ28oKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcbiAgICBfdmlkZW8ucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG4gICAgX2luaXRpYWxQbGF5ID0gZmFsc2U7XG4gICAgX3ZpZXdlclBhdXNlZCA9IGZhbHNlO1xuICAgIF92aWRlby5wbGF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiB1c2VyUGF1c2VkKCkge1xuICAgIHJldHVybiBfdXNlclBhdXNlZDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpc0luaXRpYWxQbGF5XCI6IGlzSW5pdGlhbFBsYXksXG4gICAgXCJpbml0XCI6IGluaXQsXG4gICAgXCJwYXVzZVwiOiBwYXVzZSxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInVzZXJQYXVzZWRcIjogdXNlclBhdXNlZFxuICB9O1xufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIFJpc2VWaXNpb24gKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5zdG9wKCk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRpdGlvbmFsUGFyYW1zKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5zZXRBZGRpdGlvbmFsUGFyYW1zKEpTT04ucGFyc2UodmFsdWVzWzBdKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wbGF5X1wiICsgaWQsIHBsYXkpO1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGF1c2VfXCIgKyBpZCwgcGF1c2UpO1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcblxuICB9XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTInXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9