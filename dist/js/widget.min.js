var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,i){var n=null;e.event?(n=e,n.file_url&&(n.file_format=t(n.file_url)),n.company_id=l,n.display_id=a,d&&(n.version=d),i(n)):i(n)}function i(){var e=new Date,i=e.getUTCFullYear(),t=e.getUTCMonth()+1,n=e.getUTCDate();return 10>t&&(t="0"+t),10>n&&(n="0"+n),i+t+n}function t(e){var i,t=/[?#&]/;return e&&"string"==typeof e?(i=e.substr(e.lastIndexOf(".")+1),t.test(i)&&(i=i.substr(0,-1!==i.indexOf("?")?i.indexOf("?"):i.length),i=i.substr(0,-1!==i.indexOf("#")?i.indexOf("#"):i.length),i=i.substr(0,-1!==i.indexOf("&")?i.indexOf("&"):i.length)),i.toLowerCase()):null}function n(e){var t={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:i(),rows:[{insertId:""}]},n=JSON.parse(JSON.stringify(t));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(e)),n.rows[0].json.ts=(new Date).toISOString(),n}function o(i,t){e(t,function(e){null!==e&&RiseVision.Common.Logger.log(i,e)})}function s(e,i){l=e,a=i}function r(e){d=e}var a="",l="",d=null;return{getInsertData:n,getFileFormat:t,logEvent:o,setIds:s,setVersion:r}}(),RiseVision.Common.Logger=function(e){"use strict";function i(e){var i=new XMLHttpRequest;return new Date-d<358e4?e({}):(i.open("POST",o,!0),i.onloadend=function(){var t=JSON.parse(i.response);e({token:t.access_token,refreshedAt:new Date})},i.send(),void 0)}function t(e){return r&&l===e}function n(n,o){function c(i){var t,r,a=new XMLHttpRequest;r=s.replace("TABLE_ID",n),d=i.refreshedAt||d,u=i.token||u,t=e.getInsertData(o),a.open("POST",r,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(t))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&t(o.event)))return r=!0,l=o.event,setTimeout(function(){r=!1},a),i(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",s="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",r=!1,a=1e3,l="",d=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,i){var t="font-family: "+decodeURIComponent(i.font.family).replace(/'/g,"")+"; ",n="color: "+(i.color?i.color:i.forecolor)+"; ",o="font-size: "+(-1===i.size.indexOf("px")?i.size+"px; ":i.size+"; "),s="font-weight: "+(i.bold?"bold":"normal")+"; ",r="font-style: "+(i.italic?"italic":"normal")+"; ",a="text-decoration: "+(i.underline?"underline":"none")+"; ",l="background-color: "+(i.highlightColor?i.highlightColor:i.backcolor)+";";return"."+e+" {"+t+n+o+s+r+a+l+"}"}function i(e){for(var i=document.createElement("style"),t=0,n=e.length;n>t;t++)i.appendChild(document.createTextNode(e[t]));document.head.appendChild(i)}function t(t,s){function r(){s&&"function"==typeof s&&s()}function a(){r()}var l=null,d=[],u=[],c=[];if(!t||0===t.length)return r(),void 0;t.forEach(function(t){t.class&&t.fontStyle&&i([e(t.class,t.fontStyle)])});for(var f=0;f<t.length;f++)t[f].fontStyle&&t[f].fontStyle.font.type&&"google"===t[f].fontStyle.font.type&&(l=t[f].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),d.push(l));for(f=0;f<t.length;f++)t[f].fontStyle&&t[f].fontStyle.font.type&&"custom"===t[f].fontStyle.font.type&&(u.push(decodeURIComponent(t[f].fontStyle.font.family).replace(/'/g,"")),c.push(t[f].fontStyle.font.url.replace(/'/g,"\\'")));if(0===d.length&&0===u.length)r();else{for(var g=0;g<u.length;g+=1)n(u[g],c[g]);d.length>0?o(d,a):r()}}function n(e,i,t){var n=null,o="font-family: "+e+"; src: url('"+i+"');";t=t||document,n=t.styleSheets[0],null!==n&&n.addRule("@font-face",o)}function o(e,i){WebFont.load({google:{families:e},active:function(){i&&"function"==typeof i&&i()},inactive:function(){i&&"function"==typeof i&&i()},timeout:2e3})}function s(e){for(var i=e.length,t=[],n=0;i>n;n++)t[n]=new Image,t[n].src=e[n]}function r(e){for(var i,t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++)if(i=n[o].split("="),i[0]==e)return decodeURIComponent(i[1]);return""}function a(e){var i="";switch(e){case 404:i="The file does not exist or cannot be accessed.";break;case 507:i="There is not enough disk space to save the file on Rise Cache.";break;default:i="There was a problem retrieving the file from Rise Cache."}return i}function l(e){var i=document.createElement("div");return i.innerHTML=e,i.textContent}function d(e,i){var t=new XMLHttpRequest;if(e&&i&&"function"==typeof i){t.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{t.send(),i(t.status>=200&&t.status<304)}catch(n){i(!1)}}}function u(){var e=25,i=navigator.userAgent.match(/Chrome\/(\S+)/),t=i?i[1]:0;return t&&(t=parseInt(t.substring(0,t.indexOf("."))),e>=t)?!0:!1}return{getQueryParameter:r,getFontCssStyle:e,addCSSRules:i,loadFonts:t,loadCustomFont:n,loadGoogleFonts:o,preloadImages:s,getRiseCacheErrorMessage:a,unescapeHTML:l,hasInternetConnection:d,isLegacy:u}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var i=new XMLHttpRequest,t=this;e&&"function"==typeof e&&(a?i.open("GET",o,!0):i.open("GET",o+"ping?callback=_",!0),i.onreadystatechange=function(){try{if(4===i.readyState)if(s=!0,200===i.status)r=!0,e(!0,i.responseText);else{if(404===i.status)return a=!0,t.ping(e);console.debug("Rise Cache is not running"),r=!1,e(!1,null)}}catch(n){console.debug("Caught exception: ",n.description)}},i.send())}function i(e,i,t){function n(){var i,n,s;r?i=t?o+"?url="+encodeURIComponent(e):o+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):t?i=e:(n=e.split("?"),s=1===n.length?"?":"&",i=e+s+"cb="+(new Date).getTime()),a("HEAD",i)}function a(e,t){var n=new XMLHttpRequest,o={xhr:n,url:t};r?(n.open(e,t,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?i(o):"HEAD"===e?a("GET",t):i(o,new Error("The request failed with status code: "+s))}),n.send()):i(o)}if(e&&i&&"function"==typeof i)return s?n():this.ping(n)}function t(e){return e&&"function"==typeof e?s?(e(r),void 0):this.ping(function(){e(r)}):void 0}function n(e){return e&&"function"==typeof e?s?(e(a),void 0):this.ping(function(){e(a)}):void 0}var o="//localhost:9494/",s=!1,r=!1,a=!1;return{getFile:i,isRiseCacheRunning:t,isV2Running:n,ping:e}}();var version="1.1.0";"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e,i){"use strict";function t(){i.rpc.call("","rsevent_done",null,S.getString("id")),null!==k&&u(k,!0),u({event:"done"},!1)}function n(){i.rpc.call("","rsevent_ready",null,S.getString("id"),!0,!0,!0,!0,!0)}function o(){clearTimeout(G),G=null}function s(){o(),G=setTimeout(function(){t()},5e3)}function r(){if(P&&P.length>0){if("file"===b)return P[0];if("folder"===b&&U)return P[U]}return null}function a(){return D}function l(){return q}function d(e,i){M=!0,D="undefined"!=typeof i,x.show(e),U=null,N||s()}function u(e,i){i&&(k=e),e.file_url||(e.file_url=r()),RiseVision.Common.LoggerUtils.logEvent(m(),e)}function c(e){"file"===b?P[0]=e:"folder"===b&&(P=e),H=!1,x.hide(),N||v()}function f(e){"file"===b?P[0]=e:"folder"===b&&(P=e),A&&A.update(P),M=!1,q=!1,D=!1,H=!1,k=null}function g(e){H=!0,x.show(e),U=null,N||s()}function p(){N=!0,o(),A&&(F?A.pause():(U=null,A.reset()))}function v(){return T&&(T=!1,u({event:"configuration",event_details:I},!1)),N=!1,u({event:"play"},!1),M?(s(),void 0):H?("file"===b&&L&&L.retry(),void 0):(A?(x.hide(),A.play()):P&&P.length>0&&(A=new RiseVision.Video.Player(C,b),A.init(P)),void 0)}function m(){return"video_v2_events"}function h(){U=null,t()}function V(){x.hide(),!N&&A&&A.play()}function R(e){U=e}function y(e,t){var o;C=_.clone(e),b=t,S=new i.Prefs,document.getElementById("container").style.width=S.getInt("rsW")+"px",document.getElementById("container").style.height=S.getInt("rsH")+"px",C.width=S.getInt("rsW"),C.height=S.getInt("rsH"),C.video.hasOwnProperty("resume")&&(F=C.video.resume),x=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),RiseVision.Common.Utilities.isLegacy()?d("This version of Video Widget is not supported on this version of Rise Player. Please use the latest Rise Player version available at https://help.risevision.com/user/create-a-display"):(x.show("Please wait while your video is downloaded."),"file"===b?(o=0!==Object.keys(C.storage).length,o?(I="storage file",L=new RiseVision.Video.StorageFile(C),L.init()):(I="custom",O=new RiseVision.Video.NonStorage(C),O.init())):"folder"===b&&(I="storage folder",L=new RiseVision.Video.StorageFolder(C),L.init())),n()}function E(e){var i=null,t={},n="Sorry, there was a problem playing the video.",o="Error loading media: File could not be played",s="Error loading YouTube: Video could not be played",r="Error loading player: No media sources found",a="Error loading playlist: No playable sources found",l="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.",c="The format of that video is not supported";e&&(e.type&&e.message?i=e.type+" - "+e.message:e.type?i=e.type:e.message&&(i=e.message),e.message&&(e.message===o||e.message===s?n=l:(e.message===r||e.message===a)&&(n=c))),t.event="player error",t.event_details=i,q=!0,u(t,!0),d(n)}function w(){p()}var C,b,T=!0,I=null,S=null,L=null,O=null,x=null,A=null,N=!0,F=!0,P=[],U=null,k=null,G=null,M=!1,D=!1,q=!1,H=!1;return{getTableName:m,hasPlayerError:l,hasStorageError:a,logEvent:u,onFileInit:c,onFileRefresh:f,onFileUnavailable:g,pause:p,play:v,setAdditionalParams:y,showError:d,playerEnded:h,playerReady:V,playerError:E,playerItemChange:R,stop:w}}(window,gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.PlayerUtils=function(){"use strict";function e(e){for(var i=[],t=0;t<e.length;t+=1)i.push({file:e[t],type:this.getVideoFileType(e[t])});return i}function i(e){var i,t=[".mp4",".webm"],n=e.toLowerCase(),o=null;for(i=0;i<=t.length;i+=1)if(-1!==n.indexOf(t[i])){o=t[i].substr(t[i].lastIndexOf(".")+1);break}return o}return{getPlaylist:e,getVideoFileType:i}}();var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function i(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(n?(n=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Video.onFileRefresh(e.detail.url):(RiseVision.Video.hasStorageError()||RiseVision.Video.hasPlayerError())&&RiseVision.Video.onFileRefresh(e.detail.url)))}),i.addEventListener("rise-storage-api-error",function(e){var i={event:"storage api error",event_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.")}),i.addEventListener("rise-storage-no-file",function(e){var i={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),i.addEventListener("rise-storage-file-throttled",function(e){var i={event:"storage file throttled",file_url:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),i.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),i.addEventListener("rise-storage-subscription-error",function(e){var i={event:"storage subscription error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0)}),i.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),i.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Video.logEvent(i,!0);var t=0;e.detail.error.message&&(t=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var n=RiseVision.Common.Utilities.getRiseCacheErrorMessage(t);RiseVision.Video.showError(n)}),i.addEventListener("rise-cache-not-running",function(e){var i={event:"rise cache not running",event_details:e.detail&&e.detail.error?e.detail.error.message:""};RiseVision.Video.logEvent(i,!0)}),i.addEventListener("rise-cache-file-unavailable",function(){RiseVision.Video.onFileUnavailable("File is downloading")}),i.setAttribute("folder",e.storage.folder),i.setAttribute("fileName",e.storage.fileName),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("env",config.STORAGE_ENV),i.go())}function t(){var e=document.getElementById("videoStorage");e&&e.go()}var n=!0;return{init:i,retry:t}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function i(){return _.pluck(l,"url")}function t(e){return _.find(l,function(i){return e.name===i.name})}function n(e){var i=t(e);i&&l.splice(l.indexOf(i),1)}function o(e){var i=t(e);i&&(i.url=e.url)}function s(e){var i=t(e);i||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function r(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){var t=e.detail;if(t.added&&(s(t),a))return a=!1,RiseVision.Video.onFileInit(i()),void 0;if(t.hasOwnProperty("changed"))if(t.changed)o(t);else if(!RiseVision.Video.hasStorageError()&&!RiseVision.Video.hasPlayerError())return;t.deleted&&n(t),RiseVision.Video.onFileRefresh(i())}),t.addEventListener("rise-storage-api-error",function(e){var i={event:"storage api error",event_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),t.addEventListener("rise-storage-no-folder",function(e){var i={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected folder does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-folder-invalid",function(){var e={event:"storage folder format(s) invalid"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any supported video formats.")}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-subscription-error",function(e){var i={event:"storage subscription error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0)}),t.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Video.logEvent(i,!0);var t=0;e.detail.error.message&&(t=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var n=RiseVision.Common.Utilities.getRiseCacheErrorMessage(t);RiseVision.Video.showError(n)}),t.addEventListener("rise-cache-not-running",function(e){var i={event:"rise cache not running",event_details:e.detail&&e.detail.error?e.detail.error.message:""};RiseVision.Video.logEvent(i,!0)}),t.setAttribute("fileType","video"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go())}var a=!0,l=[];return{init:r}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function i(e){o.getFile(l,function(e,i){if(i){RiseVision.Video.logEvent({event:"non-storage error",event_details:i.message,file_url:e.url},!0);var n=0;i.message&&(n=+i.message.substring(i.message.indexOf(":")+2));var o=RiseVision.Common.Utilities.getRiseCacheErrorMessage(n);RiseVision.Video.showError(o)}else a?(a=!1,RiseVision.Video.onFileInit(e.url),t()):RiseVision.Video.onFileRefresh(e.url)},e)}function t(){null===r&&(r=setInterval(function(){i(!1)},s))}function n(){l=e.url&&""!==e.url?e.url:e.selector.url,i(!0)}var o=RiseVision.Common.RiseCache,s=9e5,r=null,a=!0,l="";return{init:n}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.Player=function(e){"use strict";function i(){RiseVision.Video.playerEnded()}function t(){V||(clearTimeout(R),R=setTimeout(function(){"PLAYING"!==m.getState().toUpperCase()&&m.play()},1e3*v))}function n(e){RiseVision.Video.playerItemChange(e)}function o(e){e&&RiseVision.Video.playerError({type:"video",message:e.message})}function s(e){e&&RiseVision.Video.playerError({type:"setup",message:e.message})}function r(){m.on("setupError",function(e){s(e)}),m.on("ready",function(){m.on("playlistComplete",function(){i()}),m.on("playlistItem",function(e){n(e.index)}),m.on("error",function(e){o(e)}),m.setVolume(e.video.volume),e.video.controls&&v>1&&m.on("pause",function(){t()}),RiseVision.Video.playerReady()})}function a(i){return{controls:e.video.controls,height:e.height,playlist:h.getPlaylist(i),skin:{name:"rise"},stretching:p,width:e.width}}function l(i){m=jwplayer("player"),y=i,p=e.video.scaleToFit?"uniform":"none",g=e.video.controls?e.video.autoplay:!0,e.video.pause?(e.video.pause="string"==typeof e.video.pause?parseInt(e.video.pause,10):e.video.pause,v=isNaN(e.video.pause)?0:e.video.pause):v=0,m.setup(a(i)),r()}function d(){V=!1,E&&(E=!1,m.load(h.getPlaylist(y))),g&&m.play()}function u(){V=!0,clearTimeout(R),"PLAYING"===m.getState().toUpperCase()&&m.pause()}function c(){function e(){m.off("play",e),m.pause()}function i(){m.off("seeked",i),m.pause()}u(),"COMPLETE"!==m.getState().toUpperCase()&&setTimeout(function(){0!==m.getPlaylistIndex()?(m.on("play",e),m.playlistItem(0)):(m.on("seeked",i),m.seek(0))},100)}function f(e){y=e,E=!0}var g,p,v,m=null,h=RiseVision.Video.PlayerUtils,V=!1,R=null,y=null,E=!1;return{init:l,pause:u,play:d,reset:c,update:f}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,i){"use strict";function t(){try{i.style.height=e.style.height}catch(t){console.warn("Can't initialize Message - ",t.message)}}function n(){if(s){for(;i.firstChild;)i.removeChild(i.firstChild);i.style.display="none",e.style.display="block",s=!1}}function o(t){var n,o=document.createDocumentFragment();s?(n=i.querySelector(".message"),n.innerHTML=t):(e.style.display="none",i.style.display="block",n=document.createElement("p"),n.innerHTML=t,n.setAttribute("class","message"),o.appendChild(n),i.appendChild(o),s=!0)}var s=!1;return t(),{hide:n,show:o}},function(e,i){"use strict";function t(e,i){var t=null,n="",o="",s="";Array.isArray(e)&&e.length>0&&Array.isArray(i)&&i.length>0&&("companyId"===e[0]&&(o=i[0]),"displayId"===e[1]&&(s=i[1]?i[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,s),RiseVision.Common.LoggerUtils.setVersion(version),"additionalParams"===e[2]&&(t=JSON.parse(i[2]),n=0!==Object.keys(t.storage).length?t.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(t,n)))}function n(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function s(){RiseVision.Video.stop()}function r(){e.removeEventListener("WebComponentsReady",r),l&&""!==l&&(i.rpc.register("rscmd_play_"+l,n),i.rpc.register("rscmd_pause_"+l,o),i.rpc.register("rscmd_stop_"+l,s),i.rpc.register("rsparam_set_"+l,t),i.rpc.call("","rsparam_get",null,l,["companyId","displayId","additionalParams"]))}var a=new i.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",r),RiseVision.Common.RiseCache.isV2Running(function(e){var i=document.createDocumentFragment(),t=document.createElement("link"),n="components/"+(e?"rise-storage-v2":"rise-storage")+"/rise-storage.html",o=document.createElement("rise-storage");t.setAttribute("rel","import"),t.setAttribute("href",n),document.getElementsByTagName("head")[0].appendChild(t),o.setAttribute("id","videoStorage"),o.setAttribute("refresh",5),i.appendChild(o),document.body.appendChild(i);var s=document.createElement("script");s.src="components/webcomponentsjs/webcomponents-lite.min.js",document.getElementsByTagName("head")[0].appendChild(s)})}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SRV9VUkwiLCJSaXNlVmlzaW9uIiwiQ29tbW9uIiwiTG9nZ2VyVXRpbHMiLCJnZXRFdmVudFBhcmFtcyIsInBhcmFtcyIsImNiIiwianNvbiIsImV2ZW50IiwiZmlsZV91cmwiLCJmaWxlX2Zvcm1hdCIsImdldEZpbGVGb3JtYXQiLCJjb21wYW55X2lkIiwiY29tcGFueUlkIiwiZGlzcGxheV9pZCIsImRpc3BsYXlJZCIsInZlcnNpb24iLCJnZXRTdWZmaXgiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJkYXkiLCJnZXRVVENEYXRlIiwidXJsIiwic3RyIiwiaGFzUGFyYW1zIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJ0ZXN0IiwiaW5kZXhPZiIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiZ2V0SW5zZXJ0RGF0YSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsImtpbmQiLCJza2lwSW52YWxpZFJvd3MiLCJpZ25vcmVVbmtub3duVmFsdWVzIiwidGVtcGxhdGVTdWZmaXgiLCJyb3dzIiwiaW5zZXJ0SWQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ0cyIsInRvSVNPU3RyaW5nIiwibG9nRXZlbnQiLCJ0YWJsZSIsIkxvZ2dlciIsImxvZyIsInNldElkcyIsImNvbXBhbnkiLCJkaXNwbGF5Iiwic2V0VmVyc2lvbiIsInZhbHVlIiwidXRpbHMiLCJyZWZyZXNoVG9rZW4iLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInJlZnJlc2hEYXRlIiwib3BlbiIsIlJFRlJFU0hfVVJMIiwib25sb2FkZW5kIiwicmVzcCIsInJlc3BvbnNlIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoZWRBdCIsInNlbmQiLCJpc1Rocm90dGxlZCIsInRocm90dGxlIiwibGFzdEV2ZW50IiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInJlcGxhY2UiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiaGFzT3duUHJvcGVydHkiLCJzZXRUaW1lb3V0IiwidGhyb3R0bGVEZWxheSIsIlV0aWxpdGllcyIsImdldEZvbnRDc3NTdHlsZSIsImNsYXNzTmFtZSIsImZvbnRPYmoiLCJmYW1pbHkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJmb250IiwiY29sb3IiLCJmb3JlY29sb3IiLCJzaXplIiwid2VpZ2h0IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImhpZ2hsaWdodCIsImhpZ2hsaWdodENvbG9yIiwiYmFja2NvbG9yIiwiYWRkQ1NTUnVsZXMiLCJydWxlcyIsInN0eWxlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJoZWFkIiwibG9hZEZvbnRzIiwic2V0dGluZ3MiLCJjYWxsYmFjayIsIm9uR29vZ2xlRm9udHNMb2FkZWQiLCJmYW1pbGllcyIsImdvb2dsZUZhbWlsaWVzIiwiY3VzdG9tRmFtaWxpZXMiLCJjdXN0b21VcmxzIiwiZm9yRWFjaCIsIml0ZW0iLCJjbGFzcyIsImZvbnRTdHlsZSIsInR5cGUiLCJzcGxpdCIsInB1c2giLCJqIiwibG9hZEN1c3RvbUZvbnQiLCJsb2FkR29vZ2xlRm9udHMiLCJjb250ZW50RG9jIiwic2hlZXQiLCJydWxlIiwic3R5bGVTaGVldHMiLCJhZGRSdWxlIiwiV2ViRm9udCIsImxvYWQiLCJnb29nbGUiLCJhY3RpdmUiLCJpbmFjdGl2ZSIsInRpbWVvdXQiLCJwcmVsb2FkSW1hZ2VzIiwidXJscyIsImltYWdlcyIsIkltYWdlIiwic3JjIiwiZ2V0UXVlcnlQYXJhbWV0ZXIiLCJwYXJhbSIsInBhaXIiLCJxdWVyeSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsImdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJ1bmVzY2FwZUhUTUwiLCJodG1sIiwiZGl2IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJoYXNJbnRlcm5ldENvbm5lY3Rpb24iLCJmaWxlUGF0aCIsImdldFRpbWUiLCJzdGF0dXMiLCJlIiwiaXNMZWdhY3kiLCJsZWdhY3lWZXJzaW9uIiwibWF0Y2giLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJzZUludCIsIlJpc2VDYWNoZSIsInBpbmciLCJyIiwic2VsZiIsInRoaXMiLCJfaXNWMlJ1bm5pbmciLCJCQVNFX0NBQ0hFX1VSTCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJfcGluZ1JlY2VpdmVkIiwiX2lzQ2FjaGVSdW5uaW5nIiwicmVzcG9uc2VUZXh0IiwiY29uc29sZSIsImRlYnVnIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsInNlcGFyYXRvciIsImVuY29kZVVSSUNvbXBvbmVudCIsIm1ha2VSZXF1ZXN0IiwibWV0aG9kIiwicmVxdWVzdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJFcnJvciIsImlzUmlzZUNhY2hlUnVubmluZyIsImlzVjJSdW5uaW5nIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJWaWRlbyIsImdhZGdldHMiLCJfZG9uZSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfZXJyb3JMb2ciLCJfcmVhZHkiLCJfY2xlYXJFcnJvclRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiX2Vycm9yVGltZXIiLCJfc3RhcnRFcnJvclRpbWVyIiwiX2dldEN1cnJlbnRGaWxlIiwiX2N1cnJlbnRGaWxlcyIsIl9tb2RlIiwiX2N1cnJlbnRQbGF5bGlzdEluZGV4IiwiaGFzU3RvcmFnZUVycm9yIiwiX3N0b3JhZ2VFcnJvckZsYWciLCJoYXNQbGF5ZXJFcnJvciIsIl9wbGF5ZXJFcnJvckZsYWciLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiaXNTdG9yYWdlRXJyb3IiLCJfZXJyb3JGbGFnIiwiX21lc3NhZ2UiLCJzaG93IiwiX3ZpZXdlclBhdXNlZCIsImlzRXJyb3IiLCJnZXRUYWJsZU5hbWUiLCJvbkZpbGVJbml0IiwiX3VuYXZhaWxhYmxlRmxhZyIsImhpZGUiLCJwbGF5Iiwib25GaWxlUmVmcmVzaCIsIl9wbGF5ZXIiLCJ1cGRhdGUiLCJvbkZpbGVVbmF2YWlsYWJsZSIsInBhdXNlIiwiX3Jlc3VtZSIsInJlc2V0IiwiX2lzTG9hZGluZyIsImV2ZW50X2RldGFpbHMiLCJfY29uZmlnRGV0YWlscyIsIl9zdG9yYWdlIiwicmV0cnkiLCJQbGF5ZXIiLCJfYWRkaXRpb25hbFBhcmFtcyIsImluaXQiLCJwbGF5ZXJFbmRlZCIsInBsYXllclJlYWR5IiwicGxheWVySXRlbUNoYW5nZSIsImluZGV4Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsIm1vZGUiLCJpc1N0b3JhZ2VGaWxlIiwiXyIsImNsb25lIiwiUHJlZnMiLCJnZXRFbGVtZW50QnlJZCIsIndpZHRoIiwiZ2V0SW50IiwiaGVpZ2h0IiwidmlkZW8iLCJyZXN1bWUiLCJNZXNzYWdlIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JhZ2UiLCJTdG9yYWdlRmlsZSIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJwbGF5ZXJFcnJvciIsImVycm9yIiwiZGV0YWlscyIsIk1FRElBX0VSUk9SIiwiWU9VVFVCRV9FUlJPUiIsIlBMQVlFUl9FUlJPUiIsIlBMQVlMSVNUX0VSUk9SIiwiRU5DT0RJTkdfTUVTU0FHRSIsIkZPUk1BVF9NRVNTQUdFIiwic3RvcCIsIlBsYXllclV0aWxzIiwiZ2V0UGxheWxpc3QiLCJsaXN0IiwicGxheWxpc3QiLCJmaWxlIiwiZ2V0VmlkZW9GaWxlVHlwZSIsImV4dGVuc2lvbnMiLCJ1cmxMb3dlcmNhc2UiLCJkZXRhaWwiLCJfaW5pdGlhbExvYWQiLCJjaGFuZ2VkIiwiY29kZSIsImN1cnJlbnRUYXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImdvIiwiX2dldFVybHMiLCJwbHVjayIsIl9maWxlcyIsIl9nZXRFeGlzdGluZ0ZpbGUiLCJmaW5kIiwiZiIsIm5hbWUiLCJfZGVsZXRlRmlsZSIsImV4aXN0aW5nIiwic3BsaWNlIiwiX2NoYW5nZUZpbGUiLCJfYWRkRmlsZSIsInNsaWNlIiwic29ydGVkSW5kZXgiLCJhZGRlZCIsImRlbGV0ZWQiLCJfZ2V0RmlsZSIsIm9taXRDYWNoZUJ1c3RlciIsInJpc2VDYWNoZSIsIl91cmwiLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJzZWxlY3RvciIsIl9vbkNvbXBsZXRlIiwiX29uUGF1c2UiLCJfcGF1c2VUaW1lciIsIl9wbGF5ZXJJbnN0YW5jZSIsImdldFN0YXRlIiwiX3BhdXNlRHVyYXRpb24iLCJfb25QbGF5bGlzdEl0ZW0iLCJfb25QbGF5ZXJFcnJvciIsIl9vblNldHVwRXJyb3IiLCJfY29uZmlndXJlSGFuZGxlcnMiLCJvbiIsInNldFZvbHVtZSIsInZvbHVtZSIsImNvbnRyb2xzIiwiX2dldFNldHVwRGF0YSIsImZpbGVzIiwiX3V0aWxzIiwic2tpbiIsInN0cmV0Y2hpbmciLCJfc3RyZXRjaGluZyIsImp3cGxheWVyIiwiX2F1dG9QbGF5IiwiYXV0b3BsYXkiLCJpc05hTiIsInNldHVwIiwiX3VwZGF0ZVdhaXRpbmciLCJvblBsYXkiLCJvZmYiLCJvblNlZWtlZCIsImdldFBsYXlsaXN0SW5kZXgiLCJwbGF5bGlzdEl0ZW0iLCJzZWVrIiwibWFpbkNvbnRhaW5lciIsIm1lc3NhZ2VDb250YWluZXIiLCJfaW5pdCIsIndhcm4iLCJfYWN0aXZlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb25maWd1cmUiLCJuYW1lcyIsInZhbHVlcyIsImFkZGl0aW9uYWxQYXJhbXMiLCJBcnJheSIsImlzQXJyYXkiLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWQiLCJyZWdpc3RlciIsInByZWZzIiwib25jb250ZXh0bWVudSIsImlzVjIiLCJsaW5rIiwiaHJlZiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYm9keSIsIndlYmNvbXBvbmVudHMiLCJfZ2FxIiwiZ2EiLCJhc3luYyIsInByb3RvY29sIiwicyIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLHVCQUNGQyxjQUFlLGlCQUNmQyxpQkFBa0IsNEVBQ2xCQyxxQkFBc0IsMkJBQ3RCQyxxQkFBc0IscUVBQ3RCQyxVQUFXLDZDQUlUQyxXQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9DLFlBQWMsV0FDOUIsWUFXQSxTQUFTQyxHQUFlQyxFQUFRQyxHQUM5QixHQUFJQyxHQUFPLElBR1BGLEdBQU9HLE9BQ1RELEVBQU9GLEVBRUhFLEVBQUtFLFdBQ1BGLEVBQUtHLFlBQWNDLEVBQWNKLEVBQUtFLFdBR3hDRixFQUFLSyxXQUFhQyxFQUNsQk4sRUFBS08sV0FBYUMsRUFFZEMsSUFDRlQsRUFBS1MsUUFBVUEsR0FHakJWLEVBQUdDLElBR0hELEVBQUdDLEdBS1AsUUFBU1UsS0FDUCxHQUFJQyxHQUFPLEdBQUlDLE1BQ2JDLEVBQU9GLEVBQUtHLGlCQUNaQyxFQUFRSixFQUFLSyxjQUFnQixFQUM3QkMsRUFBTU4sRUFBS08sWUFVYixPQVJZLElBQVJILElBQ0ZBLEVBQVEsSUFBTUEsR0FHTixH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QU0sY0FBZSxrQkFDMUIyUSxLQUFLM1EsTUFBTSxtQkFFWCxXQUNFLEdBQUk0USxHQUFLaFMsU0FBU0MsY0FBYyxTQUFXK1IsR0FBRzlRLEtBQU8sa0JBQW1COFEsRUFBR0MsT0FBUSxFQUNuRkQsRUFBR3pQLEtBQU8sVUFBWXZDLFNBQVM2QyxTQUFTcVAsU0FBVyxjQUFnQixjQUFnQiw2QkFDbkYsSUFBSUMsR0FBSW5TLFNBQVM0UixxQkFBcUIsVUFBVSxFQUFJTyxHQUFFQyxXQUFXQyxhQUFhTCxFQUFJRyIsImZpbGUiOiJqcy93aWRnZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXhwb3J0ZWQgV0lER0VUX0NPTU1PTl9DT05GSUcgKi9cbnZhciBXSURHRVRfQ09NTU9OX0NPTkZJRyA9IHtcbiAgQVVUSF9QQVRIX1VSTDogXCJ2MS93aWRnZXQvYXV0aFwiLFxuICBMT0dHRVJfQ0xJRU5UX0lEOiBcIjEwODg1MjcxNDcxMDktNnExbzJ2dGlobjM0MjkycGp0NGNraG1oY2swcmswbzcuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIixcbiAgTE9HR0VSX0NMSUVOVF9TRUNSRVQ6IFwibmxaeXJjUExnNm9Fd085ZjlXZm4yOVdoXCIsXG4gIExPR0dFUl9SRUZSRVNIX1RPS0VOOiBcIjEveHp0NGt3ekUxSDdXOVZuS0I4Y0FhQ3g2emI0RXM0bktFb3FhWUhkVEQxNUlnT3JKRHRkdW42eks2WGlBVENLVFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBXSURHRVRfQ09NTU9OX0NPTkZJRyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyA9IChmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBkaXNwbGF5SWQgPSBcIlwiLFxuICAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgICB2ZXJzaW9uID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuXG4gIC8qIFJldHJpZXZlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLiAqL1xuICBmdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGNiKSB7XG4gICAgdmFyIGpzb24gPSBudWxsO1xuXG4gICAgLy8gZXZlbnQgaXMgcmVxdWlyZWQuXG4gICAgaWYgKHBhcmFtcy5ldmVudCkge1xuICAgICAganNvbiA9IHBhcmFtcztcblxuICAgICAgaWYgKGpzb24uZmlsZV91cmwpIHtcbiAgICAgICAganNvbi5maWxlX2Zvcm1hdCA9IGdldEZpbGVGb3JtYXQoanNvbi5maWxlX3VybCk7XG4gICAgICB9XG5cbiAgICAgIGpzb24uY29tcGFueV9pZCA9IGNvbXBhbnlJZDtcbiAgICAgIGpzb24uZGlzcGxheV9pZCA9IGRpc3BsYXlJZDtcblxuICAgICAgaWYgKHZlcnNpb24pIHtcbiAgICAgICAganNvbi52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIH1cblxuICAgICAgY2IoanNvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2IoanNvbik7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHN1ZmZpeCBmb3IgQlEgdGFibGUgbmFtZS5cbiAgZnVuY3Rpb24gZ2V0U3VmZml4KCkge1xuICAgIHZhciBkYXRlID0gbmV3IERhdGUoKSxcbiAgICAgIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKSArIDEsXG4gICAgICBkYXkgPSBkYXRlLmdldFVUQ0RhdGUoKTtcblxuICAgIGlmIChtb250aCA8IDEwKSB7XG4gICAgICBtb250aCA9IFwiMFwiICsgbW9udGg7XG4gICAgfVxuXG4gICAgaWYgKGRheSA8IDEwKSB7XG4gICAgICBkYXkgPSBcIjBcIiArIGRheTtcbiAgICB9XG5cbiAgICByZXR1cm4geWVhciArIG1vbnRoICsgZGF5O1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRGaWxlRm9ybWF0KHVybCkge1xuICAgIHZhciBoYXNQYXJhbXMgPSAvWz8jJl0vLFxuICAgICAgc3RyO1xuXG4gICAgaWYgKCF1cmwgfHwgdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3RyID0gdXJsLnN1YnN0cih1cmwubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG5cbiAgICAvLyBkb24ndCBpbmNsdWRlIGFueSBwYXJhbXMgYWZ0ZXIgdGhlIGZpbGVuYW1lXG4gICAgaWYgKGhhc1BhcmFtcy50ZXN0KHN0cikpIHtcbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCAsKHN0ci5pbmRleE9mKFwiP1wiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCI/XCIpIDogc3RyLmxlbmd0aCk7XG5cbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCwgKHN0ci5pbmRleE9mKFwiI1wiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCIjXCIpIDogc3RyLmxlbmd0aCk7XG5cbiAgICAgIHN0ciA9IHN0ci5zdWJzdHIoMCwgKHN0ci5pbmRleE9mKFwiJlwiKSAhPT0gLTEpID8gc3RyLmluZGV4T2YoXCImXCIpIDogc3RyLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0ci50b0xvd2VyQ2FzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW5zZXJ0RGF0YShwYXJhbXMpIHtcbiAgICB2YXIgQkFTRV9JTlNFUlRfU0NIRU1BID0ge1xuICAgICAgXCJraW5kXCI6IFwiYmlncXVlcnkjdGFibGVEYXRhSW5zZXJ0QWxsUmVxdWVzdFwiLFxuICAgICAgXCJza2lwSW52YWxpZFJvd3NcIjogZmFsc2UsXG4gICAgICBcImlnbm9yZVVua25vd25WYWx1ZXNcIjogZmFsc2UsXG4gICAgICBcInRlbXBsYXRlU3VmZml4XCI6IGdldFN1ZmZpeCgpLFxuICAgICAgXCJyb3dzXCI6IFt7XG4gICAgICAgIFwiaW5zZXJ0SWRcIjogXCJcIlxuICAgICAgfV1cbiAgICB9LFxuICAgIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEJBU0VfSU5TRVJUX1NDSEVNQSkpO1xuXG4gICAgZGF0YS5yb3dzWzBdLmluc2VydElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLnRvVXBwZXJDYXNlKCk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGRhdGEucm93c1swXS5qc29uLnRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudCh0YWJsZSwgcGFyYW1zKSB7XG4gICAgZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBmdW5jdGlvbihqc29uKSB7XG4gICAgICBpZiAoanNvbiAhPT0gbnVsbCkge1xuICAgICAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIubG9nKHRhYmxlLCBqc29uKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qIFNldCB0aGUgQ29tcGFueSBhbmQgRGlzcGxheSBJRHMuICovXG4gIGZ1bmN0aW9uIHNldElkcyhjb21wYW55LCBkaXNwbGF5KSB7XG4gICAgY29tcGFueUlkID0gY29tcGFueTtcbiAgICBkaXNwbGF5SWQgPSBkaXNwbGF5O1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VmVyc2lvbih2YWx1ZSkge1xuICAgIHZlcnNpb24gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRJbnNlcnREYXRhXCI6IGdldEluc2VydERhdGEsXG4gICAgXCJnZXRGaWxlRm9ybWF0XCI6IGdldEZpbGVGb3JtYXQsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcInNldElkc1wiOiBzZXRJZHMsXG4gICAgXCJzZXRWZXJzaW9uXCI6IHNldFZlcnNpb25cbiAgfTtcbn0pKCk7XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlciA9IChmdW5jdGlvbih1dGlscykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgUkVGUkVTSF9VUkwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbj9jbGllbnRfaWQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX0lEICtcbiAgICAgIFwiJmNsaWVudF9zZWNyZXQ9XCIgKyBXSURHRVRfQ09NTU9OX0NPTkZJRy5MT0dHRVJfQ0xJRU5UX1NFQ1JFVCArXG4gICAgICBcIiZyZWZyZXNoX3Rva2VuPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX1JFRlJFU0hfVE9LRU4gK1xuICAgICAgXCImZ3JhbnRfdHlwZT1yZWZyZXNoX3Rva2VuXCI7XG5cbiAgdmFyIHNlcnZpY2VVcmwgPSBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2JpZ3F1ZXJ5L3YyL3Byb2plY3RzL2NsaWVudC1zaWRlLWV2ZW50cy9kYXRhc2V0cy9XaWRnZXRfRXZlbnRzL3RhYmxlcy9UQUJMRV9JRC9pbnNlcnRBbGxcIixcbiAgICB0aHJvdHRsZSA9IGZhbHNlLFxuICAgIHRocm90dGxlRGVsYXkgPSAxMDAwLFxuICAgIGxhc3RFdmVudCA9IFwiXCIsXG4gICAgcmVmcmVzaERhdGUgPSAwLFxuICAgIHRva2VuID0gXCJcIjtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiByZWZyZXNoVG9rZW4oY2IpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAobmV3IERhdGUoKSAtIHJlZnJlc2hEYXRlIDwgMzU4MDAwMCkge1xuICAgICAgcmV0dXJuIGNiKHt9KTtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIlBPU1RcIiwgUkVGUkVTSF9VUkwsIHRydWUpO1xuICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXNwID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpO1xuXG4gICAgICBjYih7IHRva2VuOiByZXNwLmFjY2Vzc190b2tlbiwgcmVmcmVzaGVkQXQ6IG5ldyBEYXRlKCkgfSk7XG4gICAgfTtcblxuICAgIHhoci5zZW5kKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpc1Rocm90dGxlZChldmVudCkge1xuICAgIHJldHVybiB0aHJvdHRsZSAmJiAobGFzdEV2ZW50ID09PSBldmVudCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGxvZyh0YWJsZU5hbWUsIHBhcmFtcykge1xuICAgIGlmICghdGFibGVOYW1lIHx8ICFwYXJhbXMgfHwgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmICFwYXJhbXMuZXZlbnQpIHx8XG4gICAgICAocGFyYW1zLmhhc093blByb3BlcnR5KFwiZXZlbnRcIikgJiYgaXNUaHJvdHRsZWQocGFyYW1zLmV2ZW50KSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdHRsZSA9IHRydWU7XG4gICAgbGFzdEV2ZW50ID0gcGFyYW1zLmV2ZW50O1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdHRsZSA9IGZhbHNlO1xuICAgIH0sIHRocm90dGxlRGVsYXkpO1xuXG4gICAgZnVuY3Rpb24gaW5zZXJ0V2l0aFRva2VuKHJlZnJlc2hEYXRhKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIGluc2VydERhdGEsIHVybDtcblxuICAgICAgdXJsID0gc2VydmljZVVybC5yZXBsYWNlKFwiVEFCTEVfSURcIiwgdGFibGVOYW1lKTtcbiAgICAgIHJlZnJlc2hEYXRlID0gcmVmcmVzaERhdGEucmVmcmVzaGVkQXQgfHwgcmVmcmVzaERhdGU7XG4gICAgICB0b2tlbiA9IHJlZnJlc2hEYXRhLnRva2VuIHx8IHRva2VuO1xuICAgICAgaW5zZXJ0RGF0YSA9IHV0aWxzLmdldEluc2VydERhdGEocGFyYW1zKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBkYXRhLlxuICAgICAgeGhyLm9wZW4oXCJQT1NUXCIsIHVybCwgdHJ1ZSk7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIiwgXCJCZWFyZXIgXCIgKyB0b2tlbik7XG5cbiAgICAgIGlmIChwYXJhbXMuY2IgJiYgdHlwZW9mIHBhcmFtcy5jYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHhoci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBwYXJhbXMuY2IoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoaW5zZXJ0RGF0YSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZWZyZXNoVG9rZW4oaW5zZXJ0V2l0aFRva2VuKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJsb2dcIjogbG9nXG4gIH07XG59KShSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscyk7XG4vKiBnbG9iYWwgV2ViRm9udCAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcyA9IChmdW5jdGlvbigpIHtcblxuICBmdW5jdGlvbiBnZXRGb250Q3NzU3R5bGUoY2xhc3NOYW1lLCBmb250T2JqKSB7XG4gICAgdmFyIGZhbWlseSA9IFwiZm9udC1mYW1pbHk6IFwiICsgZGVjb2RlVVJJQ29tcG9uZW50KGZvbnRPYmouZm9udC5mYW1pbHkpLnJlcGxhY2UoLycvZywgXCJcIikgKyBcIjsgXCI7XG4gICAgdmFyIGNvbG9yID0gXCJjb2xvcjogXCIgKyAoZm9udE9iai5jb2xvciA/IGZvbnRPYmouY29sb3IgOiBmb250T2JqLmZvcmVjb2xvcikgKyBcIjsgXCI7XG4gICAgdmFyIHNpemUgPSBcImZvbnQtc2l6ZTogXCIgKyAoZm9udE9iai5zaXplLmluZGV4T2YoXCJweFwiKSA9PT0gLTEgPyBmb250T2JqLnNpemUgKyBcInB4OyBcIiA6IGZvbnRPYmouc2l6ZSArIFwiOyBcIik7XG4gICAgdmFyIHdlaWdodCA9IFwiZm9udC13ZWlnaHQ6IFwiICsgKGZvbnRPYmouYm9sZCA/IFwiYm9sZFwiIDogXCJub3JtYWxcIikgKyBcIjsgXCI7XG4gICAgdmFyIGl0YWxpYyA9IFwiZm9udC1zdHlsZTogXCIgKyAoZm9udE9iai5pdGFsaWMgPyBcIml0YWxpY1wiIDogXCJub3JtYWxcIikgKyBcIjsgXCI7XG4gICAgdmFyIHVuZGVybGluZSA9IFwidGV4dC1kZWNvcmF0aW9uOiBcIiArIChmb250T2JqLnVuZGVybGluZSA/IFwidW5kZXJsaW5lXCIgOiBcIm5vbmVcIikgKyBcIjsgXCI7XG4gICAgdmFyIGhpZ2hsaWdodCA9IFwiYmFja2dyb3VuZC1jb2xvcjogXCIgKyAoZm9udE9iai5oaWdobGlnaHRDb2xvciA/IGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgOiBmb250T2JqLmJhY2tjb2xvcikgKyBcIjtcIjtcblxuICAgIHJldHVybiBcIi5cIiArIGNsYXNzTmFtZSArIFwiIHtcIiArIGZhbWlseSArIGNvbG9yICsgc2l6ZSArIHdlaWdodCArIGl0YWxpYyArIHVuZGVybGluZSArIGhpZ2hsaWdodCArIFwifVwiO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ1NTUnVsZXMocnVsZXMpIHtcbiAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gcnVsZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHJ1bGVzW2ldKSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICAvKlxuICAgKiBMb2FkcyBHb29nbGUgb3IgY3VzdG9tIGZvbnRzLCBpZiBhcHBsaWNhYmxlLCBhbmQgaW5qZWN0cyBDU1Mgc3R5bGVzXG4gICAqIGludG8gdGhlIGhlYWQgb2YgdGhlIGRvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gICAgYXJyYXkgICAgc2V0dGluZ3MgICAgQXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgZm9ybTpcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbe1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImRhdGVcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiYmxhY2tcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiB7XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHk6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDogXCJBa3JvbmltXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlZlcmRhbmFcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZ29vZ2xlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFwiaHR0cDovL2N1c3RvbS1mb250LXVybFwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0YWxpYzogZmFsc2UsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogXCIyMFwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVybGluZTogZmFsc2VcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgKlxuICAgKiAgICAgICAgICAgb2JqZWN0ICAgY29udGVudERvYyAgICBEb2N1bWVudCBvYmplY3QgaW50byB3aGljaCB0byBpbmplY3Qgc3R5bGVzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBsb2FkIGZvbnRzIChvcHRpb25hbCkuXG4gICAqL1xuICBmdW5jdGlvbiBsb2FkRm9udHMoc2V0dGluZ3MsIGNiKSB7XG4gICAgdmFyIGZhbWlsaWVzID0gbnVsbCxcbiAgICAgIGdvb2dsZUZhbWlsaWVzID0gW10sXG4gICAgICBjdXN0b21GYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tVXJscyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG4gICAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkdvb2dsZUZvbnRzTG9hZGVkKCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBpZiAoIXNldHRpbmdzIHx8IHNldHRpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgY3VzdG9tIGNzcyBjbGFzcyBuYW1lcyBhbmQgYWRkIHJ1bGVzIGlmIHNvXG4gICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5jbGFzcyAmJiBpdGVtLmZvbnRTdHlsZSkge1xuICAgICAgICBhZGRDU1NSdWxlcyhbIGdldEZvbnRDc3NTdHlsZShpdGVtLmNsYXNzLCBpdGVtLmZvbnRTdHlsZSkgXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBHb29nbGUgZm9udHNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldHRpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2V0dGluZ3NbaV0uZm9udFN0eWxlICYmIHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgJiZcbiAgICAgICAgKHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgPT09IFwiZ29vZ2xlXCIpKSB7XG4gICAgICAgIC8vIFJlbW92ZSBmYWxsYmFjayBmb250LlxuICAgICAgICBmYW1pbGllcyA9IHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LmZhbWlseS5zcGxpdChcIixcIilbMF07XG5cbiAgICAgICAgLy8gc3RyaXAgcG9zc2libGUgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBmYW1pbGllcyA9IGZhbWlsaWVzLnJlcGxhY2UoLycvZywgXCJcIik7XG5cbiAgICAgICAgZ29vZ2xlRmFtaWxpZXMucHVzaChmYW1pbGllcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3VzdG9tIGZvbnRzXG4gICAgZm9yIChpID0gMDsgaSA8IHNldHRpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoc2V0dGluZ3NbaV0uZm9udFN0eWxlICYmIHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgJiZcbiAgICAgICAgKHNldHRpbmdzW2ldLmZvbnRTdHlsZS5mb250LnR5cGUgPT09IFwiY3VzdG9tXCIpKSB7XG4gICAgICAgIC8vIGRlY29kZSB2YWx1ZSBhbmQgc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21GYW1pbGllcy5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkpLnJlcGxhY2UoLycvZywgXCJcIikpO1xuICAgICAgICAvLyBzdHJpcCBzaW5nbGUgcXVvdGVzXG4gICAgICAgIGN1c3RvbVVybHMucHVzaChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC51cmwucmVwbGFjZSgvJy9nLCBcIlxcXFwnXCIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID09PSAwICYmIGN1c3RvbUZhbWlsaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBMb2FkIHRoZSBmb250c1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXN0b21GYW1pbGllcy5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICBsb2FkQ3VzdG9tRm9udChjdXN0b21GYW1pbGllc1tqXSwgY3VzdG9tVXJsc1tqXSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChnb29nbGVGYW1pbGllcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGxvYWRHb29nbGVGb250cyhnb29nbGVGYW1pbGllcywgb25Hb29nbGVGb250c0xvYWRlZCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkQ3VzdG9tRm9udChmYW1pbHksIHVybCwgY29udGVudERvYykge1xuICAgIHZhciBzaGVldCA9IG51bGw7XG4gICAgdmFyIHJ1bGUgPSBcImZvbnQtZmFtaWx5OiBcIiArIGZhbWlseSArIFwiOyBcIiArIFwic3JjOiB1cmwoJ1wiICsgdXJsICsgXCInKTtcIjtcblxuICAgIGNvbnRlbnREb2MgPSBjb250ZW50RG9jIHx8IGRvY3VtZW50O1xuXG4gICAgc2hlZXQgPSBjb250ZW50RG9jLnN0eWxlU2hlZXRzWzBdO1xuXG4gICAgaWYgKHNoZWV0ICE9PSBudWxsKSB7XG4gICAgICBzaGVldC5hZGRSdWxlKFwiQGZvbnQtZmFjZVwiLCBydWxlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBsb2FkR29vZ2xlRm9udHMoZmFtaWxpZXMsIGNiKSB7XG4gICAgV2ViRm9udC5sb2FkKHtcbiAgICAgIGdvb2dsZToge1xuICAgICAgICBmYW1pbGllczogZmFtaWxpZXNcbiAgICAgIH0sXG4gICAgICBhY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgaW5hY3RpdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoY2IgJiYgdHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGltZW91dDogMjAwMFxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJlbG9hZEltYWdlcyh1cmxzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHVybHMubGVuZ3RoLFxuICAgICAgaW1hZ2VzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpbWFnZXNbaV0gPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlc1tpXS5zcmMgPSB1cmxzW2ldO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1ldGVyKHBhcmFtKSB7XG4gICAgdmFyIHF1ZXJ5ID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSksXG4gICAgICB2YXJzID0gcXVlcnkuc3BsaXQoXCImXCIpLFxuICAgICAgcGFpcjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFycy5sZW5ndGg7IGkrKykge1xuICAgICAgcGFpciA9IHZhcnNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICBpZiAocGFpclswXSA9PSBwYXJhbSkgeyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKSB7XG4gICAgdmFyIGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgc3dpdGNoIChzdGF0dXNDb2RlKSB7XG4gICAgICBjYXNlIDQwNDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGUgZmlsZSBkb2VzIG5vdCBleGlzdCBvciBjYW5ub3QgYmUgYWNjZXNzZWQuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1MDc6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlcmUgaXMgbm90IGVub3VnaCBkaXNrIHNwYWNlIHRvIHNhdmUgdGhlIGZpbGUgb24gUmlzZSBDYWNoZS5cIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIHdhcyBhIHByb2JsZW0gcmV0cmlldmluZyB0aGUgZmlsZSBmcm9tIFJpc2UgQ2FjaGUuXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZXNjYXBlSFRNTChodG1sKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgIHJldHVybiBkaXYudGV4dENvbnRlbnQ7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNJbnRlcm5ldENvbm5lY3Rpb24oZmlsZVBhdGgsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKCFmaWxlUGF0aCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB4aHIub3BlbihcIkhFQURcIiwgZmlsZVBhdGggKyBcIj9jYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpLCBmYWxzZSk7XG5cbiAgICB0cnkge1xuICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgY2FsbGJhY2soKHhoci5zdGF0dXMgPj0gMjAwICYmIHhoci5zdGF0dXMgPCAzMDQpKTtcblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNhbGxiYWNrKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgY2hyb21lIHZlcnNpb24gaXMgdW5kZXIgYSBjZXJ0YWluIHZlcnNpb25cbiAgICovXG4gIGZ1bmN0aW9uIGlzTGVnYWN5KCkge1xuICAgIHZhciBsZWdhY3lWZXJzaW9uID0gMjU7XG5cbiAgICB2YXIgbWF0Y2ggPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxTKykvKTtcbiAgICB2YXIgdmVyc2lvbiA9IG1hdGNoID8gbWF0Y2hbMV0gOiAwO1xuXG4gICAgaWYgKHZlcnNpb24pIHtcbiAgICAgIHZlcnNpb24gPSBwYXJzZUludCh2ZXJzaW9uLnN1YnN0cmluZygwLHZlcnNpb24uaW5kZXhPZihcIi5cIikpKTtcblxuICAgICAgaWYgKHZlcnNpb24gPD0gbGVnYWN5VmVyc2lvbikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFF1ZXJ5UGFyYW1ldGVyOiBnZXRRdWVyeVBhcmFtZXRlcixcbiAgICBnZXRGb250Q3NzU3R5bGU6ICBnZXRGb250Q3NzU3R5bGUsXG4gICAgYWRkQ1NTUnVsZXM6ICAgICAgYWRkQ1NTUnVsZXMsXG4gICAgbG9hZEZvbnRzOiAgICAgICAgbG9hZEZvbnRzLFxuICAgIGxvYWRDdXN0b21Gb250OiAgIGxvYWRDdXN0b21Gb250LFxuICAgIGxvYWRHb29nbGVGb250czogICBsb2FkR29vZ2xlRm9udHMsXG4gICAgcHJlbG9hZEltYWdlczogICAgcHJlbG9hZEltYWdlcyxcbiAgICBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2U6IGdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSxcbiAgICB1bmVzY2FwZUhUTUw6IHVuZXNjYXBlSFRNTCxcbiAgICBoYXNJbnRlcm5ldENvbm5lY3Rpb246IGhhc0ludGVybmV0Q29ubmVjdGlvbixcbiAgICBpc0xlZ2FjeTogaXNMZWdhY3lcbiAgfTtcbn0pKCk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZSA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBCQVNFX0NBQ0hFX1VSTCA9IFwiLy9sb2NhbGhvc3Q6OTQ5NC9cIjtcblxuICB2YXIgX3BpbmdSZWNlaXZlZCA9IGZhbHNlLFxuICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlLFxuICAgIF9pc1YyUnVubmluZyA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIHBpbmcoY2FsbGJhY2spIHtcbiAgICB2YXIgciA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgc2VsZiA9IHRoaXM7XG5cbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFfaXNWMlJ1bm5pbmcpIHtcbiAgICAgIHIub3BlbihcIkdFVFwiLCBCQVNFX0NBQ0hFX1VSTCArIFwicGluZz9jYWxsYmFjaz1fXCIsIHRydWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHIub3BlbihcIkdFVFwiLCBCQVNFX0NBQ0hFX1VSTCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgIC8vIHNhdmUgdGhpcyByZXN1bHQgZm9yIHVzZSBpbiBnZXRGaWxlKClcbiAgICAgICAgICBfcGluZ1JlY2VpdmVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmKHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKHRydWUsIHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHIuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIC8vIFJpc2UgQ2FjaGUgVjIgaXMgcnVubmluZ1xuICAgICAgICAgICAgX2lzVjJSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gY2FsbCBwaW5nIGFnYWluIHNvIGNvcnJlY3QgcGluZyBVUkwgaXMgdXNlZCBmb3IgUmlzZSBDYWNoZSBWMlxuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGluZyhjYWxsYmFjayk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoXCJSaXNlIENhY2hlIGlzIG5vdCBydW5uaW5nXCIpO1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCBudWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoXCJDYXVnaHQgZXhjZXB0aW9uOiBcIiwgZS5kZXNjcmlwdGlvbik7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZShmaWxlVXJsLCBjYWxsYmFjaywgbm9jYWNoZWJ1c3Rlcikge1xuICAgIGlmICghZmlsZVVybCB8fCAhY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaWxlUmVxdWVzdCgpIHtcbiAgICAgIHZhciB1cmwsIHN0ciwgc2VwYXJhdG9yO1xuXG4gICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgIC8vIGNvbmZpZ3VyZSB1cmwgd2l0aCBjYWNoZWJ1c3RlciBvciBub3RcbiAgICAgICAgdXJsID0gKG5vY2FjaGVidXN0ZXIpID8gQkFTRV9DQUNIRV9VUkwgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCkgOlxuICAgICAgICBCQVNFX0NBQ0hFX1VSTCArIFwiY2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChub2NhY2hlYnVzdGVyKSB7XG4gICAgICAgICAgdXJsID0gZmlsZVVybDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSBmaWxlVXJsLnNwbGl0KFwiP1wiKTtcbiAgICAgICAgICBzZXBhcmF0b3IgPSAoc3RyLmxlbmd0aCA9PT0gMSkgPyBcIj9cIiA6IFwiJlwiO1xuICAgICAgICAgIHVybCA9IGZpbGVVcmwgKyBzZXBhcmF0b3IgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWFrZVJlcXVlc3QoXCJIRUFEXCIsIHVybCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZVJlcXVlc3QobWV0aG9kLCB1cmwpIHtcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgICAgcmVxdWVzdCA9IHtcbiAgICAgICAgICB4aHI6IHhocixcbiAgICAgICAgICB1cmw6IHVybFxuICAgICAgICB9O1xuXG4gICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCB0cnVlKTtcblxuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzIHx8IDA7XG5cbiAgICAgICAgICBpZiAoc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTZXJ2ZXIgbWF5IG5vdCBzdXBwb3J0IEhFQUQgcmVxdWVzdC4gRmFsbGJhY2sgdG8gYSBHRVQgcmVxdWVzdC5cbiAgICAgICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgICAgIG1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LCBuZXcgRXJyb3IoXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBzdGF0dXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZyAocHJldmlldyksIHNraXAgSEVBRCByZXF1ZXN0IGFuZCBleGVjdXRlIGNhbGxiYWNrIGltbWVkaWF0ZWx5XG4gICAgICAgIGNhbGxiYWNrKHJlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZpbGVSZXF1ZXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZpbGVSZXF1ZXN0KCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBpc1Jpc2VDYWNoZVJ1bm5pbmcoY2FsbGJhY2spIHtcbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFfcGluZ1JlY2VpdmVkKSB7XG4gICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG4gICAgICByZXR1cm4gdGhpcy5waW5nKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2soX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhfaXNDYWNoZVJ1bm5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzVjJSdW5uaW5nKGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghX3BpbmdSZWNlaXZlZCkge1xuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgcmV0dXJuIHRoaXMucGluZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKF9pc1YyUnVubmluZyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjYWxsYmFjayhfaXNWMlJ1bm5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBpc1Jpc2VDYWNoZVJ1bm5pbmc6IGlzUmlzZUNhY2hlUnVubmluZyxcbiAgICBpc1YyUnVubmluZzogaXNWMlJ1bm5pbmcsXG4gICAgcGluZzogcGluZ1xuICB9O1xuXG59KSgpO1xuXG4vKiBleHBvcnRlZCB2ZXJzaW9uICovXG52YXIgdmVyc2lvbiA9IFwiMS4xLjBcIjtcbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJsb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcbn1cblxudmFyICBjb25maWcgPSB7XG4gIFNUT1JBR0VfRU5WOiBcInByb2RcIlxufTtcblxuLyogZ2xvYmFsIGdhZGdldHMsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvID0gKGZ1bmN0aW9uICh3aW5kb3csIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hZGRpdGlvbmFsUGFyYW1zLCBfbW9kZTtcblxuICB2YXIgX2lzTG9hZGluZyA9IHRydWUsXG4gICAgX2NvbmZpZ0RldGFpbHMgPSBudWxsO1xuXG4gIHZhciBfcHJlZnMgPSBudWxsLFxuICAgIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfbm9uU3RvcmFnZSA9IG51bGwsXG4gICAgX21lc3NhZ2UgPSBudWxsLFxuICAgIF9wbGF5ZXIgPSBudWxsO1xuXG4gIHZhciBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICB2YXIgX3Jlc3VtZSA9IHRydWU7XG5cbiAgdmFyIF9jdXJyZW50RmlsZXMgPSBbXTtcblxuICB2YXIgX2N1cnJlbnRQbGF5bGlzdEluZGV4ID0gbnVsbDtcblxuICB2YXIgX2Vycm9yTG9nID0gbnVsbCxcbiAgICBfZXJyb3JUaW1lciA9IG51bGwsXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuXG4gIHZhciBfc3RvcmFnZUVycm9yRmxhZyA9IGZhbHNlLFxuICAgIF9wbGF5ZXJFcnJvckZsYWcgPSBmYWxzZSxcbiAgICBfdW5hdmFpbGFibGVGbGFnID0gZmFsc2U7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX2RvbmUoKSB7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzZXZlbnRfZG9uZVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIikpO1xuXG4gICAgLy8gQW55IGVycm9ycyBuZWVkIHRvIGJlIGxvZ2dlZCBiZWZvcmUgdGhlIGRvbmUgZXZlbnQuXG4gICAgaWYgKF9lcnJvckxvZyAhPT0gbnVsbCkge1xuICAgICAgbG9nRXZlbnQoX2Vycm9yTG9nLCB0cnVlKTtcbiAgICB9XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJkb25lXCIgfSwgZmFsc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2NsZWFyRXJyb3JUaW1lcigpIHtcbiAgICBjbGVhclRpbWVvdXQoX2Vycm9yVGltZXIpO1xuICAgIF9lcnJvclRpbWVyID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydEVycm9yVGltZXIoKSB7XG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgX2Vycm9yVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG5vdGlmeSBWaWV3ZXIgd2lkZ2V0IGlzIGRvbmVcbiAgICAgIF9kb25lKCk7XG4gICAgfSwgNTAwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q3VycmVudEZpbGUoKSB7XG4gICAgaWYgKF9jdXJyZW50RmlsZXMgJiYgX2N1cnJlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIHJldHVybiBfY3VycmVudEZpbGVzWzBdO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgICAgaWYgKF9jdXJyZW50UGxheWxpc3RJbmRleCkge1xuICAgICAgICAgIC8vIHJldHJpZXZlIHRoZSBjdXJyZW50bHkgcGxheWVkIGZpbGVcbiAgICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1tfY3VycmVudFBsYXlsaXN0SW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhhc1N0b3JhZ2VFcnJvcigpIHtcbiAgICByZXR1cm4gX3N0b3JhZ2VFcnJvckZsYWc7XG4gIH1cblxuICBmdW5jdGlvbiBoYXNQbGF5ZXJFcnJvcigpIHtcbiAgICByZXR1cm4gX3BsYXllckVycm9yRmxhZztcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlLCBpc1N0b3JhZ2VFcnJvcikge1xuICAgIF9lcnJvckZsYWcgPSB0cnVlO1xuICAgIF9zdG9yYWdlRXJyb3JGbGFnID0gdHlwZW9mIGlzU3RvcmFnZUVycm9yICE9PSBcInVuZGVmaW5lZFwiO1xuXG4gICAgX21lc3NhZ2Uuc2hvdyhtZXNzYWdlKTtcblxuICAgIF9jdXJyZW50UGxheWxpc3RJbmRleCA9IG51bGw7XG5cbiAgICAvLyBpZiBXaWRnZXQgaXMgcGxheWluZyByaWdodCBub3csIHJ1biB0aGUgdGltZXJcbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGxvZ0V2ZW50KHBhcmFtcywgaXNFcnJvcikge1xuICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICBfZXJyb3JMb2cgPSBwYXJhbXM7XG4gICAgfVxuXG4gICAgaWYgKCFwYXJhbXMuZmlsZV91cmwpIHtcbiAgICAgIHBhcmFtcy5maWxlX3VybCA9IF9nZXRDdXJyZW50RmlsZSgpO1xuICAgIH1cblxuICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLmxvZ0V2ZW50KGdldFRhYmxlTmFtZSgpLCBwYXJhbXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlSW5pdCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXlcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIF91bmF2YWlsYWJsZUZsYWcgPSBmYWxzZTtcblxuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCkge1xuICAgICAgcGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZVJlZnJlc2godXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZyBvZiBvbmUgdXJsXG4gICAgICBfY3VycmVudEZpbGVzWzBdID0gdXJscztcbiAgICB9IGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYW4gYXJyYXkgb2YgdXJsc1xuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG4gICAgfVxuXG4gICAgaWYgKF9wbGF5ZXIpIHtcbiAgICAgIF9wbGF5ZXIudXBkYXRlKF9jdXJyZW50RmlsZXMpOyAgXG4gICAgfVxuXG4gICAgLy8gaW4gY2FzZSByZWZyZXNoZWQgZmlsZSBmaXhlcyBhbiBlcnJvciB3aXRoIHByZXZpb3VzIGZpbGUsIGVuc3VyZSBmbGFnIGlzIHJlbW92ZWQgc28gcGxheWJhY2sgaXMgYXR0ZW1wdGVkIGFnYWluXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuICAgIF9wbGF5ZXJFcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfc3RvcmFnZUVycm9yRmxhZyA9IGZhbHNlO1xuICAgIF91bmF2YWlsYWJsZUZsYWcgPSBmYWxzZTtcbiAgICBfZXJyb3JMb2cgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlVW5hdmFpbGFibGUobWVzc2FnZSkge1xuICAgIF91bmF2YWlsYWJsZUZsYWcgPSB0cnVlO1xuXG4gICAgX21lc3NhZ2Uuc2hvdyhtZXNzYWdlKTtcblxuICAgIF9jdXJyZW50UGxheWxpc3RJbmRleCA9IG51bGw7XG5cbiAgICAvLyBpZiBXaWRnZXQgaXMgcGxheWluZyByaWdodCBub3csIHJ1biB0aGUgdGltZXJcbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcblxuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuXG4gICAgLy8gaW4gY2FzZSBlcnJvciB0aW1lciBzdGlsbCBydW5uaW5nIChubyBjb25kaXRpb25hbCBjaGVjayBvbiBlcnJvckZsYWcsIGl0IG1heSBoYXZlIGJlZW4gcmVzZXQgaW4gb25GaWxlUmVmcmVzaClcbiAgICBfY2xlYXJFcnJvclRpbWVyKCk7XG5cbiAgICBpZiAoX3BsYXllcikge1xuICAgICAgaWYgKCFfcmVzdW1lKSB7XG4gICAgICAgIF9jdXJyZW50UGxheWxpc3RJbmRleCA9IG51bGw7XG4gICAgICAgIF9wbGF5ZXIucmVzZXQoKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBfcGxheWVyLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgIC8vIExvZyBjb25maWd1cmF0aW9uIGV2ZW50LlxuICAgICAgbG9nRXZlbnQoe1xuICAgICAgICBldmVudDogXCJjb25maWd1cmF0aW9uXCIsXG4gICAgICAgIGV2ZW50X2RldGFpbHM6IF9jb25maWdEZXRhaWxzXG4gICAgICB9LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgX3ZpZXdlclBhdXNlZCA9IGZhbHNlO1xuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwicGxheVwiIH0sIGZhbHNlKTtcblxuICAgIGlmIChfZXJyb3JGbGFnKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF91bmF2YWlsYWJsZUZsYWcpIHtcbiAgICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIgJiYgX3N0b3JhZ2UpIHtcbiAgICAgICAgX3N0b3JhZ2UucmV0cnkoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChfcGxheWVyKSB7XG4gICAgICAvLyBFbnN1cmVzIHBvc3NpYmxlIGVycm9yIG1lc3NhZ2luZyBnZXRzIGhpZGRlbiBhbmQgdmlkZW8gZ2V0cyBzaG93blxuICAgICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgICBfcGxheWVyLnBsYXkoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgX3BsYXllciA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlBsYXllcihfYWRkaXRpb25hbFBhcmFtcywgX21vZGUpO1xuICAgICAgICBfcGxheWVyLmluaXQoX2N1cnJlbnRGaWxlcyk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuIFwidmlkZW9fdjJfZXZlbnRzXCI7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJFbmRlZCgpIHtcbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuXG4gICAgX2RvbmUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllclJlYWR5KCkge1xuICAgIC8vIEVuc3VyZXMgbG9hZGluZyBtZXNzYWdpbmcgaXMgaGlkZGVuIGFuZCB2aWRlbyBnZXRzIHNob3duXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkICYmIF9wbGF5ZXIpIHtcbiAgICAgIF9wbGF5ZXIucGxheSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllckl0ZW1DaGFuZ2UoaW5kZXgpIHtcbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBpbmRleDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMocGFyYW1zLCBtb2RlKSB7XG4gICAgdmFyIGlzU3RvcmFnZUZpbGU7XG5cbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IF8uY2xvbmUocGFyYW1zKTtcbiAgICBfbW9kZSA9IG1vZGU7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpLnN0eWxlLndpZHRoID0gX3ByZWZzLmdldEludChcInJzV1wiKSArIFwicHhcIjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMud2lkdGggPSBfcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICBpZiAoX2FkZGl0aW9uYWxQYXJhbXMudmlkZW8uaGFzT3duUHJvcGVydHkoXCJyZXN1bWVcIikpIHtcbiAgICAgIF9yZXN1bWUgPSBfYWRkaXRpb25hbFBhcmFtcy52aWRlby5yZXN1bWU7XG4gICAgfVxuXG4gICAgX21lc3NhZ2UgPSBuZXcgUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKSxcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZUNvbnRhaW5lclwiKSk7XG5cbiAgICBpZiAoUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLmlzTGVnYWN5KCkpIHtcbiAgICAgIHNob3dFcnJvcihcIlRoaXMgdmVyc2lvbiBvZiBWaWRlbyBXaWRnZXQgaXMgbm90IHN1cHBvcnRlZCBvbiB0aGlzIHZlcnNpb24gb2YgUmlzZSBQbGF5ZXIuIFwiICtcbiAgICAgICAgXCJQbGVhc2UgdXNlIHRoZSBsYXRlc3QgUmlzZSBQbGF5ZXIgdmVyc2lvbiBhdmFpbGFibGUgYXQgaHR0cHM6Ly9oZWxwLnJpc2V2aXNpb24uY29tL3VzZXIvY3JlYXRlLWEtZGlzcGxheVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2Ugd2hpbGUgU3RvcmFnZSBpbml0aWFsaXplc1xuICAgICAgX21lc3NhZ2Uuc2hvdyhcIlBsZWFzZSB3YWl0IHdoaWxlIHlvdXIgdmlkZW8gaXMgZG93bmxvYWRlZC5cIik7XG5cbiAgICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgICAgaXNTdG9yYWdlRmlsZSA9IChPYmplY3Qua2V5cyhfYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApO1xuXG4gICAgICAgIGlmICghaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICAgIF9jb25maWdEZXRhaWxzID0gXCJjdXN0b21cIjtcblxuICAgICAgICAgIF9ub25TdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgX25vblN0b3JhZ2UuaW5pdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9jb25maWdEZXRhaWxzID0gXCJzdG9yYWdlIGZpbGVcIjtcblxuICAgICAgICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgU3RvcmFnZSBmaWxlIGluc3RhbmNlXG4gICAgICAgICAgX3N0b3JhZ2UgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRmlsZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgICBfY29uZmlnRGV0YWlscyA9IFwic3RvcmFnZSBmb2xkZXJcIjtcblxuICAgICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZm9sZGVyIGluc3RhbmNlXG4gICAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZvbGRlcihfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8vIEFuIGVycm9yIG9jY3VycmVkIHdpdGggSlcgUGxheWVyLlxuICBmdW5jdGlvbiBwbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIHZhciBkZXRhaWxzID0gbnVsbCxcbiAgICAgIHBhcmFtcyA9IHt9LFxuICAgICAgbWVzc2FnZSA9IFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8uXCIsXG4gICAgICBNRURJQV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBtZWRpYTogRmlsZSBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBZT1VUVUJFX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIFlvdVR1YmU6IFZpZGVvIGNvdWxkIG5vdCBiZSBwbGF5ZWRcIixcbiAgICAgIFBMQVlFUl9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBwbGF5ZXI6IE5vIG1lZGlhIHNvdXJjZXMgZm91bmRcIixcbiAgICAgIFBMQVlMSVNUX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIHBsYXlsaXN0OiBObyBwbGF5YWJsZSBzb3VyY2VzIGZvdW5kXCIsXG4gICAgICBFTkNPRElOR19NRVNTQUdFID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhhdCB2aWRlby4gSXQgY291bGQgYmUgdGhhdCB3ZSBkb24ndCBcIiArXG4gICAgICAgIFwic3VwcG9ydCB0aGF0IGZvcm1hdCBvciBpdCBpcyBub3QgZW5jb2RlZCBjb3JyZWN0bHkuXCIsXG4gICAgICBGT1JNQVRfTUVTU0FHRSA9IFwiVGhlIGZvcm1hdCBvZiB0aGF0IHZpZGVvIGlzIG5vdCBzdXBwb3J0ZWRcIjtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLnR5cGUgJiYgZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IudHlwZSArIFwiIC0gXCIgKyBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXJyb3IudHlwZSkge1xuICAgICAgICBkZXRhaWxzID0gZXJyb3IudHlwZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLm1lc3NhZ2U7XG4gICAgICB9XG5cbiAgICAgIC8vIERpc3BsYXkgYXBwcm9wcmlhdGUgb24tc2NyZWVuIGVycm9yIG1lc3NhZ2UuXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBpZiAoKGVycm9yLm1lc3NhZ2UgPT09IE1FRElBX0VSUk9SKSB8fCAoZXJyb3IubWVzc2FnZSA9PT0gWU9VVFVCRV9FUlJPUikpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRU5DT0RJTkdfTUVTU0FHRTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlID09PSBQTEFZRVJfRVJST1IgfHwgZXJyb3IubWVzc2FnZSA9PT0gUExBWUxJU1RfRVJST1IpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRk9STUFUX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJhbXMuZXZlbnQgPSBcInBsYXllciBlcnJvclwiO1xuICAgIHBhcmFtcy5ldmVudF9kZXRhaWxzID0gZGV0YWlscztcbiAgICBfcGxheWVyRXJyb3JGbGFnID0gdHJ1ZTtcblxuICAgIGxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBwYXVzZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldFRhYmxlTmFtZVwiOiBnZXRUYWJsZU5hbWUsXG4gICAgXCJoYXNQbGF5ZXJFcnJvclwiOiBoYXNQbGF5ZXJFcnJvcixcbiAgICBcImhhc1N0b3JhZ2VFcnJvclwiOiBoYXNTdG9yYWdlRXJyb3IsXG4gICAgXCJsb2dFdmVudFwiOiBsb2dFdmVudCxcbiAgICBcIm9uRmlsZUluaXRcIjogb25GaWxlSW5pdCxcbiAgICBcIm9uRmlsZVJlZnJlc2hcIjogb25GaWxlUmVmcmVzaCxcbiAgICBcIm9uRmlsZVVuYXZhaWxhYmxlXCI6IG9uRmlsZVVuYXZhaWxhYmxlLFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJzaG93RXJyb3JcIjogc2hvd0Vycm9yLFxuICAgIFwicGxheWVyRW5kZWRcIjogcGxheWVyRW5kZWQsXG4gICAgXCJwbGF5ZXJSZWFkeVwiOiBwbGF5ZXJSZWFkeSxcbiAgICBcInBsYXllckVycm9yXCI6IHBsYXllckVycm9yLFxuICAgIFwicGxheWVySXRlbUNoYW5nZVwiOiBwbGF5ZXJJdGVtQ2hhbmdlLFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlBsYXllclV0aWxzID0gKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLypcbiAgICogIFB1YmxpYyAgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0UGxheWxpc3QgKGxpc3QpIHtcbiAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgIFxuICAgIHZhciBwbGF5bGlzdCA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBwbGF5bGlzdC5wdXNoKHtcbiAgICAgICAgZmlsZTogbGlzdFtpXSxcbiAgICAgICAgdHlwZTogdGhpcy5nZXRWaWRlb0ZpbGVUeXBlKGxpc3RbaV0pXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGxheWxpc3Q7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldFZpZGVvRmlsZVR5cGUgKHVybCkge1xuICAgIHZhciBleHRlbnNpb25zID0gW1wiLm1wNFwiLCBcIi53ZWJtXCJdLFxuICAgICAgdXJsTG93ZXJjYXNlID0gdXJsLnRvTG93ZXJDYXNlKCksXG4gICAgICB0eXBlID0gbnVsbCxcbiAgICAgIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDw9IGV4dGVuc2lvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmICh1cmxMb3dlcmNhc2UuaW5kZXhPZihleHRlbnNpb25zW2ldKSAhPT0gLTEpIHtcbiAgICAgICAgdHlwZSA9IGV4dGVuc2lvbnNbaV0uc3Vic3RyKGV4dGVuc2lvbnNbaV0ubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImdldFBsYXlsaXN0XCI6IGdldFBsYXlsaXN0LFxuICAgIFwiZ2V0VmlkZW9GaWxlVHlwZVwiOiBnZXRWaWRlb0ZpbGVUeXBlXG4gIH07XG5cbn0pKCk7XG5cbi8qIGdsb2JhbCBjb25maWcgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZpbGUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2luaXRpYWxMb2FkID0gdHJ1ZTtcblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAoZS5kZXRhaWwgJiYgZS5kZXRhaWwudXJsKSB7XG5cbiAgICAgICAgaWYgKF9pbml0aWFsTG9hZCkge1xuICAgICAgICAgIF9pbml0aWFsTG9hZCA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KGUuZGV0YWlsLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gY2hlY2sgZm9yIFwiY2hhbmdlZFwiIHByb3BlcnR5XG4gICAgICAgICAgaWYgKGUuZGV0YWlsLmhhc093blByb3BlcnR5KFwiY2hhbmdlZFwiKSkge1xuICAgICAgICAgICAgaWYgKGUuZGV0YWlsLmNoYW5nZWQpIHtcbiAgICAgICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKGUuZGV0YWlsLnVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgICAgICAgICAgaWYgKFJpc2VWaXNpb24uVmlkZW8uaGFzU3RvcmFnZUVycm9yKCkgfHwgUmlzZVZpc2lvbi5WaWRlby5oYXNQbGF5ZXJFcnJvcigpKSB7XG4gICAgICAgICAgICAgICAgLy8gcHJvY2VlZCB3aXRoIHJlZnJlc2ggbG9naWMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHZpZGVvIGFnYWluIGZyb20gYSBuZXR3b3JrIHJlY292ZXJ5XG4gICAgICAgICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKGUuZGV0YWlsLnVybCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1hcGktZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInN0b3JhZ2UgYXBpIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlJlc3BvbnNlIGNvZGU6IFwiICsgZS5kZXRhaWwuY29kZSArIFwiLCBtZXNzYWdlOiBcIiArIGUuZGV0YWlsLm1lc3NhZ2VcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZmlsZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIG5vdCBmb3VuZFwiLCBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZpbGUtdGhyb3R0bGVkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZpbGUgdGhyb3R0bGVkXCIsIFwiZmlsZV91cmxcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgdmlkZW8gaXMgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1leHBpcmVkXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGV4cGlyZWRcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlJpc2UgU3RvcmFnZSBzdWJzY3JpcHRpb24gaXMgbm90IGFjdGl2ZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJzdG9yYWdlIHN1YnNjcmlwdGlvbiBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIHN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIiwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbC5lcnJvci5tZXNzYWdlXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG5cbiAgICAgIHZhciBzdGF0dXNDb2RlID0gMDtcbiAgICAgIC8vIFNob3cgYSBkaWZmZXJlbnQgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIDQwNCBjb21pbmcgZnJvbSByaXNlIGNhY2hlXG4gICAgICBpZihlLmRldGFpbC5lcnJvci5tZXNzYWdlKXtcbiAgICAgICAgc3RhdHVzQ29kZSA9ICtlLmRldGFpbC5lcnJvci5tZXNzYWdlLnN1YnN0cmluZyhlLmRldGFpbC5lcnJvci5tZXNzYWdlLmluZGV4T2YoXCI6XCIpKzIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZXJyb3JNZXNzYWdlID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLmdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLW5vdC1ydW5uaW5nXCIsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2UgY2FjaGUgbm90IHJ1bm5pbmdcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IChlLmRldGFpbCAmJiBlLmRldGFpbC5lcnJvcik/IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2U6IFwiXCJcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtZmlsZS11bmF2YWlsYWJsZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVVuYXZhaWxhYmxlKFwiRmlsZSBpcyBkb3dubG9hZGluZ1wiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuc3RvcmFnZS5mb2xkZXIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS5zdG9yYWdlLmZpbGVOYW1lKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImNvbXBhbnlJZFwiLCBkYXRhLnN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImVudlwiLCBjb25maWcuU1RPUkFHRV9FTlYpO1xuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJldHJ5KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0LFxuICAgIFwicmV0cnlcIjogcmV0cnlcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBjb25maWcsIF8gKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZvbGRlciA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfaW5pdGlhbExvYWQgPSB0cnVlO1xuXG4gIHZhciBfZmlsZXMgPSBbXTtcblxuICBmdW5jdGlvbiBfZ2V0VXJscygpIHtcbiAgICByZXR1cm4gXy5wbHVjayhfZmlsZXMsIFwidXJsXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEV4aXN0aW5nRmlsZShmaWxlKSB7XG4gICAgcmV0dXJuIF8uZmluZChfZmlsZXMsIGZ1bmN0aW9uIChmKSB7XG4gICAgICByZXR1cm4gZmlsZS5uYW1lID09PSBmLm5hbWU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZGVsZXRlRmlsZShmaWxlKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gX2dldEV4aXN0aW5nRmlsZShmaWxlKTtcblxuICAgIGlmIChleGlzdGluZykge1xuICAgICAgX2ZpbGVzLnNwbGljZShfZmlsZXMuaW5kZXhPZihleGlzdGluZyksIDEpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9jaGFuZ2VGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBleGlzdGluZy51cmwgPSBmaWxlLnVybDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfYWRkRmlsZShmaWxlKSB7XG4gICAgdmFyIGV4aXN0aW5nID0gX2dldEV4aXN0aW5nRmlsZShmaWxlKTtcblxuICAgIGlmICghZXhpc3RpbmcpIHtcbiAgICAgIC8vIGV4dHJhY3QgdGhlIGFjdHVhbCBmaWxlIG5hbWUgYW5kIHN0b3JlIGluIG5ldyBwcm9wZXJ0eSBvbiBmaWxlIG9iamVjdFxuICAgICAgZmlsZS5maWxlTmFtZSA9IGZpbGUubmFtZS5zbGljZShmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIvXCIpICsgMSwgZmlsZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgLy8gaW5zZXJ0IGZpbGUgdG8gX2ZpbGVzIGxpc3QgYXQgc3BlY2lmaWMgaW5kZXggYmFzZWQgb24gYWxwaGFiZXRpY2FsIG9yZGVyIG9mIGZpbGUgbmFtZVxuICAgICAgX2ZpbGVzLnNwbGljZShfLnNvcnRlZEluZGV4KF9maWxlcywgZmlsZSwgXCJmaWxlTmFtZVwiKSwgMCwgZmlsZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGZpbGUgPSBlLmRldGFpbDtcblxuICAgICAgLy8gQWRkZWRcbiAgICAgIGlmKGZpbGUuYWRkZWQpIHtcbiAgICAgICAgX2FkZEZpbGUoZmlsZSk7XG5cbiAgICAgICAgaWYgKF9pbml0aWFsTG9hZCkge1xuICAgICAgICAgIF9pbml0aWFsTG9hZCA9IGZhbHNlO1xuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChfZ2V0VXJscygpKTtcblxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGFuZ2VkIG9yIHVuY2hhbmdlZFxuICAgICAgaWYgKGZpbGUuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpKSB7XG4gICAgICAgIGlmKGZpbGUuY2hhbmdlZCkge1xuICAgICAgICAgIF9jaGFuZ2VGaWxlKGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGluIHRoZSBldmVudCBvZiBhIG5ldHdvcmsgZmFpbHVyZSBhbmQgcmVjb3ZlcnksIGNoZWNrIGlmIHRoZSBXaWRnZXQgaXMgaW4gYSBzdGF0ZSBvZiBzdG9yYWdlIGVycm9yXG4gICAgICAgICAgaWYgKCFSaXNlVmlzaW9uLlZpZGVvLmhhc1N0b3JhZ2VFcnJvcigpICYmICFSaXNlVmlzaW9uLlZpZGVvLmhhc1BsYXllckVycm9yKCkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgcHJvY2VlZCB3aXRoIHJlZnJlc2ggbG9naWMgYmVsb3cgaWYgdGhlcmUncyBiZWVuIGEgc3RvcmFnZSBlcnJvciwgb3RoZXJ3aXNlIGRvIG5vdGhpbmdcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgc28gdGhlIFdpZGdldCBjYW4gZXZlbnR1YWxseSBwbGF5IHZpZGVvIGFnYWluIGZyb20gYSBuZXR3b3JrIHJlY292ZXJ5XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIERlbGV0ZWRcbiAgICAgIGlmKGZpbGUuZGVsZXRlZCkge1xuICAgICAgICBfZGVsZXRlRmlsZShmaWxlKTtcbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKF9nZXRVcmxzKCkpO1xuXG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtYXBpLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJzdG9yYWdlIGFwaSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJSZXNwb25zZSBjb2RlOiBcIiArIGUuZGV0YWlsLmNvZGUgKyBcIiwgbWVzc2FnZTogXCIgKyBlLmRldGFpbC5tZXNzYWdlXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWVtcHR5LWZvbGRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZW1wdHlcIiB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgY29udGFpbiBhbnkgdmlkZW9zLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1uby1mb2xkZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBkb2Vzbid0IGV4aXN0XCIsIFwiZXZlbnRfZGV0YWlsc1wiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3Qgb3IgaGFzIGJlZW4gbW92ZWQgdG8gVHJhc2guXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLWZvbGRlci1pbnZhbGlkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBmb3JtYXQocykgaW52YWxpZFwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBjb250YWluIGFueSBzdXBwb3J0ZWQgdmlkZW8gZm9ybWF0cy5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utc3Vic2NyaXB0aW9uLWV4cGlyZWRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXhwaXJlZFwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiUmlzZSBTdG9yYWdlIHN1YnNjcmlwdGlvbiBpcyBub3QgYWN0aXZlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1zdWJzY3JpcHRpb24tZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2Ugc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2UgY2FjaGUgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcblxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSAwO1xuICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgIGlmKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2Upe1xuICAgICAgICBzdGF0dXNDb2RlID0gK2UuZGV0YWlsLmVycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG4gICAgICB9XG5cbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtbm90LXJ1bm5pbmdcIiwgZnVuY3Rpb24oZSkge1xuXG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBub3QgcnVubmluZ1wiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogKGUuZGV0YWlsICYmIGUuZGV0YWlsLmVycm9yKT8gZS5kZXRhaWwuZXJyb3IubWVzc2FnZTogXCJcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlVHlwZVwiLCBcInZpZGVvXCIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuc3RvcmFnZS5mb2xkZXIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG5cbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5Ob25TdG9yYWdlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHJpc2VDYWNoZSA9IFJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZTtcblxuICB2YXIgX3JlZnJlc2hEdXJhdGlvbiA9IDkwMDAwMCwgIC8vIDE1IG1pbnV0ZXNcbiAgICBfcmVmcmVzaEludGVydmFsSWQgPSBudWxsO1xuXG4gIHZhciBfaXNMb2FkaW5nID0gdHJ1ZTtcblxuICB2YXIgX3VybCA9IFwiXCI7XG5cbiAgZnVuY3Rpb24gX2dldEZpbGUob21pdENhY2hlQnVzdGVyKSB7XG4gICAgcmlzZUNhY2hlLmdldEZpbGUoX3VybCwgZnVuY3Rpb24gKHJlc3BvbnNlLCBlcnJvcikge1xuICAgICAgaWYgKCFlcnJvcikge1xuXG4gICAgICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KHJlc3BvbnNlLnVybCk7XG5cbiAgICAgICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBpbnRlcnZhbFxuICAgICAgICAgIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKHJlc3BvbnNlLnVybCk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXJyb3Igb2NjdXJyZWRcbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudCh7XG4gICAgICAgICAgXCJldmVudFwiOiBcIm5vbi1zdG9yYWdlIGVycm9yXCIsXG4gICAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgXCJmaWxlX3VybFwiOiByZXNwb25zZS51cmxcbiAgICAgICAgfSwgdHJ1ZSk7XG5cbiAgICAgICAgdmFyIHN0YXR1c0NvZGUgPSAwO1xuICAgICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgICBpZihlcnJvci5tZXNzYWdlKXtcbiAgICAgICAgICBzdGF0dXNDb2RlID0gK2Vycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gUmlzZVZpc2lvbi5Db21tb24uVXRpbGl0aWVzLmdldFJpc2VDYWNoZUVycm9yTWVzc2FnZShzdGF0dXNDb2RlKTtcbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9LCBvbWl0Q2FjaGVCdXN0ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0UmVmcmVzaEludGVydmFsKCkge1xuICAgIGlmIChfcmVmcmVzaEludGVydmFsSWQgPT09IG51bGwpIHtcbiAgICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2dldEZpbGUoZmFsc2UpO1xuICAgICAgfSwgX3JlZnJlc2hEdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIC8vIEhhbmRsZSBwcmUtbWVyZ2UgdXNlIG9mIFwidXJsXCIgc2V0dGluZyBwcm9wZXJ0eVxuICAgIF91cmwgPSAoZGF0YS51cmwgJiYgZGF0YS51cmwgIT09IFwiXCIpID8gZGF0YS51cmwgOiBkYXRhLnNlbGVjdG9yLnVybDtcblxuICAgIF9nZXRGaWxlKHRydWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIGp3cGxheWVyICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlBsYXllciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hdXRvUGxheSwgX3N0cmV0Y2hpbmcsIF9wYXVzZUR1cmF0aW9uO1xuXG4gIHZhciBfcGxheWVySW5zdGFuY2UgPSBudWxsO1xuXG4gIHZhciBfdXRpbHMgPSBSaXNlVmlzaW9uLlZpZGVvLlBsYXllclV0aWxzO1xuXG4gIHZhciBfdmlld2VyUGF1c2VkID0gZmFsc2UsXG4gICAgX3BhdXNlVGltZXIgPSBudWxsO1xuXG4gIHZhciBfZmlsZXMgPSBudWxsLFxuICAgIF91cGRhdGVXYWl0aW5nID0gZmFsc2U7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX29uQ29tcGxldGUoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJFbmRlZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gX29uUGF1c2UoKSB7XG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICAvLyB1c2VyIGhhcyBwYXVzZWQsIHNldCBhIHRpbWVyIHRvIHBsYXkgYWdhaW5cbiAgICAgIGNsZWFyVGltZW91dChfcGF1c2VUaW1lcik7XG5cbiAgICAgIF9wYXVzZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfcGxheWVySW5zdGFuY2UuZ2V0U3RhdGUoKS50b1VwcGVyQ2FzZSgpICE9PSBcIlBMQVlJTkdcIikge1xuICAgICAgICAgIC8vIGNvbnRpbnVlIHBsYXlpbmcgdGhlIGN1cnJlbnQgdmlkZW9cbiAgICAgICAgICBfcGxheWVySW5zdGFuY2UucGxheSgpO1xuICAgICAgICB9XG4gICAgICB9LCBfcGF1c2VEdXJhdGlvbiAqIDEwMDApO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9vblBsYXlsaXN0SXRlbShpbmRleCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheWVySXRlbUNoYW5nZShpbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBfb25QbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJFcnJvcih7XG4gICAgICAgIHR5cGU6IFwidmlkZW9cIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX29uU2V0dXBFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJFcnJvcih7XG4gICAgICAgIHR5cGU6IFwic2V0dXBcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NvbmZpZ3VyZUhhbmRsZXJzKCkge1xuICAgIC8vdmFyIHBsYXlGbiA9IHBsYXk7XG5cbiAgICAvLyBoYW5kbGUgYSBKV1BsYXllciBzZXR1cCBlcnJvclxuICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInNldHVwRXJyb3JcIiwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBfb25TZXR1cEVycm9yKGVycm9yKTtcbiAgICB9KTtcblxuICAgIC8vIGhhbmRsZSB3aGVuIEpXUGxheWVyIGlzIHJlYWR5XG4gICAgX3BsYXllckluc3RhbmNlLm9uKFwicmVhZHlcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInBsYXlsaXN0Q29tcGxldGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfb25Db21wbGV0ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInBsYXlsaXN0SXRlbVwiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIF9vblBsYXlsaXN0SXRlbShkYXRhLmluZGV4KTtcbiAgICAgIH0pO1xuXG4gICAgICBfcGxheWVySW5zdGFuY2Uub24oXCJlcnJvclwiLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgX29uUGxheWVyRXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5zZXRWb2x1bWUocGFyYW1zLnZpZGVvLnZvbHVtZSk7XG5cbiAgICAgIGlmIChwYXJhbXMudmlkZW8uY29udHJvbHMgJiYgX3BhdXNlRHVyYXRpb24gPiAxKSB7XG4gICAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInBhdXNlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfb25QYXVzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gcGxheWVyIGlzIHJlYWR5XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXllclJlYWR5KCk7XG5cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRTZXR1cERhdGEoZmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udHJvbHM6IHBhcmFtcy52aWRlby5jb250cm9scyxcbiAgICAgIGhlaWdodDogcGFyYW1zLmhlaWdodCxcbiAgICAgIHBsYXlsaXN0OiBfdXRpbHMuZ2V0UGxheWxpc3QoZmlsZXMpLFxuICAgICAgc2tpbjoge25hbWU6IFwicmlzZVwifSxcbiAgICAgIHN0cmV0Y2hpbmcgOiBfc3RyZXRjaGluZyxcbiAgICAgIHdpZHRoOiBwYXJhbXMud2lkdGhcbiAgICB9O1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KGZpbGVzKSB7XG4gICAgX3BsYXllckluc3RhbmNlID0gandwbGF5ZXIoXCJwbGF5ZXJcIik7XG5cbiAgICBfZmlsZXMgPSBmaWxlcztcblxuICAgIF9zdHJldGNoaW5nID0gKHBhcmFtcy52aWRlby5zY2FsZVRvRml0KSA/IFwidW5pZm9ybVwiIDogXCJub25lXCI7XG5cbiAgICAvLyBlbnN1cmUgYXV0b1BsYXkgaXMgdHJ1ZSBpZiBjb250cm9scyB2YWx1ZSBpcyBmYWxzZSwgb3RoZXJ3aXNlIHVzZSBwYXJhbXMgdmFsdWVcbiAgICBfYXV0b1BsYXkgPSAoIXBhcmFtcy52aWRlby5jb250cm9scykgPyB0cnVlIDogcGFyYW1zLnZpZGVvLmF1dG9wbGF5O1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBzZXR0aW5nIGV4aXN0cyBkdWUgdG8gbWVyZ2Ugb2YgZmlsZSBhbmQgZm9sZGVyXG4gICAgaWYgKHBhcmFtcy52aWRlby5wYXVzZSkge1xuICAgICAgLy8gY29udmVydCBwYXVzZSB2YWx1ZSB0byBudW1iZXIgaWYgdHlwZSBpcyBcInN0cmluZ1wiXG4gICAgICBwYXJhbXMudmlkZW8ucGF1c2UgPSAodHlwZW9mIHBhcmFtcy52aWRlby5wYXVzZSA9PT0gXCJzdHJpbmdcIikgPyBwYXJzZUludChwYXJhbXMudmlkZW8ucGF1c2UsIDEwKSA6IHBhcmFtcy52aWRlby5wYXVzZTtcblxuICAgICAgLy8gaWYgbm90IG9mIHR5cGUgXCJudW1iZXJcIiwgc2V0IGl0cyB2YWx1ZSB0byAwIHNvIGEgcGF1c2UgZG9lcyBub3QgZ2V0IGFwcGxpZWRcbiAgICAgIF9wYXVzZUR1cmF0aW9uID0gKGlzTmFOKHBhcmFtcy52aWRlby5wYXVzZSkpID8gMCA6IHBhcmFtcy52aWRlby5wYXVzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gZW5zdXJlIG5vIHBhdXNlIGR1cmF0aW9uIG9jY3Vyc1xuICAgICAgX3BhdXNlRHVyYXRpb24gPSAwO1xuICAgIH1cblxuICAgIC8vIHNldHVwIEpXUGxheWVyXG4gICAgX3BsYXllckluc3RhbmNlLnNldHVwKF9nZXRTZXR1cERhdGEoZmlsZXMpKTtcbiAgICBfY29uZmlndXJlSGFuZGxlcnMoKTtcblxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBpZiAoX3VwZGF0ZVdhaXRpbmcpIHtcbiAgICAgIF91cGRhdGVXYWl0aW5nID0gZmFsc2U7XG4gICAgICAvLyBsb2FkIGEgbmV3IHBsYXlsaXN0XG4gICAgICBfcGxheWVySW5zdGFuY2UubG9hZChfdXRpbHMuZ2V0UGxheWxpc3QoX2ZpbGVzKSk7XG4gICAgfVxuXG4gICAgaWYgKF9hdXRvUGxheSkge1xuICAgICAgX3BsYXllckluc3RhbmNlLnBsYXkoKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIF92aWV3ZXJQYXVzZWQgPSB0cnVlO1xuICAgIGNsZWFyVGltZW91dChfcGF1c2VUaW1lcik7XG5cbiAgICBpZiAoX3BsYXllckluc3RhbmNlLmdldFN0YXRlKCkudG9VcHBlckNhc2UoKSA9PT0gXCJQTEFZSU5HXCIpIHtcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuXG4gICAgcGF1c2UoKTtcblxuICAgIGZ1bmN0aW9uIG9uUGxheSgpIHtcbiAgICAgIC8vIHJlbW92ZSBoYW5kbGluZyB0aGUgcGxheSBldmVudFxuICAgICAgX3BsYXllckluc3RhbmNlLm9mZihcInBsYXlcIiwgb25QbGF5KTtcblxuICAgICAgLy8gcGF1c2UgdGhlIHZpZGVvIGF0IHRoZSBzdGFydFxuICAgICAgX3BsYXllckluc3RhbmNlLnBhdXNlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25TZWVrZWQoKSB7XG4gICAgICAvLyByZW1vdmUgaGFuZGxpbmcgdGhlIHNlZWtlZCBldmVudFxuICAgICAgX3BsYXllckluc3RhbmNlLm9mZihcInNlZWtlZFwiLCBvblNlZWtlZCk7XG5cbiAgICAgIC8vIHBhdXNlIHRoZSB2aWRlbyBhdCB0aGUgc3RhcnRcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5wYXVzZSgpO1xuICAgIH1cblxuICAgIC8vIGlmIHN0YXR1cyBpcyBDT01QTEVURSwgYSBmdXR1cmUgcGxheSBjYWxsIHdpbGwgc3RhcnQgcGxheWxpc3Qgb3ZlciBmcm9tIGJlZ2lubmluZyBhdXRvbWF0aWNhbGx5XG4gICAgaWYgKF9wbGF5ZXJJbnN0YW5jZS5nZXRTdGF0ZSgpLnRvVXBwZXJDYXNlKCkgIT09IFwiQ09NUExFVEVcIikge1xuXG4gICAgICAvLyBhdm9pZCBqd3BsYXllciBwcm9taXNlIGVycm9yIGluIGNvbnNvbGUgd2l0aCBzZXRUaW1lb3V0IC0gaHR0cDovL2dvby5nbC9MNGdrVG1cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3BsYXllckluc3RhbmNlLmdldFBsYXlsaXN0SW5kZXgoKSAhPT0gMCkge1xuICAgICAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcInBsYXlcIiwgb25QbGF5KTtcblxuICAgICAgICAgIC8vIGNoYW5nZSB0byBmaXJzdCB2aWRlbyBpbiBsaXN0XG4gICAgICAgICAgX3BsYXllckluc3RhbmNlLnBsYXlsaXN0SXRlbSgwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBoYW5kbGUgd2hlbiB2aWRlbyBjb250aW51ZXMgcGxheWluZyBhZnRlciBzZWVraW5nIHRvIHBvc2l0aW9uXG4gICAgICAgICAgX3BsYXllckluc3RhbmNlLm9uKFwic2Vla2VkXCIsIG9uU2Vla2VkKTtcblxuICAgICAgICAgIC8vIG1vdmUgcG9zaXRpb24gYmFjayB0byBzdGFydCBvZiB2aWRlb1xuICAgICAgICAgIF9wbGF5ZXJJbnN0YW5jZS5zZWVrKDApO1xuICAgICAgICB9XG4gICAgICB9LDEwMCk7XG4gICAgICBcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZShmaWxlcykge1xuICAgIF9maWxlcyA9IGZpbGVzO1xuICAgIF91cGRhdGVXYWl0aW5nID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXQsXG4gICAgXCJwYXVzZVwiOiBwYXVzZSxcbiAgICBcInBsYXlcIjogcGxheSxcbiAgICBcInJlc2V0XCI6IHJlc2V0LFxuICAgIFwidXBkYXRlXCI6IHVwZGF0ZVxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTWVzc2FnZSA9IGZ1bmN0aW9uIChtYWluQ29udGFpbmVyLCBtZXNzYWdlQ29udGFpbmVyKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWN0aXZlID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gbWFpbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ2FuJ3QgaW5pdGlhbGl6ZSBNZXNzYWdlIC0gXCIsIGUubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoaWRlKCkge1xuICAgIGlmIChfYWN0aXZlKSB7XG4gICAgICAvLyBjbGVhciBjb250ZW50IG9mIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICB3aGlsZSAobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQobWVzc2FnZUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgLy8gaGlkZSBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIC8vIHNob3cgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cobWVzc2FnZSkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHA7XG5cbiAgICBpZiAoIV9hY3RpdmUpIHtcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICAgIC8vIGNyZWF0ZSBtZXNzYWdlIGVsZW1lbnRcbiAgICAgIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICAgIHAuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtZXNzYWdlXCIpO1xuXG4gICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChwKTtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG4gICAgICBfYWN0aXZlID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbWVzc2FnZSBhbHJlYWR5IGJlaW5nIHNob3duLCB1cGRhdGUgbWVzc2FnZSB0ZXh0XG4gICAgICBwID0gbWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLm1lc3NhZ2VcIik7XG4gICAgICBwLmlubmVySFRNTCA9IG1lc3NhZ2U7XG4gICAgfVxuICB9XG5cbiAgX2luaXQoKTtcblxuICByZXR1cm4ge1xuICAgIFwiaGlkZVwiOiBoaWRlLFxuICAgIFwic2hvd1wiOiBzaG93XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cywgUmlzZVZpc2lvbiAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25maWd1cmUobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciBhZGRpdGlvbmFsUGFyYW1zID0gbnVsbCxcbiAgICAgIG1vZGUgPSBcIlwiLFxuICAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgIGRpc3BsYXlJZCA9IFwiXCI7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChuYW1lc1swXSA9PT0gXCJjb21wYW55SWRcIikge1xuICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICB9XG5cbiAgICAgIGlmIChuYW1lc1sxXSA9PT0gXCJkaXNwbGF5SWRcIikge1xuICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gdmFsdWVzWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlJZCA9IFwicHJldmlld1wiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLnNldElkcyhjb21wYW55SWQsIGRpc3BsYXlJZCk7XG4gICAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5zZXRWZXJzaW9uKHZlcnNpb24pO1xuXG4gICAgICBpZiAobmFtZXNbMl0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXMgPSBKU09OLnBhcnNlKHZhbHVlc1syXSk7XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGFkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZSkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgLy8gc3RvcmFnZSBmaWxlIG9yIGZvbGRlciBzZWxlY3RlZFxuICAgICAgICAgIGlmICghYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlLmZpbGVOYW1lKSB7XG4gICAgICAgICAgICAvLyBmb2xkZXIgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtb2RlID0gXCJmb2xkZXJcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZmlsZSB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gbm9uLXN0b3JhZ2UgZmlsZSB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICBtb2RlID0gXCJmaWxlXCI7XG4gICAgICAgIH1cblxuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLnNldEFkZGl0aW9uYWxQYXJhbXMoYWRkaXRpb25hbFBhcmFtcywgbW9kZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGF1c2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5zdG9wKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwb2x5bWVyUmVhZHkoKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxuICAgIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wbGF5X1wiICsgaWQsIHBsYXkpO1xuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wYXVzZV9cIiArIGlkLCBwYXVzZSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgY29uZmlndXJlKTtcbiAgICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiY29tcGFueUlkXCIsIFwiZGlzcGxheUlkXCIsIFwiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gICAgfVxuICB9XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJXZWJDb21wb25lbnRzUmVhZHlcIiwgcG9seW1lclJlYWR5KTtcblxuICAvLyBjaGVjayB3aGljaCB2ZXJzaW9uIG9mIFJpc2UgQ2FjaGUgaXMgcnVubmluZyBhbmQgZHluYW1pY2FsbHkgYWRkIHJpc2Utc3RvcmFnZSBkZXBlbmRlbmNpZXNcbiAgUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlLmlzVjJSdW5uaW5nKGZ1bmN0aW9uIChpc1YyKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpLFxuICAgICAgaHJlZiA9IFwiY29tcG9uZW50cy9cIiArICgoaXNWMikgPyBcInJpc2Utc3RvcmFnZS12MlwiIDogXCJyaXNlLXN0b3JhZ2VcIikgKyBcIi9yaXNlLXN0b3JhZ2UuaHRtbFwiLFxuICAgICAgc3RvcmFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJyaXNlLXN0b3JhZ2VcIik7XG5cbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcImltcG9ydFwiKTtcbiAgICBsaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XG5cbiAgICAvLyBhZGQgdGhlIHJpc2Utc3RvcmFnZSA8bGluaz4gZWxlbWVudCB0byBkb2N1bWVudCBoZWFkXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGxpbmspO1xuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInZpZGVvU3RvcmFnZVwiKTtcbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcInJlZnJlc2hcIiwgNSk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc3RvcmFnZSk7XG5cbiAgICAvLyBhZGQgdGhlIDxyaXNlLXN0b3JhZ2U+IGVsZW1lbnQgdG8gdGhlIGJvZHlcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIHZhciB3ZWJjb21wb25lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICB3ZWJjb21wb25lbnRzLnNyYyA9IFwiY29tcG9uZW50cy93ZWJjb21wb25lbnRzanMvd2ViY29tcG9uZW50cy1saXRlLm1pbi5qc1wiO1xuXG4gICAgLy8gYWRkIHRoZSB3ZWJjb21wb25lbnRzIHBvbHlmaWxsIHNvdXJjZSB0byB0aGUgZG9jdW1lbnQgaGVhZFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZCh3ZWJjb21wb25lbnRzKTtcbiAgfSk7XG5cbn0pKHdpbmRvdywgZ2FkZ2V0cyk7XG5cblxuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTU3MDkyMTU5LTInXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOyBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
