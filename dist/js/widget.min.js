var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function e(e,i){var n=null;e.event?(n=e,n.file_url&&(n.file_format=t(n.file_url)),n.company_id=l,n.display_id=a,d&&(n.version=d),i(n)):i(n)}function i(){var e=new Date,i=e.getUTCFullYear(),t=e.getUTCMonth()+1,n=e.getUTCDate();return 10>t&&(t="0"+t),10>n&&(n="0"+n),i+t+n}function t(e){var i,t=/[?#&]/;return e&&"string"==typeof e?(i=e.substr(e.lastIndexOf(".")+1),t.test(i)&&(i=i.substr(0,-1!==i.indexOf("?")?i.indexOf("?"):i.length),i=i.substr(0,-1!==i.indexOf("#")?i.indexOf("#"):i.length),i=i.substr(0,-1!==i.indexOf("&")?i.indexOf("&"):i.length)),i.toLowerCase()):null}function n(e){var t={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:i(),rows:[{insertId:""}]},n=JSON.parse(JSON.stringify(t));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(e)),n.rows[0].json.ts=(new Date).toISOString(),n}function o(i,t){e(t,function(e){null!==e&&RiseVision.Common.Logger.log(i,e)})}function s(e,i){l=e,a=i}function r(e){d=e}var a="",l="",d=null;return{getInsertData:n,getFileFormat:t,logEvent:o,setIds:s,setVersion:r}}(),RiseVision.Common.Logger=function(e){"use strict";function i(e){var i=new XMLHttpRequest;return new Date-d<358e4?e({}):(i.open("POST",o,!0),i.onloadend=function(){var t=JSON.parse(i.response);e({token:t.access_token,refreshedAt:new Date})},i.send(),void 0)}function t(e){return r&&l===e}function n(n,o){function c(i){var t,r,a=new XMLHttpRequest;r=s.replace("TABLE_ID",n),d=i.refreshedAt||d,u=i.token||u,t=e.getInsertData(o),a.open("POST",r,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(t))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&t(o.event)))return r=!0,l=o.event,setTimeout(function(){r=!1},a),i(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",s="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",r=!1,a=1e3,l="",d=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function e(e,i){var t="font-family: "+decodeURIComponent(i.font.family).replace(/'/g,"")+"; ",n="color: "+(i.color?i.color:i.forecolor)+"; ",o="font-size: "+(-1===i.size.indexOf("px")?i.size+"px; ":i.size+"; "),s="font-weight: "+(i.bold?"bold":"normal")+"; ",r="font-style: "+(i.italic?"italic":"normal")+"; ",a="text-decoration: "+(i.underline?"underline":"none")+"; ",l="background-color: "+(i.highlightColor?i.highlightColor:i.backcolor)+";";return"."+e+" {"+t+n+o+s+r+a+l+"}"}function i(e){for(var i=document.createElement("style"),t=0,n=e.length;n>t;t++)i.appendChild(document.createTextNode(e[t]));document.head.appendChild(i)}function t(t,s){function r(){s&&"function"==typeof s&&s()}function a(){r()}var l=null,d=[],u=[],c=[];if(!t||0===t.length)return r(),void 0;t.forEach(function(t){t.class&&t.fontStyle&&i([e(t.class,t.fontStyle)])});for(var f=0;f<t.length;f++)t[f].fontStyle&&t[f].fontStyle.font.type&&"google"===t[f].fontStyle.font.type&&(l=t[f].fontStyle.font.family.split(",")[0],l=l.replace(/'/g,""),d.push(l));for(f=0;f<t.length;f++)t[f].fontStyle&&t[f].fontStyle.font.type&&"custom"===t[f].fontStyle.font.type&&(u.push(decodeURIComponent(t[f].fontStyle.font.family).replace(/'/g,"")),c.push(t[f].fontStyle.font.url.replace(/'/g,"\\'")));if(0===d.length&&0===u.length)r();else{for(var g=0;g<u.length;g+=1)n(u[g],c[g]);d.length>0?o(d,a):r()}}function n(e,i,t){var n=null,o="font-family: "+e+"; src: url('"+i+"');";t=t||document,n=t.styleSheets[0],null!==n&&n.addRule("@font-face",o)}function o(e,i){WebFont.load({google:{families:e},active:function(){i&&"function"==typeof i&&i()},inactive:function(){i&&"function"==typeof i&&i()},timeout:2e3})}function s(e){for(var i=e.length,t=[],n=0;i>n;n++)t[n]=new Image,t[n].src=e[n]}function r(e){for(var i,t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++)if(i=n[o].split("="),i[0]==e)return decodeURIComponent(i[1]);return""}function a(e){var i="";switch(e){case 404:i="The file does not exist or cannot be accessed.";break;case 507:i="There is not enough disk space to save the file on Rise Cache.";break;default:i="There was a problem retrieving the file from Rise Cache."}return i}function l(e){var i=document.createElement("div");return i.innerHTML=e,i.textContent}function d(e,i){var t=new XMLHttpRequest;if(e&&i&&"function"==typeof i){t.open("HEAD",e+"?cb="+(new Date).getTime(),!1);try{t.send(),i(t.status>=200&&t.status<304)}catch(n){i(!1)}}}function u(){var e=25,i=navigator.userAgent.match(/Chrome\/(\S+)/),t=i?i[1]:0;return t&&(t=parseInt(t.substring(0,t.indexOf("."))),e>=t)?!0:!1}return{getQueryParameter:r,getFontCssStyle:e,addCSSRules:i,loadFonts:t,loadCustomFont:n,loadGoogleFonts:o,preloadImages:s,getRiseCacheErrorMessage:a,unescapeHTML:l,hasInternetConnection:d,isLegacy:u}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var i=new XMLHttpRequest,t=this;e&&"function"==typeof e&&(a?i.open("GET",o,!0):i.open("GET",o+"ping?callback=_",!0),i.onreadystatechange=function(){try{if(4===i.readyState)if(s=!0,200===i.status)r=!0,e(!0,i.responseText);else{if(404===i.status)return a=!0,t.ping(e);console.debug("Rise Cache is not running"),r=!1,e(!1,null)}}catch(n){console.debug("Caught exception: ",n.description)}},i.send())}function i(e,i,t){function n(){var i,n,s;r?i=t?o+"?url="+encodeURIComponent(e):o+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):t?i=e:(n=e.split("?"),s=1===n.length?"?":"&",i=e+s+"cb="+(new Date).getTime()),a("HEAD",i)}function a(e,t){var n=new XMLHttpRequest,o={xhr:n,url:t};r?(n.open(e,t,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?i(o):"HEAD"===e?a("GET",t):i(o,new Error("The request failed with status code: "+s))}),n.send()):i(o)}if(e&&i&&"function"==typeof i)return s?n():this.ping(n)}function t(e){return e&&"function"==typeof e?s?(e(r),void 0):this.ping(function(){e(r)}):void 0}function n(e){return e&&"function"==typeof e?s?(e(a),void 0):this.ping(function(){e(a)}):void 0}var o="//localhost:9494/",s=!1,r=!1,a=!1;return{getFile:i,isRiseCacheRunning:t,isV2Running:n,ping:e}}();var version="1.1.0";"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json");var config={STORAGE_ENV:"prod"},RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e,i){"use strict";function t(){i.rpc.call("","rsevent_done",null,S.getString("id")),null!==k&&u(k,!0),u({event:"done"},!1)}function n(){i.rpc.call("","rsevent_ready",null,S.getString("id"),!0,!0,!0,!0,!0)}function o(){clearTimeout(G),G=null}function s(){o(),G=setTimeout(function(){t()},5e3)}function r(){if(P&&P.length>0){if("file"===b)return P[0];if("folder"===b&&U)return P[U]}return null}function a(){return D}function l(){return q}function d(e,i){M=!0,D="undefined"!=typeof i,x.show(e),U=null,N||s()}function u(e,i){i&&(k=e),e.file_url||(e.file_url=r()),RiseVision.Common.LoggerUtils.logEvent(m(),e)}function c(e){"file"===b?P[0]=e:"folder"===b&&(P=e),H=!1,x.hide(),N||v()}function f(e){"file"===b?P[0]=e:"folder"===b&&(P=e),A&&A.update(P),M=!1,q=!1,D=!1,H=!1,k=null}function g(e){H=!0,x.show(e),U=null,N||s()}function p(){N=!0,o(),A&&(F?A.pause():(U=null,A.reset()))}function v(){return T&&(T=!1,u({event:"configuration",event_details:I},!1)),N=!1,u({event:"play"},!1),M?(s(),void 0):H?("file"===b&&L&&L.retry(),void 0):(A?(x.hide(),A.play()):P&&P.length>0&&(A=new RiseVision.Video.Player(C,b),A.init(P)),void 0)}function m(){return"video_v2_events"}function h(){U=null,t()}function V(){x.hide(),!N&&A&&A.play()}function R(e){U=e}function y(e,t){var o;C=_.clone(e),b=t,S=new i.Prefs,document.getElementById("container").style.width=S.getInt("rsW")+"px",document.getElementById("container").style.height=S.getInt("rsH")+"px",C.width=S.getInt("rsW"),C.height=S.getInt("rsH"),C.video.hasOwnProperty("resume")&&(F=C.video.resume),x=new RiseVision.Common.Message(document.getElementById("container"),document.getElementById("messageContainer")),RiseVision.Common.Utilities.isLegacy()?d("This version of Video Widget is not supported on this version of Rise Player. Please use the latest Rise Player version available at https://help.risevision.com/user/create-a-display"):(x.show("Please wait while your video is downloaded."),"file"===b?(o=0!==Object.keys(C.storage).length,o?(I="storage file",L=new RiseVision.Video.StorageFile(C),L.init()):(I="custom",O=new RiseVision.Video.NonStorage(C),O.init())):"folder"===b&&(I="storage folder",L=new RiseVision.Video.StorageFolder(C),L.init())),n()}function E(e){var i=null,t={},n="Sorry, there was a problem playing the video.",o="Error loading media: File could not be played",s="Error loading YouTube: Video could not be played",r="Error loading player: No media sources found",a="Error loading playlist: No playable sources found",l="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.",c="The format of that video is not supported";e&&(e.type&&e.message?i=e.type+" - "+e.message:e.type?i=e.type:e.message&&(i=e.message),e.message&&(e.message===o||e.message===s?n=l:(e.message===r||e.message===a)&&(n=c))),t.event="player error",t.event_details=i,q=!0,u(t,!0),d(n)}function w(){p()}var C,b,T=!0,I=null,S=null,L=null,O=null,x=null,A=null,N=!0,F=!0,P=[],U=null,k=null,G=null,M=!1,D=!1,q=!1,H=!1;return{getTableName:m,hasPlayerError:l,hasStorageError:a,logEvent:u,onFileInit:c,onFileRefresh:f,onFileUnavailable:g,pause:p,play:v,setAdditionalParams:y,showError:d,playerEnded:h,playerReady:V,playerError:E,playerItemChange:R,stop:w}}(window,gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.PlayerUtils=function(){"use strict";function e(e){for(var i=[],t=0;t<e.length;t+=1)i.push({file:e[t],type:this.getVideoFileType(e[t])});return i}function i(e){var i,t=[".mp4",".webm"],n=e.toLowerCase(),o=null;for(i=0;i<=t.length;i+=1)if(-1!==n.indexOf(t[i])){o=t[i].substr(t[i].lastIndexOf(".")+1);break}return o}return{getPlaylist:e,getVideoFileType:i}}();var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function i(){var i=document.getElementById("videoStorage");i&&(i.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(n?(n=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&(e.detail.changed?RiseVision.Video.onFileRefresh(e.detail.url):(RiseVision.Video.hasStorageError()||RiseVision.Video.hasPlayerError())&&RiseVision.Video.onFileRefresh(e.detail.url)))}),i.addEventListener("rise-storage-api-error",function(e){var i={event:"storage api error",event_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.")}),i.addEventListener("rise-storage-no-file",function(e){var i={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),i.addEventListener("rise-storage-file-throttled",function(e){var i={event:"storage file throttled",file_url:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),i.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),i.addEventListener("rise-storage-subscription-error",function(e){var i={event:"storage subscription error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0)}),i.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),i.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Video.logEvent(i,!0);var t=0;e.detail.error.message&&(t=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var n=RiseVision.Common.Utilities.getRiseCacheErrorMessage(t);RiseVision.Video.showError(n)}),i.addEventListener("rise-cache-not-running",function(e){var i={event:"rise cache not running",event_details:e.detail&&e.detail.error?e.detail.error.message:""};RiseVision.Video.logEvent(i,!0)}),i.addEventListener("rise-cache-file-unavailable",function(e){RiseVision.Video.onFileUnavailable(e.detail.message)}),i.setAttribute("folder",e.storage.folder),i.setAttribute("fileName",e.storage.fileName),i.setAttribute("companyId",e.storage.companyId),i.setAttribute("env",config.STORAGE_ENV),i.go())}function t(){var e=document.getElementById("videoStorage");e&&e.go()}var n=!0;return{init:i,retry:t}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function i(){return _.pluck(l,"url")}function t(e){return _.find(l,function(i){return e.name===i.name})}function n(e){var i=t(e);i&&l.splice(l.indexOf(i),1)}function o(e){var i=t(e);i&&(i.url=e.url)}function s(e){var i=t(e);i||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function r(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){var t=e.detail;if(t.added&&(s(t),a))return a=!1,RiseVision.Video.onFileInit(i()),void 0;if(t.hasOwnProperty("changed"))if(t.changed)o(t);else if(!RiseVision.Video.hasStorageError()&&!RiseVision.Video.hasPlayerError())return;t.deleted&&n(t),RiseVision.Video.onFileRefresh(i())}),t.addEventListener("rise-storage-api-error",function(e){var i={event:"storage api error",event_details:"Response code: "+e.detail.code+", message: "+e.detail.message};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.")}),t.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),t.addEventListener("rise-storage-no-folder",function(e){var i={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("The selected folder does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-folder-invalid",function(){var e={event:"storage folder format(s) invalid"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any supported video formats.")}),t.addEventListener("rise-storage-subscription-expired",function(){var e={event:"storage subscription expired"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("Rise Storage subscription is not active.")}),t.addEventListener("rise-storage-subscription-error",function(e){var i={event:"storage subscription error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0)}),t.addEventListener("rise-storage-error",function(e){var i={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(i,!0),RiseVision.Video.showError("Sorry, there was a problem communicating with Rise Storage.",!0)}),t.addEventListener("rise-cache-error",function(e){var i={event:"rise cache error",event_details:e.detail.error.message};RiseVision.Video.logEvent(i,!0);var t=0;e.detail.error.message&&(t=+e.detail.error.message.substring(e.detail.error.message.indexOf(":")+2));var n=RiseVision.Common.Utilities.getRiseCacheErrorMessage(t);RiseVision.Video.showError(n)}),t.addEventListener("rise-cache-not-running",function(e){var i={event:"rise cache not running",event_details:e.detail&&e.detail.error?e.detail.error.message:""};RiseVision.Video.logEvent(i,!0)}),t.setAttribute("fileType","video"),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("folder",e.storage.folder),t.setAttribute("env",config.STORAGE_ENV),t.go())}var a=!0,l=[];return{init:r}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function i(e){o.getFile(l,function(e,i){if(i){RiseVision.Video.logEvent({event:"non-storage error",event_details:i.message,file_url:e.url},!0);var n=0;i.message&&(n=+i.message.substring(i.message.indexOf(":")+2));var o=RiseVision.Common.Utilities.getRiseCacheErrorMessage(n);RiseVision.Video.showError(o)}else a?(a=!1,RiseVision.Video.onFileInit(e.url),t()):RiseVision.Video.onFileRefresh(e.url)},e)}function t(){null===r&&(r=setInterval(function(){i(!1)},s))}function n(){l=e.url&&""!==e.url?e.url:e.selector.url,i(!0)}var o=RiseVision.Common.RiseCache,s=9e5,r=null,a=!0,l="";return{init:n}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.Player=function(e){"use strict";function i(){RiseVision.Video.playerEnded()}function t(){V||(clearTimeout(R),R=setTimeout(function(){"PLAYING"!==m.getState().toUpperCase()&&m.play()},1e3*v))}function n(e){RiseVision.Video.playerItemChange(e)}function o(e){e&&RiseVision.Video.playerError({type:"video",message:e.message})}function s(e){e&&RiseVision.Video.playerError({type:"setup",message:e.message})}function r(){m.on("setupError",function(e){s(e)}),m.on("ready",function(){m.on("playlistComplete",function(){i()}),m.on("playlistItem",function(e){n(e.index)}),m.on("error",function(e){o(e)}),m.setVolume(e.video.volume),e.video.controls&&v>1&&m.on("pause",function(){t()}),RiseVision.Video.playerReady()})}function a(i){return{controls:e.video.controls,height:e.height,playlist:h.getPlaylist(i),skin:{name:"rise"},stretching:p,width:e.width}}function l(i){m=jwplayer("player"),y=i,p=e.video.scaleToFit?"uniform":"none",g=e.video.controls?e.video.autoplay:!0,e.video.pause?(e.video.pause="string"==typeof e.video.pause?parseInt(e.video.pause,10):e.video.pause,v=isNaN(e.video.pause)?0:e.video.pause):v=0,m.setup(a(i)),r()}function d(){V=!1,E&&(E=!1,m.load(h.getPlaylist(y))),g&&m.play()}function u(){V=!0,clearTimeout(R),"PLAYING"===m.getState().toUpperCase()&&m.pause()}function c(){function e(){m.off("play",e),m.pause()}function i(){m.off("seeked",i),m.pause()}u(),"COMPLETE"!==m.getState().toUpperCase()&&setTimeout(function(){0!==m.getPlaylistIndex()?(m.on("play",e),m.playlistItem(0)):(m.on("seeked",i),m.seek(0))},100)}function f(e){y=e,E=!0}var g,p,v,m=null,h=RiseVision.Video.PlayerUtils,V=!1,R=null,y=null,E=!1;return{init:l,pause:u,play:d,reset:c,update:f}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,i){"use strict";function t(){try{i.style.height=e.style.height}catch(t){console.warn("Can't initialize Message - ",t.message)}}function n(){if(s){for(;i.firstChild;)i.removeChild(i.firstChild);i.style.display="none",e.style.display="block",s=!1}}function o(t){var n,o=document.createDocumentFragment();s?(n=i.querySelector(".message"),n.innerHTML=t):(e.style.display="none",i.style.display="block",n=document.createElement("p"),n.innerHTML=t,n.setAttribute("class","message"),o.appendChild(n),i.appendChild(o),s=!0)}var s=!1;return t(),{hide:n,show:o}},function(e,i){"use strict";function t(e,i){var t=null,n="",o="",s="";Array.isArray(e)&&e.length>0&&Array.isArray(i)&&i.length>0&&("companyId"===e[0]&&(o=i[0]),"displayId"===e[1]&&(s=i[1]?i[1]:"preview"),RiseVision.Common.LoggerUtils.setIds(o,s),RiseVision.Common.LoggerUtils.setVersion(version),"additionalParams"===e[2]&&(t=JSON.parse(i[2]),n=0!==Object.keys(t.storage).length?t.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(t,n)))}function n(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function s(){RiseVision.Video.stop()}function r(){e.removeEventListener("WebComponentsReady",r),l&&""!==l&&(i.rpc.register("rscmd_play_"+l,n),i.rpc.register("rscmd_pause_"+l,o),i.rpc.register("rscmd_stop_"+l,s),i.rpc.register("rsparam_set_"+l,t),i.rpc.call("","rsparam_get",null,l,["companyId","displayId","additionalParams"]))}var a=new i.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",r),RiseVision.Common.RiseCache.isV2Running(function(e){var i=document.createDocumentFragment(),t=document.createElement("link"),n="components/"+(e?"rise-storage-v2":"rise-storage")+"/rise-storage.html",o=document.createElement("rise-storage");t.setAttribute("rel","import"),t.setAttribute("href",n),document.getElementsByTagName("head")[0].appendChild(t),o.setAttribute("id","videoStorage"),o.setAttribute("refresh",5),i.appendChild(o),document.body.appendChild(i);var s=document.createElement("script");s.src="components/webcomponentsjs/webcomponents-lite.min.js",document.getElementsByTagName("head")[0].appendChild(s)})}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(e,i)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SRV9VUkwiLCJSaXNlVmlzaW9uIiwiQ29tbW9uIiwiTG9nZ2VyVXRpbHMiLCJnZXRFdmVudFBhcmFtcyIsInBhcmFtcyIsImNiIiwianNvbiIsImV2ZW50IiwiZmlsZV91cmwiLCJmaWxlX2Zvcm1hdCIsImdldEZpbGVGb3JtYXQiLCJjb21wYW55X2lkIiwiY29tcGFueUlkIiwiZGlzcGxheV9pZCIsImRpc3BsYXlJZCIsInZlcnNpb24iLCJnZXRTdWZmaXgiLCJkYXRlIiwiRGF0ZSIsInllYXIiLCJnZXRVVENGdWxsWWVhciIsIm1vbnRoIiwiZ2V0VVRDTW9udGgiLCJkYXkiLCJnZXRVVENEYXRlIiwidXJsIiwic3RyIiwiaGFzUGFyYW1zIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJ0ZXN0IiwiaW5kZXhPZiIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiZ2V0SW5zZXJ0RGF0YSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsImtpbmQiLCJza2lwSW52YWxpZFJvd3MiLCJpZ25vcmVVbmtub3duVmFsdWVzIiwidGVtcGxhdGVTdWZmaXgiLCJyb3dzIiwiaW5zZXJ0SWQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJ0cyIsInRvSVNPU3RyaW5nIiwibG9nRXZlbnQiLCJ0YWJsZSIsIkxvZ2dlciIsImxvZyIsInNldElkcyIsImNvbXBhbnkiLCJkaXNwbGF5Iiwic2V0VmVyc2lvbiIsInZhbHVlIiwidXRpbHMiLCJyZWZyZXNoVG9rZW4iLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsInJlZnJlc2hEYXRlIiwib3BlbiIsIlJFRlJFU0hfVVJMIiwib25sb2FkZW5kIiwicmVzcCIsInJlc3BvbnNlIiwidG9rZW4iLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoZWRBdCIsInNlbmQiLCJpc1Rocm90dGxlZCIsInRocm90dGxlIiwibGFzdEV2ZW50IiwidGFibGVOYW1lIiwiaW5zZXJ0V2l0aFRva2VuIiwicmVmcmVzaERhdGEiLCJpbnNlcnREYXRhIiwic2VydmljZVVybCIsInJlcGxhY2UiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiaGFzT3duUHJvcGVydHkiLCJzZXRUaW1lb3V0IiwidGhyb3R0bGVEZWxheSIsIlV0aWxpdGllcyIsImdldEZvbnRDc3NTdHlsZSIsImNsYXNzTmFtZSIsImZvbnRPYmoiLCJmYW1pbHkiLCJkZWNvZGVVUklDb21wb25lbnQiLCJmb250IiwiY29sb3IiLCJmb3JlY29sb3IiLCJzaXplIiwid2VpZ2h0IiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImhpZ2hsaWdodCIsImhpZ2hsaWdodENvbG9yIiwiYmFja2NvbG9yIiwiYWRkQ1NTUnVsZXMiLCJydWxlcyIsInN0eWxlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaSIsImFwcGVuZENoaWxkIiwiY3JlYXRlVGV4dE5vZGUiLCJoZWFkIiwibG9hZEZvbnRzIiwic2V0dGluZ3MiLCJjYWxsYmFjayIsIm9uR29vZ2xlRm9udHNMb2FkZWQiLCJmYW1pbGllcyIsImdvb2dsZUZhbWlsaWVzIiwiY3VzdG9tRmFtaWxpZXMiLCJjdXN0b21VcmxzIiwiZm9yRWFjaCIsIml0ZW0iLCJjbGFzcyIsImZvbnRTdHlsZSIsInR5cGUiLCJzcGxpdCIsInB1c2giLCJqIiwibG9hZEN1c3RvbUZvbnQiLCJsb2FkR29vZ2xlRm9udHMiLCJjb250ZW50RG9jIiwic2hlZXQiLCJydWxlIiwic3R5bGVTaGVldHMiLCJhZGRSdWxlIiwiV2ViRm9udCIsImxvYWQiLCJnb29nbGUiLCJhY3RpdmUiLCJpbmFjdGl2ZSIsInRpbWVvdXQiLCJwcmVsb2FkSW1hZ2VzIiwidXJscyIsImltYWdlcyIsIkltYWdlIiwic3JjIiwiZ2V0UXVlcnlQYXJhbWV0ZXIiLCJwYXJhbSIsInBhaXIiLCJxdWVyeSIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwidmFycyIsImdldFJpc2VDYWNoZUVycm9yTWVzc2FnZSIsInN0YXR1c0NvZGUiLCJlcnJvck1lc3NhZ2UiLCJ1bmVzY2FwZUhUTUwiLCJodG1sIiwiZGl2IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJoYXNJbnRlcm5ldENvbm5lY3Rpb24iLCJmaWxlUGF0aCIsImdldFRpbWUiLCJzdGF0dXMiLCJlIiwiaXNMZWdhY3kiLCJsZWdhY3lWZXJzaW9uIiwibWF0Y2giLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJzZUludCIsIlJpc2VDYWNoZSIsInBpbmciLCJyIiwic2VsZiIsInRoaXMiLCJfaXNWMlJ1bm5pbmciLCJCQVNFX0NBQ0hFX1VSTCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJfcGluZ1JlY2VpdmVkIiwiX2lzQ2FjaGVSdW5uaW5nIiwicmVzcG9uc2VUZXh0IiwiY29uc29sZSIsImRlYnVnIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsInNlcGFyYXRvciIsImVuY29kZVVSSUNvbXBvbmVudCIsIm1ha2VSZXF1ZXN0IiwibWV0aG9kIiwicmVxdWVzdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJFcnJvciIsImlzUmlzZUNhY2hlUnVubmluZyIsImlzVjJSdW5uaW5nIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwiY29uZmlnIiwiU1RPUkFHRV9FTlYiLCJWaWRlbyIsImdhZGdldHMiLCJfZG9uZSIsInJwYyIsImNhbGwiLCJfcHJlZnMiLCJnZXRTdHJpbmciLCJfZXJyb3JMb2ciLCJfcmVhZHkiLCJfY2xlYXJFcnJvclRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiX2Vycm9yVGltZXIiLCJfc3RhcnRFcnJvclRpbWVyIiwiX2dldEN1cnJlbnRGaWxlIiwiX2N1cnJlbnRGaWxlcyIsIl9tb2RlIiwiX2N1cnJlbnRQbGF5bGlzdEluZGV4IiwiaGFzU3RvcmFnZUVycm9yIiwiX3N0b3JhZ2VFcnJvckZsYWciLCJoYXNQbGF5ZXJFcnJvciIsIl9wbGF5ZXJFcnJvckZsYWciLCJzaG93RXJyb3IiLCJtZXNzYWdlIiwiaXNTdG9yYWdlRXJyb3IiLCJfZXJyb3JGbGFnIiwiX21lc3NhZ2UiLCJzaG93IiwiX3ZpZXdlclBhdXNlZCIsImlzRXJyb3IiLCJnZXRUYWJsZU5hbWUiLCJvbkZpbGVJbml0IiwiX3VuYXZhaWxhYmxlRmxhZyIsImhpZGUiLCJwbGF5Iiwib25GaWxlUmVmcmVzaCIsIl9wbGF5ZXIiLCJ1cGRhdGUiLCJvbkZpbGVVbmF2YWlsYWJsZSIsInBhdXNlIiwiX3Jlc3VtZSIsInJlc2V0IiwiX2lzTG9hZGluZyIsImV2ZW50X2RldGFpbHMiLCJfY29uZmlnRGV0YWlscyIsIl9zdG9yYWdlIiwicmV0cnkiLCJQbGF5ZXIiLCJfYWRkaXRpb25hbFBhcmFtcyIsImluaXQiLCJwbGF5ZXJFbmRlZCIsInBsYXllclJlYWR5IiwicGxheWVySXRlbUNoYW5nZSIsImluZGV4Iiwic2V0QWRkaXRpb25hbFBhcmFtcyIsIm1vZGUiLCJpc1N0b3JhZ2VGaWxlIiwiXyIsImNsb25lIiwiUHJlZnMiLCJnZXRFbGVtZW50QnlJZCIsIndpZHRoIiwiZ2V0SW50IiwiaGVpZ2h0IiwidmlkZW8iLCJyZXN1bWUiLCJNZXNzYWdlIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JhZ2UiLCJTdG9yYWdlRmlsZSIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJwbGF5ZXJFcnJvciIsImVycm9yIiwiZGV0YWlscyIsIk1FRElBX0VSUk9SIiwiWU9VVFVCRV9FUlJPUiIsIlBMQVlFUl9FUlJPUiIsIlBMQVlMSVNUX0VSUk9SIiwiRU5DT0RJTkdfTUVTU0FHRSIsIkZPUk1BVF9NRVNTQUdFIiwic3RvcCIsIlBsYXllclV0aWxzIiwiZ2V0UGxheWxpc3QiLCJsaXN0IiwicGxheWxpc3QiLCJmaWxlIiwiZ2V0VmlkZW9GaWxlVHlwZSIsImV4dGVuc2lvbnMiLCJ1cmxMb3dlcmNhc2UiLCJkZXRhaWwiLCJfaW5pdGlhbExvYWQiLCJjaGFuZ2VkIiwiY29kZSIsImN1cnJlbnRUYXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJmb2xkZXIiLCJmaWxlTmFtZSIsImdvIiwiX2dldFVybHMiLCJwbHVjayIsIl9maWxlcyIsIl9nZXRFeGlzdGluZ0ZpbGUiLCJmaW5kIiwiZiIsIm5hbWUiLCJfZGVsZXRlRmlsZSIsImV4aXN0aW5nIiwic3BsaWNlIiwiX2NoYW5nZUZpbGUiLCJfYWRkRmlsZSIsInNsaWNlIiwic29ydGVkSW5kZXgiLCJhZGRlZCIsImRlbGV0ZWQiLCJfZ2V0RmlsZSIsIm9taXRDYWNoZUJ1c3RlciIsInJpc2VDYWNoZSIsIl91cmwiLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJzZWxlY3RvciIsIl9vbkNvbXBsZXRlIiwiX29uUGF1c2UiLCJfcGF1c2VUaW1lciIsIl9wbGF5ZXJJbnN0YW5jZSIsImdldFN0YXRlIiwiX3BhdXNlRHVyYXRpb24iLCJfb25QbGF5bGlzdEl0ZW0iLCJfb25QbGF5ZXJFcnJvciIsIl9vblNldHVwRXJyb3IiLCJfY29uZmlndXJlSGFuZGxlcnMiLCJvbiIsInNldFZvbHVtZSIsInZvbHVtZSIsImNvbnRyb2xzIiwiX2dldFNldHVwRGF0YSIsImZpbGVzIiwiX3V0aWxzIiwic2tpbiIsInN0cmV0Y2hpbmciLCJfc3RyZXRjaGluZyIsImp3cGxheWVyIiwiX2F1dG9QbGF5IiwiYXV0b3BsYXkiLCJpc05hTiIsInNldHVwIiwiX3VwZGF0ZVdhaXRpbmciLCJvblBsYXkiLCJvZmYiLCJvblNlZWtlZCIsImdldFBsYXlsaXN0SW5kZXgiLCJwbGF5bGlzdEl0ZW0iLCJzZWVrIiwibWFpbkNvbnRhaW5lciIsIm1lc3NhZ2VDb250YWluZXIiLCJfaW5pdCIsIndhcm4iLCJfYWN0aXZlIiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwicCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb25maWd1cmUiLCJuYW1lcyIsInZhbHVlcyIsImFkZGl0aW9uYWxQYXJhbXMiLCJBcnJheSIsImlzQXJyYXkiLCJwb2x5bWVyUmVhZHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaWQiLCJyZWdpc3RlciIsInByZWZzIiwib25jb250ZXh0bWVudSIsImlzVjIiLCJsaW5rIiwiaHJlZiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYm9keSIsIndlYmNvbXBvbmVudHMiLCJfZ2FxIiwiZ2EiLCJhc3luYyIsInByb3RvY29sIiwicyIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLHVCQUNGQyxjQUFlLGlCQUNmQyxpQkFBa0IsNEVBQ2xCQyxxQkFBc0IsMkJBQ3RCQyxxQkFBc0IscUVBQ3RCQyxVQUFXLDZDQUlUQyxXQUFhQSxjQUNqQkEsWUFBV0MsT0FBU0QsV0FBV0MsV0FFL0JELFdBQVdDLE9BQU9DLFlBQWMsV0FDOUIsWUFXQSxTQUFTQyxHQUFlQyxFQUFRQyxHQUM5QixHQUFJQyxHQUFPLElBR1BGLEdBQU9HLE9BQ1RELEVBQU9GLEVBRUhFLEVBQUtFLFdBQ1BGLEVBQUtHLFlBQWNDLEVBQWNKLEVBQUtFLFdBR3hDRixFQUFLSyxXQUFhQyxFQUNsQk4sRUFBS08sV0FBYUMsRUFFZEMsSUFDRlQsRUFBS1MsUUFBVUEsR0FHakJWLEVBQUdDLElBR0hELEVBQUdDLEdBS1AsUUFBU1UsS0FDUCxHQUFJQyxHQUFPLEdBQUlDLE1BQ2JDLEVBQU9GLEVBQUtHLGlCQUNaQyxFQUFRSixFQUFLSyxjQUFnQixFQUM3QkMsRUFBTU4sRUFBS08sWUFVYixPQVJZLElBQVJILElBQ0ZBLEVBQVEsSUFBTUEsR0FHTixH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LE1BQU9BLFFBRVhBLE1BQUszUSxNQUFNLGNBQWUsa0JBQzFCMlEsS0FBSzNRLE1BQU0sbUJBRVgsV0FDRSxHQUFJNFEsR0FBS2hTLFNBQVNDLGNBQWMsU0FBVytSLEdBQUc5USxLQUFPLGtCQUFtQjhRLEVBQUdDLE9BQVEsRUFDbkZELEVBQUd6UCxLQUFPLFVBQVl2QyxTQUFTNkMsU0FBU3FQLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUluUyxTQUFTNFIscUJBQXFCLFVBQVUsRUFBSU8sR0FBRUMsV0FBV0MsYUFBYUwsRUFBSUciLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGV4cG9ydGVkIFdJREdFVF9DT01NT05fQ09ORklHICovXG52YXIgV0lER0VUX0NPTU1PTl9DT05GSUcgPSB7XG4gIEFVVEhfUEFUSF9VUkw6IFwidjEvd2lkZ2V0L2F1dGhcIixcbiAgTE9HR0VSX0NMSUVOVF9JRDogXCIxMDg4NTI3MTQ3MTA5LTZxMW8ydnRpaG4zNDI5MnBqdDRja2htaGNrMHJrMG83LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXG4gIExPR0dFUl9DTElFTlRfU0VDUkVUOiBcIm5sWnlyY1BMZzZvRXdPOWY5V2ZuMjlXaFwiLFxuICBMT0dHRVJfUkVGUkVTSF9UT0tFTjogXCIxL3h6dDRrd3pFMUg3VzlWbktCOGNBYUN4NnpiNEVzNG5LRW9xYVlIZFREMTVJZ09ySkR0ZHVuNnpLNlhpQVRDS1RcIixcbiAgU1RPUkVfVVJMOiBcImh0dHBzOi8vc3RvcmUtZG90LXJ2YXNlcnZlcjIuYXBwc3BvdC5jb20vXCJcbn07XG4vKiBnbG9iYWwgV0lER0VUX0NPTU1PTl9DT05GSUcgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMgPSAoZnVuY3Rpb24oKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gICB2YXIgZGlzcGxheUlkID0gXCJcIixcbiAgICAgY29tcGFueUlkID0gXCJcIixcbiAgICAgdmVyc2lvbiA9IG51bGw7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cblxuICAvKiBSZXRyaWV2ZSBwYXJhbWV0ZXJzIHRvIHBhc3MgdG8gdGhlIGV2ZW50IGxvZ2dlci4gKi9cbiAgZnVuY3Rpb24gZ2V0RXZlbnRQYXJhbXMocGFyYW1zLCBjYikge1xuICAgIHZhciBqc29uID0gbnVsbDtcblxuICAgIC8vIGV2ZW50IGlzIHJlcXVpcmVkLlxuICAgIGlmIChwYXJhbXMuZXZlbnQpIHtcbiAgICAgIGpzb24gPSBwYXJhbXM7XG5cbiAgICAgIGlmIChqc29uLmZpbGVfdXJsKSB7XG4gICAgICAgIGpzb24uZmlsZV9mb3JtYXQgPSBnZXRGaWxlRm9ybWF0KGpzb24uZmlsZV91cmwpO1xuICAgICAgfVxuXG4gICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICBqc29uLmRpc3BsYXlfaWQgPSBkaXNwbGF5SWQ7XG5cbiAgICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICAgIGpzb24udmVyc2lvbiA9IHZlcnNpb247XG4gICAgICB9XG5cbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBzdWZmaXggZm9yIEJRIHRhYmxlIG5hbWUuXG4gIGZ1bmN0aW9uIGdldFN1ZmZpeCgpIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCksXG4gICAgICB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpLFxuICAgICAgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgICAgZGF5ID0gZGF0ZS5nZXRVVENEYXRlKCk7XG5cbiAgICBpZiAobW9udGggPCAxMCkge1xuICAgICAgbW9udGggPSBcIjBcIiArIG1vbnRoO1xuICAgIH1cblxuICAgIGlmIChkYXkgPCAxMCkge1xuICAgICAgZGF5ID0gXCIwXCIgKyBkYXk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHllYXIgKyBtb250aCArIGRheTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIEJBU0VfSU5TRVJUX1NDSEVNQSA9IHtcbiAgICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICAgIFwic2tpcEludmFsaWRSb3dzXCI6IGZhbHNlLFxuICAgICAgXCJpZ25vcmVVbmtub3duVmFsdWVzXCI6IGZhbHNlLFxuICAgICAgXCJ0ZW1wbGF0ZVN1ZmZpeFwiOiBnZXRTdWZmaXgoKSxcbiAgICAgIFwicm93c1wiOiBbe1xuICAgICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICAgIH1dXG4gICAgfSxcbiAgICBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShCQVNFX0lOU0VSVF9TQ0hFTUEpKTtcblxuICAgIGRhdGEucm93c1swXS5pbnNlcnRJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyKS50b1VwcGVyQ2FzZSgpO1xuICAgIGRhdGEucm93c1swXS5qc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICBkYXRhLnJvd3NbMF0uanNvbi50cyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiBTZXQgdGhlIENvbXBhbnkgYW5kIERpc3BsYXkgSURzLiAqL1xuICBmdW5jdGlvbiBzZXRJZHMoY29tcGFueSwgZGlzcGxheSkge1xuICAgIGNvbXBhbnlJZCA9IGNvbXBhbnk7XG4gICAgZGlzcGxheUlkID0gZGlzcGxheTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFZlcnNpb24odmFsdWUpIHtcbiAgICB2ZXJzaW9uID0gdmFsdWU7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SW5zZXJ0RGF0YVwiOiBnZXRJbnNlcnREYXRhLFxuICAgIFwiZ2V0RmlsZUZvcm1hdFwiOiBnZXRGaWxlRm9ybWF0LFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJzZXRJZHNcIjogc2V0SWRzLFxuICAgIFwic2V0VmVyc2lvblwiOiBzZXRWZXJzaW9uXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHRhYmxlTmFtZSk7XG4gICAgICByZWZyZXNoRGF0ZSA9IHJlZnJlc2hEYXRhLnJlZnJlc2hlZEF0IHx8IHJlZnJlc2hEYXRlO1xuICAgICAgdG9rZW4gPSByZWZyZXNoRGF0YS50b2tlbiB8fCB0b2tlbjtcbiAgICAgIGluc2VydERhdGEgPSB1dGlscy5nZXRJbnNlcnREYXRhKHBhcmFtcyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgZGF0YS5cbiAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIHRydWUpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsIFwiQmVhcmVyIFwiICsgdG9rZW4pO1xuXG4gICAgICBpZiAocGFyYW1zLmNiICYmIHR5cGVvZiBwYXJhbXMuY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcGFyYW1zLmNiKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGluc2VydERhdGEpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVmcmVzaFRva2VuKGluc2VydFdpdGhUb2tlbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwibG9nXCI6IGxvZ1xuICB9O1xufSkoUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMpO1xuLyogZ2xvYmFsIFdlYkZvbnQgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OiBcIiArIGRlY29kZVVSSUNvbXBvbmVudChmb250T2JqLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpICsgXCI7IFwiO1xuICAgIHZhciBjb2xvciA9IFwiY29sb3I6IFwiICsgKGZvbnRPYmouY29sb3IgPyBmb250T2JqLmNvbG9yIDogZm9udE9iai5mb3JlY29sb3IpICsgXCI7IFwiO1xuICAgIHZhciBzaXplID0gXCJmb250LXNpemU6IFwiICsgKGZvbnRPYmouc2l6ZS5pbmRleE9mKFwicHhcIikgPT09IC0xID8gZm9udE9iai5zaXplICsgXCJweDsgXCIgOiBmb250T2JqLnNpemUgKyBcIjsgXCIpO1xuICAgIHZhciB3ZWlnaHQgPSBcImZvbnQtd2VpZ2h0OiBcIiArIChmb250T2JqLmJvbGQgPyBcImJvbGRcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciBpdGFsaWMgPSBcImZvbnQtc3R5bGU6IFwiICsgKGZvbnRPYmouaXRhbGljID8gXCJpdGFsaWNcIiA6IFwibm9ybWFsXCIpICsgXCI7IFwiO1xuICAgIHZhciB1bmRlcmxpbmUgPSBcInRleHQtZGVjb3JhdGlvbjogXCIgKyAoZm9udE9iai51bmRlcmxpbmUgPyBcInVuZGVybGluZVwiIDogXCJub25lXCIpICsgXCI7IFwiO1xuICAgIHZhciBoaWdobGlnaHQgPSBcImJhY2tncm91bmQtY29sb3I6IFwiICsgKGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgPyBmb250T2JqLmhpZ2hsaWdodENvbG9yIDogZm9udE9iai5iYWNrY29sb3IpICsgXCI7XCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjYikge1xuICAgIHZhciBmYW1pbGllcyA9IG51bGwsXG4gICAgICBnb29nbGVGYW1pbGllcyA9IFtdLFxuICAgICAgY3VzdG9tRmFtaWxpZXMgPSBbXSxcbiAgICAgIGN1c3RvbVVybHMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGNhbGxiYWNrKCkge1xuICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNiKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Hb29nbGVGb250c0xvYWRlZCgpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgaWYgKCFzZXR0aW5ncyB8fCBzZXR0aW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGN1c3RvbSBjc3MgY2xhc3MgbmFtZXMgYW5kIGFkZCBydWxlcyBpZiBzb1xuICAgIHNldHRpbmdzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKGl0ZW0uY2xhc3MgJiYgaXRlbS5mb250U3R5bGUpIHtcbiAgICAgICAgYWRkQ1NTUnVsZXMoWyBnZXRGb250Q3NzU3R5bGUoaXRlbS5jbGFzcywgaXRlbS5mb250U3R5bGUpIF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gR29vZ2xlIGZvbnRzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImdvb2dsZVwiKSkge1xuICAgICAgICAvLyBSZW1vdmUgZmFsbGJhY2sgZm9udC5cbiAgICAgICAgZmFtaWxpZXMgPSBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC5mYW1pbHkuc3BsaXQoXCIsXCIpWzBdO1xuXG4gICAgICAgIC8vIHN0cmlwIHBvc3NpYmxlIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgZmFtaWxpZXMgPSBmYW1pbGllcy5yZXBsYWNlKC8nL2csIFwiXCIpO1xuXG4gICAgICAgIGdvb2dsZUZhbWlsaWVzLnB1c2goZmFtaWxpZXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN1c3RvbSBmb250c1xuICAgIGZvciAoaSA9IDA7IGkgPCBzZXR0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNldHRpbmdzW2ldLmZvbnRTdHlsZSAmJiBzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlICYmXG4gICAgICAgIChzZXR0aW5nc1tpXS5mb250U3R5bGUuZm9udC50eXBlID09PSBcImN1c3RvbVwiKSkge1xuICAgICAgICAvLyBkZWNvZGUgdmFsdWUgYW5kIHN0cmlwIHNpbmdsZSBxdW90ZXNcbiAgICAgICAgY3VzdG9tRmFtaWxpZXMucHVzaChkZWNvZGVVUklDb21wb25lbnQoc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQuZmFtaWx5KS5yZXBsYWNlKC8nL2csIFwiXCIpKTtcbiAgICAgICAgLy8gc3RyaXAgc2luZ2xlIHF1b3Rlc1xuICAgICAgICBjdXN0b21VcmxzLnB1c2goc2V0dGluZ3NbaV0uZm9udFN0eWxlLmZvbnQudXJsLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdvb2dsZUZhbWlsaWVzLmxlbmd0aCA9PT0gMCAmJiBjdXN0b21GYW1pbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gTG9hZCB0aGUgZm9udHNcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY3VzdG9tRmFtaWxpZXMubGVuZ3RoOyBqICs9IDEpIHtcbiAgICAgICAgbG9hZEN1c3RvbUZvbnQoY3VzdG9tRmFtaWxpZXNbal0sIGN1c3RvbVVybHNbal0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29vZ2xlRmFtaWxpZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBsb2FkR29vZ2xlRm9udHMoZ29vZ2xlRmFtaWxpZXMsIG9uR29vZ2xlRm9udHNMb2FkZWQpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnRzKGZhbWlsaWVzLCBjYikge1xuICAgIFdlYkZvbnQubG9hZCh7XG4gICAgICBnb29nbGU6IHtcbiAgICAgICAgZmFtaWxpZXM6IGZhbWlsaWVzXG4gICAgICB9LFxuICAgICAgYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGNiICYmIHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRpbWVvdXQ6IDIwMDBcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZWxvYWRJbWFnZXModXJscykge1xuICAgIHZhciBsZW5ndGggPSB1cmxzLmxlbmd0aCxcbiAgICAgIGltYWdlcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaW1hZ2VzW2ldID0gbmV3IEltYWdlKCk7XG4gICAgICBpbWFnZXNbaV0uc3JjID0gdXJsc1tpXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRRdWVyeVBhcmFtZXRlcihwYXJhbSkge1xuICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgdmFycyA9IHF1ZXJ5LnNwbGl0KFwiJlwiKSxcbiAgICAgIHBhaXI7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcblxuICAgICAgaWYgKHBhaXJbMF0gPT0gcGFyYW0pIHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSkge1xuICAgIHZhciBlcnJvck1lc3NhZ2UgPSBcIlwiO1xuICAgIHN3aXRjaCAoc3RhdHVzQ29kZSkge1xuICAgICAgY2FzZSA0MDQ6XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlwiO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTA3OlxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIlRoZXJlIGlzIG5vdCBlbm91Z2ggZGlzayBzcGFjZSB0byBzYXZlIHRoZSBmaWxlIG9uIFJpc2UgQ2FjaGUuXCI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHJldHJpZXZpbmcgdGhlIGZpbGUgZnJvbSBSaXNlIENhY2hlLlwiO1xuICAgIH1cblxuICAgIHJldHVybiBlcnJvck1lc3NhZ2U7XG4gIH1cblxuICBmdW5jdGlvbiB1bmVzY2FwZUhUTUwoaHRtbCkge1xuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICByZXR1cm4gZGl2LnRleHRDb250ZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzSW50ZXJuZXRDb25uZWN0aW9uKGZpbGVQYXRoLCBjYWxsYmFjaykge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIGlmICghZmlsZVBhdGggfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJIRUFEXCIsIGZpbGVQYXRoICsgXCI/Y2I9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZmFsc2UpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgIGNhbGxiYWNrKCh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzA0KSk7XG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGNocm9tZSB2ZXJzaW9uIGlzIHVuZGVyIGEgY2VydGFpbiB2ZXJzaW9uXG4gICAqL1xuICBmdW5jdGlvbiBpc0xlZ2FjeSgpIHtcbiAgICB2YXIgbGVnYWN5VmVyc2lvbiA9IDI1O1xuXG4gICAgdmFyIG1hdGNoID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFxcUyspLyk7XG4gICAgdmFyIHZlcnNpb24gPSBtYXRjaCA/IG1hdGNoWzFdIDogMDtcblxuICAgIGlmICh2ZXJzaW9uKSB7XG4gICAgICB2ZXJzaW9uID0gcGFyc2VJbnQodmVyc2lvbi5zdWJzdHJpbmcoMCx2ZXJzaW9uLmluZGV4T2YoXCIuXCIpKSk7XG5cbiAgICAgIGlmICh2ZXJzaW9uIDw9IGxlZ2FjeVZlcnNpb24pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRRdWVyeVBhcmFtZXRlcjogZ2V0UXVlcnlQYXJhbWV0ZXIsXG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgZ2V0Rm9udENzc1N0eWxlLFxuICAgIGFkZENTU1J1bGVzOiAgICAgIGFkZENTU1J1bGVzLFxuICAgIGxvYWRGb250czogICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICBsb2FkQ3VzdG9tRm9udCxcbiAgICBsb2FkR29vZ2xlRm9udHM6ICAgbG9hZEdvb2dsZUZvbnRzLFxuICAgIHByZWxvYWRJbWFnZXM6ICAgIHByZWxvYWRJbWFnZXMsXG4gICAgZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlOiBnZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2UsXG4gICAgdW5lc2NhcGVIVE1MOiB1bmVzY2FwZUhUTUwsXG4gICAgaGFzSW50ZXJuZXRDb25uZWN0aW9uOiBoYXNJbnRlcm5ldENvbm5lY3Rpb24sXG4gICAgaXNMZWdhY3k6IGlzTGVnYWN5XG4gIH07XG59KSgpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUgPSAoZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgQkFTRV9DQUNIRV9VUkwgPSBcIi8vbG9jYWxob3N0Ojk0OTQvXCI7XG5cbiAgdmFyIF9waW5nUmVjZWl2ZWQgPSBmYWxzZSxcbiAgICBfaXNDYWNoZVJ1bm5pbmcgPSBmYWxzZSxcbiAgICBfaXNWMlJ1bm5pbmcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBwaW5nKGNhbGxiYWNrKSB7XG4gICAgdmFyIHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKSxcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHNlbGYgPSB0aGlzO1xuXG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghX2lzVjJSdW5uaW5nKSB7XG4gICAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwgKyBcInBpbmc/Y2FsbGJhY2s9X1wiLCB0cnVlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByLm9wZW4oXCJHRVRcIiwgQkFTRV9DQUNIRV9VUkwsIHRydWUpO1xuICAgIH1cblxuICAgIHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHIucmVhZHlTdGF0ZSA9PT0gNCApIHtcbiAgICAgICAgICAvLyBzYXZlIHRoaXMgcmVzdWx0IGZvciB1c2UgaW4gZ2V0RmlsZSgpXG4gICAgICAgICAgX3BpbmdSZWNlaXZlZCA9IHRydWU7XG5cbiAgICAgICAgICBpZihyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICBfaXNDYWNoZVJ1bm5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayh0cnVlLCByLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChyLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICAvLyBSaXNlIENhY2hlIFYyIGlzIHJ1bm5pbmdcbiAgICAgICAgICAgIF9pc1YyUnVubmluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGNhbGwgcGluZyBhZ2FpbiBzbyBjb3JyZWN0IHBpbmcgVVJMIGlzIHVzZWQgZm9yIFJpc2UgQ2FjaGUgVjJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnBpbmcoY2FsbGJhY2spO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZ1wiKTtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiQ2F1Z2h0IGV4Y2VwdGlvbjogXCIsIGUuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgfTtcbiAgICByLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGUoZmlsZVVybCwgY2FsbGJhY2ssIG5vY2FjaGVidXN0ZXIpIHtcbiAgICBpZiAoIWZpbGVVcmwgfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoKSB7XG4gICAgICB2YXIgdXJsLCBzdHIsIHNlcGFyYXRvcjtcblxuICAgICAgaWYgKF9pc0NhY2hlUnVubmluZykge1xuICAgICAgICAvLyBjb25maWd1cmUgdXJsIHdpdGggY2FjaGVidXN0ZXIgb3Igbm90XG4gICAgICAgIHVybCA9IChub2NhY2hlYnVzdGVyKSA/IEJBU0VfQ0FDSEVfVVJMICsgXCI/dXJsPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVVcmwpIDpcbiAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgaWYgKF9pc0NhY2hlUnVubmluZykge1xuICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG5cbiAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgc3RhdHVzID0geGhyLnN0YXR1cyB8fCAwO1xuXG4gICAgICAgICAgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2VydmVyIG1heSBub3Qgc3VwcG9ydCBIRUFEIHJlcXVlc3QuIEZhbGxiYWNrIHRvIGEgR0VUIHJlcXVlc3QuXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkhFQURcIikge1xuICAgICAgICAgICAgICBtYWtlUmVxdWVzdChcIkdFVFwiLCB1cmwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCwgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgc3RhdHVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFJpc2UgQ2FjaGUgaXMgbm90IHJ1bm5pbmcgKHByZXZpZXcpLCBza2lwIEhFQUQgcmVxdWVzdCBhbmQgZXhlY3V0ZSBjYWxsYmFjayBpbW1lZGlhdGVseVxuICAgICAgICBjYWxsYmFjayhyZXF1ZXN0KTtcbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmICghX3BpbmdSZWNlaXZlZCkge1xuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgcmV0dXJuIHRoaXMucGluZyhmaWxlUmVxdWVzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmaWxlUmVxdWVzdCgpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gaXNSaXNlQ2FjaGVSdW5uaW5nKGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghX3BpbmdSZWNlaXZlZCkge1xuICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgcmV0dXJuIHRoaXMucGluZyhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKF9pc0NhY2hlUnVubmluZyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc1YyUnVubmluZyhjYWxsYmFjaykge1xuICAgIGlmICghY2FsbGJhY2sgfHwgdHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIV9waW5nUmVjZWl2ZWQpIHtcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHJldHVybiB0aGlzLnBpbmcoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhfaXNWMlJ1bm5pbmcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2FsbGJhY2soX2lzVjJSdW5uaW5nKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldEZpbGU6IGdldEZpbGUsXG4gICAgaXNSaXNlQ2FjaGVSdW5uaW5nOiBpc1Jpc2VDYWNoZVJ1bm5pbmcsXG4gICAgaXNWMlJ1bm5pbmc6IGlzVjJSdW5uaW5nLFxuICAgIHBpbmc6IHBpbmdcbiAgfTtcblxufSkoKTtcblxuLyogZXhwb3J0ZWQgdmVyc2lvbiAqL1xudmFyIHZlcnNpb24gPSBcIjEuMS4wXCI7XG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgIC5jb25zdGFudChcIkxPQ0FMRVNfUFJFRklYXCIsIFwibG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG59XG5cbnZhciAgY29uZmlnID0ge1xuICBTVE9SQUdFX0VOVjogXCJwcm9kXCJcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBfICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSB7fTtcblxuUmlzZVZpc2lvbi5WaWRlbyA9IChmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfYWRkaXRpb25hbFBhcmFtcywgX21vZGU7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlLFxuICAgIF9jb25maWdEZXRhaWxzID0gbnVsbDtcblxuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGwsXG4gICAgX25vblN0b3JhZ2UgPSBudWxsLFxuICAgIF9tZXNzYWdlID0gbnVsbCxcbiAgICBfcGxheWVyID0gbnVsbDtcblxuICB2YXIgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgdmFyIF9yZXN1bWUgPSB0cnVlO1xuXG4gIHZhciBfY3VycmVudEZpbGVzID0gW107XG5cbiAgdmFyIF9jdXJyZW50UGxheWxpc3RJbmRleCA9IG51bGw7XG5cbiAgdmFyIF9lcnJvckxvZyA9IG51bGwsXG4gICAgX2Vycm9yVGltZXIgPSBudWxsLFxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcblxuICB2YXIgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZSxcbiAgICBfcGxheWVyRXJyb3JGbGFnID0gZmFsc2UsXG4gICAgX3VuYXZhaWxhYmxlRmxhZyA9IGZhbHNlO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9kb25lKCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X2RvbmVcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpKTtcblxuICAgIC8vIEFueSBlcnJvcnMgbmVlZCB0byBiZSBsb2dnZWQgYmVmb3JlIHRoZSBkb25lIGV2ZW50LlxuICAgIGlmIChfZXJyb3JMb2cgIT09IG51bGwpIHtcbiAgICAgIGxvZ0V2ZW50KF9lcnJvckxvZywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwiZG9uZVwiIH0sIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhckVycm9yVGltZXIoKSB7XG4gICAgY2xlYXJUaW1lb3V0KF9lcnJvclRpbWVyKTtcbiAgICBfZXJyb3JUaW1lciA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRFcnJvclRpbWVyKCkge1xuICAgIF9jbGVhckVycm9yVGltZXIoKTtcblxuICAgIF9lcnJvclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBub3RpZnkgVmlld2VyIHdpZGdldCBpcyBkb25lXG4gICAgICBfZG9uZSgpO1xuICAgIH0sIDUwMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlKCkge1xuICAgIGlmIChfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1swXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAgIGlmIChfY3VycmVudFBsYXlsaXN0SW5kZXgpIHtcbiAgICAgICAgICAvLyByZXRyaWV2ZSB0aGUgY3VycmVudGx5IHBsYXllZCBmaWxlXG4gICAgICAgICAgcmV0dXJuIF9jdXJyZW50RmlsZXNbX2N1cnJlbnRQbGF5bGlzdEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBoYXNTdG9yYWdlRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9zdG9yYWdlRXJyb3JGbGFnO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzUGxheWVyRXJyb3IoKSB7XG4gICAgcmV0dXJuIF9wbGF5ZXJFcnJvckZsYWc7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93RXJyb3IobWVzc2FnZSwgaXNTdG9yYWdlRXJyb3IpIHtcbiAgICBfZXJyb3JGbGFnID0gdHJ1ZTtcbiAgICBfc3RvcmFnZUVycm9yRmxhZyA9IHR5cGVvZiBpc1N0b3JhZ2VFcnJvciAhPT0gXCJ1bmRlZmluZWRcIjtcblxuICAgIF9tZXNzYWdlLnNob3cobWVzc2FnZSk7XG5cbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuXG4gICAgLy8gaWYgV2lkZ2V0IGlzIHBsYXlpbmcgcmlnaHQgbm93LCBydW4gdGhlIHRpbWVyXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBsb2dFdmVudChwYXJhbXMsIGlzRXJyb3IpIHtcbiAgICBpZiAoaXNFcnJvcikge1xuICAgICAgX2Vycm9yTG9nID0gcGFyYW1zO1xuICAgIH1cblxuICAgIGlmICghcGFyYW1zLmZpbGVfdXJsKSB7XG4gICAgICBwYXJhbXMuZmlsZV91cmwgPSBfZ2V0Q3VycmVudEZpbGUoKTtcbiAgICB9XG5cbiAgICBSaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXJVdGlscy5sb2dFdmVudChnZXRUYWJsZU5hbWUoKSwgcGFyYW1zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZUluaXQodXJscykge1xuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhIHN0cmluZ1xuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5XG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcbiAgICB9XG5cbiAgICBfdW5hdmFpbGFibGVGbGFnID0gZmFsc2U7XG5cbiAgICBfbWVzc2FnZS5oaWRlKCk7XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIHBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVSZWZyZXNoKHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmcgb2Ygb25lIHVybFxuICAgICAgX2N1cnJlbnRGaWxlc1swXSA9IHVybHM7XG4gICAgfSBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5IG9mIHVybHNcbiAgICAgIF9jdXJyZW50RmlsZXMgPSB1cmxzO1xuICAgIH1cblxuICAgIGlmIChfcGxheWVyKSB7XG4gICAgICBfcGxheWVyLnVwZGF0ZShfY3VycmVudEZpbGVzKTsgIFxuICAgIH1cblxuICAgIC8vIGluIGNhc2UgcmVmcmVzaGVkIGZpbGUgZml4ZXMgYW4gZXJyb3Igd2l0aCBwcmV2aW91cyBmaWxlLCBlbnN1cmUgZmxhZyBpcyByZW1vdmVkIHNvIHBsYXliYWNrIGlzIGF0dGVtcHRlZCBhZ2FpblxuICAgIF9lcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfcGxheWVyRXJyb3JGbGFnID0gZmFsc2U7XG4gICAgX3N0b3JhZ2VFcnJvckZsYWcgPSBmYWxzZTtcbiAgICBfdW5hdmFpbGFibGVGbGFnID0gZmFsc2U7XG4gICAgX2Vycm9yTG9nID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsZVVuYXZhaWxhYmxlKG1lc3NhZ2UpIHtcbiAgICBfdW5hdmFpbGFibGVGbGFnID0gdHJ1ZTtcblxuICAgIF9tZXNzYWdlLnNob3cobWVzc2FnZSk7XG5cbiAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuXG4gICAgLy8gaWYgV2lkZ2V0IGlzIHBsYXlpbmcgcmlnaHQgbm93LCBydW4gdGhlIHRpbWVyXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBfc3RhcnRFcnJvclRpbWVyKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICAgIC8vIGluIGNhc2UgZXJyb3IgdGltZXIgc3RpbGwgcnVubmluZyAobm8gY29uZGl0aW9uYWwgY2hlY2sgb24gZXJyb3JGbGFnLCBpdCBtYXkgaGF2ZSBiZWVuIHJlc2V0IGluIG9uRmlsZVJlZnJlc2gpXG4gICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuXG4gICAgaWYgKF9wbGF5ZXIpIHtcbiAgICAgIGlmICghX3Jlc3VtZSkge1xuICAgICAgICBfY3VycmVudFBsYXlsaXN0SW5kZXggPSBudWxsO1xuICAgICAgICBfcGxheWVyLnJlc2V0KCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgX3BsYXllci5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gcGxheSgpIHtcbiAgICBpZiAoX2lzTG9hZGluZykge1xuICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBMb2cgY29uZmlndXJhdGlvbiBldmVudC5cbiAgICAgIGxvZ0V2ZW50KHtcbiAgICAgICAgZXZlbnQ6IFwiY29uZmlndXJhdGlvblwiLFxuICAgICAgICBldmVudF9kZXRhaWxzOiBfY29uZmlnRGV0YWlsc1xuICAgICAgfSwgZmFsc2UpO1xuICAgIH1cblxuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGxvZ0V2ZW50KHsgXCJldmVudFwiOiBcInBsYXlcIiB9LCBmYWxzZSk7XG5cbiAgICBpZiAoX2Vycm9yRmxhZykge1xuICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChfdW5hdmFpbGFibGVGbGFnKSB7XG4gICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiICYmIF9zdG9yYWdlKSB7XG4gICAgICAgIF9zdG9yYWdlLnJldHJ5KCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoX3BsYXllcikge1xuICAgICAgLy8gRW5zdXJlcyBwb3NzaWJsZSBlcnJvciBtZXNzYWdpbmcgZ2V0cyBoaWRkZW4gYW5kIHZpZGVvIGdldHMgc2hvd25cbiAgICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgICAgX3BsYXllci5wbGF5KCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKF9jdXJyZW50RmlsZXMgJiYgX2N1cnJlbnRGaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIF9wbGF5ZXIgPSBuZXcgUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXIoX2FkZGl0aW9uYWxQYXJhbXMsIF9tb2RlKTtcbiAgICAgICAgX3BsYXllci5pbml0KF9jdXJyZW50RmlsZXMpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VGFibGVOYW1lKCkge1xuICAgIHJldHVybiBcInZpZGVvX3YyX2V2ZW50c1wiO1xuICB9XG5cbiAgZnVuY3Rpb24gcGxheWVyRW5kZWQoKSB7XG4gICAgX2N1cnJlbnRQbGF5bGlzdEluZGV4ID0gbnVsbDtcblxuICAgIF9kb25lKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJSZWFkeSgpIHtcbiAgICAvLyBFbnN1cmVzIGxvYWRpbmcgbWVzc2FnaW5nIGlzIGhpZGRlbiBhbmQgdmlkZW8gZ2V0cyBzaG93blxuICAgIF9tZXNzYWdlLmhpZGUoKTtcblxuICAgIGlmICghX3ZpZXdlclBhdXNlZCAmJiBfcGxheWVyKSB7XG4gICAgICBfcGxheWVyLnBsYXkoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJJdGVtQ2hhbmdlKGluZGV4KSB7XG4gICAgX2N1cnJlbnRQbGF5bGlzdEluZGV4ID0gaW5kZXg7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKHBhcmFtcywgbW9kZSkge1xuICAgIHZhciBpc1N0b3JhZ2VGaWxlO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBfLmNsb25lKHBhcmFtcyk7XG4gICAgX21vZGUgPSBtb2RlO1xuICAgIF9wcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbnRhaW5lclwiKS5zdHlsZS53aWR0aCA9IF9wcmVmcy5nZXRJbnQoXCJyc1dcIikgKyBcInB4XCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIikuc3R5bGUuaGVpZ2h0ID0gX3ByZWZzLmdldEludChcInJzSFwiKSArIFwicHhcIjtcblxuICAgIF9hZGRpdGlvbmFsUGFyYW1zLndpZHRoID0gX3ByZWZzLmdldEludChcInJzV1wiKTtcbiAgICBfYWRkaXRpb25hbFBhcmFtcy5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpO1xuXG4gICAgaWYgKF9hZGRpdGlvbmFsUGFyYW1zLnZpZGVvLmhhc093blByb3BlcnR5KFwicmVzdW1lXCIpKSB7XG4gICAgICBfcmVzdW1lID0gX2FkZGl0aW9uYWxQYXJhbXMudmlkZW8ucmVzdW1lO1xuICAgIH1cblxuICAgIF9tZXNzYWdlID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb250YWluZXJcIiksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgaWYgKFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcy5pc0xlZ2FjeSgpKSB7XG4gICAgICBzaG93RXJyb3IoXCJUaGlzIHZlcnNpb24gb2YgVmlkZW8gV2lkZ2V0IGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyB2ZXJzaW9uIG9mIFJpc2UgUGxheWVyLiBcIiArXG4gICAgICAgIFwiUGxlYXNlIHVzZSB0aGUgbGF0ZXN0IFJpc2UgUGxheWVyIHZlcnNpb24gYXZhaWxhYmxlIGF0IGh0dHBzOi8vaGVscC5yaXNldmlzaW9uLmNvbS91c2VyL2NyZWF0ZS1hLWRpc3BsYXlcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHNob3cgd2FpdCBtZXNzYWdlIHdoaWxlIFN0b3JhZ2UgaW5pdGlhbGl6ZXNcbiAgICAgIF9tZXNzYWdlLnNob3coXCJQbGVhc2Ugd2FpdCB3aGlsZSB5b3VyIHZpZGVvIGlzIGRvd25sb2FkZWQuXCIpO1xuXG4gICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgIGlzU3RvcmFnZUZpbGUgPSAoT2JqZWN0LmtleXMoX2FkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZSkubGVuZ3RoICE9PSAwKTtcblxuICAgICAgICBpZiAoIWlzU3RvcmFnZUZpbGUpIHtcbiAgICAgICAgICBfY29uZmlnRGV0YWlscyA9IFwiY3VzdG9tXCI7XG5cbiAgICAgICAgICBfbm9uU3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICAgIF9ub25TdG9yYWdlLmluaXQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfY29uZmlnRGV0YWlscyA9IFwic3RvcmFnZSBmaWxlXCI7XG5cbiAgICAgICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZmlsZSBpbnN0YW5jZVxuICAgICAgICAgIF9zdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uU3RvcmFnZUZpbGUoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICAgIF9zdG9yYWdlLmluaXQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgICAgX2NvbmZpZ0RldGFpbHMgPSBcInN0b3JhZ2UgZm9sZGVyXCI7XG5cbiAgICAgICAgLy8gY3JlYXRlIGFuZCBpbml0aWFsaXplIHRoZSBTdG9yYWdlIGZvbGRlciBpbnN0YW5jZVxuICAgICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGb2xkZXIoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgICBfc3RvcmFnZS5pbml0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICAvLyBBbiBlcnJvciBvY2N1cnJlZCB3aXRoIEpXIFBsYXllci5cbiAgZnVuY3Rpb24gcGxheWVyRXJyb3IoZXJyb3IpIHtcbiAgICB2YXIgZGV0YWlscyA9IG51bGwsXG4gICAgICBwYXJhbXMgPSB7fSxcbiAgICAgIG1lc3NhZ2UgPSBcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvLlwiLFxuICAgICAgTUVESUFfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgbWVkaWE6IEZpbGUgY291bGQgbm90IGJlIHBsYXllZFwiLFxuICAgICAgWU9VVFVCRV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBZb3VUdWJlOiBWaWRlbyBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBQTEFZRVJfRVJST1IgPSBcIkVycm9yIGxvYWRpbmcgcGxheWVyOiBObyBtZWRpYSBzb3VyY2VzIGZvdW5kXCIsXG4gICAgICBQTEFZTElTVF9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBwbGF5bGlzdDogTm8gcGxheWFibGUgc291cmNlcyBmb3VuZFwiLFxuICAgICAgRU5DT0RJTkdfTUVTU0FHRSA9IFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoYXQgdmlkZW8uIEl0IGNvdWxkIGJlIHRoYXQgd2UgZG9uJ3QgXCIgK1xuICAgICAgICBcInN1cHBvcnQgdGhhdCBmb3JtYXQgb3IgaXQgaXMgbm90IGVuY29kZWQgY29ycmVjdGx5LlwiLFxuICAgICAgRk9STUFUX01FU1NBR0UgPSBcIlRoZSBmb3JtYXQgb2YgdGhhdCB2aWRlbyBpcyBub3Qgc3VwcG9ydGVkXCI7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci50eXBlICYmIGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGUgKyBcIiAtIFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLnR5cGUpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuXG4gICAgICAvLyBEaXNwbGF5IGFwcHJvcHJpYXRlIG9uLXNjcmVlbiBlcnJvciBtZXNzYWdlLlxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKChlcnJvci5tZXNzYWdlID09PSBNRURJQV9FUlJPUikgfHwgKGVycm9yLm1lc3NhZ2UgPT09IFlPVVRVQkVfRVJST1IpKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IEVOQ09ESU5HX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXJyb3IubWVzc2FnZSA9PT0gUExBWUVSX0VSUk9SIHx8IGVycm9yLm1lc3NhZ2UgPT09IFBMQVlMSVNUX0VSUk9SKSB7XG4gICAgICAgICAgbWVzc2FnZSA9IEZPUk1BVF9NRVNTQUdFO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFyYW1zLmV2ZW50ID0gXCJwbGF5ZXIgZXJyb3JcIjtcbiAgICBwYXJhbXMuZXZlbnRfZGV0YWlscyA9IGRldGFpbHM7XG4gICAgX3BsYXllckVycm9yRmxhZyA9IHRydWU7XG5cbiAgICBsb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIHNob3dFcnJvcihtZXNzYWdlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgcGF1c2UoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRUYWJsZU5hbWVcIjogZ2V0VGFibGVOYW1lLFxuICAgIFwiaGFzUGxheWVyRXJyb3JcIjogaGFzUGxheWVyRXJyb3IsXG4gICAgXCJoYXNTdG9yYWdlRXJyb3JcIjogaGFzU3RvcmFnZUVycm9yLFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnQsXG4gICAgXCJvbkZpbGVJbml0XCI6IG9uRmlsZUluaXQsXG4gICAgXCJvbkZpbGVSZWZyZXNoXCI6IG9uRmlsZVJlZnJlc2gsXG4gICAgXCJvbkZpbGVVbmF2YWlsYWJsZVwiOiBvbkZpbGVVbmF2YWlsYWJsZSxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0QWRkaXRpb25hbFBhcmFtc1wiOiBzZXRBZGRpdGlvbmFsUGFyYW1zLFxuICAgIFwic2hvd0Vycm9yXCI6IHNob3dFcnJvcixcbiAgICBcInBsYXllckVuZGVkXCI6IHBsYXllckVuZGVkLFxuICAgIFwicGxheWVyUmVhZHlcIjogcGxheWVyUmVhZHksXG4gICAgXCJwbGF5ZXJFcnJvclwiOiBwbGF5ZXJFcnJvcixcbiAgICBcInBsYXllckl0ZW1DaGFuZ2VcIjogcGxheWVySXRlbUNoYW5nZSxcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5QbGF5ZXJVdGlscyA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIC8qXG4gICAqICBQdWJsaWMgIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGdldFBsYXlsaXN0IChsaXN0KSB7XG4gICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICBcbiAgICB2YXIgcGxheWxpc3QgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgcGxheWxpc3QucHVzaCh7XG4gICAgICAgIGZpbGU6IGxpc3RbaV0sXG4gICAgICAgIHR5cGU6IHRoaXMuZ2V0VmlkZW9GaWxlVHlwZShsaXN0W2ldKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBsYXlsaXN0O1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRWaWRlb0ZpbGVUeXBlICh1cmwpIHtcbiAgICB2YXIgZXh0ZW5zaW9ucyA9IFtcIi5tcDRcIiwgXCIud2VibVwiXSxcbiAgICAgIHVybExvd2VyY2FzZSA9IHVybC50b0xvd2VyQ2FzZSgpLFxuICAgICAgdHlwZSA9IG51bGwsXG4gICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8PSBleHRlbnNpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodXJsTG93ZXJjYXNlLmluZGV4T2YoZXh0ZW5zaW9uc1tpXSkgIT09IC0xKSB7XG4gICAgICAgIHR5cGUgPSBleHRlbnNpb25zW2ldLnN1YnN0cihleHRlbnNpb25zW2ldLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRQbGF5bGlzdFwiOiBnZXRQbGF5bGlzdCxcbiAgICBcImdldFZpZGVvRmlsZVR5cGVcIjogZ2V0VmlkZW9GaWxlVHlwZVxuICB9O1xuXG59KSgpO1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGaWxlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChlLmRldGFpbC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eVxuICAgICAgICAgIGlmIChlLmRldGFpbC5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikpIHtcbiAgICAgICAgICAgIGlmIChlLmRldGFpbC5jaGFuZ2VkKSB7XG4gICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIC8vIGluIHRoZSBldmVudCBvZiBhIG5ldHdvcmsgZmFpbHVyZSBhbmQgcmVjb3ZlcnksIGNoZWNrIGlmIHRoZSBXaWRnZXQgaXMgaW4gYSBzdGF0ZSBvZiBzdG9yYWdlIGVycm9yXG4gICAgICAgICAgICAgIGlmIChSaXNlVmlzaW9uLlZpZGVvLmhhc1N0b3JhZ2VFcnJvcigpIHx8IFJpc2VWaXNpb24uVmlkZW8uaGFzUGxheWVyRXJyb3IoKSkge1xuICAgICAgICAgICAgICAgIC8vIHByb2NlZWQgd2l0aCByZWZyZXNoIGxvZ2ljIHNvIHRoZSBXaWRnZXQgY2FuIGV2ZW50dWFsbHkgcGxheSB2aWRlbyBhZ2FpbiBmcm9tIGEgbmV0d29yayByZWNvdmVyeVxuICAgICAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtYXBpLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJzdG9yYWdlIGFwaSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJSZXNwb25zZSBjb2RlOiBcIiArIGUuZGV0YWlsLmNvZGUgKyBcIiwgbWVzc2FnZTogXCIgKyBlLmRldGFpbC5tZXNzYWdlXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZpbGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZmlsZSBub3QgZm91bmRcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1maWxlLXRocm90dGxlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIHRocm90dGxlZFwiLCBcImZpbGVfdXJsXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1zdWJzY3JpcHRpb24tZXhwaXJlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIHN1YnNjcmlwdGlvbiBleHBpcmVkXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJSaXNlIFN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGlzIG5vdCBhY3RpdmUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcbiAgICAgICAgXCJldmVudFwiOiBcInN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2Ugc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBjb21tdW5pY2F0aW5nIHdpdGggUmlzZSBTdG9yYWdlLlwiLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2UgY2FjaGUgZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsLmVycm9yLm1lc3NhZ2VcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcblxuICAgICAgdmFyIHN0YXR1c0NvZGUgPSAwO1xuICAgICAgLy8gU2hvdyBhIGRpZmZlcmVudCBtZXNzYWdlIGlmIHRoZXJlIGlzIGEgNDA0IGNvbWluZyBmcm9tIHJpc2UgY2FjaGVcbiAgICAgIGlmKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2Upe1xuICAgICAgICBzdGF0dXNDb2RlID0gK2UuZGV0YWlsLmVycm9yLm1lc3NhZ2Uuc3Vic3RyaW5nKGUuZGV0YWlsLmVycm9yLm1lc3NhZ2UuaW5kZXhPZihcIjpcIikrMik7XG4gICAgICB9XG5cbiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2UtY2FjaGUtbm90LXJ1bm5pbmdcIiwgZnVuY3Rpb24oZSkge1xuXG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBub3QgcnVubmluZ1wiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogKGUuZGV0YWlsICYmIGUuZGV0YWlsLmVycm9yKT8gZS5kZXRhaWwuZXJyb3IubWVzc2FnZTogXCJcIlxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1maWxlLXVuYXZhaWxhYmxlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVVuYXZhaWxhYmxlKGUuZGV0YWlsLm1lc3NhZ2UpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLnN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV0cnkoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXQsXG4gICAgXCJyZXRyeVwiOiByZXRyeVxuICB9O1xufTtcblxuLyogZ2xvYmFsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgdmFyIF9maWxlcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9nZXRVcmxzKCkge1xuICAgIHJldHVybiBfLnBsdWNrKF9maWxlcywgXCJ1cmxcIik7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpIHtcbiAgICByZXR1cm4gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGYubmFtZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWxldGVGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBfZmlsZXMuc3BsaWNlKF9maWxlcy5pbmRleE9mKGV4aXN0aW5nKSwgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoYW5nZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGV4aXN0aW5nLnVybCA9IGZpbGUudXJsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9hZGRGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKCFleGlzdGluZykge1xuICAgICAgLy8gZXh0cmFjdCB0aGUgYWN0dWFsIGZpbGUgbmFtZSBhbmQgc3RvcmUgaW4gbmV3IHByb3BlcnR5IG9uIGZpbGUgb2JqZWN0XG4gICAgICBmaWxlLmZpbGVOYW1lID0gZmlsZS5uYW1lLnNsaWNlKGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBpbnNlcnQgZmlsZSB0byBfZmlsZXMgbGlzdCBhdCBzcGVjaWZpYyBpbmRleCBiYXNlZCBvbiBhbHBoYWJldGljYWwgb3JkZXIgb2YgZmlsZSBuYW1lXG4gICAgICBfZmlsZXMuc3BsaWNlKF8uc29ydGVkSW5kZXgoX2ZpbGVzLCBmaWxlLCBcImZpbGVOYW1lXCIpLCAwLCBmaWxlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZSA9IGUuZGV0YWlsO1xuXG4gICAgICAvLyBBZGRlZFxuICAgICAgaWYoZmlsZS5hZGRlZCkge1xuICAgICAgICBfYWRkRmlsZShmaWxlKTtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KF9nZXRVcmxzKCkpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoYW5nZWQgb3IgdW5jaGFuZ2VkXG4gICAgICBpZiAoZmlsZS5oYXNPd25Qcm9wZXJ0eShcImNoYW5nZWRcIikpIHtcbiAgICAgICAgaWYoZmlsZS5jaGFuZ2VkKSB7XG4gICAgICAgICAgX2NoYW5nZUZpbGUoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gaW4gdGhlIGV2ZW50IG9mIGEgbmV0d29yayBmYWlsdXJlIGFuZCByZWNvdmVyeSwgY2hlY2sgaWYgdGhlIFdpZGdldCBpcyBpbiBhIHN0YXRlIG9mIHN0b3JhZ2UgZXJyb3JcbiAgICAgICAgICBpZiAoIVJpc2VWaXNpb24uVmlkZW8uaGFzU3RvcmFnZUVycm9yKCkgJiYgIVJpc2VWaXNpb24uVmlkZW8uaGFzUGxheWVyRXJyb3IoKSkge1xuICAgICAgICAgICAgLy8gb25seSBwcm9jZWVkIHdpdGggcmVmcmVzaCBsb2dpYyBiZWxvdyBpZiB0aGVyZSdzIGJlZW4gYSBzdG9yYWdlIGVycm9yLCBvdGhlcndpc2UgZG8gbm90aGluZ1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBzbyB0aGUgV2lkZ2V0IGNhbiBldmVudHVhbGx5IHBsYXkgdmlkZW8gYWdhaW4gZnJvbSBhIG5ldHdvcmsgcmVjb3ZlcnlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlZFxuICAgICAgaWYoZmlsZS5kZWxldGVkKSB7XG4gICAgICAgIF9kZWxldGVGaWxlKGZpbGUpO1xuICAgICAgfVxuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2goX2dldFVybHMoKSk7XG5cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1hcGktZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInN0b3JhZ2UgYXBpIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlJlc3BvbnNlIGNvZGU6IFwiICsgZS5kZXRhaWwuY29kZSArIFwiLCBtZXNzYWdlOiBcIiArIGUuZGV0YWlsLm1lc3NhZ2VcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gY29tbXVuaWNhdGluZyB3aXRoIFJpc2UgU3RvcmFnZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZW1wdHktZm9sZGVyXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIGZvbGRlciBlbXB0eVwiIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBjb250YWluIGFueSB2aWRlb3MuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZvbGRlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGRvZXNuJ3QgZXhpc3RcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIGZvbGRlciBkb2VzIG5vdCBleGlzdCBvciBoYXMgYmVlbiBtb3ZlZCB0byBUcmFzaC5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZm9sZGVyLWludmFsaWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGZvcm1hdChzKSBpbnZhbGlkXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHN1cHBvcnRlZCB2aWRlbyBmb3JtYXRzLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1zdWJzY3JpcHRpb24tZXhwaXJlZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7IFwiZXZlbnRcIjogXCJzdG9yYWdlIHN1YnNjcmlwdGlvbiBleHBpcmVkXCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJSaXNlIFN0b3JhZ2Ugc3Vic2NyaXB0aW9uIGlzIG5vdCBhY3RpdmUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXN1YnNjcmlwdGlvbi1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwic3RvcmFnZSBzdWJzY3JpcHRpb24gZXJyb3JcIixcbiAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgZS5kZXRhaWwuZXJyb3IuY3VycmVudFRhcmdldC5zdGF0dXNcbiAgICAgIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIGNvbW11bmljYXRpbmcgd2l0aCBSaXNlIFN0b3JhZ2UuXCIsIHRydWUpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwuZXJyb3IubWVzc2FnZVxuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuXG4gICAgICB2YXIgc3RhdHVzQ29kZSA9IDA7XG4gICAgICAvLyBTaG93IGEgZGlmZmVyZW50IG1lc3NhZ2UgaWYgdGhlcmUgaXMgYSA0MDQgY29taW5nIGZyb20gcmlzZSBjYWNoZVxuICAgICAgaWYoZS5kZXRhaWwuZXJyb3IubWVzc2FnZSl7XG4gICAgICAgIHN0YXR1c0NvZGUgPSArZS5kZXRhaWwuZXJyb3IubWVzc2FnZS5zdWJzdHJpbmcoZS5kZXRhaWwuZXJyb3IubWVzc2FnZS5pbmRleE9mKFwiOlwiKSsyKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVycm9yTWVzc2FnZSA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcy5nZXRSaXNlQ2FjaGVFcnJvck1lc3NhZ2Uoc3RhdHVzQ29kZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1ub3QtcnVubmluZ1wiLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIG5vdCBydW5uaW5nXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiAoZS5kZXRhaWwgJiYgZS5kZXRhaWwuZXJyb3IpPyBlLmRldGFpbC5lcnJvci5tZXNzYWdlOiBcIlwiXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVUeXBlXCIsIFwidmlkZW9cIik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgZGF0YS5zdG9yYWdlLmNvbXBhbnlJZCk7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJlbnZcIiwgY29uZmlnLlNUT1JBR0VfRU5WKTtcblxuICAgIHN0b3JhZ2UuZ28oKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJpbml0XCI6IGluaXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLk5vblN0b3JhZ2UgPSBmdW5jdGlvbiAoZGF0YSkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcmlzZUNhY2hlID0gUmlzZVZpc2lvbi5Db21tb24uUmlzZUNhY2hlO1xuXG4gIHZhciBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAgLy8gMTUgbWludXRlc1xuICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IG51bGw7XG5cbiAgdmFyIF9pc0xvYWRpbmcgPSB0cnVlO1xuXG4gIHZhciBfdXJsID0gXCJcIjtcblxuICBmdW5jdGlvbiBfZ2V0RmlsZShvbWl0Q2FjaGVCdXN0ZXIpIHtcbiAgICByaXNlQ2FjaGUuZ2V0RmlsZShfdXJsLCBmdW5jdGlvbiAocmVzcG9uc2UsIGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG5cbiAgICAgICAgaWYgKF9pc0xvYWRpbmcpIHtcbiAgICAgICAgICBfaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZUluaXQocmVzcG9uc2UudXJsKTtcblxuICAgICAgICAgIC8vIHN0YXJ0IHRoZSByZWZyZXNoIGludGVydmFsXG4gICAgICAgICAgX3N0YXJ0UmVmcmVzaEludGVydmFsKCk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2gocmVzcG9uc2UudXJsKTtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBlcnJvciBvY2N1cnJlZFxuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHtcbiAgICAgICAgICBcImV2ZW50XCI6IFwibm9uLXN0b3JhZ2UgZXJyb3JcIixcbiAgICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBcImZpbGVfdXJsXCI6IHJlc3BvbnNlLnVybFxuICAgICAgICB9LCB0cnVlKTtcblxuICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IDA7XG4gICAgICAgIC8vIFNob3cgYSBkaWZmZXJlbnQgbWVzc2FnZSBpZiB0aGVyZSBpcyBhIDQwNCBjb21pbmcgZnJvbSByaXNlIGNhY2hlXG4gICAgICAgIGlmKGVycm9yLm1lc3NhZ2Upe1xuICAgICAgICAgIHN0YXR1c0NvZGUgPSArZXJyb3IubWVzc2FnZS5zdWJzdHJpbmcoZXJyb3IubWVzc2FnZS5pbmRleE9mKFwiOlwiKSsyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBSaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMuZ2V0UmlzZUNhY2hlRXJyb3JNZXNzYWdlKHN0YXR1c0NvZGUpO1xuICAgICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihlcnJvck1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH0sIG9taXRDYWNoZUJ1c3Rlcik7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRSZWZyZXNoSW50ZXJ2YWwoKSB7XG4gICAgaWYgKF9yZWZyZXNoSW50ZXJ2YWxJZCA9PT0gbnVsbCkge1xuICAgICAgX3JlZnJlc2hJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICBfZ2V0RmlsZShmYWxzZSk7XG4gICAgICB9LCBfcmVmcmVzaER1cmF0aW9uKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgLy8gSGFuZGxlIHByZS1tZXJnZSB1c2Ugb2YgXCJ1cmxcIiBzZXR0aW5nIHByb3BlcnR5XG4gICAgX3VybCA9IChkYXRhLnVybCAmJiBkYXRhLnVybCAhPT0gXCJcIikgPyBkYXRhLnVybCA6IGRhdGEuc2VsZWN0b3IudXJsO1xuXG4gICAgX2dldEZpbGUodHJ1ZSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgandwbGF5ZXIgKi9cblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5WaWRlbyA9IFJpc2VWaXNpb24uVmlkZW8gfHwge307XG5cblJpc2VWaXNpb24uVmlkZW8uUGxheWVyID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2F1dG9QbGF5LCBfc3RyZXRjaGluZywgX3BhdXNlRHVyYXRpb247XG5cbiAgdmFyIF9wbGF5ZXJJbnN0YW5jZSA9IG51bGw7XG5cbiAgdmFyIF91dGlscyA9IFJpc2VWaXNpb24uVmlkZW8uUGxheWVyVXRpbHM7XG5cbiAgdmFyIF92aWV3ZXJQYXVzZWQgPSBmYWxzZSxcbiAgICBfcGF1c2VUaW1lciA9IG51bGw7XG5cbiAgdmFyIF9maWxlcyA9IG51bGwsXG4gICAgX3VwZGF0ZVdhaXRpbmcgPSBmYWxzZTtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfb25Db21wbGV0ZSgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXllckVuZGVkKCk7XG4gIH1cblxuICBmdW5jdGlvbiBfb25QYXVzZSgpIHtcbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIC8vIHVzZXIgaGFzIHBhdXNlZCwgc2V0IGEgdGltZXIgdG8gcGxheSBhZ2FpblxuICAgICAgY2xlYXJUaW1lb3V0KF9wYXVzZVRpbWVyKTtcblxuICAgICAgX3BhdXNlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKF9wbGF5ZXJJbnN0YW5jZS5nZXRTdGF0ZSgpLnRvVXBwZXJDYXNlKCkgIT09IFwiUExBWUlOR1wiKSB7XG4gICAgICAgICAgLy8gY29udGludWUgcGxheWluZyB0aGUgY3VycmVudCB2aWRlb1xuICAgICAgICAgIF9wbGF5ZXJJbnN0YW5jZS5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIF9wYXVzZUR1cmF0aW9uICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX29uUGxheWxpc3RJdGVtKGluZGV4KSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wbGF5ZXJJdGVtQ2hhbmdlKGluZGV4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9vblBsYXllckVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXllckVycm9yKHtcbiAgICAgICAgdHlwZTogXCJ2aWRlb1wiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfb25TZXR1cEVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnBsYXllckVycm9yKHtcbiAgICAgICAgdHlwZTogXCJzZXR1cFwiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfY29uZmlndXJlSGFuZGxlcnMoKSB7XG4gICAgLy92YXIgcGxheUZuID0gcGxheTtcblxuICAgIC8vIGhhbmRsZSBhIEpXUGxheWVyIHNldHVwIGVycm9yXG4gICAgX3BsYXllckluc3RhbmNlLm9uKFwic2V0dXBFcnJvclwiLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIF9vblNldHVwRXJyb3IoZXJyb3IpO1xuICAgIH0pO1xuXG4gICAgLy8gaGFuZGxlIHdoZW4gSldQbGF5ZXIgaXMgcmVhZHlcbiAgICBfcGxheWVySW5zdGFuY2Uub24oXCJyZWFkeVwiLCBmdW5jdGlvbigpIHtcblxuICAgICAgX3BsYXllckluc3RhbmNlLm9uKFwicGxheWxpc3RDb21wbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9vbkNvbXBsZXRlKCk7XG4gICAgICB9KTtcblxuICAgICAgX3BsYXllckluc3RhbmNlLm9uKFwicGxheWxpc3RJdGVtXCIsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgX29uUGxheWxpc3RJdGVtKGRhdGEuaW5kZXgpO1xuICAgICAgfSk7XG5cbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBfb25QbGF5ZXJFcnJvcihlcnJvcik7XG4gICAgICB9KTtcblxuICAgICAgX3BsYXllckluc3RhbmNlLnNldFZvbHVtZShwYXJhbXMudmlkZW8udm9sdW1lKTtcblxuICAgICAgaWYgKHBhcmFtcy52aWRlby5jb250cm9scyAmJiBfcGF1c2VEdXJhdGlvbiA+IDEpIHtcbiAgICAgICAgX3BsYXllckluc3RhbmNlLm9uKFwicGF1c2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9vblBhdXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBwbGF5ZXIgaXMgcmVhZHlcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheWVyUmVhZHkoKTtcblxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldFNldHVwRGF0YShmaWxlcykge1xuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sczogcGFyYW1zLnZpZGVvLmNvbnRyb2xzLFxuICAgICAgaGVpZ2h0OiBwYXJhbXMuaGVpZ2h0LFxuICAgICAgcGxheWxpc3Q6IF91dGlscy5nZXRQbGF5bGlzdChmaWxlcyksXG4gICAgICBza2luOiB7bmFtZTogXCJyaXNlXCJ9LFxuICAgICAgc3RyZXRjaGluZyA6IF9zdHJldGNoaW5nLFxuICAgICAgd2lkdGg6IHBhcmFtcy53aWR0aFxuICAgIH07XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoZmlsZXMpIHtcbiAgICBfcGxheWVySW5zdGFuY2UgPSBqd3BsYXllcihcInBsYXllclwiKTtcblxuICAgIF9maWxlcyA9IGZpbGVzO1xuXG4gICAgX3N0cmV0Y2hpbmcgPSAocGFyYW1zLnZpZGVvLnNjYWxlVG9GaXQpID8gXCJ1bmlmb3JtXCIgOiBcIm5vbmVcIjtcblxuICAgIC8vIGVuc3VyZSBhdXRvUGxheSBpcyB0cnVlIGlmIGNvbnRyb2xzIHZhbHVlIGlzIGZhbHNlLCBvdGhlcndpc2UgdXNlIHBhcmFtcyB2YWx1ZVxuICAgIF9hdXRvUGxheSA9ICghcGFyYW1zLnZpZGVvLmNvbnRyb2xzKSA/IHRydWUgOiBwYXJhbXMudmlkZW8uYXV0b3BsYXk7XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIHNldHRpbmcgZXhpc3RzIGR1ZSB0byBtZXJnZSBvZiBmaWxlIGFuZCBmb2xkZXJcbiAgICBpZiAocGFyYW1zLnZpZGVvLnBhdXNlKSB7XG4gICAgICAvLyBjb252ZXJ0IHBhdXNlIHZhbHVlIHRvIG51bWJlciBpZiB0eXBlIGlzIFwic3RyaW5nXCJcbiAgICAgIHBhcmFtcy52aWRlby5wYXVzZSA9ICh0eXBlb2YgcGFyYW1zLnZpZGVvLnBhdXNlID09PSBcInN0cmluZ1wiKSA/IHBhcnNlSW50KHBhcmFtcy52aWRlby5wYXVzZSwgMTApIDogcGFyYW1zLnZpZGVvLnBhdXNlO1xuXG4gICAgICAvLyBpZiBub3Qgb2YgdHlwZSBcIm51bWJlclwiLCBzZXQgaXRzIHZhbHVlIHRvIDAgc28gYSBwYXVzZSBkb2VzIG5vdCBnZXQgYXBwbGllZFxuICAgICAgX3BhdXNlRHVyYXRpb24gPSAoaXNOYU4ocGFyYW1zLnZpZGVvLnBhdXNlKSkgPyAwIDogcGFyYW1zLnZpZGVvLnBhdXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBlbnN1cmUgbm8gcGF1c2UgZHVyYXRpb24gb2NjdXJzXG4gICAgICBfcGF1c2VEdXJhdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgLy8gc2V0dXAgSldQbGF5ZXJcbiAgICBfcGxheWVySW5zdGFuY2Uuc2V0dXAoX2dldFNldHVwRGF0YShmaWxlcykpO1xuICAgIF9jb25maWd1cmVIYW5kbGVycygpO1xuXG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIF92aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGlmIChfdXBkYXRlV2FpdGluZykge1xuICAgICAgX3VwZGF0ZVdhaXRpbmcgPSBmYWxzZTtcbiAgICAgIC8vIGxvYWQgYSBuZXcgcGxheWxpc3RcbiAgICAgIF9wbGF5ZXJJbnN0YW5jZS5sb2FkKF91dGlscy5nZXRQbGF5bGlzdChfZmlsZXMpKTtcbiAgICB9XG5cbiAgICBpZiAoX2F1dG9QbGF5KSB7XG4gICAgICBfcGxheWVySW5zdGFuY2UucGxheSgpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG4gICAgY2xlYXJUaW1lb3V0KF9wYXVzZVRpbWVyKTtcblxuICAgIGlmIChfcGxheWVySW5zdGFuY2UuZ2V0U3RhdGUoKS50b1VwcGVyQ2FzZSgpID09PSBcIlBMQVlJTkdcIikge1xuICAgICAgX3BsYXllckluc3RhbmNlLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG5cbiAgICBwYXVzZSgpO1xuXG4gICAgZnVuY3Rpb24gb25QbGF5KCkge1xuICAgICAgLy8gcmVtb3ZlIGhhbmRsaW5nIHRoZSBwbGF5IGV2ZW50XG4gICAgICBfcGxheWVySW5zdGFuY2Uub2ZmKFwicGxheVwiLCBvblBsYXkpO1xuXG4gICAgICAvLyBwYXVzZSB0aGUgdmlkZW8gYXQgdGhlIHN0YXJ0XG4gICAgICBfcGxheWVySW5zdGFuY2UucGF1c2UoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblNlZWtlZCgpIHtcbiAgICAgIC8vIHJlbW92ZSBoYW5kbGluZyB0aGUgc2Vla2VkIGV2ZW50XG4gICAgICBfcGxheWVySW5zdGFuY2Uub2ZmKFwic2Vla2VkXCIsIG9uU2Vla2VkKTtcblxuICAgICAgLy8gcGF1c2UgdGhlIHZpZGVvIGF0IHRoZSBzdGFydFxuICAgICAgX3BsYXllckluc3RhbmNlLnBhdXNlKCk7XG4gICAgfVxuXG4gICAgLy8gaWYgc3RhdHVzIGlzIENPTVBMRVRFLCBhIGZ1dHVyZSBwbGF5IGNhbGwgd2lsbCBzdGFydCBwbGF5bGlzdCBvdmVyIGZyb20gYmVnaW5uaW5nIGF1dG9tYXRpY2FsbHlcbiAgICBpZiAoX3BsYXllckluc3RhbmNlLmdldFN0YXRlKCkudG9VcHBlckNhc2UoKSAhPT0gXCJDT01QTEVURVwiKSB7XG5cbiAgICAgIC8vIGF2b2lkIGp3cGxheWVyIHByb21pc2UgZXJyb3IgaW4gY29uc29sZSB3aXRoIHNldFRpbWVvdXQgLSBodHRwOi8vZ29vLmdsL0w0Z2tUbVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChfcGxheWVySW5zdGFuY2UuZ2V0UGxheWxpc3RJbmRleCgpICE9PSAwKSB7XG4gICAgICAgICAgX3BsYXllckluc3RhbmNlLm9uKFwicGxheVwiLCBvblBsYXkpO1xuXG4gICAgICAgICAgLy8gY2hhbmdlIHRvIGZpcnN0IHZpZGVvIGluIGxpc3RcbiAgICAgICAgICBfcGxheWVySW5zdGFuY2UucGxheWxpc3RJdGVtKDApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGhhbmRsZSB3aGVuIHZpZGVvIGNvbnRpbnVlcyBwbGF5aW5nIGFmdGVyIHNlZWtpbmcgdG8gcG9zaXRpb25cbiAgICAgICAgICBfcGxheWVySW5zdGFuY2Uub24oXCJzZWVrZWRcIiwgb25TZWVrZWQpO1xuXG4gICAgICAgICAgLy8gbW92ZSBwb3NpdGlvbiBiYWNrIHRvIHN0YXJ0IG9mIHZpZGVvXG4gICAgICAgICAgX3BsYXllckluc3RhbmNlLnNlZWsoMCk7XG4gICAgICAgIH1cbiAgICAgIH0sMTAwKTtcbiAgICAgIFxuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlKGZpbGVzKSB7XG4gICAgX2ZpbGVzID0gZmlsZXM7XG4gICAgX3VwZGF0ZVdhaXRpbmcgPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdCxcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwicmVzZXRcIjogcmVzZXQsXG4gICAgXCJ1cGRhdGVcIjogdXBkYXRlXG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlID0gZnVuY3Rpb24gKG1haW5Db250YWluZXIsIG1lc3NhZ2VDb250YWluZXIpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hY3RpdmUgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBfaW5pdCgpIHtcbiAgICB0cnkge1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBtYWluQ29udGFpbmVyLnN0eWxlLmhlaWdodDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDYW4ndCBpbml0aWFsaXplIE1lc3NhZ2UgLSBcIiwgZS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGhpZGUoKSB7XG4gICAgaWYgKF9hY3RpdmUpIHtcbiAgICAgIC8vIGNsZWFyIGNvbnRlbnQgb2YgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIHdoaWxlIChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5yZW1vdmVDaGlsZChtZXNzYWdlQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAvLyBoaWRlIG1lc3NhZ2UgY29udGFpbmVyXG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgLy8gc2hvdyBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgICBfYWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvdyhtZXNzYWdlKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgcDtcblxuICAgIGlmICghX2FjdGl2ZSkge1xuICAgICAgLy8gaGlkZSBtYWluIGNvbnRhaW5lclxuICAgICAgbWFpbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBfaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgXCJoaWRlXCI6IGhpZGUsXG4gICAgXCJzaG93XCI6IHNob3dcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBSaXNlVmlzaW9uICovXG5cbihmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaWQgPSBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICAvLyBEaXNhYmxlIGNvbnRleHQgbWVudSAocmlnaHQgY2xpY2sgbWVudSlcbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lcywgdmFsdWVzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMgPSBudWxsLFxuICAgICAgbW9kZSA9IFwiXCIsXG4gICAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgICAgZGlzcGxheUlkID0gXCJcIjtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWVzKSAmJiBuYW1lcy5sZW5ndGggPiAwICYmIEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKG5hbWVzWzBdID09PSBcImNvbXBhbnlJZFwiKSB7XG4gICAgICAgIGNvbXBhbnlJZCA9IHZhbHVlc1swXTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5hbWVzWzFdID09PSBcImRpc3BsYXlJZFwiKSB7XG4gICAgICAgIGlmICh2YWx1ZXNbMV0pIHtcbiAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyVXRpbHMuc2V0SWRzKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcbiAgICAgIFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLnNldFZlcnNpb24odmVyc2lvbik7XG5cbiAgICAgIGlmIChuYW1lc1syXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzJdKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCFhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIGZvbGRlciB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZvbGRlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub24tc3RvcmFnZSBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJjb21wYW55SWRcIiwgXCJkaXNwbGF5SWRcIiwgXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gIC8vIGNoZWNrIHdoaWNoIHZlcnNpb24gb2YgUmlzZSBDYWNoZSBpcyBydW5uaW5nIGFuZCBkeW5hbWljYWxseSBhZGQgcmlzZS1zdG9yYWdlIGRlcGVuZGVuY2llc1xuICBSaXNlVmlzaW9uLkNvbW1vbi5SaXNlQ2FjaGUuaXNWMlJ1bm5pbmcoZnVuY3Rpb24gKGlzVjIpIHtcbiAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIiksXG4gICAgICBocmVmID0gXCJjb21wb25lbnRzL1wiICsgKChpc1YyKSA/IFwicmlzZS1zdG9yYWdlLXYyXCIgOiBcInJpc2Utc3RvcmFnZVwiKSArIFwiL3Jpc2Utc3RvcmFnZS5odG1sXCIsXG4gICAgICBzdG9yYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInJpc2Utc3RvcmFnZVwiKTtcblxuICAgIGxpbmsuc2V0QXR0cmlidXRlKFwicmVsXCIsIFwiaW1wb3J0XCIpO1xuICAgIGxpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBocmVmKTtcblxuICAgIC8vIGFkZCB0aGUgcmlzZS1zdG9yYWdlIDxsaW5rPiBlbGVtZW50IHRvIGRvY3VtZW50IGhlYWRcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XG5cbiAgICBzdG9yYWdlLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidmlkZW9TdG9yYWdlXCIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwicmVmcmVzaFwiLCA1KTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzdG9yYWdlKTtcblxuICAgIC8vIGFkZCB0aGUgPHJpc2Utc3RvcmFnZT4gZWxlbWVudCB0byB0aGUgYm9keVxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG4gICAgdmFyIHdlYmNvbXBvbmVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgIHdlYmNvbXBvbmVudHMuc3JjID0gXCJjb21wb25lbnRzL3dlYmNvbXBvbmVudHNqcy93ZWJjb21wb25lbnRzLWxpdGUubWluLmpzXCI7XG5cbiAgICAvLyBhZGQgdGhlIHdlYmNvbXBvbmVudHMgcG9seWZpbGwgc291cmNlIHRvIHRoZSBkb2N1bWVudCBoZWFkXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHdlYmNvbXBvbmVudHMpO1xuICB9KTtcblxufSkod2luZG93LCBnYWRnZXRzKTtcblxuXG5cbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcblxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNTcwOTIxNTktMiddKTtcbl9nYXEucHVzaChbJ190cmFja1BhZ2V2aWV3J10pO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IGdhLmFzeW5jID0gdHJ1ZTtcbiAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJztcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xufSkoKTtcbi8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
