var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(e){"use strict";function t(e,t){Array.isArray(e)&&e.length>0&&Array.isArray(t)&&t.length>0&&("companyId"===e[0]&&(u=t[0]),"displayId"===e[1]&&(d=t[1]?t[1]:"preview"),c(u,d))}function n(e,t){var n=null;e.event?(n={},n.event=e.event,e.event_details&&(n.event_details=e.event_details),e.file_url&&(n.file_url=e.file_url,n.file_format=o(e.file_url)),i(function(e,i){n.company_id=e,n.display_id=i,t(n)})):t(n)}function i(n){n&&"function"==typeof n&&(c=n,u&&d?c(u,d):l&&""!==l&&(e.rpc.register("rsparam_set_"+l,t),e.rpc.call("","rsparam_get",null,l,["companyId","displayId"])))}function o(e){var t,n=/[?#&]/;return e&&"string"==typeof e?(t=e.substr(e.lastIndexOf(".")+1),n.test(t)&&(t=t.substr(0,-1!==t.indexOf("?")?t.indexOf("?"):t.length),t=t.substr(0,-1!==t.indexOf("#")?t.indexOf("#"):t.length),t=t.substr(0,-1!==t.indexOf("&")?t.indexOf("&"):t.length)),t.toLowerCase()):null}function r(e){var t=JSON.parse(JSON.stringify(f));return t.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),t.rows[0].json=JSON.parse(JSON.stringify(e)),t.rows[0].json.ts=(new Date).toISOString(),t}function s(e){var t=new Date,n=t.getUTCFullYear(),i=t.getUTCMonth()+1,o=t.getUTCDate();return 10>i&&(i="0"+i),10>o&&(o="0"+o),e+n+i+o}function a(e,t){n(t,function(t){null!==t&&RiseVision.Common.Logger.log(e,t)})}var l=(new e.Prefs).getString("id"),d="",u="",c=null,f={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,rows:[{insertId:""}]};return{getIds:i,getInsertData:r,getFileFormat:o,getTable:s,logEvent:a}}(gadgets),RiseVision.Common.Logger=function(e){"use strict";function t(e){var t=new XMLHttpRequest;return new Date-d<358e4?e({}):(t.open("POST",o,!0),t.onloadend=function(){var n=JSON.parse(t.response);e({token:n.access_token,refreshedAt:new Date})},t.send(),void 0)}function n(e){return s&&l===e}function i(i,o){function c(t){var n,s,a=new XMLHttpRequest;s=r.replace("TABLE_ID",e.getTable(i)),d=t.refreshedAt||d,u=t.token||u,n=e.getInsertData(o),a.open("POST",s,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(a.onloadend=function(){o.cb(a.response)}),a.send(JSON.stringify(n))}if(!(!i||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&n(o.event)))return s=!0,l=o.event,setTimeout(function(){s=!1},a),t(c)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",r="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",s=!1,a=1e3,l="",d=0,u="";return{log:i}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};if(RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var t=new XMLHttpRequest;e&&"function"==typeof e&&(t.open("GET",n+"ping?callback=_",!0),t.onreadystatechange=function(){try{4===t.readyState&&(i=!0,200===t.status?(o=!0,e(!0,t.responseText)):(console.debug("Rise Cache is not running"),o=!1,e(!1,null)))}catch(n){console.debug("Caught exception: ",n.description)}},t.send())}function t(e,t,r){function s(t){var i,o,s;t?i=r?n+"?url="+encodeURIComponent(e):n+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):r?i=e:(o=e.split("?"),s=1===o.length?"?":"&",i=e+s+"cb="+(new Date).getTime()),a("HEAD",i)}function a(e,n){var i=new XMLHttpRequest,r={xhr:i,url:n};i.open(e,n,!0),i.onerror=function(){"HEAD"===e?a("GET",n):o?t(r,new Error("The request failed with no status")):t(r)},i.onload=function(){var o=i.status||0;o>=200&&300>o?t(r):"HEAD"===e?a("GET",n):t(r,new Error("The request failed with status code: "+o))},i.send()}if(e&&t&&"function"==typeof t)return i?s(o):this.ping(s)}var n="http://localhost:9494/",i=!1,o=!1;return{getFile:t,ping:e}}(),"undefined"==typeof config){var config={SKIN:"skin/RVSkin.xml",STORAGE_ENV:"prod"};"undefined"!=typeof angular&&angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","locales/translation_").constant("LOCALES_SUFIX",".json")}var RiseVision=RiseVision||{};RiseVision.Video={},RiseVision.Video=function(e){"use strict";function t(){e.rpc.call("","rsevent_done",null,E.getString("id")),null!==L&&d(L,!0),d({event:"done"},!1)}function n(){e.rpc.call("","rsevent_ready",null,E.getString("id"),!0,!0,!0,!0,!0)}function i(){clearTimeout(F),F=null}function o(){i(),F=setTimeout(function(){t()},5e3)}function r(){var e=T.getFrameObject(S);return e?e.getPlaybackData():null}function s(){var e=null;if(A&&A.length>0){if("file"===R)return A[0];if("folder"===R&&(e=r()))return A[e.index]}return null}function a(e,t){var n={},i=RiseVision.Common.LoggerUtils,o=null;e.event&&(n.event=e.event),e.event_details&&(n.event_details=e.event_details),o=e.url?e.url:s(),n.file_url=o,n.file_format=i.getFileFormat(o),i.getIds(function(e,i){n.company_id=e,n.display_id=i,t(n)})}function l(e){N=!0,b.show(e),T.remove(S,function(){O||o()})}function d(e,t){t&&(L=e),a(e,function(e){D.log("video_events",e)})}function u(e){"file"===R?A[0]=e:"folder"===R&&(A=e),b.hide(),O||g()}function c(e){"file"===R?A[0]=e:"folder"===R&&(A=e),I=!1,L=null}function f(){var e=T.getFrameObject(S);return O=!0,N?(i(),void 0):(e&&e.pause(),void 0)}function g(){var e=T.getFrameObject(S);return O=!1,d({event:"play"},!1),N?(o(),void 0):(I||(e?e.play():A&&A.length>0&&("file"===R?(T.add(0),T.createFramePlayer(0,y,A[0],config.SKIN,"player-file.html")):"folder"===R&&(T.add(0),T.createFramePlayer(0,y,A,config.SKIN,"player-folder.html")))),void 0)}function m(){T.remove(S,function(){t()})}function v(){var e;b.hide(),O||(e=T.getFrameObject(S),e&&e.play())}function p(t,i){var o,r={},s=null;y=_.clone(t),R=i,E=new e.Prefs,document.getElementById("videoContainer").style.height=E.getInt("rsH")+"px",y.width=E.getInt("rsW"),y.height=E.getInt("rsH"),b=new RiseVision.Common.Message(document.getElementById("videoContainer"),document.getElementById("messageContainer")),b.show("Please wait while your video is downloaded."),T=new RiseVision.Common.Video.FrameController,"file"===R?(o=0!==Object.keys(y.storage).length,o?(s="storage",w=new RiseVision.Video.StorageFile(y),w.init()):(s="custom",C=new RiseVision.Video.NonStorage(y),C.init())):"folder"===R&&(s="storage",w=new RiseVision.Video.StorageFolder(y),w.init()),r.event="configuration",r.event_details=s,d(r,!1),n()}function h(e){var t=null,n={},i="",o="Sorry, there was a problem playing the video.",r="Error loading media: File could not be played",a="Error loading YouTube: Video could not be played",u="Error loading player: No playable sources found",c="There was a problem playing that video. It could be that we don't support that format or it is not encoded correctly.";I=!0,e&&(e.type&&e.message?t=e.type+" - "+e.message:e.type?t=e.type:e.message&&(t=e.message),e.message&&(e.message===r||e.message===a?o=c:e.message===u&&(i=s(),i&&i.indexOf("www.youtube.com")>-1&&(o=c)))),n.event="player error",n.event_details=t,d(n,!0),l(o)}function V(){f()}var y,R,E=null,w=null,C=null,b=null,T=null,I=!1,O=!0,S=0,A=[],L=null,F=null,N=!1,D=RiseVision.Common.Logger;return{logEvent:d,onFileInit:u,onFileRefresh:c,pause:f,play:g,setAdditionalParams:p,showError:l,playerEnded:m,playerReady:v,playerError:h,stop:V}}(gadgets);var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFile=function(e){"use strict";function t(){var t=document.getElementById("videoStorage");t&&(t.addEventListener("rise-storage-response",function(e){e.detail&&e.detail.url&&(n?(n=!1,RiseVision.Video.onFileInit(e.detail.url)):e.detail.hasOwnProperty("changed")&&e.detail.changed&&RiseVision.Video.onFileRefresh(e.detail.url))}),t.addEventListener("rise-storage-no-file",function(e){var t={event:"storage file not found",event_details:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")}),t.addEventListener("rise-storage-file-throttled",function(e){var t={event:"storage file throttled",url:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected video is temporarily unavailable.")}),t.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Storage.")}),t.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Cache.")}),t.setAttribute("folder",e.storage.folder),t.setAttribute("fileName",e.storage.fileName),t.setAttribute("companyId",e.storage.companyId),t.setAttribute("env",config.STORAGE_ENV),t.go())}var n=!0;return{init:t}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.StorageFolder=function(e){"use strict";function t(){return _.pluck(l,"url")}function n(e){return _.find(l,function(t){return e.name===t.name})}function i(e){var t=n(e);t&&l.splice(l.indexOf(t),1)}function o(e){var t=n(e);t&&(t.url=e.url)}function r(e){var t=n(e);t||(e.fileName=e.name.slice(e.name.lastIndexOf("/")+1,e.name.lastIndexOf(".")).toLowerCase(),l.splice(_.sortedIndex(l,e,"fileName"),0,e))}function s(){var n=document.getElementById("videoStorage");n&&(n.addEventListener("rise-storage-response",function(e){var n=e.detail;return n.added&&(r(n),a)?(a=!1,RiseVision.Video.onFileInit(t()),void 0):(n.changed&&o(n),n.deleted&&i(n),RiseVision.Video.onFileRefresh(t()),void 0)}),n.addEventListener("rise-storage-empty-folder",function(){var e={event:"storage folder empty"};RiseVision.Video.logEvent(e,!0),RiseVision.Video.showError("The selected folder does not contain any videos.")}),n.addEventListener("rise-storage-no-folder",function(e){var t={event:"storage folder doesn't exist",event_details:e.detail};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("The selected folder does not exist.")}),n.addEventListener("rise-storage-error",function(e){var t={event:"rise storage error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Storage.")}),n.addEventListener("rise-cache-error",function(e){var t={event:"rise cache error",event_details:"The request failed with status code: "+e.detail.error.currentTarget.status};RiseVision.Video.logEvent(t,!0),RiseVision.Video.showError("Sorry, there was a problem playing the video from Cache.")}),n.setAttribute("fileType","video"),n.setAttribute("companyId",e.storage.companyId),n.setAttribute("folder",e.storage.folder),n.setAttribute("env",config.STORAGE_ENV),n.go())}var a=!0,l=[];return{init:s}};var RiseVision=RiseVision||{};RiseVision.Video=RiseVision.Video||{},RiseVision.Video.NonStorage=function(e){"use strict";function t(e){o.getFile(l,function(e,t){t?(RiseVision.Video.logEvent({event:"non-storage error",event_details:t.message,url:e.url},!0),RiseVision.Video.showError("The selected video does not exist or has been moved to Trash.")):a?(a=!1,RiseVision.Video.onFileInit(e.url),n()):RiseVision.Video.onFileRefresh(e.url)},e)}function n(){null===s&&(s=setInterval(function(){t(!1)},r))}function i(){l=e.url&&""!==e.url?e.url:e.selector.url,t(!0)}var o=RiseVision.Common.RiseCache,r=9e5,s=null,a=!0,l="";return{init:i}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Video=RiseVision.Common.Video||{},RiseVision.Common.Video.FrameController=function(){"use strict";function e(e){return document.getElementById(l+e)}function t(t){var n,i=e(t);return n=i.querySelector("iframe"),n?n.contentWindow?n.contentWindow:n.contentDocument.document?n.contentDocument.document:n.contentDocument:null}function n(n){var i,o=e(n),r=t(n);r&&(i=o.querySelector("iframe"),r.remove(),i.setAttribute("src","about:blank"))}function i(t){var n=e(t),i=document.createElement("iframe");i.setAttribute("allowTransparency",!0),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),n.appendChild(i)}function o(n,i,o,r,s){var a,l=e(n),d=t(n);d&&(a=l.querySelector("iframe"),a.onload=function(){a.onload=null,d.init(i,o,r),d.load()},a.setAttribute("src",s))}function r(t){var n=e(t);n.style.visibility="hidden"}function s(e,t){var i=document.getElementById(l+e);n(e),setTimeout(function(){for(;i.firstChild;)i.removeChild(i.firstChild);t&&"function"==typeof t&&t()},200)}function a(t){var n=e(t);n.style.visibility="visible"}var l="if_";return{add:i,createFramePlayer:o,getFrameContainer:e,getFrameObject:t,hide:r,remove:s,show:a}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(e,t){"use strict";function n(){try{t.style.height=e.style.height}catch(n){console.warn("Can't initialize Message - ",n.message)}}function i(){if(r){for(;t.firstChild;)t.removeChild(t.firstChild);t.style.display="none",e.style.visibility="visible",r=!1}}function o(n){var i,o=document.createDocumentFragment();r?(i=t.querySelector(".message"),i.innerHTML=n):(e.style.visibility="hidden",t.style.display="block",i=document.createElement("p"),i.innerHTML=n,i.setAttribute("class","message"),o.appendChild(i),t.appendChild(o),r=!0)}var r=!1;return n(),{hide:i,show:o}},function(e,t){"use strict";function n(e,t){var n,i;Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(t)&&t.length>0&&(n=JSON.parse(t[0]),i=0!==Object.keys(n.storage).length?n.storage.fileName?"file":"folder":"file",RiseVision.Video.setAdditionalParams(n,i))}function i(){RiseVision.Video.play()}function o(){RiseVision.Video.pause()}function r(){RiseVision.Video.stop()}function s(){e.removeEventListener("WebComponentsReady",s),l&&""!==l&&(t.rpc.register("rscmd_play_"+l,i),t.rpc.register("rscmd_pause_"+l,o),t.rpc.register("rscmd_stop_"+l,r),t.rpc.register("rsparam_set_"+l,n),t.rpc.call("","rsparam_get",null,l,["additionalParams"]))}var a=new t.Prefs,l=a.getString("id");e.oncontextmenu=function(){return!1},e.addEventListener("WebComponentsReady",s)}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-2"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiV0lER0VUX0NPTU1PTl9DT05GSUciLCJBVVRIX1BBVEhfVVJMIiwiTE9HR0VSX0NMSUVOVF9JRCIsIkxPR0dFUl9DTElFTlRfU0VDUkVUIiwiTE9HR0VSX1JFRlJFU0hfVE9LRU4iLCJTVE9SQUdFX0VOViIsIlNUT1JFX1VSTCIsIlJpc2VWaXNpb24iLCJDb21tb24iLCJMb2dnZXJVdGlscyIsImdhZGdldHMiLCJzZXRJZHMiLCJuYW1lcyIsInZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImNvbXBhbnlJZCIsImRpc3BsYXlJZCIsImNhbGxiYWNrIiwiZ2V0RXZlbnRQYXJhbXMiLCJwYXJhbXMiLCJjYiIsImpzb24iLCJldmVudCIsImV2ZW50X2RldGFpbHMiLCJmaWxlX3VybCIsImZpbGVfZm9ybWF0IiwiZ2V0RmlsZUZvcm1hdCIsImdldElkcyIsImNvbXBhbnlfaWQiLCJkaXNwbGF5X2lkIiwiaWQiLCJycGMiLCJyZWdpc3RlciIsImNhbGwiLCJ1cmwiLCJzdHIiLCJoYXNQYXJhbXMiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsInRlc3QiLCJpbmRleE9mIiwidG9Mb3dlckNhc2UiLCJnZXRJbnNlcnREYXRhIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIkJBU0VfSU5TRVJUX1NDSEVNQSIsInJvd3MiLCJpbnNlcnRJZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwidHMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZXRUYWJsZSIsIm5hbWUiLCJkYXRlIiwieWVhciIsImdldFVUQ0Z1bGxZZWFyIiwibW9udGgiLCJnZXRVVENNb250aCIsImRheSIsImdldFVUQ0RhdGUiLCJsb2dFdmVudCIsInRhYmxlIiwiTG9nZ2VyIiwibG9nIiwiUHJlZnMiLCJnZXRTdHJpbmciLCJraW5kIiwic2tpcEludmFsaWRSb3dzIiwiaWdub3JlVW5rbm93blZhbHVlcyIsInV0aWxzIiwicmVmcmVzaFRva2VuIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJyZWZyZXNoRGF0ZSIsIm9wZW4iLCJSRUZSRVNIX1VSTCIsIm9ubG9hZGVuZCIsInJlc3AiLCJyZXNwb25zZSIsInRva2VuIiwiYWNjZXNzX3Rva2VuIiwicmVmcmVzaGVkQXQiLCJzZW5kIiwiaXNUaHJvdHRsZWQiLCJ0aHJvdHRsZSIsImxhc3RFdmVudCIsInRhYmxlTmFtZSIsImluc2VydFdpdGhUb2tlbiIsInJlZnJlc2hEYXRhIiwiaW5zZXJ0RGF0YSIsInNlcnZpY2VVcmwiLCJyZXBsYWNlIiwic2V0UmVxdWVzdEhlYWRlciIsImhhc093blByb3BlcnR5Iiwic2V0VGltZW91dCIsInRocm90dGxlRGVsYXkiLCJSaXNlQ2FjaGUiLCJwaW5nIiwiciIsIkJBU0VfQ0FDSEVfVVJMIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsIl9waW5nUmVjZWl2ZWQiLCJzdGF0dXMiLCJfaXNDYWNoZVJ1bm5pbmciLCJyZXNwb25zZVRleHQiLCJjb25zb2xlIiwiZGVidWciLCJlIiwiZGVzY3JpcHRpb24iLCJnZXRGaWxlIiwiZmlsZVVybCIsIm5vY2FjaGVidXN0ZXIiLCJmaWxlUmVxdWVzdCIsImlzQ2FjaGVSdW5uaW5nIiwic2VwYXJhdG9yIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZ2V0VGltZSIsInNwbGl0IiwibWFrZVJlcXVlc3QiLCJtZXRob2QiLCJyZXF1ZXN0Iiwib25lcnJvciIsIkVycm9yIiwib25sb2FkIiwidGhpcyIsImNvbmZpZyIsIlNLSU4iLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJWaWRlbyIsIl9kb25lIiwiX3ByZWZzIiwiX2Vycm9yIiwiX3JlYWR5IiwiX2NsZWFyRXJyb3JUaW1lciIsImNsZWFyVGltZW91dCIsIl9lcnJvclRpbWVyIiwiX3N0YXJ0RXJyb3JUaW1lciIsIl9nZXRDdXJyZW50RmlsZURhdGEiLCJmcmFtZU9iaiIsIl9mcmFtZUNvbnRyb2xsZXIiLCJnZXRGcmFtZU9iamVjdCIsIl9jdXJyZW50RnJhbWUiLCJnZXRQbGF5YmFja0RhdGEiLCJfZ2V0Q3VycmVudEZpbGUiLCJmaWxlRGF0YSIsIl9jdXJyZW50RmlsZXMiLCJfbW9kZSIsImluZGV4IiwiX2dldExvZ2dlclBhcmFtcyIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJfZXJyb3JGbGFnIiwiX21lc3NhZ2UiLCJzaG93IiwicmVtb3ZlIiwiX3ZpZXdlclBhdXNlZCIsImlzRXJyb3IiLCJfbG9nZ2VyIiwib25GaWxlSW5pdCIsInVybHMiLCJoaWRlIiwicGxheSIsIm9uRmlsZVJlZnJlc2giLCJfcGxheWJhY2tFcnJvciIsInBhdXNlIiwiYWRkIiwiY3JlYXRlRnJhbWVQbGF5ZXIiLCJfYWRkaXRpb25hbFBhcmFtcyIsInBsYXllckVuZGVkIiwicGxheWVyUmVhZHkiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwibW9kZSIsImlzU3RvcmFnZUZpbGUiLCJsb2dQYXJhbXMiLCJkZXRhaWxzIiwiXyIsImNsb25lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiaGVpZ2h0IiwiZ2V0SW50Iiwid2lkdGgiLCJNZXNzYWdlIiwiRnJhbWVDb250cm9sbGVyIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JhZ2UiLCJfc3RvcmFnZSIsIlN0b3JhZ2VGaWxlIiwiaW5pdCIsIl9ub25TdG9yYWdlIiwiTm9uU3RvcmFnZSIsIlN0b3JhZ2VGb2xkZXIiLCJwbGF5ZXJFcnJvciIsImVycm9yIiwiTUVESUFfRVJST1IiLCJZT1VUVUJFX0VSUk9SIiwiUExBWUVSX0VSUk9SIiwiRk9STUFUX01FU1NBR0UiLCJ0eXBlIiwic3RvcCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkZXRhaWwiLCJfaW5pdGlhbExvYWQiLCJjaGFuZ2VkIiwiY3VycmVudFRhcmdldCIsInNldEF0dHJpYnV0ZSIsImZvbGRlciIsImZpbGVOYW1lIiwiZ28iLCJfZ2V0VXJscyIsInBsdWNrIiwiX2ZpbGVzIiwiX2dldEV4aXN0aW5nRmlsZSIsImZpbGUiLCJmaW5kIiwiZiIsIl9kZWxldGVGaWxlIiwiZXhpc3RpbmciLCJzcGxpY2UiLCJfY2hhbmdlRmlsZSIsIl9hZGRGaWxlIiwic2xpY2UiLCJzb3J0ZWRJbmRleCIsImFkZGVkIiwiZGVsZXRlZCIsIl9nZXRGaWxlIiwib21pdENhY2hlQnVzdGVyIiwicmlzZUNhY2hlIiwiX3VybCIsIl9pc0xvYWRpbmciLCJfc3RhcnRSZWZyZXNoSW50ZXJ2YWwiLCJfcmVmcmVzaEludGVydmFsSWQiLCJzZXRJbnRlcnZhbCIsIl9yZWZyZXNoRHVyYXRpb24iLCJzZWxlY3RvciIsImdldEZyYW1lQ29udGFpbmVyIiwiUFJFRklYIiwiaWZyYW1lIiwiZnJhbWVDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudFdpbmRvdyIsImNvbnRlbnREb2N1bWVudCIsIl9jbGVhciIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImZpbGVzIiwic2tpbiIsInNyYyIsImxvYWQiLCJ2aXNpYmlsaXR5IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwibWFpbkNvbnRhaW5lciIsIm1lc3NhZ2VDb250YWluZXIiLCJfaW5pdCIsIndhcm4iLCJfYWN0aXZlIiwiZGlzcGxheSIsInAiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJpbm5lckhUTUwiLCJ3aW5kb3ciLCJjb25maWd1cmUiLCJhZGRpdGlvbmFsUGFyYW1zIiwicG9seW1lclJlYWR5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInByZWZzIiwib25jb250ZXh0bWVudSIsIl9nYXEiLCJwdXNoIiwiZ2EiLCJhc3luYyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSx1QkFDRkMsY0FBZSxpQkFDZkMsaUJBQWtCLDRFQUNsQkMscUJBQXNCLDJCQUN0QkMscUJBQXNCLHFFQUN0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anMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgV0lER0VUX0NPTU1PTl9DT05GSUcgPSB7XG4gIEFVVEhfUEFUSF9VUkw6IFwidjEvd2lkZ2V0L2F1dGhcIixcbiAgTE9HR0VSX0NMSUVOVF9JRDogXCIxMDg4NTI3MTQ3MTA5LTZxMW8ydnRpaG4zNDI5MnBqdDRja2htaGNrMHJrMG83LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tXCIsXG4gIExPR0dFUl9DTElFTlRfU0VDUkVUOiBcIm5sWnlyY1BMZzZvRXdPOWY5V2ZuMjlXaFwiLFxuICBMT0dHRVJfUkVGUkVTSF9UT0tFTjogXCIxL3h6dDRrd3pFMUg3VzlWbktCOGNBYUN4NnpiNEVzNG5LRW9xYVlIZFREMTVJZ09ySkR0ZHVuNnpLNlhpQVRDS1RcIixcbiAgU1RPUkFHRV9FTlY6IFwicHJvZFwiLFxuICBTVE9SRV9VUkw6IFwiaHR0cHM6Ly9zdG9yZS1kb3QtcnZhc2VydmVyMi5hcHBzcG90LmNvbS9cIlxufTtcbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzID0gKGZ1bmN0aW9uKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgIHZhciBpZCA9IG5ldyBnYWRnZXRzLlByZWZzKCkuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgZGlzcGxheUlkID0gXCJcIixcbiAgICBjb21wYW55SWQgPSBcIlwiLFxuICAgIGNhbGxiYWNrID0gbnVsbDtcblxuICB2YXIgQkFTRV9JTlNFUlRfU0NIRU1BID1cbiAge1xuICAgIFwia2luZFwiOiBcImJpZ3F1ZXJ5I3RhYmxlRGF0YUluc2VydEFsbFJlcXVlc3RcIixcbiAgICBcInNraXBJbnZhbGlkUm93c1wiOiBmYWxzZSxcbiAgICBcImlnbm9yZVVua25vd25WYWx1ZXNcIjogZmFsc2UsXG4gICAgXCJyb3dzXCI6IFt7XG4gICAgICBcImluc2VydElkXCI6IFwiXCJcbiAgICB9XVxuICB9O1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG5cbiAgLyogU2V0IHRoZSBDb21wYW55IGFuZCBEaXNwbGF5IElEcy4gKi9cbiAgZnVuY3Rpb24gc2V0SWRzKG5hbWVzLCB2YWx1ZXMpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAobmFtZXNbMF0gPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgICAgICBjb21wYW55SWQgPSB2YWx1ZXNbMF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmFtZXNbMV0gPT09IFwiZGlzcGxheUlkXCIpIHtcbiAgICAgICAgICBpZiAodmFsdWVzWzFdKSB7XG4gICAgICAgICAgICBkaXNwbGF5SWQgPSB2YWx1ZXNbMV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheUlkID0gXCJwcmV2aWV3XCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soY29tcGFueUlkLCBkaXNwbGF5SWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qIFJldHJpZXZlIHBhcmFtZXRlcnMgdG8gcGFzcyB0byB0aGUgZXZlbnQgbG9nZ2VyLiAqL1xuICBmdW5jdGlvbiBnZXRFdmVudFBhcmFtcyhwYXJhbXMsIGNiKSB7XG4gICAgdmFyIGpzb24gPSBudWxsO1xuXG4gICAgLy8gZXZlbnQgaXMgcmVxdWlyZWQuXG4gICAgaWYgKHBhcmFtcy5ldmVudCkge1xuICAgICAganNvbiA9IHt9O1xuICAgICAganNvbi5ldmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgICAgaWYgKHBhcmFtcy5ldmVudF9kZXRhaWxzKSB7XG4gICAgICAgIGpzb24uZXZlbnRfZGV0YWlscyA9IHBhcmFtcy5ldmVudF9kZXRhaWxzO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zLmZpbGVfdXJsKSB7XG4gICAgICAgIGpzb24uZmlsZV91cmwgPSBwYXJhbXMuZmlsZV91cmw7XG4gICAgICAgIGpzb24uZmlsZV9mb3JtYXQgPSBnZXRGaWxlRm9ybWF0KHBhcmFtcy5maWxlX3VybCk7XG4gICAgICB9XG5cbiAgICAgIGdldElkcyhmdW5jdGlvbihjb21wYW55SWQsIGRpc3BsYXlJZCkge1xuICAgICAgICBqc29uLmNvbXBhbnlfaWQgPSBjb21wYW55SWQ7XG4gICAgICAgIGpzb24uZGlzcGxheV9pZCA9IGRpc3BsYXlJZDtcblxuICAgICAgICBjYihqc29uKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNiKGpzb24pO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0SWRzKGNiKSB7XG4gICAgaWYgKCFjYiB8fCB0eXBlb2YgY2IgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNhbGxiYWNrID0gY2I7XG4gICAgfVxuXG4gICAgaWYgKGNvbXBhbnlJZCAmJiBkaXNwbGF5SWQpIHtcbiAgICAgIGNhbGxiYWNrKGNvbXBhbnlJZCwgZGlzcGxheUlkKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBzZXRJZHMpO1xuICAgICAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNwYXJhbV9nZXRcIiwgbnVsbCwgaWQsIFtcImNvbXBhbnlJZFwiLCBcImRpc3BsYXlJZFwiXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZUZvcm1hdCh1cmwpIHtcbiAgICB2YXIgaGFzUGFyYW1zID0gL1s/IyZdLyxcbiAgICAgIHN0cjtcblxuICAgIGlmICghdXJsIHx8IHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN0ciA9IHVybC5zdWJzdHIodXJsLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuXG4gICAgLy8gZG9uJ3QgaW5jbHVkZSBhbnkgcGFyYW1zIGFmdGVyIHRoZSBmaWxlbmFtZVxuICAgIGlmIChoYXNQYXJhbXMudGVzdChzdHIpKSB7XG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAgLChzdHIuaW5kZXhPZihcIj9cIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiP1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiNcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiI1wiKSA6IHN0ci5sZW5ndGgpO1xuXG4gICAgICBzdHIgPSBzdHIuc3Vic3RyKDAsIChzdHIuaW5kZXhPZihcIiZcIikgIT09IC0xKSA/IHN0ci5pbmRleE9mKFwiJlwiKSA6IHN0ci5sZW5ndGgpO1xuICAgIH1cblxuICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEluc2VydERhdGEocGFyYW1zKSB7XG4gICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KEJBU0VfSU5TRVJUX1NDSEVNQSkpO1xuXG4gICAgZGF0YS5yb3dzWzBdLmluc2VydElkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIpLnRvVXBwZXJDYXNlKCk7XG4gICAgZGF0YS5yb3dzWzBdLmpzb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuICAgIGRhdGEucm93c1swXS5qc29uLnRzID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRUYWJsZShuYW1lKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpLFxuICAgICAgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpICsgMSxcbiAgICAgIGRheSA9IGRhdGUuZ2V0VVRDRGF0ZSgpO1xuXG4gICAgaWYgKG1vbnRoIDwgMTApIHtcbiAgICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgICB9XG5cbiAgICBpZiAoZGF5IDwgMTApIHtcbiAgICAgIGRheSA9IFwiMFwiICsgZGF5O1xuICAgIH1cblxuICAgIHJldHVybiBuYW1lICsgeWVhciArIG1vbnRoICsgZGF5O1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQodGFibGUsIHBhcmFtcykge1xuICAgIGdldEV2ZW50UGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgaWYgKGpzb24gIT09IG51bGwpIHtcbiAgICAgICAgUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyLmxvZyh0YWJsZSwganNvbik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0SWRzXCI6IGdldElkcyxcbiAgICBcImdldEluc2VydERhdGFcIjogZ2V0SW5zZXJ0RGF0YSxcbiAgICBcImdldEZpbGVGb3JtYXRcIjogZ2V0RmlsZUZvcm1hdCxcbiAgICBcImdldFRhYmxlXCI6IGdldFRhYmxlLFxuICAgIFwibG9nRXZlbnRcIjogbG9nRXZlbnRcbiAgfTtcbn0pKGdhZGdldHMpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5Mb2dnZXIgPSAoZnVuY3Rpb24odXRpbHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIFJFRlJFU0hfVVJMID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjMvdG9rZW4/Y2xpZW50X2lkPVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9JRCArXG4gICAgICBcIiZjbGllbnRfc2VjcmV0PVwiICsgV0lER0VUX0NPTU1PTl9DT05GSUcuTE9HR0VSX0NMSUVOVF9TRUNSRVQgK1xuICAgICAgXCImcmVmcmVzaF90b2tlbj1cIiArIFdJREdFVF9DT01NT05fQ09ORklHLkxPR0dFUl9SRUZSRVNIX1RPS0VOICtcbiAgICAgIFwiJmdyYW50X3R5cGU9cmVmcmVzaF90b2tlblwiO1xuXG4gIHZhciBzZXJ2aWNlVXJsID0gXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9jbGllbnQtc2lkZS1ldmVudHMvZGF0YXNldHMvV2lkZ2V0X0V2ZW50cy90YWJsZXMvVEFCTEVfSUQvaW5zZXJ0QWxsXCIsXG4gICAgdGhyb3R0bGUgPSBmYWxzZSxcbiAgICB0aHJvdHRsZURlbGF5ID0gMTAwMCxcbiAgICBsYXN0RXZlbnQgPSBcIlwiLFxuICAgIHJlZnJlc2hEYXRlID0gMCxcbiAgICB0b2tlbiA9IFwiXCI7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcmVmcmVzaFRva2VuKGNiKSB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgaWYgKG5ldyBEYXRlKCkgLSByZWZyZXNoRGF0ZSA8IDM1ODAwMDApIHtcbiAgICAgIHJldHVybiBjYih7fSk7XG4gICAgfVxuXG4gICAgeGhyLm9wZW4oXCJQT1NUXCIsIFJFRlJFU0hfVVJMLCB0cnVlKTtcbiAgICB4aHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcblxuICAgICAgY2IoeyB0b2tlbjogcmVzcC5hY2Nlc3NfdG9rZW4sIHJlZnJlc2hlZEF0OiBuZXcgRGF0ZSgpIH0pO1xuICAgIH07XG5cbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNUaHJvdHRsZWQoZXZlbnQpIHtcbiAgICByZXR1cm4gdGhyb3R0bGUgJiYgKGxhc3RFdmVudCA9PT0gZXZlbnQpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBsb2codGFibGVOYW1lLCBwYXJhbXMpIHtcbiAgICBpZiAoIXRhYmxlTmFtZSB8fCAhcGFyYW1zIHx8IChwYXJhbXMuaGFzT3duUHJvcGVydHkoXCJldmVudFwiKSAmJiAhcGFyYW1zLmV2ZW50KSB8fFxuICAgICAgKHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShcImV2ZW50XCIpICYmIGlzVGhyb3R0bGVkKHBhcmFtcy5ldmVudCkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3R0bGUgPSB0cnVlO1xuICAgIGxhc3RFdmVudCA9IHBhcmFtcy5ldmVudDtcblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhyb3R0bGUgPSBmYWxzZTtcbiAgICB9LCB0aHJvdHRsZURlbGF5KTtcblxuICAgIGZ1bmN0aW9uIGluc2VydFdpdGhUb2tlbihyZWZyZXNoRGF0YSkge1xuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICBpbnNlcnREYXRhLCB1cmw7XG5cbiAgICAgIHVybCA9IHNlcnZpY2VVcmwucmVwbGFjZShcIlRBQkxFX0lEXCIsIHV0aWxzLmdldFRhYmxlKHRhYmxlTmFtZSkpO1xuICAgICAgcmVmcmVzaERhdGUgPSByZWZyZXNoRGF0YS5yZWZyZXNoZWRBdCB8fCByZWZyZXNoRGF0ZTtcbiAgICAgIHRva2VuID0gcmVmcmVzaERhdGEudG9rZW4gfHwgdG9rZW47XG4gICAgICBpbnNlcnREYXRhID0gdXRpbHMuZ2V0SW5zZXJ0RGF0YShwYXJhbXMpO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGRhdGEuXG4gICAgICB4aHIub3BlbihcIlBPU1RcIiwgdXJsLCB0cnVlKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcbiAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLCBcIkJlYXJlciBcIiArIHRva2VuKTtcblxuICAgICAgaWYgKHBhcmFtcy5jYiAmJiB0eXBlb2YgcGFyYW1zLmNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgeGhyLm9ubG9hZGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHBhcmFtcy5jYih4aHIucmVzcG9uc2UpO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShpbnNlcnREYXRhKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlZnJlc2hUb2tlbihpbnNlcnRXaXRoVG9rZW4pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ1wiOiBsb2dcbiAgfTtcbn0pKFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzKTtcbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZSA9IChmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBCQVNFX0NBQ0hFX1VSTCA9IFwiaHR0cDovL2xvY2FsaG9zdDo5NDk0L1wiO1xuXG4gIHZhciBfcGluZ1JlY2VpdmVkID0gZmFsc2UsXG4gICAgX2lzQ2FjaGVSdW5uaW5nID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gcGluZyhjYWxsYmFjaykge1xuICAgIHZhciByID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICBpZiAoIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgci5vcGVuKFwiR0VUXCIsIEJBU0VfQ0FDSEVfVVJMICsgXCJwaW5nP2NhbGxiYWNrPV9cIiwgdHJ1ZSk7XG4gICAgci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgIC8vIHNhdmUgdGhpcyByZXN1bHQgZm9yIHVzZSBpbiBnZXRGaWxlKClcbiAgICAgICAgICBfcGluZ1JlY2VpdmVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmKHIuc3RhdHVzID09PSAyMDApe1xuICAgICAgICAgICAgX2lzQ2FjaGVSdW5uaW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSwgci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKFwiUmlzZSBDYWNoZSBpcyBub3QgcnVubmluZ1wiKTtcbiAgICAgICAgICAgIF9pc0NhY2hlUnVubmluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmYWxzZSwgbnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKFwiQ2F1Z2h0IGV4Y2VwdGlvbjogXCIsIGUuZGVzY3JpcHRpb24pO1xuICAgICAgfVxuXG4gICAgfTtcbiAgICByLnNlbmQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZpbGUoZmlsZVVybCwgY2FsbGJhY2ssIG5vY2FjaGVidXN0ZXIpIHtcbiAgICBpZiAoIWZpbGVVcmwgfHwgIWNhbGxiYWNrIHx8IHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmlsZVJlcXVlc3QoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgIHZhciB1cmwsIHN0ciwgc2VwYXJhdG9yO1xuXG4gICAgICBpZiAoaXNDYWNoZVJ1bm5pbmcpIHtcbiAgICAgICAgLy8gY29uZmlndXJlIHVybCB3aXRoIGNhY2hlYnVzdGVyIG9yIG5vdFxuICAgICAgICB1cmwgPSAobm9jYWNoZWJ1c3RlcikgPyBCQVNFX0NBQ0hFX1VSTCArIFwiP3VybD1cIiArIGVuY29kZVVSSUNvbXBvbmVudChmaWxlVXJsKSA6XG4gICAgICAgICAgQkFTRV9DQUNIRV9VUkwgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIj91cmw9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZmlsZVVybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9jYWNoZWJ1c3Rlcikge1xuICAgICAgICAgIHVybCA9IGZpbGVVcmw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyID0gZmlsZVVybC5zcGxpdChcIj9cIik7XG4gICAgICAgICAgc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcbiAgICAgICAgICB1cmwgPSBmaWxlVXJsICsgc2VwYXJhdG9yICsgXCJjYj1cIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1ha2VSZXF1ZXN0KFwiSEVBRFwiLCB1cmwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1ZXN0KG1ldGhvZCwgdXJsKSB7XG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgIHJlcXVlc3QgPSB7XG4gICAgICAgICAgeGhyOiB4aHIsXG4gICAgICAgICAgdXJsOiB1cmxcbiAgICAgICAgfTtcblxuICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIHRydWUpO1xuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gU2VydmVyIG1heSBub3Qgc3VwcG9ydCBIRUFEIHJlcXVlc3QuIEZhbGxiYWNrIHRvIGEgR0VUIHJlcXVlc3QuXG4gICAgICAgIGlmIChtZXRob2QgPT09IFwiSEVBRFwiKSB7XG4gICAgICAgICAgbWFrZVJlcXVlc3QoXCJHRVRcIiwgdXJsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBpZiAoX2lzQ2FjaGVSdW5uaW5nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXF1ZXN0LCBuZXcgRXJyb3IoXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBubyBzdGF0dXNcIikpO1xuICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgdG8gYXZvaWQgdGhyb3dpbmcgYW4gZXJyb3Igd2hlbiB0aGVyZSBpcyBhIGNyb3NzIGRvbWFpbiBpc3N1ZVxuICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzIHx8IDA7XG5cbiAgICAgICAgaWYgKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgY2FsbGJhY2socmVxdWVzdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2VydmVyIG1heSBub3Qgc3VwcG9ydCBIRUFEIHJlcXVlc3QuIEZhbGxiYWNrIHRvIGEgR0VUIHJlcXVlc3QuXG4gICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJIRUFEXCIpIHtcbiAgICAgICAgICAgIG1ha2VSZXF1ZXN0KFwiR0VUXCIsIHVybCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2socmVxdWVzdCwgbmV3IEVycm9yKFwiVGhlIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGU6IFwiICsgc3RhdHVzKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9fTtcblxuICAgICAgeGhyLnNlbmQoKTtcbiAgICB9XG5cbiAgICBpZiAoIV9waW5nUmVjZWl2ZWQpIHtcbiAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICAgIHJldHVybiB0aGlzLnBpbmcoZmlsZVJlcXVlc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmlsZVJlcXVlc3QoX2lzQ2FjaGVSdW5uaW5nKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0RmlsZTogZ2V0RmlsZSxcbiAgICBwaW5nOiBwaW5nXG4gIH07XG5cbn0pKCk7XG5cbi8qIGdsb2JhbCBjb25maWc6IHRydWUgKi9cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBjb25maWcgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICBTS0lOOiBcInNraW4vUlZTa2luLnhtbFwiLFxuICAgIFNUT1JBR0VfRU5WOiBcInByb2RcIlxuICB9O1xuXG4gIGlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImxvY2FsZXMvdHJhbnNsYXRpb25fXCIpXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1NVRklYXCIsIFwiLmpzb25cIik7XG4gIH1cbn1cblxuLyogZ2xvYmFsIGdhZGdldHMsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0ge307XG5cblJpc2VWaXNpb24uVmlkZW8gPSAoZnVuY3Rpb24gKGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9hZGRpdGlvbmFsUGFyYW1zLCBfbW9kZTtcblxuICB2YXIgX3ByZWZzID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGwsXG4gICAgX25vblN0b3JhZ2UgPSBudWxsLFxuICAgIF9tZXNzYWdlID0gbnVsbCxcbiAgICBfZnJhbWVDb250cm9sbGVyID0gbnVsbDtcblxuICB2YXIgX3BsYXliYWNrRXJyb3IgPSBmYWxzZSxcbiAgICBfdmlld2VyUGF1c2VkID0gdHJ1ZTtcblxuICB2YXIgX2N1cnJlbnRGcmFtZSA9IDA7XG5cbiAgdmFyIF9jdXJyZW50RmlsZXMgPSBbXTtcblxuICB2YXIgX2Vycm9yID0gbnVsbCxcbiAgICBfZXJyb3JUaW1lciA9IG51bGwsXG4gICAgX2Vycm9yRmxhZyA9IGZhbHNlO1xuXG4gIHZhciBfbG9nZ2VyID0gUmlzZVZpc2lvbi5Db21tb24uTG9nZ2VyO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9kb25lKCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X2RvbmVcIiwgbnVsbCwgX3ByZWZzLmdldFN0cmluZyhcImlkXCIpKTtcblxuICAgIC8vIEFueSBlcnJvcnMgbmVlZCB0byBiZSBsb2dnZWQgYmVmb3JlIHRoZSBkb25lIGV2ZW50LlxuICAgIGlmIChfZXJyb3IgIT09IG51bGwpIHtcbiAgICAgIGxvZ0V2ZW50KF9lcnJvciwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgbG9nRXZlbnQoeyBcImV2ZW50XCI6IFwiZG9uZVwiIH0sIGZhbHNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jbGVhckVycm9yVGltZXIoKSB7XG4gICAgY2xlYXJUaW1lb3V0KF9lcnJvclRpbWVyKTtcbiAgICBfZXJyb3JUaW1lciA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBfc3RhcnRFcnJvclRpbWVyKCkge1xuICAgIF9jbGVhckVycm9yVGltZXIoKTtcblxuICAgIF9lcnJvclRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBub3RpZnkgVmlld2VyIHdpZGdldCBpcyBkb25lXG4gICAgICBfZG9uZSgpO1xuICAgIH0sIDUwMDApO1xuICB9XG5cbiAgZnVuY3Rpb24gX2dldEN1cnJlbnRGaWxlRGF0YSgpIHtcbiAgICB2YXIgZnJhbWVPYmogPSBfZnJhbWVDb250cm9sbGVyLmdldEZyYW1lT2JqZWN0KF9jdXJyZW50RnJhbWUpO1xuXG4gICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICByZXR1cm4gZnJhbWVPYmouZ2V0UGxheWJhY2tEYXRhKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q3VycmVudEZpbGUoKSB7XG4gICAgdmFyIGZpbGVEYXRhID0gbnVsbDtcblxuICAgIGlmIChfY3VycmVudEZpbGVzICYmIF9jdXJyZW50RmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1swXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAgIC8vIHJldHJpZXZlIHRoZSBjdXJyZW50bHkgcGxheWVkIGZpbGUgaW5mbyBmcm9tIHBsYXllclxuICAgICAgICBmaWxlRGF0YSA9IF9nZXRDdXJyZW50RmlsZURhdGEoKTtcblxuICAgICAgICBpZiAoZmlsZURhdGEpIHtcbiAgICAgICAgICByZXR1cm4gX2N1cnJlbnRGaWxlc1tmaWxlRGF0YS5pbmRleF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIEdldCB0aGUgcGFyYW1ldGVycyB0byBwYXNzIHRvIHRoZSBldmVudCBsb2dnZXIuXG4gIGZ1bmN0aW9uIF9nZXRMb2dnZXJQYXJhbXMocGFyYW1zLCBjYikge1xuICAgIHZhciBqc29uID0ge30sXG4gICAgICB1dGlscyA9IFJpc2VWaXNpb24uQ29tbW9uLkxvZ2dlclV0aWxzLFxuICAgICAgdXJsID0gbnVsbDtcblxuICAgIGlmIChwYXJhbXMuZXZlbnQpIHtcbiAgICAgIGpzb24uZXZlbnQgPSBwYXJhbXMuZXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy5ldmVudF9kZXRhaWxzKSB7XG4gICAgICBqc29uLmV2ZW50X2RldGFpbHMgPSBwYXJhbXMuZXZlbnRfZGV0YWlscztcbiAgICB9XG5cbiAgICBpZiAocGFyYW1zLnVybCkge1xuICAgICAgdXJsID0gcGFyYW1zLnVybDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB1cmwgPSBfZ2V0Q3VycmVudEZpbGUoKTtcbiAgICB9XG5cbiAgICBqc29uLmZpbGVfdXJsID0gdXJsO1xuICAgIGpzb24uZmlsZV9mb3JtYXQgPSB1dGlscy5nZXRGaWxlRm9ybWF0KHVybCk7XG5cbiAgICB1dGlscy5nZXRJZHMoZnVuY3Rpb24oY29tcGFueUlkLCBkaXNwbGF5SWQpIHtcbiAgICAgIGpzb24uY29tcGFueV9pZCA9IGNvbXBhbnlJZDtcbiAgICAgIGpzb24uZGlzcGxheV9pZCA9IGRpc3BsYXlJZDtcblxuICAgICAgY2IoanNvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIHNob3dFcnJvcihtZXNzYWdlKSB7XG4gICAgX2Vycm9yRmxhZyA9IHRydWU7XG5cbiAgICBfbWVzc2FnZS5zaG93KG1lc3NhZ2UpO1xuXG4gICAgX2ZyYW1lQ29udHJvbGxlci5yZW1vdmUoX2N1cnJlbnRGcmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gaWYgV2lkZ2V0IGlzIHBsYXlpbmcgcmlnaHQgbm93LCBydW4gdGhlIHRpbWVyXG4gICAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgICAgX3N0YXJ0RXJyb3JUaW1lcigpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9nRXZlbnQocGFyYW1zLCBpc0Vycm9yKSB7XG4gICAgaWYgKGlzRXJyb3IpIHtcbiAgICAgIF9lcnJvciA9IHBhcmFtcztcbiAgICB9XG5cbiAgICBfZ2V0TG9nZ2VyUGFyYW1zKHBhcmFtcywgZnVuY3Rpb24oanNvbikge1xuICAgICAgX2xvZ2dlci5sb2coXCJ2aWRlb19ldmVudHNcIiwganNvbik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkZpbGVJbml0KHVybHMpIHtcbiAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAvLyB1cmxzIHZhbHVlIHdpbGwgYmUgYSBzdHJpbmdcbiAgICAgIF9jdXJyZW50RmlsZXNbMF0gPSB1cmxzO1xuICAgIH0gZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhbiBhcnJheVxuICAgICAgX2N1cnJlbnRGaWxlcyA9IHVybHM7XG4gICAgfVxuXG4gICAgX21lc3NhZ2UuaGlkZSgpO1xuXG4gICAgaWYgKCFfdmlld2VyUGF1c2VkKSB7XG4gICAgICBwbGF5KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25GaWxlUmVmcmVzaCh1cmxzKSB7XG4gICAgaWYgKF9tb2RlID09PSBcImZpbGVcIikge1xuICAgICAgLy8gdXJscyB2YWx1ZSB3aWxsIGJlIGEgc3RyaW5nIG9mIG9uZSB1cmxcbiAgICAgIF9jdXJyZW50RmlsZXNbMF0gPSB1cmxzO1xuICAgIH0gZWxzZSBpZiAoX21vZGUgPT09IFwiZm9sZGVyXCIpIHtcbiAgICAgIC8vIHVybHMgdmFsdWUgd2lsbCBiZSBhbiBhcnJheSBvZiB1cmxzXG4gICAgICBfY3VycmVudEZpbGVzID0gdXJscztcbiAgICB9XG5cbiAgICAvLyBpbiBjYXNlIHJlZnJlc2hlZCBmaWxlIGZpeGVzIGFuIGVycm9yIHdpdGggcHJldmlvdXMgZmlsZSwgZW5zdXJlIGZsYWcgaXMgcmVtb3ZlZCBzbyBwbGF5YmFjayBpcyBhdHRlbXB0ZWQgYWdhaW5cbiAgICBfcGxheWJhY2tFcnJvciA9IGZhbHNlO1xuICAgIF9lcnJvciA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICB2YXIgZnJhbWVPYmogPSBfZnJhbWVDb250cm9sbGVyLmdldEZyYW1lT2JqZWN0KF9jdXJyZW50RnJhbWUpO1xuXG4gICAgX3ZpZXdlclBhdXNlZCA9IHRydWU7XG5cbiAgICBpZiAoX2Vycm9yRmxhZykge1xuICAgICAgX2NsZWFyRXJyb3JUaW1lcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgZnJhbWVPYmoucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIHZhciBmcmFtZU9iaiA9IF9mcmFtZUNvbnRyb2xsZXIuZ2V0RnJhbWVPYmplY3QoX2N1cnJlbnRGcmFtZSk7XG5cbiAgICBfdmlld2VyUGF1c2VkID0gZmFsc2U7XG5cbiAgICBsb2dFdmVudCh7IFwiZXZlbnRcIjogXCJwbGF5XCIgfSwgZmFsc2UpO1xuXG4gICAgaWYgKF9lcnJvckZsYWcpIHtcbiAgICAgIF9zdGFydEVycm9yVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIV9wbGF5YmFja0Vycm9yKSB7XG4gICAgICBpZiAoZnJhbWVPYmopIHtcbiAgICAgICAgZnJhbWVPYmoucGxheSgpO1xuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBpZiAoX2N1cnJlbnRGaWxlcyAmJiBfY3VycmVudEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBpZiAoX21vZGUgPT09IFwiZmlsZVwiKSB7XG4gICAgICAgICAgICAvLyBhZGQgZnJhbWUgYW5kIGNyZWF0ZSB0aGUgcGxheWVyXG4gICAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmFkZCgwKTtcbiAgICAgICAgICAgIF9mcmFtZUNvbnRyb2xsZXIuY3JlYXRlRnJhbWVQbGF5ZXIoMCwgX2FkZGl0aW9uYWxQYXJhbXMsIF9jdXJyZW50RmlsZXNbMF0sIGNvbmZpZy5TS0lOLCBcInBsYXllci1maWxlLmh0bWxcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKF9tb2RlID09PSBcImZvbGRlclwiKSB7XG4gICAgICAgICAgICBfZnJhbWVDb250cm9sbGVyLmFkZCgwKTtcbiAgICAgICAgICAgIF9mcmFtZUNvbnRyb2xsZXIuY3JlYXRlRnJhbWVQbGF5ZXIoMCwgX2FkZGl0aW9uYWxQYXJhbXMsIF9jdXJyZW50RmlsZXMsIGNvbmZpZy5TS0lOLCBcInBsYXllci1mb2xkZXIuaHRtbFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXllckVuZGVkKCkge1xuICAgIF9mcmFtZUNvbnRyb2xsZXIucmVtb3ZlKF9jdXJyZW50RnJhbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9kb25lKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5ZXJSZWFkeSgpIHtcbiAgICB2YXIgZnJhbWVPYmo7XG5cbiAgICAvLyBFbnN1cmVzIG1lc3NhZ2luZyBpcyBoaWRkZW4gZm9yIG5vbi1zdG9yYWdlIHZpZGVvIGZpbGVcbiAgICBfbWVzc2FnZS5oaWRlKCk7XG5cbiAgICBpZiAoIV92aWV3ZXJQYXVzZWQpIHtcbiAgICAgIGZyYW1lT2JqID0gX2ZyYW1lQ29udHJvbGxlci5nZXRGcmFtZU9iamVjdChfY3VycmVudEZyYW1lKTtcblxuICAgICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICAgIGZyYW1lT2JqLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKHBhcmFtcywgbW9kZSkge1xuICAgIHZhciBsb2dQYXJhbXMgPSB7fSxcbiAgICAgIGRldGFpbHMgPSBudWxsLFxuICAgICAgaXNTdG9yYWdlRmlsZTtcblxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0gXy5jbG9uZShwYXJhbXMpO1xuICAgIF9tb2RlID0gbW9kZTtcbiAgICBfcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb0NvbnRhaW5lclwiKS5zdHlsZS5oZWlnaHQgPSBfcHJlZnMuZ2V0SW50KFwicnNIXCIpICsgXCJweFwiO1xuXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMud2lkdGggPSBfcHJlZnMuZ2V0SW50KFwicnNXXCIpO1xuICAgIF9hZGRpdGlvbmFsUGFyYW1zLmhlaWdodCA9IF9wcmVmcy5nZXRJbnQoXCJyc0hcIik7XG5cbiAgICBfbWVzc2FnZSA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5NZXNzYWdlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmlkZW9Db250YWluZXJcIiksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VDb250YWluZXJcIikpO1xuXG4gICAgLy8gc2hvdyB3YWl0IG1lc3NhZ2Ugd2hpbGUgU3RvcmFnZSBpbml0aWFsaXplc1xuICAgIF9tZXNzYWdlLnNob3coXCJQbGVhc2Ugd2FpdCB3aGlsZSB5b3VyIHZpZGVvIGlzIGRvd25sb2FkZWQuXCIpO1xuXG4gICAgX2ZyYW1lQ29udHJvbGxlciA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlby5GcmFtZUNvbnRyb2xsZXIoKTtcblxuICAgIGlmIChfbW9kZSA9PT0gXCJmaWxlXCIpIHtcbiAgICAgIGlzU3RvcmFnZUZpbGUgPSAoT2JqZWN0LmtleXMoX2FkZGl0aW9uYWxQYXJhbXMuc3RvcmFnZSkubGVuZ3RoICE9PSAwKTtcblxuICAgICAgaWYgKCFpc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAgIGRldGFpbHMgPSBcImN1c3RvbVwiO1xuXG4gICAgICAgIF9ub25TdG9yYWdlID0gbmV3IFJpc2VWaXNpb24uVmlkZW8uTm9uU3RvcmFnZShfYWRkaXRpb25hbFBhcmFtcyk7XG4gICAgICAgIF9ub25TdG9yYWdlLmluaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRldGFpbHMgPSBcInN0b3JhZ2VcIjtcblxuICAgICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZmlsZSBpbnN0YW5jZVxuICAgICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGaWxlKF9hZGRpdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChfbW9kZSA9PT0gXCJmb2xkZXJcIikge1xuICAgICAgZGV0YWlscyA9IFwic3RvcmFnZVwiO1xuXG4gICAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIFN0b3JhZ2UgZm9sZGVyIGluc3RhbmNlXG4gICAgICBfc3RvcmFnZSA9IG5ldyBSaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGb2xkZXIoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgICAgX3N0b3JhZ2UuaW5pdCgpO1xuICAgIH1cblxuICAgIGxvZ1BhcmFtcy5ldmVudCA9IFwiY29uZmlndXJhdGlvblwiO1xuICAgIGxvZ1BhcmFtcy5ldmVudF9kZXRhaWxzID0gZGV0YWlscztcbiAgICBsb2dFdmVudChsb2dQYXJhbXMsIGZhbHNlKTtcblxuICAgIF9yZWFkeSgpO1xuICB9XG5cbiAgLy8gQW4gZXJyb3Igb2NjdXJyZWQgd2l0aCBKVyBQbGF5ZXIuXG4gIGZ1bmN0aW9uIHBsYXllckVycm9yKGVycm9yKSB7XG4gICAgdmFyIGRldGFpbHMgPSBudWxsLFxuICAgICAgcGFyYW1zID0ge30sXG4gICAgICB1cmwgPSBcIlwiLFxuICAgICAgbWVzc2FnZSA9IFwiU29ycnksIHRoZXJlIHdhcyBhIHByb2JsZW0gcGxheWluZyB0aGUgdmlkZW8uXCIsXG4gICAgICBNRURJQV9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBtZWRpYTogRmlsZSBjb3VsZCBub3QgYmUgcGxheWVkXCIsXG4gICAgICBZT1VUVUJFX0VSUk9SID0gXCJFcnJvciBsb2FkaW5nIFlvdVR1YmU6IFZpZGVvIGNvdWxkIG5vdCBiZSBwbGF5ZWRcIixcbiAgICAgIFBMQVlFUl9FUlJPUiA9IFwiRXJyb3IgbG9hZGluZyBwbGF5ZXI6IE5vIHBsYXlhYmxlIHNvdXJjZXMgZm91bmRcIixcbiAgICAgIEZPUk1BVF9NRVNTQUdFID0gXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhhdCB2aWRlby4gSXQgY291bGQgYmUgdGhhdCB3ZSBkb24ndCBcIiArXG4gICAgICAgIFwic3VwcG9ydCB0aGF0IGZvcm1hdCBvciBpdCBpcyBub3QgZW5jb2RlZCBjb3JyZWN0bHkuXCI7XG5cbiAgICBfcGxheWJhY2tFcnJvciA9IHRydWU7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci50eXBlICYmIGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGUgKyBcIiAtIFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGVycm9yLnR5cGUpIHtcbiAgICAgICAgZGV0YWlscyA9IGVycm9yLnR5cGU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlcnJvci5tZXNzYWdlKSB7XG4gICAgICAgIGRldGFpbHMgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBpc3N1ZSB3aXRoIHRoZSBmb3JtYXQuXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBpZiAoKGVycm9yLm1lc3NhZ2UgPT09IE1FRElBX0VSUk9SKSB8fCAoZXJyb3IubWVzc2FnZSA9PT0gWU9VVFVCRV9FUlJPUikpIHtcbiAgICAgICAgICBtZXNzYWdlID0gRk9STUFUX01FU1NBR0U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXJyb3IubWVzc2FnZSA9PT0gUExBWUVSX0VSUk9SKSB7XG4gICAgICAgICAgdXJsID0gX2dldEN1cnJlbnRGaWxlKCk7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgWW91dHViZSB2aWRlby5cbiAgICAgICAgICBpZiAodXJsICYmIHVybC5pbmRleE9mKFwid3d3LnlvdXR1YmUuY29tXCIpID4gLTEpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBGT1JNQVRfTUVTU0FHRTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJhbXMuZXZlbnQgPSBcInBsYXllciBlcnJvclwiO1xuICAgIHBhcmFtcy5ldmVudF9kZXRhaWxzID0gZGV0YWlscztcblxuICAgIGxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgc2hvd0Vycm9yKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBwYXVzZSgpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImxvZ0V2ZW50XCI6IGxvZ0V2ZW50LFxuICAgIFwib25GaWxlSW5pdFwiOiBvbkZpbGVJbml0LFxuICAgIFwib25GaWxlUmVmcmVzaFwiOiBvbkZpbGVSZWZyZXNoLFxuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJzaG93RXJyb3JcIjogc2hvd0Vycm9yLFxuICAgIFwicGxheWVyRW5kZWRcIjogcGxheWVyRW5kZWQsXG4gICAgXCJwbGF5ZXJSZWFkeVwiOiBwbGF5ZXJSZWFkeSxcbiAgICBcInBsYXllckVycm9yXCI6IHBsYXllckVycm9yLFxuICAgIFwic3RvcFwiOiBzdG9wXG4gIH07XG5cbn0pKGdhZGdldHMpO1xuXG4vKiBnbG9iYWwgY29uZmlnICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW8gPSBSaXNlVmlzaW9uLlZpZGVvIHx8IHt9O1xuXG5SaXNlVmlzaW9uLlZpZGVvLlN0b3JhZ2VGaWxlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBzdG9yYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2aWRlb1N0b3JhZ2VcIik7XG5cbiAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKGUuZGV0YWlsICYmIGUuZGV0YWlsLnVybCkge1xuXG4gICAgICAgIGlmIChfaW5pdGlhbExvYWQpIHtcbiAgICAgICAgICBfaW5pdGlhbExvYWQgPSBmYWxzZTtcblxuICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlSW5pdChlLmRldGFpbC51cmwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIGNoZWNrIGZvciBcImNoYW5nZWRcIiBwcm9wZXJ0eSBhbmQgZW5zdXJlIGl0IGlzIHRydWVcbiAgICAgICAgICBpZiAoZS5kZXRhaWwuaGFzT3duUHJvcGVydHkoXCJjaGFuZ2VkXCIpICYmIGUuZGV0YWlsLmNoYW5nZWQpIHtcbiAgICAgICAgICAgIFJpc2VWaXNpb24uVmlkZW8ub25GaWxlUmVmcmVzaChlLmRldGFpbC51cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLW5vLWZpbGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZmlsZSBub3QgZm91bmRcIiwgXCJldmVudF9kZXRhaWxzXCI6IGUuZGV0YWlsIH07XG5cbiAgICAgIFJpc2VWaXNpb24uVmlkZW8ubG9nRXZlbnQocGFyYW1zLCB0cnVlKTtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1maWxlLXRocm90dGxlZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmaWxlIHRocm90dGxlZFwiLCBcInVybFwiOiBlLmRldGFpbCB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlRoZSBzZWxlY3RlZCB2aWRlbyBpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtZXJyb3JcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgXCJldmVudFwiOiBcInJpc2Ugc3RvcmFnZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoZSB2aWRlbyBmcm9tIFN0b3JhZ2UuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1jYWNoZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBjYWNoZSBlcnJvclwiLFxuICAgICAgICBcImV2ZW50X2RldGFpbHNcIjogXCJUaGUgcmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZTogXCIgKyBlLmRldGFpbC5lcnJvci5jdXJyZW50VGFyZ2V0LnN0YXR1c1xuICAgICAgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJTb3JyeSwgdGhlcmUgd2FzIGEgcHJvYmxlbSBwbGF5aW5nIHRoZSB2aWRlbyBmcm9tIENhY2hlLlwiKTtcbiAgICB9KTtcblxuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5zdG9yYWdlLmZvbGRlcik7XG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlTmFtZVwiLCBkYXRhLnN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG4gICAgc3RvcmFnZS5nbygpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxuLyogZ2xvYmFsIGNvbmZpZywgXyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5TdG9yYWdlRm9sZGVyID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9pbml0aWFsTG9hZCA9IHRydWU7XG5cbiAgdmFyIF9maWxlcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIF9nZXRVcmxzKCkge1xuICAgIHJldHVybiBfLnBsdWNrKF9maWxlcywgXCJ1cmxcIik7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpIHtcbiAgICByZXR1cm4gXy5maW5kKF9maWxlcywgZnVuY3Rpb24gKGYpIHtcbiAgICAgIHJldHVybiBmaWxlLm5hbWUgPT09IGYubmFtZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9kZWxldGVGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICBfZmlsZXMuc3BsaWNlKF9maWxlcy5pbmRleE9mKGV4aXN0aW5nKSwgMSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX2NoYW5nZUZpbGUoZmlsZSkge1xuICAgIHZhciBleGlzdGluZyA9IF9nZXRFeGlzdGluZ0ZpbGUoZmlsZSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIGV4aXN0aW5nLnVybCA9IGZpbGUudXJsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9hZGRGaWxlKGZpbGUpIHtcbiAgICB2YXIgZXhpc3RpbmcgPSBfZ2V0RXhpc3RpbmdGaWxlKGZpbGUpO1xuXG4gICAgaWYgKCFleGlzdGluZykge1xuICAgICAgLy8gZXh0cmFjdCB0aGUgYWN0dWFsIGZpbGUgbmFtZSBhbmQgc3RvcmUgaW4gbmV3IHByb3BlcnR5IG9uIGZpbGUgb2JqZWN0XG4gICAgICBmaWxlLmZpbGVOYW1lID0gZmlsZS5uYW1lLnNsaWNlKGZpbGUubmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxLCBmaWxlLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAvLyBpbnNlcnQgZmlsZSB0byBfZmlsZXMgbGlzdCBhdCBzcGVjaWZpYyBpbmRleCBiYXNlZCBvbiBhbHBoYWJldGljYWwgb3JkZXIgb2YgZmlsZSBuYW1lXG4gICAgICBfZmlsZXMuc3BsaWNlKF8uc29ydGVkSW5kZXgoX2ZpbGVzLCBmaWxlLCBcImZpbGVOYW1lXCIpLCAwLCBmaWxlKTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIHN0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvU3RvcmFnZVwiKTtcblxuICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZmlsZSA9IGUuZGV0YWlsO1xuXG4gICAgICAvLyBBZGRlZFxuICAgICAgaWYoZmlsZS5hZGRlZCkge1xuICAgICAgICBfYWRkRmlsZShmaWxlKTtcblxuICAgICAgICBpZiAoX2luaXRpYWxMb2FkKSB7XG4gICAgICAgICAgX2luaXRpYWxMb2FkID0gZmFsc2U7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KF9nZXRVcmxzKCkpO1xuXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoYW5nZWRcbiAgICAgIGlmKGZpbGUuY2hhbmdlZCkge1xuICAgICAgICBfY2hhbmdlRmlsZShmaWxlKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVsZXRlZFxuICAgICAgaWYoZmlsZS5kZWxldGVkKSB7XG4gICAgICAgIF9kZWxldGVGaWxlKGZpbGUpO1xuICAgICAgfVxuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLm9uRmlsZVJlZnJlc2goX2dldFVybHMoKSk7XG5cbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lbXB0eS1mb2xkZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHsgXCJldmVudFwiOiBcInN0b3JhZ2UgZm9sZGVyIGVtcHR5XCIgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGNvbnRhaW4gYW55IHZpZGVvcy5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2Utbm8tZm9sZGVyXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgcGFyYW1zID0geyBcImV2ZW50XCI6IFwic3RvcmFnZSBmb2xkZXIgZG9lc24ndCBleGlzdFwiLCBcImV2ZW50X2RldGFpbHNcIjogZS5kZXRhaWwgfTtcblxuICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudChwYXJhbXMsIHRydWUpO1xuICAgICAgUmlzZVZpc2lvbi5WaWRlby5zaG93RXJyb3IoXCJUaGUgc2VsZWN0ZWQgZm9sZGVyIGRvZXMgbm90IGV4aXN0LlwiKTtcbiAgICB9KTtcblxuICAgIHN0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1lcnJvclwiLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBcImV2ZW50XCI6IFwicmlzZSBzdG9yYWdlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvIGZyb20gU3RvcmFnZS5cIik7XG4gICAgfSk7XG5cbiAgICBzdG9yYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJyaXNlLWNhY2hlLWVycm9yXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgIFwiZXZlbnRcIjogXCJyaXNlIGNhY2hlIGVycm9yXCIsXG4gICAgICAgIFwiZXZlbnRfZGV0YWlsc1wiOiBcIlRoZSByZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlOiBcIiArIGUuZGV0YWlsLmVycm9yLmN1cnJlbnRUYXJnZXQuc3RhdHVzXG4gICAgICB9O1xuXG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLmxvZ0V2ZW50KHBhcmFtcywgdHJ1ZSk7XG4gICAgICBSaXNlVmlzaW9uLlZpZGVvLnNob3dFcnJvcihcIlNvcnJ5LCB0aGVyZSB3YXMgYSBwcm9ibGVtIHBsYXlpbmcgdGhlIHZpZGVvIGZyb20gQ2FjaGUuXCIpO1xuICAgIH0pO1xuXG4gICAgc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmaWxlVHlwZVwiLCBcInZpZGVvXCIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuc3RvcmFnZS5jb21wYW55SWQpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuc3RvcmFnZS5mb2xkZXIpO1xuICAgIHN0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZW52XCIsIGNvbmZpZy5TVE9SQUdFX0VOVik7XG5cbiAgICBzdG9yYWdlLmdvKCk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvID0gUmlzZVZpc2lvbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5WaWRlby5Ob25TdG9yYWdlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHJpc2VDYWNoZSA9IFJpc2VWaXNpb24uQ29tbW9uLlJpc2VDYWNoZTtcblxuICB2YXIgX3JlZnJlc2hEdXJhdGlvbiA9IDkwMDAwMCwgIC8vIDE1IG1pbnV0ZXNcbiAgICBfcmVmcmVzaEludGVydmFsSWQgPSBudWxsO1xuXG4gIHZhciBfaXNMb2FkaW5nID0gdHJ1ZTtcblxuICB2YXIgX3VybCA9IFwiXCI7XG5cbiAgZnVuY3Rpb24gX2dldEZpbGUob21pdENhY2hlQnVzdGVyKSB7XG4gICAgcmlzZUNhY2hlLmdldEZpbGUoX3VybCwgZnVuY3Rpb24gKHJlc3BvbnNlLCBlcnJvcikge1xuICAgICAgaWYgKCFlcnJvcikge1xuXG4gICAgICAgIGlmIChfaXNMb2FkaW5nKSB7XG4gICAgICAgICAgX2lzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVJbml0KHJlc3BvbnNlLnVybCk7XG5cbiAgICAgICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBpbnRlcnZhbFxuICAgICAgICAgIF9zdGFydFJlZnJlc2hJbnRlcnZhbCgpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5vbkZpbGVSZWZyZXNoKHJlc3BvbnNlLnVybCk7XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gZXJyb3Igb2NjdXJyZWRcbiAgICAgICAgUmlzZVZpc2lvbi5WaWRlby5sb2dFdmVudCh7XG4gICAgICAgICAgXCJldmVudFwiOiBcIm5vbi1zdG9yYWdlIGVycm9yXCIsXG4gICAgICAgICAgXCJldmVudF9kZXRhaWxzXCI6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgXCJ1cmxcIjogcmVzcG9uc2UudXJsXG4gICAgICAgIH0sIHRydWUpO1xuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2hvd0Vycm9yKFwiVGhlIHNlbGVjdGVkIHZpZGVvIGRvZXMgbm90IGV4aXN0IG9yIGhhcyBiZWVuIG1vdmVkIHRvIFRyYXNoLlwiKTtcbiAgICAgIH1cbiAgICB9LCBvbWl0Q2FjaGVCdXN0ZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gX3N0YXJ0UmVmcmVzaEludGVydmFsKCkge1xuICAgIGlmIChfcmVmcmVzaEludGVydmFsSWQgPT09IG51bGwpIHtcbiAgICAgIF9yZWZyZXNoSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2dldEZpbGUoZmFsc2UpO1xuICAgICAgfSwgX3JlZnJlc2hEdXJhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIC8vIEhhbmRsZSBwcmUtbWVyZ2UgdXNlIG9mIFwidXJsXCIgc2V0dGluZyBwcm9wZXJ0eVxuICAgIF91cmwgPSAoZGF0YS51cmwgJiYgZGF0YS51cmwgIT09IFwiXCIpID8gZGF0YS51cmwgOiBkYXRhLnNlbGVjdG9yLnVybDtcblxuICAgIF9nZXRGaWxlKHRydWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcImluaXRcIjogaW5pdFxuICB9O1xufTtcblxudmFyIFJpc2VWaXNpb24gPSBSaXNlVmlzaW9uIHx8IHt9O1xuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uVmlkZW8gPSBSaXNlVmlzaW9uLkNvbW1vbi5WaWRlbyB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uVmlkZW8uRnJhbWVDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgUFJFRklYID0gXCJpZl9cIjtcblxuICBmdW5jdGlvbiBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCkge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChQUkVGSVggKyBpbmRleCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGcmFtZU9iamVjdChpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGlmcmFtZTtcblxuICAgIGlmcmFtZSA9IGZyYW1lQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG5cbiAgICBpZiAoaWZyYW1lKSB7XG4gICAgICByZXR1cm4gKGlmcmFtZS5jb250ZW50V2luZG93KSA/IGlmcmFtZS5jb250ZW50V2luZG93IDpcbiAgICAgICAgKGlmcmFtZS5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnQpID8gaWZyYW1lLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudCA6IGlmcmFtZS5jb250ZW50RG9jdW1lbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBfY2xlYXIoaW5kZXgpIHtcbiAgICB2YXIgZnJhbWVDb250YWluZXIgPSBnZXRGcmFtZUNvbnRhaW5lcihpbmRleCksXG4gICAgICBmcmFtZU9iaiA9IGdldEZyYW1lT2JqZWN0KGluZGV4KSxcbiAgICAgIGlmcmFtZTtcblxuICAgIGlmIChmcmFtZU9iaikge1xuICAgICAgaWZyYW1lID0gZnJhbWVDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcbiAgICAgIGZyYW1lT2JqLnJlbW92ZSgpO1xuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBcImFib3V0OmJsYW5rXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZChpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwiYWxsb3dUcmFuc3BhcmVuY3lcIiwgdHJ1ZSk7XG4gICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImZyYW1lYm9yZGVyXCIsIFwiMFwiKTtcbiAgICBpZnJhbWUuc2V0QXR0cmlidXRlKFwic2Nyb2xsaW5nXCIsIFwibm9cIik7XG5cbiAgICBmcmFtZUNvbnRhaW5lci5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlRnJhbWVQbGF5ZXIoaW5kZXgsIHBhcmFtcywgZmlsZXMsIHNraW4sIHNyYykge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KSxcbiAgICAgIGZyYW1lT2JqID0gZ2V0RnJhbWVPYmplY3QoaW5kZXgpLFxuICAgICAgaWZyYW1lO1xuXG4gICAgaWYgKGZyYW1lT2JqKSB7XG4gICAgICBpZnJhbWUgPSBmcmFtZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuXG4gICAgICBpZnJhbWUub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZnJhbWUub25sb2FkID0gbnVsbDtcblxuICAgICAgICAvLyBpbml0aWFsaXplIGFuZCBsb2FkIHRoZSBwbGF5ZXIgaW5zaWRlIHRoZSBpZnJhbWVcbiAgICAgICAgZnJhbWVPYmouaW5pdChwYXJhbXMsIGZpbGVzLCBza2luKTtcbiAgICAgICAgZnJhbWVPYmoubG9hZCgpO1xuICAgICAgfTtcblxuICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcInNyY1wiLCBzcmMpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gaGlkZShpbmRleCkge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGdldEZyYW1lQ29udGFpbmVyKGluZGV4KTtcblxuICAgIGZyYW1lQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlKGluZGV4LCBjYWxsYmFjaykge1xuICAgIHZhciBmcmFtZUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFBSRUZJWCArIGluZGV4KTtcblxuICAgIF9jbGVhcihpbmRleCk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIHJlbW92ZSB0aGUgaWZyYW1lIGJ5IGNsZWFyaW5nIGFsbCBlbGVtZW50cyBpbnNpZGUgZGl2IGNvbnRhaW5lclxuICAgICAgd2hpbGUgKGZyYW1lQ29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgZnJhbWVDb250YWluZXIucmVtb3ZlQ2hpbGQoZnJhbWVDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sIDIwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaG93KGluZGV4KSB7XG4gICAgdmFyIGZyYW1lQ29udGFpbmVyID0gZ2V0RnJhbWVDb250YWluZXIoaW5kZXgpO1xuXG4gICAgZnJhbWVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGFkZCxcbiAgICBjcmVhdGVGcmFtZVBsYXllcjogY3JlYXRlRnJhbWVQbGF5ZXIsXG4gICAgZ2V0RnJhbWVDb250YWluZXI6IGdldEZyYW1lQ29udGFpbmVyLFxuICAgIGdldEZyYW1lT2JqZWN0OiBnZXRGcmFtZU9iamVjdCxcbiAgICBoaWRlOiBoaWRlLFxuICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgIHNob3c6IHNob3dcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLk1lc3NhZ2UgPSBmdW5jdGlvbiAobWFpbkNvbnRhaW5lciwgbWVzc2FnZUNvbnRhaW5lcikge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgX2FjdGl2ZSA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgIHRyeSB7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IG1haW5Db250YWluZXIuc3R5bGUuaGVpZ2h0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkNhbid0IGluaXRpYWxpemUgTWVzc2FnZSAtIFwiLCBlLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gaGlkZSgpIHtcbiAgICBpZiAoX2FjdGl2ZSkge1xuICAgICAgLy8gY2xlYXIgY29udGVudCBvZiBtZXNzYWdlIGNvbnRhaW5lclxuICAgICAgd2hpbGUgKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCkge1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnJlbW92ZUNoaWxkKG1lc3NhZ2VDb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIGhpZGUgbWVzc2FnZSBjb250YWluZXJcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAvLyBzaG93IG1haW4gY29udGFpbmVyXG4gICAgICBtYWluQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcblxuICAgICAgX2FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3cobWVzc2FnZSkge1xuICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbiAgICAgIHA7XG5cbiAgICBpZiAoIV9hY3RpdmUpIHtcbiAgICAgIC8vIGhpZGUgbWFpbiBjb250YWluZXJcbiAgICAgIG1haW5Db250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgIG1lc3NhZ2VDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcblxuICAgICAgLy8gY3JlYXRlIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgcC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuICAgICAgcC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcIm1lc3NhZ2VcIik7XG5cbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHApO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAgIF9hY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBtZXNzYWdlIGFscmVhZHkgYmVpbmcgc2hvd24sIHVwZGF0ZSBtZXNzYWdlIHRleHRcbiAgICAgIHAgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIubWVzc2FnZVwiKTtcbiAgICAgIHAuaW5uZXJIVE1MID0gbWVzc2FnZTtcbiAgICB9XG4gIH1cblxuICBfaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgXCJoaWRlXCI6IGhpZGUsXG4gICAgXCJzaG93XCI6IHNob3dcbiAgfTtcbn07XG5cbi8qIGdsb2JhbCBnYWRnZXRzLCBSaXNlVmlzaW9uICovXG5cbihmdW5jdGlvbiAod2luZG93LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCksXG4gICAgaWQgPSBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKTtcblxuICAvLyBEaXNhYmxlIGNvbnRleHQgbWVudSAocmlnaHQgY2xpY2sgbWVudSlcbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZShuYW1lcywgdmFsdWVzKSB7XG4gICAgdmFyIGFkZGl0aW9uYWxQYXJhbXMsIG1vZGU7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJhZGRpdGlvbmFsUGFyYW1zXCIpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykgJiYgdmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzBdKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoYWRkaXRpb25hbFBhcmFtcy5zdG9yYWdlKS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAvLyBzdG9yYWdlIGZpbGUgb3IgZm9sZGVyIHNlbGVjdGVkXG4gICAgICAgICAgaWYgKCFhZGRpdGlvbmFsUGFyYW1zLnN0b3JhZ2UuZmlsZU5hbWUpIHtcbiAgICAgICAgICAgIC8vIGZvbGRlciB3YXMgc2VsZWN0ZWRcbiAgICAgICAgICAgIG1vZGUgPSBcImZvbGRlclwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbW9kZSA9IFwiZmlsZVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub24tc3RvcmFnZSBmaWxlIHdhcyBzZWxlY3RlZFxuICAgICAgICAgIG1vZGUgPSBcImZpbGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW8uc2V0QWRkaXRpb25hbFBhcmFtcyhhZGRpdGlvbmFsUGFyYW1zLCBtb2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuICAgIFJpc2VWaXNpb24uVmlkZW8ucGxheSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgUmlzZVZpc2lvbi5WaWRlby5wYXVzZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBSaXNlVmlzaW9uLlZpZGVvLnN0b3AoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBvbHltZXJSZWFkeSgpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG4gICAgaWYgKGlkICYmIGlkICE9PSBcIlwiKSB7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfc3RvcF9cIiArIGlkLCBzdG9wKTtcblxuICAgICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc3BhcmFtX3NldF9cIiArIGlkLCBjb25maWd1cmUpO1xuICAgICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgICB9XG4gIH1cblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIldlYkNvbXBvbmVudHNSZWFkeVwiLCBwb2x5bWVyUmVhZHkpO1xuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS0yJ10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
